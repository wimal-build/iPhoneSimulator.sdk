// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r){var a=Scanner.fromMessage(e);a.setLocale(t);var n,o,c,i,p,s,m,u,l,h,g,d,v,C,f,S,y,R,b,j;if(r.confirmSubject.test(e.subject)){c=a.getSpan().innerCapture(r.reservationId,1),n=a.getSpan().innerCapture(r.guestName,1),h=a.getSpan().innerCapture(r.car,1);var P=a.getSpan().innerCapture(r.price,1);u=P.innerCapture(/([\d,.]+)/,1),l=P.innerCapture(/([^\d,.]+)/,1).trim()}else r.cancellationSubject.test(e.subject)&&(n=a.getSpan().innerCapture(r.cancelGuestName,1).trim(),c=a.getSpan().innerCapture(r.cancelReservationId,1).trim(),i="Cancelled");if(ASSERT(n,c)){var k={"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:u,priceCurrency:l,reservationId:c,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),checkinUrl:p,modifyReservationUrl:s,cancelReservationUrl:m,underName:{"@type":"http://schema.org/Person",name:n,email:o},provider:{"@type":"http://schema.org/Organization",name:"Europcar"},pickupTime:j,pickupLocation:{"@type":"http://schema.org/Place",name:y,telephone:b,address:R},dropoffTime:S,dropoffLocation:{"@type":"http://schema.org/Place",name:v,telephone:f,address:C}};return h&&(k.reservationFor={"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:h},license:g,color:d}),[k]}}}).call();
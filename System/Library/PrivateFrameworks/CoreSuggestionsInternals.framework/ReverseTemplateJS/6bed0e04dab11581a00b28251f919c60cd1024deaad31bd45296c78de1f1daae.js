// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("ctrip.com-flight-zh",function(e){return/\u673a\u7968\u786e\u8ba4\u5355/.test(e.subject)},function(e){if(/\u673a\u7968\u786e\u8ba4\u5355/.test(e.subject)){var r=Scanner.fromMessage(e);r.setLocale("zh_Hans_CN");var t,a,i,n,p,l,s,o,m,u,g,c,h,d,T,b=[],v={};t=r.getSpan().innerCapture(/\u8ba2\u5355\u53f7\uff1a (\d+)/,1),s=r.getSpan().nextText("\u7968\u6b3e\u603b\u8ba1:").nextTag("td1").tagContents().innerCapture(/($<priceCurrency>[A-Z]{3}) ($<totalPrice>[\d,.]+)$/),m=s?s.$priceCurrency:null,o=s?s.$totalPrice:null,i=r.getSpan().nextText("\u4e58\u673a\u4eba\u59d3\u540d").parentTag("table1").allInnerTags("tr1").map(function(e){return e.allInnerTagsFiltered("td1")});for(var f=1;i.length>f;f++)v[""+i[f][0]]={name:i[f][0],ticketNumber:i[f][1],totalPrice:o,priceCurrency:m,seats:{},seatingType:{}};p=r.getSpan().nextText("\u822a\u7a0b").nextText("\u822a\u73ed\u53f7").nextText("\u51fa\u53d1\u57ce\u5e02").parentTag("table1").allInnerTags("tr1").map(function(e){return e.allInnerTagsFiltered("td1")});for(var f=1;p.length>f;f++)n=p[f],u=n[1].innerCapture(/($<airlineCode>\D+)($<flightNumber>\d+)/),g=u?u.$airlineCode:null,l=u?u.$flightNumber:null,h=n[2],T=n[3],c=n[4].innerDate(),d=n[5].innerDate(),ASSERT(g,l,h,c,T,d)&&b.push({airlineCode:g,flightNumber:l,departureAirport:h,departureTime:c,arrivalAirport:T,arrivalTime:d,passengers:v});for(var C,N=[],f=0;b.length>f;f++)for(var y=b[f],x=Object.keys(y.passengers),S=0;x.length>S;S++){var A=y.passengers[x[S]];C={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:y.airlineCode,flightNumber:y.flightNumber,departureAirportFuzzy:y.departureAirport,departureAirportCode:y.departureCode,departureTime:y.departureTime,arrivalAirportFuzzy:y.arrivalAirport,arrivalAirportCode:y.arrivalCode,arrivalTime:y.arrivalTime},underName:{"@type":"http://schema.org/Person",name:A.name},checkinUrl:a,reservationId:t,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:A.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:A.seats[y.flightNumber],seatingType:A.seatingType[y.flightNumber]}},totalPrice:A.totalPrice,priceCurrency:A.priceCurrency,reservationStatus:"http://schema.org/ReservationConfirmed"},valid(A.membershipNumber,A.programName)&&(C.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:A.membershipNumber,programName:A.programName}),N.push(C)}if(N.length)return N}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/577/588/590","SG4974c250")]);
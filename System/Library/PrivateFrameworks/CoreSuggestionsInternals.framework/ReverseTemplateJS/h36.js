// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r){function a(e){return e=e.replace(/[^\d\sa-zA-z:\u6642\u5206]+/g," ").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/"),e=getFuzzyDate(n.getDetachedSpan(e))}var n=Scanner.fromMessage(e);n.setLocale(t);var p,o,i,c,s,m,h,u,l,g,d,C,f,v,S,y,R,T,P,U;p=n.getSpan().innerCapture(r.guestName,1),i=n.getSpan().innerCapture(r.reservationId,1),g=n.getSpan().innerCapture(r.car,1),U=""+n.getSpan().innerCapture(r.dates,1),U=a(U),y=""+n.getSpan().innerCapture(r.dates,2),y=a(y);var k=n.getSpan().innerCapture(r.pickup,1);T=""+k.innerCapture(/(.+)\\uff08/,1),P=""+k.innerCapture(/TEL\uff1a(.+)/,1);var z=n.getSpan().innerCapture(r.dropoff,1);v=""+z.innerCapture(/(.+)\\uff08/,1),S=""+z.innerCapture(/TEL\uff1a(.+)/,1);var E=n.getSpan().nextRegExp(r.price).tagContents().innerCapture(r.price,1);if(u=E.innerCapture(/([\d,.]+)/,1),l=E.innerCapture(/([^\d,.]+)\\uff08/,1).trim(),r.confirmSubject.test(e.subject)&&!ASSERT(p,i,U,y,T))return CONTINUE;if(r.cancellationSubject.test(e.subject)){if(!ASSERT(p,i,U,y,T))return CONTINUE;c="Cancelled"}return 0===(""+g).length||null===g?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:u,priceCurrency:l,reservationId:i,reservationStatus:"http://schema.org/Reservation"+(c||"Confirmed"),checkinUrl:s,modifyReservationUrl:m,cancelReservationUrl:h,underName:{"@type":"http://schema.org/Person",name:p,email:o},provider:{"@type":"http://schema.org/Organization",name:"Orix"},pickupTime:U,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:P,address:T},dropoffTime:y,dropoffLocation:{"@type":"http://schema.org/Place",name:f,telephone:S,address:v}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:u,priceCurrency:l,reservationId:i,reservationStatus:"http://schema.org/Reservation"+(c||"Confirmed"),checkinUrl:s,modifyReservationUrl:m,cancelReservationUrl:h,underName:{"@type":"http://schema.org/Person",name:p,email:o},provider:{"@type":"http://schema.org/Organization",name:"Orix"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:g},license:d,color:C},pickupTime:U,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:P,address:T},dropoffTime:y,dropoffLocation:{"@type":"http://schema.org/Place",name:f,telephone:S,address:v}}]}}).call();
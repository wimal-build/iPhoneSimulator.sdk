// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("opentable.com-cancellation-en",function(e){return/Cancell?ation$/.test(e.subject)},function(e){if(/Cancell?ation$/.test(e.subject)){var t=loadHelper("opentable.com-microdata-parser.js"),n=t(e);if(n)return n;var a=Scanner.fromMessage(e);a.setLocale("en_US");var r,o,s,i,l,p,c,u,m,d,g;if(r=a.getSpan().innerCapture(/^Dear (.*),/,1),o=a.getSpan().innerCapture(/\boriginal reservation: (\d+)/,1),a.getSpan().innerCapture(/\b has cancell?ed your reservation/)?(s=a.getSpan().innerCapture(concatRegExp(/^Dear ($<underName>.*)\,/,/\s*\n($<name>.*) has cancell?ed your reservation for ($<partySize>\d+) ($<startTime>on .*)\./,/\s*\n.*please contact ($=name) at ($<phone>.*?)\./)),l=s?s.$partySize:null,i=s?s.$name:null,c=s?s.$startTime:null,u=s?s.$phone.innerPhoneNumber():null):a.getSpan().innerCapture(/\bYou've successfully cancell?ed your reservation/)&&(s=a.getSpan().innerCapture(/\bYou've successfully cancell?ed your reservation for a party of ($<partySize>\d+) at ($<name>.*) ($<startTime>on .*)\./),l=s?s.$partySize:null,i=s?s.$name:null,c=s?s.$startTime:null),ASSERT(l,i,c,r))return[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:l,reservationId:o,reservationStatus:"http://schema.org/ReservationCancelled",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:i,url:p,telephone:u,address:m},startTime:c,bookingAgent:{"@type":"http://schema.org/Organization",name:"OpenTable",url:"http://www.opentable.com/"},underName:{"@type":"http://schema.org/Person",name:r},cancelReservationUrl:g,modifyReservationUrl:d}]}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/674/720/725","SG90a7c84d"),new ReverseTemplate("opentable.com-cancellation-es",function(e){return/^Cancelaci\xf3n/.test(e.subject)},function(e){if(!/^Cancelaci\xf3n/.test(e.subject))return CONTINUE;var t={};t.hello="Estimado(a)",t.number="N\xfamero de confirmaci\xf3n",t.person="Grupo de",t.cancel="cancelada:";var n="es_MX",a="opentable.com.mx",r=loadHelper("opentable.com-cancellation-skeleton.js");return r(e,n,t,a)},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/674/720/726","SG457b9439"),new ReverseTemplate("opentable.com-confirmation-en",function(e){return/^Your Reservation Confirmation for/.test(e.subject)},function(e){if(/^Your Reservation Confirmation for/.test(e.subject)){var t=loadHelper("opentable.com-microdata-parser.js"),n=t(e);if(n)return n;if(int(e.epoch)<1325376e3)return CONTINUE;var a=Scanner.fromMessage(e);a.setLocale("en_US");var r,o,s,i,l,p,c,u,m,d,g;if(s=a.getSpan().innerCapture(/Your (?:table|reservation) for ($<partySize>\d+) at ($<name>.*)\s+(?:will be ready on|is confirmed for)\s+($<startTime>.*)\. The reservation is held under: ($<underName>.*)\./),r=a.getSpan().innerCapture(/^Dear (.*),/,1),r=s?s.$underName||r:null,(r===a.getNullSpan()||null===r)&&(r=a.getSpan().nextTag("table6").nextTag("table6").nextTag("td6").tagContents()),l=s?s.$partySize:null,null===l&&(l=a.getSpan().nextText("Party of").parentTag("td6").innerCapture(/Party\sof\s(\d+)\s/,1)),o=a.getSpan().innerCapture(/\bYour confirmation number: (\d+)/,1),o===a.getNullSpan()&&(o=a.getSpan().nextText("Have questions?").parentTag("td4").innerCapture(/\bYou can reference reservation number (\d+)/,1)),m=a.getSpan().nextText("To get there:").collapseToEnd().withEnd(a.getSpan().nextText("Cross Street:").getStart()).trim(),m=not(m.innerAddress())?m.innerCapture(/^.*\r?\n(.*)$/,1):m.innerAddress(),m===a.getNullSpan()&&(m=a.getSpan().nextTag("table8").nextTag("td8").tagContents().innerCapture(/^(.*)\sCross\sStreet/,1),m.innerAddress()!==a.getNullSpan()&&(m=m.innerAddress())),u=a.getSpan().nextText("Questions about your reservation? You can always contact").nextPhoneNumber(),u===a.getNullSpan()&&(u=a.getSpan().nextTag("table8").nextTag("td8").innerPhoneNumber()),i=s?s.$name:null,null===i&&(i=a.getSpan().nextTag("table3").nextTag("td3").nextTag("td3").tagContents()),c=s?a.getDetachedSpan(""+s.$startTime):null,null===c&&(c=a.getSpan().nextText("Party of").parentTag("td6").innerDate()),d=a.getSpan().nextText("Update your reservation date").nextLink(),d===a.getNullSpan()&&(d=a.getSpan().nextText("View or modify reservation").parentTag("td6").innerLink()),g=a.getSpan().nextText("Cancel your reservation").nextLink(),g===a.getNullSpan()&&(g=a.getSpan().nextText("Cancel reservation").parentTag("td6").innerLink()),ASSERT(l,i,c,r))return[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:l,reservationId:o,reservationStatus:"http://schema.org/ReservationConfirmed",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:i,url:p,telephone:u,address:m},startTime:c,bookingAgent:{"@type":"http://schema.org/Organization",name:"OpenTable",url:"http://www.opentable.com/"},underName:{"@type":"http://schema.org/Person",name:r},cancelReservationUrl:g,modifyReservationUrl:d}]}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/674/720/727","SG76b9fe70"),new ReverseTemplate("opentable.com-confirmation-es",function(e){return/^Confirmaci\xf3n/.test(e.subject)},function(e){if(!/^Confirmaci\xf3n/.test(e.subject))return CONTINUE;var t={};t.number="N\xfamero de confirmaci\xf3n",t.address="DIRECCI\xd3N",t.description="DESCRIPCI\xd3N DEL RESTAURANT",t.reservation="reservaci\xf3n en",t.person="Grupo de",t.modify="CAMBIAR SU RESERVACI\xd3N",t.cancel="CANCELAR SU RESERVACI\xd3N",t.infos=/DETALLES DE LA RESERVACI\xd3N/,t.hello="";var n="es_MX",a="opentable.com.mx",r=loadHelper("opentable.com-confirmation-skeleton.js");return r(e,n,t,a)},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/674/720/728","SG0e6accee"),new ReverseTemplate("opentable.com-reservation-change-en",function(e){return/Change$/.test(e.subject)},function(e){if(/Change$/.test(e.subject)){var t=loadHelper("opentable.com-microdata-parser.js"),n=t(e);if(n)return n;var a=Scanner.fromMessage(e);a.setLocale("en_US");var r,o,s,i,l,p,c,u,m,d,g,S;if(r=a.getSpan().innerCapture(/^Dear (.*),/,1),o=a.getSpan().innerCapture(/\bConfirmation Number: (\d+)/,1),d=a.getSpan().nextText("To get there:").collapseToEnd().withEnd(a.getSpan().nextText("Cross Street:").getStart()).trim(),d=not(d.innerAddress())?d.innerCapture(/^.*\r?\n(.*)$/,1):d.innerAddress(),m=a.getSpan().nextText("Questions about your reservation? You can always contact").nextPhoneNumber(),s=a.getSpan().innerCapture(/\. ($<name>.*) will be ready for your party of ($<partySize>\d+) ($<startTime>at .*)\./),i=s?s.$name:null,l=s?s.$partySize:null,u=s?s.$startTime:null,g=a.getSpan().nextText("To make another change:").nextLink(),S=a.getSpan().nextText("To cancel:").nextLink(),ASSERT(l,i,u,r))return[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:l,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(c||"Confirmed"),reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:i,url:p,telephone:m,address:d},startTime:u,bookingAgent:{"@type":"http://schema.org/Organization",name:"OpenTable",url:"http://www.opentable.com/"},underName:{"@type":"http://schema.org/Person",name:r},cancelReservationUrl:S,modifyReservationUrl:g}]}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/674/720/730","SG314bcf29"),new ReverseTemplate("opentable.com-reservation-change-es",function(e){return/^Cambio/.test(e.subject)},function(e){if(!/^Cambio/.test(e.subject))return CONTINUE;var t={};t.person="Grupo de",t.reservation="reservaci\xf3n en",t.number="N\xfamero de confirmaci\xf3n",t.address="DIRECCI\xd3N",t.description="DESCRIPCI\xd3N DEL RESTAURANTE",t.modify="CAMBIAR SU RESERVACI\xd3N",t.cancel="CANCELAR SU RESERVACI\xd3N",t.infos="DETALLES DE LA RESERVACI\xd3N",t.hello="";var n="es_MX",a="opentable.com.mx",r=loadHelper("opentable.com-reservation-change-skeleton.js");return r(e,n,t,a)},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/674/720/731","SGd3b6a3ba"),new ReverseTemplate("opentable.com-upcoming-reservation-en",function(e){return/^Your Upcoming Reservation at/.test(e.subject)},function(e){if(/^Your Upcoming Reservation at/.test(e.subject)){var t=Scanner.fromMessage(e);t.setLocale("en_US");var n,a,r,o,s,i,l,p,c,u,m,d;if(n=t.getSpan().innerCapture(/^Dear (.*),/,1),a=t.getSpan().innerCapture(/\bConfirmation Number: (\d+)/,1),u=t.getSpan().nextText("To get there:").collapseToEnd().withEnd(t.getSpan().nextText("Cross Street:").getStart()).trim(),u=not(u.innerAddress())?u.innerCapture(/^.*\r?\n(.*)$/,1):u.innerAddress(),c=t.getSpan().nextText("Questions about your reservation? You can always contact").nextPhoneNumber(),r=t.getSpan().innerCapture(/\s+($<name>.*) will be ready for your\s+party of ($<partySize>\d+) ($<startTime>at .*)\./),s=r?r.$partySize:null,o=r?r.$name:null,p=r?t.getDetachedSpan(""+r.$startTime):null,n=r?r.$underName||n:null,m=t.getSpan().nextText("Update your reservation date").nextLink(),d=t.getSpan().nextText("Cancel your reservation").nextLink(),ASSERT(s,o,p,n))return[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:s,reservationId:a,reservationStatus:"http://schema.org/Reservation"+(l||"Confirmed"),reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:o,url:i,telephone:c,address:u},startTime:p,bookingAgent:{"@type":"http://schema.org/Organization",name:"OpenTable",url:"http://www.opentable.com/"},underName:{"@type":"http://schema.org/Person",name:n},cancelReservationUrl:d,modifyReservationUrl:m}]}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/674/720/734","SG700fd22b")]);
// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var a=Scanner.fromMessage(e);a.setLocale(t);var r,o,i,p,s,g,m,c,x,l;return r=a.getSpan().nextText(n.for).collapseToEnd().withEnd(a.getSpan().nextText(n.person).getStart()).trim(),l=a.getSpan().innerCapture(regExpFormatted(/bookingConfirmationCode=(.*)&email/),1).trim(),o=a.getDetachedSpan(e.subject).innerCapture(regExpFormatted(/\1 (.*)/,n.reservation),1).trim(),x=a.getSpan().nextTag("table2").lastInnerTag("tr2").previousTag("tr2").lastInnerTag("td2").innerLink(),s=a.getSpan().nextText(n.reference).nextPhoneNumber(),g=a.getDetachedSpan((""+a.getSpan().nextText(n.address).nextTag("td2").nextTag("td2").tagContents()).replace(","," ")),""+g==""&&(g=a.getDetachedSpan((""+a.getSpan().withInterval(s.previousText(""+o).nextText("\n").getEnd(),s.previousText("\n").getStart())).replace(","," "))),i=a.getSpan().nextText(n.restaurant).nextDate(),p=a.getSpan().innerCapture(/(.*?),/,1).trim(),m=a.getSpan().nextText(n.cancel).nextLink(),ASSERT(r,o,i,p)?[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:r,reservationId:l,reservationStatus:"http://schema.org/ReservationConfirmed",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:o,url:x,telephone:s,address:g},startTime:i,bookingAgent:{"@type":"http://schema.org/Organization",name:"Bookatable",url:"http://www.bookatable.com/"},underName:{"@type":"http://schema.org/Person",name:p},cancelReservationUrl:m,modifyReservationUrl:c}]:CONTINUE}}).call();
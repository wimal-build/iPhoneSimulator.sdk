// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,r){var t=Scanner.fromMessage(e);t.setLocale(r);var a,i,n,o,l,p,d,u,m,g,h=[];a=t.getSpan().nextText("Confirmation code").nextTag("td5").nextTag("td5").nextTag("td5").tagContents(),p=a.nextTag("td5").tagContents(),o=t.getSpan().nextText("Flight #").nextText("Departure time").parentTag("table5"),n=o.previousTag("table6").innerDate(),o=o.allInnerTags("tr5").map(function(e){return e.allInnerTagsFiltered("td5")}).filter(function(e){return e.length>=3}),l=o[1][0],d=combineDateAndTime(n,o[1][1].innerDate()),u=o[1][1].innerCapture(/([A-Z]{3})$/,1),m=combineDateAndTime(n,o[1][2].innerDate()),g=o[1][2].innerCapture(/([A-Z]{3})$/,1),ASSERT(p,l,u,d,g,m)&&(d>m&&(m=modifyDate(m,1)),h.push({airlineName:p,flightNumber:l,departureCode:u,departureTime:d,arrivalCode:g,arrivalTime:m}));for(var s=[],T=0;h.length>T;T++){var c=h[T];schema={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:c.airlineName,airlineCode:c.airlineCode,flightNumber:c.flightNumber,departureAirportFuzzy:c.departureAirport,departureAirportCode:c.departureCode,departureTime:c.departureTime,arrivalAirportFuzzy:c.arrivalAirport,arrivalAirportCode:c.arrivalCode,arrivalTime:c.arrivalTime},checkinUrl:i,reservationId:a,reservationStatus:"http://schema.org/ReservationConfirmed"},s.push(schema)}return s.length?s:void 0}}).call();
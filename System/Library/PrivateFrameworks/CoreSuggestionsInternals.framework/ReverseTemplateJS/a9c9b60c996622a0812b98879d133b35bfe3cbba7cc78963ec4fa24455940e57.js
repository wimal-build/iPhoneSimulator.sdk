// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("pingg.com-invitation-en",function(e){return/^You are invited to/.test(e.subject)||/^.* ha(s|ve) invited you to/.test(e.subject)||/^.* has updated your invitation to/.test(e.subject)},function(e){if(/^You are invited to/.test(e.subject)||/^.* ha(s|ve) invited you to/.test(e.subject)||/^.* has updated your invitation to/.test(e.subject)){var t=Scanner.fromMessage(e);t.setLocale("en_US");var n,a,s,i,r,o,p,g;if(!t.getSpan().allDates().length)return CONTINUE;if(n=t.getSpan().nextTag("table3"),a=n.innerCapture(/You (?:have been|are) invited(?: by ($<invitedBy>.*))? to ($<eventName>.*)[\.!]/),s=a?a.$eventName.trim():null,i=a?a.$invitedBy.trim():null,o=n.nextText("Date:").nextTag("td3").innerDate(),not(o)&&t.getSpan().nextRegExp(/\sDATE\s/).exists()&&(o=t.getSpan().nextRegExp(/\sDATE\s/).parentAnyTag("td").innerDate()),g=n.nextText("Location:").nextTag("td3").tagContents(),not(g)&&t.getSpan().nextRegExp(/\sLOCATION\s/).exists()&&(g=t.getSpan().nextRegExp(/\sLOCATION\s/).parentAnyTag("td").tagContents().innerCapture(/LOCATION\s+([^]+)$/,1)),p=n.nextText("Address:").nextTag("td3"),p=p.innerAddress().exists()?p.innerAddress():p.tagContents(),not(p)&&t.getSpan().nextRegExp(/\sADDRESS\s/).exists()&&(p=t.getSpan().nextRegExp(/\sADDRESS\s/).parentAnyTag("td").tagContents().innerCapture(/ADDRESS\s+([^]+)$/,1)),r=t.getSpan().innerCapture(/Event Web Page.? <(http.*)>/g,1).trim(),not(r)&&(r=t.getSpan().innerCapture(/CLICK TO VIEW INVITATION <(.*)>/,1)),r&&r.innerText("rsvp_method").exists()&&(r=r.split("?")[0]),ASSERT(r,s,o,g))return[{"@context":"http://schema.org","@type":"http://schema.org/EventReservation",reservationStatus:"http://schema.org/ReservationPending",reservationFor:{url:r,"@type":"http://schema.org/SocialEvent",name:s,startDate:o,location:{"@type":"http://schema.org/Place",name:g,address:p}},appleInvitedBy:i}]}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/555/570/571","SG74b72da0")]);
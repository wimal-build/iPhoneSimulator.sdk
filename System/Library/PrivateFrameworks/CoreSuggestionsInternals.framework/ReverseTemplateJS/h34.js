// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,p,o,i,c,s,m,g,h,l,u,d,x,S,f,C,v,y,R,T,k="Rentalcars.com";if("1"===n.version){o=a.getSpan().innerCapture(n.reservationId,1),r=a.getSpan().innerCapture(n.guestName,1),l=a.getSpan().innerCapture(n.brand,1),T=a.getSpan().nextText(n.pickupTime).nextDate(),C=a.getSpan().nextText(n.dropoffTime).nextDate(),y=a.getSpan().innerCapture(n.pickup,1),S=a.getSpan().innerCapture(n.dropoff,1);var U=a.getSpan().innerCapture(n.price,1);g=U.innerCapture(/([\d,.]+)/,1),h=U.innerCapture(/([^\d,.]+)/,1),s=m=a.getSpan().nextText(n.modifyUrl).nextLink()}if("2"===n.version){r=a.getSpan().innerCapture(n.guestName,1),o=e.subject.match(n.reservationId)[1],l=a.getSpan().innerCapture(n.brand,1),T=a.getSpan().nextRegExp(n.pickup).nextDate(),y=a.getSpan().nextRegExp(n.location).innerCapture(n.location,1),C=a.getSpan().nextRegExp(n.dropoff).nextDate(),S=a.getSpan().nextRegExp(n.location).nextRegExp(n.location).innerCapture(n.location,1);var U=a.getSpan().innerCapture(n.price,1);g=U.innerCapture(/([\d,.]+)/,1),h=U.innerCapture(/([^\d,.]+)/,1),s=m=a.getSpan().nextText(n.modifyUrl).nextLink()}return n.confirmSubject.test(e.subject)&&(i="Confirmed",!ASSERT(r,o,T,C,y,S))?CONTINUE:n.cancellationSubject.test(e.subject)&&(i="Cancelled",!ASSERT(o,r))?CONTINUE:0===(""+l).length?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:g,priceCurrency:h,reservationId:o,reservationStatus:"http://schema.org/Reservation"+i,checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:m,underName:{"@type":"http://schema.org/Person",name:r,email:p},provider:{"@type":"http://schema.org/Organization",name:k},pickupTime:T,pickupLocation:{"@type":"http://schema.org/Place",name:v,telephone:R,address:y},dropoffTime:C,dropoffLocation:{"@type":"http://schema.org/Place",name:x,telephone:f,address:S}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:g,priceCurrency:h,reservationId:o,reservationStatus:"http://schema.org/Reservation"+i,checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:m,underName:{"@type":"http://schema.org/Person",name:r,email:p},provider:{"@type":"http://schema.org/Organization",name:k},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:l},license:u,color:d},pickupTime:T,pickupLocation:{"@type":"http://schema.org/Place",name:v,telephone:R,address:y},dropoffTime:C,dropoffLocation:{"@type":"http://schema.org/Place",name:x,telephone:f,address:S}}]}}).call();
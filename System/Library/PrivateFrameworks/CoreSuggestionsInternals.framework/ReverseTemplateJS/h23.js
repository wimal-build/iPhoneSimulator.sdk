// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,o,p,i,c,s,g,m,l,d,h,u,x,T,C,v,f,S,y,R;if(n.confirmSubject.test(e.subject)){p=a.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),r=a.getSpan().nextText(n.guestName).nextTag("td4").nextTag("td4").tagContents(),s=a.getSpan().nextText(n.modifyUrl).parentTag("td3").tagContents().innerLink(),g=s,d=a.getSpan().nextText(n.car).nextTag("table3").nextTag("td3").tagContents();var N=a.getSpan().nextText(n.pickup).parentTag("table3");R=N.innerDate(t),y=N.innerPhoneNumber(),N=N.nextText(n.pickupAddress).parentTag("td3").tagContents(),N=(""+N).split("\n"),S=N.slice(4).join("\n");var b=a.getSpan().nextText(n.dropoff).parentTag("table3");v=b.innerDate(t),C=b.innerPhoneNumber(),b=b.nextText(n.pickupAddress).parentTag("td3").tagContents(),b=(""+b).split("\n"),T=b.slice(4).join("\n");var k=a.getSpan().nextText(n.price).nextTag("td4").tagContents();if(k=k.innerCapture(/^(.+)\(/,1),0===(""+k).length)var k=a.getSpan().nextText(n.price).nextTag("td4").tagContents();if(m=k.innerCapture(/([\d,.]+)/,1),l=k.innerCapture(/([^\d,.]+)/,1).trim(),!ASSERT(r,p,R,v,S,T))return CONTINUE}else if(n.cancellationSubject.test(e.subject)&&(r=a.getSpan().nextRegExp(n.cancelGuestName).tagContents().innerCapture(n.cancelGuestName,1),p=a.getSpan().nextRegExp(n.cancelReservationId).tagContents().innerCapture(n.cancelReservationId,1),i="Cancelled",R=a.getSpan().nextText(n.time).nextDate(),!ASSERT(r,p)))return CONTINUE;return d?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:m,priceCurrency:l,reservationId:p,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:r,email:o},provider:{"@type":"http://schema.org/Organization",name:"Europcar"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:d},license:h,color:u},pickupTime:R,pickupLocation:{"@type":"http://schema.org/Place",name:f,telephone:y,address:S},dropoffTime:v,dropoffLocation:{"@type":"http://schema.org/Place",name:x,telephone:C,address:T}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:m,priceCurrency:l,reservationId:p,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:r,email:o},provider:{"@type":"http://schema.org/Organization",name:"Europcar"},pickupTime:R,pickupLocation:{"@type":"http://schema.org/Place",name:f,telephone:y,address:S},dropoffTime:v,dropoffLocation:{"@type":"http://schema.org/Place",name:x,telephone:C,address:T}}]}}).call();
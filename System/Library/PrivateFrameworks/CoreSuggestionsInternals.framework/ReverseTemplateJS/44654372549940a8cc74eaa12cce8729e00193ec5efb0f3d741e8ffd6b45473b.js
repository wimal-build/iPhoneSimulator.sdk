// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("jal.com-reservation-jp",function(e){return/\u3054\u642d\u4e57\u6848\u5185$/.test(e.subject)},function(e){if(/\u3054\u642d\u4e57\u6848\u5185$/.test(e.subject)){var r=Scanner.fromMessage(e);r.setLocale("ja_JP");var t,a,i,n,p,s,l,u,m,o,g,h,c,d,v,T=[],b={};i=r.getSpan().innerCapture(/\n(.+?)\u69d8\n/,1),n=r.getSpan().innerCapture(/\n\[\u5ea7\u5e2d\u756a\u53f7\] ($<seat>.+?)(?: \(($<seatingType>.+?)\))?\n/),p=n?n.$seat:null,s=n?n.$seatingType:null,valid(i)&&(b[""+i]={name:i,seat:p,seatingType:s}),o=r.getSpan().innerCapture(/\n\[\u4fbf\u540d\] ($<airlineCode>\D+)($<flightNumber>\d+)\n/),g=o?o.$airlineCode:null,u=o?o.$flightNumber:null,l=r.getSpan().innerCapture(/\n\[\u51fa\u767a\u65e5\] (.+)\n/,1),m=r.getSpan().innerCapture(/\n\[\u533a\u9593\] ($<departureAirport>.+?) \u2192 ($<arrivalAirport>.+?)\n/),c=m?m.$departureAirport:null,v=m?m.$arrivalAirport:null,m=r.getSpan().innerCapture(/\n\[\u767a\u7740\u4e88\u5b9a\u6642\u523b\] ($<departureTime>.+?) \u2010 ($<arrivalTime>.+?)\n/),h=m?r.getDetachedSpan(""+l+(""+m.$departureTime)).innerDate():null,d=m?r.getDetachedSpan(""+l+(""+m.$arrivalTime)).innerDate():null,ASSERT(c,v,h,d,g,u)&&T.push({airlineCode:g,flightNumber:u,departureAirport:c,arrivalAirport:v,departureTime:h,arrivalTime:d,passengers:b});for(var y,$=[],C=0;T.length>C;C++)for(var S=T[C],f=Object.keys(S.passengers),A=0;f.length>A;A++){var N=S.passengers[f[A]];y={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:S.airlineCode,flightNumber:S.flightNumber,departureAirportFuzzy:S.departureAirport,departureAirportCode:S.departureCode,departureTime:S.departureTime,arrivalAirportFuzzy:S.arrivalAirport,arrivalAirportCode:S.arrivalCode,arrivalTime:S.arrivalTime},underName:{"@type":"http://schema.org/Person",name:N.name},checkinUrl:a,reservationId:t,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:N.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:N.seat,seatingType:N.seatingType}},totalPrice:N.price,priceCurrency:N.currency,reservationStatus:"http://schema.org/ReservationConfirmed"},valid(N.membershipNumber)&&(y.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:N.membershipNumber,programName:"Frequent Flyer"}),$.push(y)}if($.length)return $}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/112/216/221","SG078a18e9")]);
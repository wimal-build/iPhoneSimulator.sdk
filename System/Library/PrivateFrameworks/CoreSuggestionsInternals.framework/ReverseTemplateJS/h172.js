// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var a=Scanner.fromMessage(e);a.setLocale(t);var r,o,g,s,i,p,d,c,x,u,h,m,T,l;n.isCancelled&&(p="Cancelled"),r=a.getSpan().nextText(n.guestName).nextAnyTag("td").tagContents(),i=a.getSpan().nextRegExp(regExpFormatted(/\1/,n.confirmation),1).nextAnyTag("td").tagContents(),u=a.getSpan().nextText(n.phone).parentAnyTag("table").tagContents(),u&&(m=u.innerCapture(regExpFormatted(/(.+)\s+</),1),h=u.nextLink(),l=a.getDetachedSpan(""+u.allInnerAddresses()).innerAddress(),T=u.innerPhoneNumber().innerCapture(regExpFormatted(/\1(.*)/,n.phone),1),l.exists()||(l=h.nextAnyTag("td").tagContents()+T.previousAnyTag("td").tagContents()));var C=a.getSpan().nextRegExp(n.yourSchedule).nextAnyTag("table");return d=C.nextText(n.checkin).nextAnyTag("td").innerDate(),x=C.nextText(n.checkout).nextAnyTag("td").innerDate(),c=a.getSpan().nextText(n.total).nextAnyTag("td").tagContents(),g=c.innerCapture(/([\d,.]+)/,1),s=c.innerCapture(/([^\d,.]+)/,1),ASSERT(d,x,l)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:o},totalPrice:g,priceCurrency:s,checkinTime:d,checkoutTime:x,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),reservationId:i,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:m,url:h,telephone:T,address:l}}]:void 0}}).call();
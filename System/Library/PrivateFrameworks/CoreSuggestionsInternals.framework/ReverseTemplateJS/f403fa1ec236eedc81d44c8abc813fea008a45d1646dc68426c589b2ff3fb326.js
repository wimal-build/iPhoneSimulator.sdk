// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("jal.com-reservation-jp",function(e){return/\u3054\u642d\u4e57\u6848\u5185$/.test(e.subject)},function(e){if(!/\u3054\u642d\u4e57\u6848\u5185$/.test(e.subject))return CONTINUE;var r=Scanner.fromMessage(e);r.setLocale("ja_JP");var t,a,i,n,p,s,u,l,o,m,g,h,d,c,v,T=[],b={};i=r.getSpan().innerCapture(/\n(.+?)\u69d8\n/,1),n=r.getSpan().innerCapture(/\n\[\u5ea7\u5e2d\u756a\u53f7\] ($<seat>.+?)(?: \(($<seatingType>.+?)\))?\n/),p=n?n.$seat:null,s=n?n.$seatingType:null,valid(i)&&(b[""+i]={name:i,seat:p,seatingType:s}),m=r.getSpan().innerCapture(/\n\[\u4fbf\u540d\] ($<airlineCode>\D+)($<flightNumber>\d+)\n/),g=m?m.$airlineCode:null,l=m?m.$flightNumber:null,u=r.getSpan().innerCapture(/\n\[\u51fa\u767a\u65e5\] (.+)\n/,1),o=r.getSpan().innerCapture(/\n\[\u533a\u9593\] ($<departureAirport>.+?) \u2192 ($<arrivalAirport>.+?)\n/),d=o?o.$departureAirport:null,v=o?o.$arrivalAirport:null,o=r.getSpan().innerCapture(/\n\[\u767a\u7740\u4e88\u5b9a\u6642\u523b\] ($<departureTime>.+?) \u2010 ($<arrivalTime>.+?)\n/),h=o?r.getDetachedSpan(""+u+(""+o.$departureTime)).innerDate():null,c=o?r.getDetachedSpan(""+u+(""+o.$arrivalTime)).innerDate():null,ASSERT(d,v,h,c,g,l)&&T.push({airlineCode:g,flightNumber:l,departureAirport:d,arrivalAirport:v,departureTime:h,arrivalTime:c,passengers:b});for(var y,C=[],$=0;T.length>$;$++)for(var N=T[$],S=Object.keys(N.passengers),A=0;S.length>A;A++){var f=N.passengers[S[A]];y={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:N.airlineCode,flightNumber:N.flightNumber,departureAirportFuzzy:N.departureAirport,departureAirportCode:N.departureCode,departureTime:N.departureTime,arrivalAirportFuzzy:N.arrivalAirport,arrivalAirportCode:N.arrivalCode,arrivalTime:N.arrivalTime},underName:{"@type":"http://schema.org/Person",name:f.name},checkinUrl:a,reservationId:t,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:f.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:f.seat,seatingType:f.seatingType}},totalPrice:f.price,priceCurrency:f.currency,reservationStatus:"http://schema.org/ReservationConfirmed"},valid(f.membershipNumber)&&(y.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:f.membershipNumber,programName:"Frequent Flyer"}),C.push(y)}return C.length?C:void 0},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/127/250/255","SG078a18e9")]);
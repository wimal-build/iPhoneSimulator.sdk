// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,i,s,o,g,p,c,d,u,l,x,m,h,C,v,T,D,S,R,y;return y=a.getSpan().nextText(n.addressLabel).previousTag("table5").lastInnerTag("td5"),D=y.innerDate().exists()?y.innerDate():y.tagContents().innerCapture(/\n([\s\S]*)/,1),C=y.innerLink(),v=D.parentTag("td5").tagContents().innerCapture(/^(.*) </,1),T=D.nextPhoneNumber(),r=a.getSpan().nextRegExp(n.guestName).parentTag("td4").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,n.guestName),1),u=D.nextDate(),m=u.nextDate(),d=m.nextDate(),x=d.nextDate(),l=a.getDetachedSpan(""+u+" "+d).innerDate(),h=a.getDetachedSpan(""+m+" "+x).innerDate(),S=x.nextLink(),g=S.nextTag("table3").tagContents().innerCapture(n.reservationId,1),g.exists()||(p="Cancelled",g=S.nextTag("table3").tagContents().innerCapture(n.cancellationId,1)),c=S.nextRegExp(n.price).nextAnyTag("td").tagContents(),s=c.innerCapture(/([\d,.]+)/,1),o=c.innerCapture(/([^\d,.]+)/,1),ASSERT(r,g,l,h,v)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:i},totalPrice:s,priceCurrency:o,checkinTime:l,checkoutTime:h,modifyReservationUrl:S,cancelReservationUrl:R,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),reservationId:g,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:v,url:C,telephone:T,address:D}}]:void 0}}).call();
// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,o,i,g,p,c,l,s,d,u,x,h,m,C;if(1===n.version)r=a.getSpan().innerCapture(n.bookingName,1),p=a.getSpan().innerCapture(n.confirmationNumber,1),l=a.getSpan().nextRegExp(n.checkInDate).nextDate(),s=a.getSpan().nextRegExp(n.checkOutDate).nextDate(),u=a.getSpan().nextText(n.cancellationConfirmed).nextTag("td1").tagContents(),h=u.nextTag("td1").tagContents(),h.innerAddress().getLength()>=h.getLength()&&(h=h.innerAddress()),i=a.getSpan().innerCapture(n.cancellationTotalPrice,1).innerCapture(/([\d,.]+)/,1),g=a.getSpan().innerCapture(n.cancellationTotalPrice,1).innerCapture(/([^\d,.]+)/,1).trim(),x=a.getSpan().nextRegExp(n.cancellationPhone).parentTag("td1").innerPhoneNumber();else if(2===n.version){p=a.getSpan().nextText(n.reservationId).nextAnyTag("td").tagContents(),l=a.getSpan().nextText("Check-In Date").nextAnyTag("td").innerDate(),s=a.getSpan().nextText("Check-Out Date").nextAnyTag("td").innerDate();var S=a.getSpan().nextText(n.hotel).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1 ($<name>.+?) <($<url>.*)>/,n.hotel));u=h=S?S.$name:null,d=S?S.$url:null,o=a.getSpan().innerCapture(regExpFormatted(/\1 (.+?)\n/,n.email),1)}return ASSERT(l,s,h)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:o},totalPrice:i,priceCurrency:g,checkinTime:l,checkoutTime:s,modifyReservationUrl:m,cancelReservationUrl:C,reservationStatus:"http://schema.org/ReservationCancelled",reservationId:p,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:u,url:d,telephone:x,geo:valid(c)?{"@type":"http://schema.org/GeoCoordinates",latitude:c.$latitude,longitude:c.$longitude}:null,address:h}}]:void 0}}).call();
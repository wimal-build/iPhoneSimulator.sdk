// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r,n){if(!(e&&t&&r&&n))return CONTINUE;var a=loadHelper("opentable.com-microdata-parser.js"),o=a(e);if(o)return o;var p=Scanner.fromMessage(e);p.setLocale(t);var s,g,i,l,d,c,m,h,x,u,S,E,T;return s=p.getSpan().innerCapture(regExpFormatted(/\b\1\s?(.*),/,r.hello),1),s.exists()||(s=p.getSpan().innerCapture(regExpFormatted(/(.*) \1/,r.hello),1)),g=p.getSpan().innerCapture(regExpFormatted(/\1: (\d+)/,r.number),1),d=p.getSpan().nextText(r.cancel).nextText(r.person),l=p.getSpan().withStart(d.previousText("\n").getEnd()).withEnd(d.nextText("\n").getStart()).innerCapture(regExpFormatted(/(\d+)/),1),l.exists()||(l=p.getSpan().innerCapture(regExpFormatted(/(\d+) \1/,r.person),1)),T=p.getSpan().nextText(r.cancel).collapseToEnd().withEnd(p.getSpan().nextText(r.cancel).nextText(r.number).getStart()).trim(),i=T.innerCapture(regExpFormatted(/^(.+)/),1),h=T.allInnerDates(),h=p.getSpan().withStart(h[0].getStart()).withEnd(h[h.length-1].getEnd()),m=getFuzzyDate(p.getDetachedSpan((""+h).replace(/[^\d\sa-zA-z:]+/g,"").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/"))),ASSERT(l,i,m,s)?[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:l,reservationId:g,reservationStatus:"http://schema.org/ReservationCancelled",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:i,url:c,telephone:x,address:u},startTime:m,bookingAgent:{"@type":"http://schema.org/Organization",name:"OpenTable",url:"http://www."+n+"/"},underName:{"@type":"http://schema.org/Person",name:s},cancelReservationUrl:E,modifyReservationUrl:S}]:CONTINUE}}).call();
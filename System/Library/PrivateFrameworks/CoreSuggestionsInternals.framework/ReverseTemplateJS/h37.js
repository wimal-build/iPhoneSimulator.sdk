// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r){var a=Scanner.fromMessage(e);a.setLocale(t);var n,p,o,i,c,s,m,u,h,g,l,d,C,f,v,S,y,R,k,T,N="Rakuten";n=a.getSpan().innerCapture(r.guestName,1),o=a.getSpan().innerCapture(r.reservationId,1),g=a.getSpan().innerCapture(r.brand,1),N=a.getSpan().innerCapture(r.providerName,1),T=getFuzzyDate(a.getSpan().innerCapture(r.pickupTime,1)),y=a.getSpan().innerCapture(r.pickupName,1),R=a.getSpan().innerCapture(r.pickupAddress,1),k=a.getSpan().innerCapture(r.pickupPhone,1),S=getFuzzyDate(a.getSpan().innerCapture(r.dropoffTime,1)),C=y,f=R,v=k;var P=a.getSpan().innerCapture(r.price,1);if(u=P.innerCapture(/([\d,.]+)/,1),h=P.innerCapture(/([^\d,.]+)/,1).trim(),s=m=a.getSpan().nextRegExp(r.cancelUrl,1).nextLink(),r.confirmSubject.test(e.subject)&&!ASSERT(n,o,T,S,R||y))return CONTINUE;if(r.cancellationSubject.test(e.subject)){if(!ASSERT(n,o,T,S,R||y))return CONTINUE;i="Cancelled"}return g?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:u,priceCurrency:h,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:m,underName:{"@type":"http://schema.org/Person",name:n,email:p},provider:{"@type":"http://schema.org/Organization",name:N},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:g},license:l,color:d},pickupTime:T,pickupLocation:{"@type":"http://schema.org/Place",name:y,telephone:k,address:R},dropoffTime:S,dropoffLocation:{"@type":"http://schema.org/Place",name:C,telephone:v,address:f}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:u,priceCurrency:h,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:m,underName:{"@type":"http://schema.org/Person",name:n,email:p},provider:{"@type":"http://schema.org/Organization",name:N},pickupTime:T,pickupLocation:{"@type":"http://schema.org/Place",name:y,telephone:k,address:R},dropoffTime:S,dropoffLocation:{"@type":"http://schema.org/Place",name:C,telephone:v,address:f}}]}}).call();
// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){if(int(e.epoch)<1356998400)return STOP;if(!n.emailTitelConfirmation.test(e.subject)&&!n.emailTitelCancelConfirmation.test(e.subject))return CONTINUE;var a=Scanner.fromMessage(e);a.setLocale(t);var r,i,o,s,c,g,p,l,u,T,m,d;n.emailTitelConfirmation.test(e.subject)?r=a.getSpan().nextText(n.thanksForBookingWithUsText).parentAnyTag("td").tagContents().innerCapture(n.thanksForBookingWithUsRegex,1):n.emailTitelCancelConfirmation.test(e.subject)&&(r="en_US"===t?a.getSpan().nextText("your reservation has been cancel").parentAnyTag("td").tagContents().innerCapture(/\b(.*), your reservation has been cancel/,1):a.getSpan().nextText(n.cancellation).nextAnyTag("td").nextAnyTag("td").tagContents(),g="Cancelled"),d=a.getSpan().firstTag("table7").innerAddress(),not(d)&&(d=a.getSpan().firstTag("table7").nextTag("td7").nextTag("td7").tagContents()),u=d.previousLink(),T=u.parentAnyTag("td").tagContents().innerCapture(/(.*) </,1),m=d.nextPhoneNumber(),c=a.getSpan().innerCapture(n.confirmation,1);var x=a.getSpan().innerCapture(n.modify,1);return p=a.getSpan().nextText(n.arrival).nextDate(),l=a.getSpan().nextText(n.departure).nextDate(),i=a.getSpan().nextText(n.price).nextAnyTag("td").innerCapture(/($<total>[\d,.]+)\s+($<currency>[A-Z]{3})/),o=i?i.$total:null,s=i?i.$currency:null,ASSERT(r,p,l,d)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r},totalPrice:o,priceCurrency:s,checkinTime:p,checkoutTime:l,modifyReservationUrl:x,reservationStatus:"http://schema.org/Reservation"+(g||"Confirmed"),reservationId:c,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:T,url:u,telephone:m,address:d}}]:void 0}}).call();
// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("pingg.com-invitation-en",function(e){return/^You are invited to/.test(e.subject)||/^.* ha(s|ve) invited you to/.test(e.subject)||/^.* has updated your invitation to/.test(e.subject)},function(e){if(/^You are invited to/.test(e.subject)||/^.* ha(s|ve) invited you to/.test(e.subject)||/^.* has updated your invitation to/.test(e.subject)){var t=Scanner.fromMessage(e);t.setLocale("en_US");var n,a,s,r,i,o,p,g;if(!t.getSpan().allDates().length)return CONTINUE;if(n=t.getSpan().nextTag("table3"),a=n.innerCapture(/You (?:have been|are) invited(?: by ($<invitedBy>.*))? to ($<eventName>.*)[\.!]/),s=a?a.$eventName.trim():null,r=a?a.$invitedBy.trim():null,o=n.nextText("Date:").nextTag("td3").innerDate(),not(o)&&t.getSpan().nextRegExp(/\sDATE\s/).exists()&&(o=t.getSpan().nextRegExp(/\sDATE\s/).parentAnyTag("td").innerDate()),g=n.nextText("Location:").nextTag("td3").tagContents(),not(g)&&t.getSpan().nextRegExp(/\sLOCATION\s/).exists()&&(g=t.getSpan().nextRegExp(/\sLOCATION\s/).parentAnyTag("td").tagContents().innerCapture(/LOCATION\s+([^]+)$/,1)),p=n.nextText("Address:").nextTag("td3"),p=p.innerAddress().exists()?p.innerAddress():p.tagContents(),not(p)&&t.getSpan().nextRegExp(/\sADDRESS\s/).exists()&&(p=t.getSpan().nextRegExp(/\sADDRESS\s/).parentAnyTag("td").tagContents().innerCapture(/ADDRESS\s+([^]+)$/,1)),i=t.getSpan().innerCapture(/Event Web Page.? <(http.*)>/g,1).trim(),not(i)&&(i=t.getSpan().innerCapture(/CLICK TO VIEW INVITATION <(.*)>/,1)),i&&i.innerText("rsvp_method").exists()&&(i=i.split("?")[0]),ASSERT(i,s,o,g))return[{"@context":"http://schema.org","@type":"http://schema.org/EventReservation",reservationStatus:"http://schema.org/ReservationPending",reservationFor:{url:i,"@type":"http://schema.org/SocialEvent",name:s,startDate:o,location:{"@type":"http://schema.org/Place",name:g,address:p}},appleInvitedBy:r}]}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/513/528/529","SG74b72da0"),new ReverseTemplate("pingg.com-reminder-en",function(e){return/^Reminder from .*? about/.test(e.subject)},function(e){if(/^Reminder from .*? about/.test(e.subject)){scanner=Scanner.fromMessage(e),scanner.setLocale("en_US");var t,n,a,s,r,i,o,p,g,d;if(!scanner.getSpan().allDates().length)return CONTINUE;if(r=scanner.getSpan().innerCapture(/For complete event details, click here\. <(.*)>/,1),t=scanner.getSpan().nextTag("table2").lastInnerTag("td2").tagContents(),n=t.innerCapture(/Don't forget to ($<status>attend|RSVP for) ($<eventName>.*?)(?: hosted by ($<invitedBy>.*?))? on ($<dateTime>.*?)\./),not(n)&&(n=t.innerCapture(/\s($<invitedBy>.*?) invites you to\s+What: ($<eventName>.*)\sWhere: ($<address>.*)\sWhen: ($<dateTime>.*)\s/)),n&&(g=n.$status,g&&""+g=="attend"&&(d="Confirmed"),a=n.$eventName,s=n.$invitedBy,i=n.$dateTime,o=n.$address),ASSERT(r,a,i))return[{"@context":"http://schema.org","@type":"http://schema.org/EventReservation",reservationStatus:"http://schema.org/Reservation"+(d||"Pending"),reservationFor:{url:r,"@type":"http://schema.org/SocialEvent",name:a,startDate:i,location:{"@type":"http://schema.org/Place",name:p,address:o}},appleInvitedBy:s}]}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/513/528/530","SG6515d09b")]);
// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,a){function r(e){return e=e.replace(/[^\d\sa-zA-z:\u6642\u5206]+/g," ").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/"),e=getFuzzyDate(n.getDetachedSpan(e))}var n=Scanner.fromMessage(e);n.setLocale(t);var p,o,i,c,s,m,l,u,h,g,d,f,C,v,S,y,R,k,P,z;if(a.confirmSubject.test(e.subject)){p=n.getSpan().innerCapture(a.guestName,1),o=n.getSpan().innerCapture(a.guestEmail,1),i=n.getSpan().innerCapture(a.reservationId,1),k=""+n.getSpan().innerCapture(a.pickupStore,1),z=""+n.getSpan().innerCapture(a.pickupDate,1),z=r(z),y=""+n.getSpan().innerCapture(a.dropoffDate,1),y=r(y),g=n.getSpan().innerCapture(a.car,1);var U=n.getSpan().innerCapture(a.price,1);u=U.innerCapture(/([\d,.]+)/,1),h=U.innerCapture(/([^\d,.]+)/,1).trim(),c="Confirmed"}if(a.cancellationSubject.test(e.subject)){if(p=n.getSpan().innerCapture(a.cancellationGuestName,1),o=n.getSpan().innerCapture(a.cancellationGuestEmail,1),i=n.getSpan().innerCapture(a.cancellationReservationId,1),!ASSERT(p,i))return CONTINUE;c="Cancelled"}return g?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:u,priceCurrency:h,reservationId:i,reservationStatus:"http://schema.org/Reservation"+c,checkinUrl:s,modifyReservationUrl:m,cancelReservationUrl:l,underName:{"@type":"http://schema.org/Person",name:p,email:o},provider:{"@type":"http://schema.org/Organization",name:"Ones"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:g},license:d,color:f},pickupTime:z,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:P,address:k},dropoffTime:y,dropoffLocation:{"@type":"http://schema.org/Place",name:C,telephone:S,address:v}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:u,priceCurrency:h,reservationId:i,reservationStatus:"http://schema.org/Reservation"+c,checkinUrl:s,modifyReservationUrl:m,cancelReservationUrl:l,underName:{"@type":"http://schema.org/Person",name:p,email:o},provider:{"@type":"http://schema.org/Organization",name:"Ones"},pickupTime:z,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:P,address:k},dropoffTime:y,dropoffLocation:{"@type":"http://schema.org/Place",name:C,telephone:S,address:v}}]}}).call();
// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("kayak.com-hotel-en",function(e){return/^Your KAYAK booking(?: receipt)? for/.test(e.subject)},function(e){if(/^Your KAYAK booking(?: receipt)? for/.test(e.subject)&&/Room Type/.test(e.plain)){var t=Scanner.fromMessage(e);t.setLocale("en_US");var n,a,r,o,s,i,c,u,g,l,p,m,h;if(/has been canceled$/.test(e.subject)&&(c="Cancelled"),i=t.getSpan().nextText("Your confirmation number:").parentAnyTag("td").tagContents().innerCapture(/Your confirmation number: (.*)/,1),r=t.getSpan().nextText("Reservation Details").nextTag("table5"),hotel=r.innerTag("td5").tagContents().innerCapture(/($<name>.*)\n($<address>[^]+)$/),p=hotel?hotel.$name.trim():null,h=hotel?hotel.$address.trim():null,u=r.innerText("Check-in").nextDate(),g=r.innerText("Check-out").nextDate(),r=t.getSpan().nextText("Guest Details").nextTag("table5"),n=r.innerText("Guest").parentAnyTag("td").tagContents().innerCapture(/Guest\s+(.*)$/,1),a=r.innerText("Email").parentAnyTag("td").tagContents().innerCapture(/Email\s+(.*)$/,1),o=t.getSpan().nextText("Total Cost").nextAnyTag("td").tagContents().innerCapture(/([\d,.]+)/,1),ASSERT(n,u,g,h))return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:n,email:a},totalPrice:o,priceCurrency:s,checkinTime:u,checkoutTime:g,reservationStatus:"http://schema.org/Reservation"+(c||"Confirmed"),reservationId:i,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:p,url:l,telephone:m,address:h}}]}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/535/581/584","SG39f42d2c")]);
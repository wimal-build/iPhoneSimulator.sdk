// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){function a(e){return e=e.replace(/[^\d\sa-zA-z:]+/g," ").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/"),e=getFuzzyDate(g.getDetachedSpan(e))}var g=Scanner.fromMessage(e);g.setLocale(t);var r,o,p,s,i,x,d,c,u,T,m,l,h,y,C;if(!n.emailTitelConfirmation.test(e.subject))return CONTINUE;i=g.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),r=g.getSpan().nextRegExp(n.guestName).previousAnyTag("td").tagContents(),o=g.getSpan().nextRegExp(n.guestEmail).nextLink(),d=""+g.getSpan().nextRegExp(n.checkInDate).parentAnyTag("td").previousAnyTag("td").tagContents(),c=""+g.getSpan().nextRegExp(n.checkOutDate).parentAnyTag("td").previousAnyTag("td").tagContents(),d=a(d),c=a(c),0===(""+d).length&&(d=g.getSpan().nextRegExp(n.checkInDate).parentAnyTag("td").tagContents().innerDate()),0===(""+c).length&&(c=g.getSpan().nextRegExp(n.checkOutDate).parentAnyTag("td").tagContents().innerDate());var A=g.getSpan().nextRegExp(n.guestName).nextTag("table6").tagContents();if(T=A.innerCapture(regExpFormatted(/(.+)</),1),l=A.nextAnyTag("td").tagContents(),h=g.getSpan().nextRegExp(n.guestName).nextTag("table6").nextTag("table6").nextAnyTag("td").nextAnyTag("td").tagContents().innerCapture(regExpFormatted(/(.+)</),1),y=g.getSpan().nextRegExp(n.guestName).nextTag("table6").nextTag("table6").nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").tagContents().nextLink(),C=g.getSpan().nextRegExp(n.guestName).nextTag("table6").nextTag("table6").nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").tagContents().innerPhoneNumber(),n.emailTitelConfirmation.test(e.subject)){if(!ASSERT(r,i,d,c,l))return CONTINUE;x="Confirmed"}return ASSERT(d,c,l)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:o},provider:valid(OR(h,y,C))?{"@type":"http://schema.org/Person",name:h,email:y,telephone:C}:null,totalPrice:p,priceCurrency:s,checkinTime:d,checkoutTime:c,reservationStatus:"http://schema.org/ReservationConfirmed",reservationId:i,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:T,url:u,telephone:m,address:l}}]:void 0}}).call();
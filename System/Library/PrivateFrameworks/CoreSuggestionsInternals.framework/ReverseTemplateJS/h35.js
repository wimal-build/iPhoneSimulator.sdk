// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,a){function r(e){return e=e.replace(/[^\d\sa-zA-z:\u6642\u5206]+/g," ").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/"),e=getFuzzyDate(n.getDetachedSpan(e))}var n=Scanner.fromMessage(e);n.setLocale(t);var p,o,i,c,s,l,m,u,h,g,d,f,C,S,v,y,R,k,N,P;if(a.confirmSubject.test(e.subject)){p=n.getSpan().innerCapture(a.guestName,1),o=n.getSpan().innerCapture(a.guestEmail,1),i=n.getSpan().innerCapture(a.reservationId,1),k=""+n.getSpan().innerCapture(a.pickupStore,1),P=""+n.getSpan().innerCapture(a.pickupDate,1),P=r(P),y=""+n.getSpan().innerCapture(a.dropoffDate,1),y=r(y),g=n.getSpan().innerCapture(a.car,1);var T=n.getSpan().innerCapture(a.price,1);if(u=T.innerCapture(/([\d,.]+)/,1),h=T.innerCapture(/([^\d,.]+)/,1).trim(),!ASSERT(p,i,P,y,k))return CONTINUE;c="Confirmed"}if(a.cancellationSubject.test(e.subject)){if(p=n.getSpan().innerCapture(a.cancellationGuestName,1),o=n.getSpan().innerCapture(a.cancellationGuestEmail,1),i=n.getSpan().innerCapture(a.cancellationReservationId,1),!ASSERT(p,i))return CONTINUE;c="Cancelled"}return g&&0!==(""+g).length?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:u,priceCurrency:h,reservationId:i,reservationStatus:"http://schema.org/Reservation"+c,checkinUrl:s,modifyReservationUrl:l,cancelReservationUrl:m,underName:{"@type":"http://schema.org/Person",name:p,email:o},provider:{"@type":"http://schema.org/Organization",name:"Ones"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:g},license:d,color:f},pickupTime:P,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:N,address:k},dropoffTime:y,dropoffLocation:{"@type":"http://schema.org/Place",name:C,telephone:v,address:S}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:u,priceCurrency:h,reservationId:i,reservationStatus:"http://schema.org/Reservation"+c,checkinUrl:s,modifyReservationUrl:l,cancelReservationUrl:m,underName:{"@type":"http://schema.org/Person",name:p,email:o},provider:{"@type":"http://schema.org/Organization",name:"Ones"},pickupTime:P,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:N,address:k},dropoffTime:y,dropoffLocation:{"@type":"http://schema.org/Place",name:C,telephone:v,address:S}}]}}).call();
// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("travelocity.co.uk-hotel-confirmation-en",function(){return!0},function(e){if(int(e.epoch)<1356998400)return STOP;var r=Scanner.fromMessage(e);r.setLocale("en_US");var t,a,n,o,i,s,c,m,p,h,l,d,g,u=[],v=[],T=[],y=[];if(r.getSpan().nextText("Hotel details").exists()){n=r.getSpan().nextText("Hotel details").nextTag("table4"),s=n.innerText("Hotel order no:").nextTag("td4").tagContents(),a=n.innerText("Booked in Name:").nextTag("td4").tagContents(),c=n.innerText("Arrival:").nextTag("td4").innerDate(),m=n.innerText("Departure:").nextTag("td4").innerDate(),t=n.innerTag("table5").tagContents(),p=t.innerCapture(/($<name>.*)\s($<address>[^]+)/),l=p?p.$name:null,g=p?p.$address:null,t.innerAddress().getLength()>=g.getLength()&&(g=t.innerAddress());{n.innerText("Phone:").nextTag("td4").tagContents()}o=r.getSpan().nextText("Payment Summary").nextTag("td5").nextTag("td5").tagContents().innerCapture(/([\d,.]+)/,1),ASSERT(a,l,g,c,m)&&T.push({name:a,reservationId:s,totalPrice:o,priceCurrency:i,hotelName:l,hotelAddress:g,hotelUrl:h,hotelPhone:d,checkInDateTime:c,checkOutDateTime:m})}for(var f=0;v.length>f;f++)for(var C=v[f],k=Object.keys(C.passengers),x=0;k.length>x;x++){var N=C.passengers[k[x]];schema={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:C.airlineName,airlineCode:C.airlineCode,flightNumber:C.flightNumber,departureAirportFuzzy:C.departureAirport,departureAirportCode:C.departureCode,departureTime:C.departureTime,arrivalAirportFuzzy:C.arrivalAirport,arrivalAirportCode:C.arrivalCode,arrivalTime:C.arrivalTime},underName:{"@type":"http://schema.org/Person",name:N.name},checkinUrl:C.checkinUrl,reservationId:C.reservationId,reservationStatus:"http://schema.org/Reservation"+(C.reservationStatus||"Confirmed"),reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:N.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:N.seats[C.flightNumber],seatingType:N.seatingType[C.flightNumber]}},totalPrice:N.totalPrice,priceCurrency:N.priceCurrency},not(N.membershipNumber)||(schema.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:N.membershipNumber,programName:N.programName}),u.push(schema)}for(var b,f=0;y.length>f;f++)b=y[f],schema={"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:b.totalPrice,priceCurrency:b.priceCurrency,reservationId:b.reservationId,reservationStatus:"http://schema.org/Reservation"+(b.reservationStatus||"Confirmed"),checkinUrl:b.checkinUrl,modifyReservationUrl:b.modifyReservationUrl,cancelReservationUrl:b.cancelReservationUrl,underName:{"@type":"http://schema.org/Person",name:b.name,email:b.email},provider:{"@type":"http://schema.org/Organization",name:b.provider},pickupTime:b.pickupTime,pickupLocation:{"@type":"http://schema.org/Place",name:b.pickupName,telephone:b.pickupTelephone,address:b.pickupAddress},dropoffTime:b.dropoffTime,dropoffLocation:{"@type":"http://schema.org/Place",name:b.dropoffName,telephone:b.dropoffTelephone,address:b.dropoffAddress}},b.brand&&(schema.reservationFor={"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:b.brand},license:b.license,color:b.color}),u.push(schema);for(var p,f=0;T.length>f;f++)p=T[f],schema={"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:p.name,email:p.email},totalPrice:p.totalPrice,priceCurrency:p.priceCurrency,checkinTime:p.checkInDateTime,checkoutTime:p.checkOutDateTime,modifyReservationUrl:p.modifyReservationUrl,cancelReservationUrl:p.cancelReservationUrl,reservationStatus:"http://schema.org/Reservation"+(p.reservationStatus||"Confirmed"),reservationId:p.reservationId,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:p.hotelName,url:p.hotelUrl,telephone:p.hotelPhone,address:p.hotelAddress}},u.push(schema);return u},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/535/617/618","SGfd2720da")]);
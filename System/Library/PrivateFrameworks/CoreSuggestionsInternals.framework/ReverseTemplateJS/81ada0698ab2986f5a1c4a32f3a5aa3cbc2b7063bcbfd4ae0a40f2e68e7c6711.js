// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("travelocity.com-yahoo",function(e){return/Yahoo! Travel (?:Cancellation )?Confirmation$/.test(e.subject)},function(e){if(/Yahoo! Travel (?:Cancellation )?Confirmation$/.test(e.subject)){var t=Scanner.fromMessage(e);t.setLocale("en_US");var n,r,a,o,i,p,s,c,d,l,m,f,h,u,g,T,v=[],C=[];t.getSpan().nextText("Rental Company").exists()&&(i=/Travel Cancellation Confirmation/.test(e.subject)?"Cancelled":"Confirmed",r=t.getSpan().nextText("Itinerary").nextTag("table6"),n=r.innerText("Primary Contact:").nextTag("td6").tagContents(),c=r.innerText("Rental Company:").nextTag("td6").tagContents(),u=r.innerText("Pick up Location:").nextTag("td6").tagContents(),l=r.innerText("Drop off Location:").nextTag("td6").tagContents(),g=r.innerText("Telephone:").nextTag("td6").innerPhoneNumber(),T=r.innerText("Pick-up:").nextTag("td6").innerDate(),f=r.innerText("Drop-off:").nextTag("td6").innerDate(),s=r.innerText("Car:").nextTag("td6").tagContents().innerCapture(/(.*)\s/,1).trim(),o=r.innerText("Confirmation #:").nextTag("td6").tagContents(),a=t.getSpan().nextText("Pricing").nextText("Total:").nextTag("td5").tagContents().innerCapture(/([\d,.]+)/,1),ASSERT(T,c,o,OR(u,h))&&C.push({name:n,brand:s,pickupTime:T,pickupName:h,pickupAddress:u,pickupTelephone:g,dropoffTime:f,dropoffName:d,dropoffAddress:l,dropoffTelephone:m,provider:c,reservationId:o,reservationStatus:i,cancelReservationUrl:p,totalPrice:a}));for(var x,y=0;C.length>y;y++)x=C[y],schema={"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:x.totalPrice,priceCurrency:x.priceCurrency,reservationId:x.reservationId,reservationStatus:"http://schema.org/Reservation"+(x.reservationStatus||"Confirmed"),checkinUrl:x.checkinUrl,modifyReservationUrl:x.modifyReservationUrl,cancelReservationUrl:x.cancelReservationUrl,underName:{"@type":"http://schema.org/Person",name:x.name,email:x.email},provider:{"@type":"http://schema.org/Organization",name:x.provider},pickupTime:x.pickupTime,pickupLocation:{"@type":"http://schema.org/Place",name:x.pickupName,telephone:x.pickupTelephone,address:x.pickupAddress},dropoffTime:x.dropoffTime,dropoffLocation:{"@type":"http://schema.org/Place",name:x.dropoffName,telephone:x.dropoffTelephone,address:x.dropoffAddress}},x.brand&&(schema.reservationFor={"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:x.brand},license:x.license,color:x.color}),v.push(schema);if(v.length)return v}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/535/617/625","SG65cf95ab"),new ReverseTemplate("travelocity.com-yahoo-shared-itinerary",function(e){return/Your Friend Made A Reservation on\s+Yahoo! Travel$/.test(e.subject)},function(e){if(/Your Friend Made A Reservation on\s+Yahoo! Travel$/.test(e.subject)){var t=Scanner.fromMessage(e);t.setLocale("en_US");var n,r,a,o,i,p,s,c,d,l,m,f,h,u,g,T=[];t.getSpan().nextText("Rental Company").exists()&&(n=t.getSpan().innerCapture(/Driver: (.*?)\n/,1),s=t.getSpan().innerCapture(/Rental Company: (.*?)\n/,1),h=t.getSpan().innerCapture(/Pick up Location:\n(.*?)\n/,1),d=t.getSpan().innerCapture(/Drop off Location:\n(.*?)\n/,1),not(d)&&(d=h),g=t.getSpan().nextText("Pick-up:").nextDate(),m=t.getSpan().nextText("Drop-off:").nextDate(),p=t.getSpan().innerCapture(/Car:\n(.*?)\n/,1),a=t.getSpan().innerCapture(/Confirmation #: (.*?)\n/,1),r=t.getSpan().innerCapture(/Total: (?:.*?)([\d,.]+)\n/,1),ASSERT(g,s,a,OR(h,f))&&T.push({name:n,brand:p,pickupTime:g,pickupName:f,pickupAddress:h,pickupTelephone:u,dropoffTime:m,dropoffName:c,dropoffAddress:d,dropoffTelephone:l,provider:s,reservationId:a,reservationStatus:o,cancelReservationUrl:i,totalPrice:r}));for(var v,C,x=[],y=0;T.length>y;y++)C=T[y],v={"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:C.totalPrice,priceCurrency:C.priceCurrency,reservationId:C.reservationId,reservationStatus:"http://schema.org/Reservation"+(C.reservationStatus||"Confirmed"),checkinUrl:C.checkinUrl,modifyReservationUrl:C.modifyReservationUrl,cancelReservationUrl:C.cancelReservationUrl,underName:{"@type":"http://schema.org/Person",name:C.name,email:C.email},provider:{"@type":"http://schema.org/Organization",name:C.provider},pickupTime:C.pickupTime,pickupLocation:{"@type":"http://schema.org/Place",name:C.pickupName,telephone:C.pickupTelephone,address:C.pickupAddress},dropoffTime:C.dropoffTime,dropoffLocation:{"@type":"http://schema.org/Place",name:C.dropoffName,telephone:C.dropoffTelephone,address:C.dropoffAddress}},C.brand&&(v.reservationFor={"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:C.brand},license:C.license,color:C.color}),x.push(v);if(x.length)return x}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/535/617/626","SGedb6b6af")]);
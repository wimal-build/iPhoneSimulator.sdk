// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,r,t){var a=Scanner.fromMessage(e);a.setLocale(r);var n,i,o,p,g,d,m,u=/[A-Z]{2,3}/,l=/[0-9]{3,4}[a-zA-Z]?/,s=[];n=a.getSpan().innerCapture(regExpFormatted(/\1\s+(\w+)/,t.confirmationNumber),1);var v=a.getSpan().innerCapture(regExpFormatted(/flight (\1)(\2)/,u,l));v&&(o=v[1],i=v[2]),p=a.getSpan().nextRegExp(regExpFormatted(/\1/,t.nowDeparts)).nextDate(),g=a.getSpan().innerCapture(regExpFormatted(/\1.* \(([A-Z]{3})\).*/,t.nowDeparts),1),d=a.getSpan().nextRegExp(regExpFormatted(/\1/,t.nowArrives)).nextDate(),m=a.getSpan().innerCapture(regExpFormatted(/\1.* \(([A-Z]{3})\).*/,t.nowArrives),1),ASSERT(o,i,p,g,d,m)&&s.push({airlineCode:o,flightNumber:i,departureTime:p,departureCode:g,arrivalTime:d,arrivalCode:m});for(var h=[],C=0;s.length>C;C++){var x=s[C];h.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:x.airlineCode,flightNumber:x.flightNumber,departureAirportCode:x.departureCode,departureTime:x.departureTime,arrivalAirportCode:x.arrivalCode,arrivalTime:x.arrivalTime},reservationId:n,reservationStatus:"http://schema.org/ReservationConfirmed"})}return h.length?h:void 0}}).call();
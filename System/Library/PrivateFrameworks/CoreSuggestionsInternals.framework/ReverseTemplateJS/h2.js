// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var r=Scanner.fromMessage(e);r.setLocale(t);var a,i,p,o,g,d,c,s,m,l,x,h,u,f,S,y,T,C,v,A,E;p=r.getSpan().innerCapture(regExpFormatted(/\1 (\d+)/,n.confirmationNumberPrefix),1),p.exists()||(p=r.getSpan().innerCapture(regExpFormatted(/\1 (\d+)/,n.confirmationNumberAlternatePrefix),1)),n.cancellationEmailSubjectRegExp.test(e.subject)&&(o="Cancelled"),u=r.getSpan().nextText(n.informationHeader).nextAnyTag("table").innerText(n.namePrefix).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+($<name>.*)[^]+\2\s+($<email>.*)/,n.namePrefix,n.emailPrefix)),a=u?u.$name:null,i=u?u.$email:null,u=r.getSpan().nextRegExp(n.pickupRegex).nextAnyTag("table");var R=u.innerText(n.pickupHeader).parentAnyTag("td").tagContents();E=R.innerDate(),C=R.withStart(E.getEnd()).trim().innerCapture(/(.*)\s/,1),v=R.withStart(C.getEnd()).trim(),R.innerAddress().getLength()>=v.getLength()&&(v=R.innerAddress());var P=u.innerText(n.dropoffHeader).parentAnyTag("td").tagContents();if(T=P.innerDate(),f=P.withStart(T.getEnd()).trim().innerCapture(/(.*)\s/,1),S=P.withStart(f.getEnd()).trim(),P.innerAddress().getLength()>=S.getLength()&&(S=P.innerAddress()),"fr_FR"===t){E=""+R.innerCapture(/.*\n(.*)/,1),E=E.replace(/.+\.\,/,""),E=E.replace(/[.,]/g,"").trim();var b=E.match(/\w+\s(\d+)/,1);E=E.replace(/\d+/,""),E=b[1]+" "+E,E=getFuzzyDate(r.getDetachedSpan(E)),T=""+P.innerCapture(/.*\n(.*)/,1),T=T.replace(/.+\.\,/,""),T=T.replace(/[.,]/g,"").trim();var b=T.match(/\w+\s(\d+)/,1);T=T.replace(/\d+/,""),T=b[1]+" "+T,T=getFuzzyDate(r.getDetachedSpan(T))}return l=r.getSpan().nextText(n.vehicleHeader).nextText(n.carSummaryHeader).parentAnyTag("td").innerCapture(regExpFormatted(/\s+(.* \1)/,n.brandSuffix),1),s=r.getSpan().nextText(n.priceHeader).nextAnyTag("td").tagContents().innerCapture(/([\d,.]+)/,1),m=r.getSpan().nextText(n.priceHeader).nextAnyTag("td").tagContents().innerCapture(/([^\d,.\s]+)/,1),d=r.getSpan().nextText(n.modifyReservationUrlPrefix).nextLink(),not(E)&&not(C)&&not(v)?STOP:((not(f)||valid(f,C)&&""+C==""+f)&&(S=v,not(y)&&(y=A)),ASSERT(a,p,l,E,OR(C,v))?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:s,priceCurrency:m,reservationId:p,reservationStatus:"http://schema.org/Reservation"+(o||"Confirmed"),checkinUrl:g,modifyReservationUrl:d,cancelReservationUrl:c,underName:{"@type":"http://schema.org/Person",name:a,email:i},provider:{"@type":"http://schema.org/Organization",name:"Alamo"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:l},license:x,color:h},pickupTime:E,pickupLocation:{"@type":"http://schema.org/Place",name:C,telephone:A,address:v},dropoffTime:T,dropoffLocation:{"@type":"http://schema.org/Place",name:f,telephone:y,address:S}}]:void 0)}}).call();
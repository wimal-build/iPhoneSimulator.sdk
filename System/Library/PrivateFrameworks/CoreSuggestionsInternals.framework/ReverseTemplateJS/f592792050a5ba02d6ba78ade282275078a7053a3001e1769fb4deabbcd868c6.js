// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("usairways.com-flight-delay-en",function(e){return/^Flight [Dd]elay impacting/.test(e.subject)},function(e){if(/^Flight [Dd]elay impacting/.test(e.subject)){var r=Scanner.fromMessage(e);r.setLocale("en_US");var t,a,i,n,o,p,d,l,u,s,m,g=[];if(r.getSpan().nextText("BeNotified").nextText("Your flight is delayed").exists()){var h={},v="en_US",c=loadHelper("usairways.com-departure-reminder.js");return c(e,v,h)}r.getSpan().nextText("Your updated flight information:").exists()&&(i=r.getSpan().innerCapture(concatRegExp(/Your updated flight information:\s/,/Departing on: ($<currentDate>.*?)\s/,/($<airlineName>.*?) flight # ($<flightNumber>\d+)\s/,/Depart: ($<departureAirport>.*?) \(($<departureCode>[A-Z]{3})\) at ($<departureTime>\d{1,2}:\d{2} [AP]M)\s/,/Arrive: ($<arrivalAirport>.*?) \(($<arrivalCode>[A-Z]{3})\) at ($<arrivalTime>\d{1,2}:\d{2} [AP]M)/)),i&&(o=i.$airlineName,n=i.$flightNumber,d=i.$departureAirport,l=i.$departureCode,p=r.getDetachedSpan(""+i.$currentDate+" "+i.$departureTime).innerDate(),s=i.$arrivalAirport,m=i.$arrivalCode,u=r.getDetachedSpan(""+i.$currentDate+" "+i.$arrivalTime).innerDate(),valid(o,n,d,l,p,s,m,u)&&(r.getDateDD(u).iso8601<r.getDateDD(p).iso8601&&(u=modifyDate(u,1)),g.push({airlineName:o,flightNumber:n,departureAirport:d,departureCode:l,departureTime:p,arrivalAirport:s,arrivalCode:m,arrivalTime:u}))));for(var f=[],$=0;g.length>$;$++){var D=g[$];schema={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:D.airlineName,airlineCode:D.airlineCode,flightNumber:D.flightNumber,departureAirportFuzzy:D.departureAirport,departureAirportCode:D.departureCode,departureTime:D.departureTime,arrivalAirportFuzzy:D.arrivalAirport,arrivalAirportCode:D.arrivalCode,arrivalTime:D.arrivalTime},checkinUrl:a,reservationId:t,reservationStatus:"http://schema.org/ReservationConfirmed"},f.push(schema)}if(f.length)return f}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/112/297/301","SGf27c4f3b")]);
// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r){var n=Scanner.fromMessage(e);n.setLocale(t);var a,i=n.getSpan().nextText(r.reservationIdPrefix).parentTag("td6").tagContents().innerCapture(regExpFormatted(/\1: (\w+)/,r.reservationIdPrefix),1),x=n.getSpan().nextText(r.orderDetailsHeader).parentTag("table3"),c=n.getSpan().withInterval(x.nextTag("td6").tagContents().getStart(),x.nextText("<").getStart()).trim(),g=n.getSpan().withInterval(x.nextText(">").getEnd(),x.nextText(r.viewMapSuffix).getStart()).trim(),o=x.nextText(r.phoneNumberPrefix).parentTag("td6").tagContents().innerCapture(regExpFormatted(/.+<\1([\d\s]+)>\s*/,r.phoneNumberPrefix),1).trim(),p=x.nextText(r.checkInHeader).parentTag("table6"),s=p.nextText(r.checkInPrefix).nextDate(),d=p.nextText(r.checkOutPrefix).nextDate(),m=n.getSpan().nextText(r.guestNamePrefix).parentTag("td5").tagContents().innerCapture(regExpFormatted(/\1: (.+)/,r.guestNamePrefix),1).trim(),u=n.getSpan().nextText(r.pricePrefix).parentTag("td5").tagContents().innerCapture(regExpFormatted(/\1 ($<currency>[^\d]+)?($<price>[\d\.,]+)($<currency_suffix>[^\d]+)?/,r.pricePrefix));a=u.$currency.exists()?u.$currency.trim():u.$currency_suffix.trim();var T=u.$price;return ASSERT(m,i,s,d,g)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:m},totalPrice:T,priceCurrency:a,checkinTime:s,checkoutTime:d,reservationStatus:"http://schema.org/ReservationConfirmed",reservationId:i,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:c,telephone:o,address:g}}]:void 0}}).call();
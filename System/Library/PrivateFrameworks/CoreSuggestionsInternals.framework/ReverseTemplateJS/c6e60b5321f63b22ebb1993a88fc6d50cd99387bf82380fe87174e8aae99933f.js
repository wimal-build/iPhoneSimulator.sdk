// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("travelocity.com-hotel-confirmation-en",function(e){return/(^Travelocity travel confirmation|Itinerary#)/.test(e.subject)},function(e){if(!/(^Travelocity travel confirmation|Itinerary#)/.test(e.subject))return CONTINUE;var t={reservationIdPrefix:"Itinerary #",totalPricePrefix:"Total",underPersonNamePrefix:"Reserved for",hotelAddressPrefix:"View hotel details"},r=Scanner.fromMessage(e);r.setLocale("en_US");var n,a,i,o,s,d,x,g,c,p,l;n=r.getSpan().nextText(t.underPersonNamePrefix).nextTag("td8").nextTag("td8").tagContents().innerCapture(/(.*)\n/,1),x=r.getSpan().innerCapture(regExpFormatted(/\1\s+?(\d+)\s+?/,t.reservationIdPrefix),1);var m=r.getSpan().nextText(t.reservationIdPrefix).nextTag("table5");i=m.nextTag("td5").tagContents(),m=m.nextTag("td5").nextTag("td5").tagContents();var T=m.innerCapture(/[a-zA-Z]{3}(.*) - [a-zA-Z]{3}(.*),/);g=r.getDetachedSpan((""+T[1]).replace(/\//g," ")).innerDate(),c=r.getDetachedSpan((""+T[2]).replace(/\//g," ")).innerDate(),d=r.getSpan().nextText(t.hotelAddressPrefix).nextLink(),s=r.getSpan().nextText(t.hotelAddressPrefix).nextAddress(),o=r.getSpan().nextText(t.hotelAddressPrefix).nextPhoneNumber();var h=r.getSpan().nextText(t.totalPricePrefix).nextTag("td7").tagContents();return l=""+h.innerCapture(/(.)\d+/,1),p=(""+h.tagContents()).replace(""+l,""),ASSERT(s,g)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:n,email:a},totalPrice:p,priceCurrency:l,checkinTime:g,checkoutTime:c,reservationStatus:"http://schema.org/ReservationConfirmed",reservationId:x,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:i,telephone:o,url:d,address:s}}]:CONTINUE},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/577/664/671","SGe3435f47")]);
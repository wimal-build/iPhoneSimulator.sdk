// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(t,e,n){var a=Scanner.fromMessage(t);a.setLocale(e);var r,o,g,s,i,x,p,c,d,T,l,C,m,h,S,u,v,f,y,L;if(g=a.getSpan().nextRegExp(RegExp(n.reservationIdPrefix)).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1 (\d{4}\-\d{4}\-[A-Z]{2}\-\d)/,n.reservationIdPrefix),1),r=a.getSpan().nextRegExp(n.guestName).nextTag("td2").tagContents().innerCapture(/(.+?)\,/,1),L=getFuzzyDate(a.getSpan().nextText(n.dates).nextTag("td2").tagContents()),y=a.getSpan().nextText(n.carLocation).nextTag("td2").tagContents().innerPhoneNumber(),f=a.getSpan().nextText(n.carLocation).nextTag("td2").tagContents().innerAddress(),f.exists()||(f=a.getSpan().nextText(n.carLocation).nextTag("td2").tagContents(),f=(""+f).split("\n"),f=""+f.slice(0,-2)),u=getFuzzyDate(a.getSpan().nextText(n.dates).nextTag("td2").nextTag("td2").tagContents()),S=a.getSpan().nextText(n.carLocation).nextTag("td2").nextTag("td2").tagContents().innerPhoneNumber(),h=a.getSpan().nextText(n.carLocation).nextTag("td2").nextTag("td2").tagContents().innerAddress(),h.exists()||(h=a.getSpan().nextText(n.carLocation).nextTag("td2").nextTag("td2").tagContents(),h=(""+h).split("\n"),h=""+h.slice(0,-2)),c=a.getSpan().nextText(n.totalPrice).nextTag("td2").tagContents().innerCapture(/([\d,.]+)/,1),d=(""+a.getSpan().nextText(n.totalPrice).nextTag("td2").tagContents().innerCapture(/([^\d,.]+)/,1)).trim(),T=a.getSpan().nextRegExp(n.brand).nextTag("td2").tagContents(),x=a.getSpan().nextTag("table2").tagContents().innerLink(),p=x,n.cancellationHeader.test(t.subject)&&(s="Cancelled",g=a.getSpan().nextRegExp(n.reservationIdCancel).tagContents().innerCapture(n.reservationIdCancel,1),f=a.getSpan().nextText(n.carLocation).nextTag("td2").tagContents(),h=a.getSpan().nextText(n.carLocation).nextTag("td2").nextTag("td2").tagContents()),ASSERT(r,f,L)){var R={"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:c,priceCurrency:d,reservationId:g,reservationStatus:"http://schema.org/Reservation"+(s||"Confirmed"),checkinUrl:i,modifyReservationUrl:x,cancelReservationUrl:p,underName:{"@type":"http://schema.org/Person",name:r,email:o},provider:{"@type":"http://schema.org/Organization",name:"Avis"},pickupTime:L,pickupLocation:{"@type":"http://schema.org/Place",name:v,telephone:y,address:f},dropoffTime:u,dropoffLocation:{"@type":"http://schema.org/Place",name:m,telephone:S,address:h}};return T&&(R.reservationFor={"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:T},license:l,color:C}),[R]}}}).call();
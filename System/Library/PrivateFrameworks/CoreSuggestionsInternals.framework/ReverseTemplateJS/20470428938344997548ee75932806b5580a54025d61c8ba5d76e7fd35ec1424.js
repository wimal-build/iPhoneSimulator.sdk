// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("southwest.com-earlybird-confirmation-en",function(e){return/^Southwest Airlines EarlyBird Confirmation/.test(e.subject)},function(e){if(/^Southwest Airlines EarlyBird Confirmation/.test(e.subject)){var r=Scanner.fromMessage(e);r.setLocale("en_US");var t,a,n,i,s,o,p,m,l,u,c,h,g,d,v,b,C,f,T,y=[],N={},A=loadHelper("southwest.com-common.js");a=r.getSpan().innerCapture(/\bCheck-In Online <(.*?)>/,1),t=r.getSpan().innerCapture(/\bConfirmation Number: (\w+)/,1),m=r.getSpan().nextText("Departure/Arrival").parentTag("table4").allInnerTags("tr4").map(function(e){return e.allInnerTagsFiltered("td4")}),p=r.getSpan().innerCapture(/\bTotal Cost: .*?([\d,.]+)/,1);for(var S=1;m.length>S;S++)s=m[S],4==s.length&&(n=s[0],i=s[3].innerDate(),o=s[2].innerCapture(/(\d+)/,1),h=s[1].innerCapture(A.departureRegex),b=s[1].innerCapture(A.arrivalRegex),valid(h,b)&&(l=s[1].allDates(),c=h.$name.result()||h.$changeName.result()||"Southwest Airlines",d=h.$departureAirport,v=h.$departureCode,g=combineDateAndTime(i,l[0]),f=b.$arrivalAirport,T=b.$arrivalCode,C=combineDateAndTime(i,l[1])),ASSERT(n,c,o,v,g,T,C)&&(N[""+n]={name:n,seats:{},seatingType:{},totalPrice:p},y.push({airlineName:c,flightNumber:o,reservationId:t,departureAirport:d,departureCode:v,departureTime:g,arrivalAirport:f,arrivalCode:T,arrivalTime:C,passengers:N}),u=o=l=c=d=v=g=f=T=C=null,N={}));for(var k=[],I=0;y.length>I;I++)for(var w=y[I],x=Object.keys(w.passengers),F=0;x.length>F;F++){var R=w.passengers[x[F]];schema={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:w.airlineName,airlineCode:w.airlineCode,flightNumber:w.flightNumber,departureAirportFuzzy:w.departureAirport,departureAirportCode:w.departureCode,departureTime:w.departureTime,arrivalAirportFuzzy:w.arrivalAirport,arrivalAirportCode:w.arrivalCode,arrivalTime:w.arrivalTime},underName:{"@type":"http://schema.org/Person",name:R.name},checkinUrl:a,reservationId:w.reservationId,reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:R.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:R.seats[w.flightNumber]}},totalPrice:R.totalPrice,priceCurrency:R.currency},valid(R.membershipNumber)&&(schema.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:R.membershipNumber,programName:"Rapid Rewards"}),k.push(schema)}if(k.length)return k}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/112/260/261","SG92044fc9"),new ReverseTemplate("southwest.com-itinerary-en",function(e){return/^Southwest Airlines Confirmation/.test(e.subject)||/^(?:(?:UPDATED|CANCELLED) )?[Ff]light reservation/.test(e.subject)||/^Ticketless Travel Passenger Itinerary/.test(e.subject)},function(e){if(/^Southwest Airlines Confirmation/.test(e.subject)||/^(?:(?:UPDATED|CANCELLED) )?[Ff]light reservation/.test(e.subject)||/^Ticketless Travel Passenger Itinerary/.test(e.subject)){var r=Scanner.fromMessage(e);r.setLocale("en_US");var t,a,n,i,s,o=[],p={},m=loadHelper("southwest.com-common.js"),l=/^CANCELLED flight reservation/.test(e.subject)?"Carryon Items:":/What you need to know to travel:/.test(e.plain)?"What you need to know to travel:":"Carry-on Items";/^CANCELLED flight reservation/.test(e.subject)&&(a="Cancelled"),t=r.getSpan().innerCapture(/\bCheck In Online <(.*?)>/,1),i=r.getSpan().nextText("Total Air Cost").nextTag("td5").nextTag("td5").tagContents();for(var u=r.getSpan();u.nextText("AIR Itinerary").exists();){u=u.nextText("AIR Itinerary").withEnd(u.nextText(l).getEnd()),p={},s=u.innerText("Passenger(s)").nextTag("table4").withEnd(u.innerText("Departure/Arrival").parentTag("table4").getStart()).allInnerTags("table4").map(function(e){return e.allInnerTagsFiltered("td4")}).filter(function(e){return e.length>=1&&e[0].innerCapture(/^[A-Z\/\s]+$/)});for(var c,h=0;c=s[h++];)n=""+c[0],p[n]={name:n,membershipNumber:c[1]&&c[1].innerCapture(/^(\d+)/,1),ticketNumber:c[2],totalPrice:i,seats:{},seatingType:{}};m.addFlightLegs(o,p,l,u),u=u.collapseToEnd()}for(var g=[],h=0;o.length>h;h++)for(var d=o[h],v=Object.keys(d.passengers),b=0;v.length>b;b++){var C=d.passengers[v[b]];schema={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:d.airlineName,airlineCode:d.airlineCode,flightNumber:d.flightNumber,departureAirportFuzzy:d.departureAirport,departureAirportCode:d.departureCode,departureTime:d.departureTime,arrivalAirportFuzzy:d.arrivalAirport,arrivalAirportCode:d.arrivalCode,arrivalTime:d.arrivalTime},underName:{"@type":"http://schema.org/Person",name:C.name},checkinUrl:t,reservationId:d.reservationId,reservationStatus:"http://schema.org/Reservation"+(a||"Confirmed"),reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:C.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:C.seats[d.flightNumber]}},totalPrice:C.totalPrice,priceCurrency:C.currency},not(C.membershipNumber)||(schema.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:C.membershipNumber,programName:"Rapid Rewards"}),g.push(schema)}if(g.length)return g}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/112/260/262","SG4dc16108"),new ReverseTemplate("southwest.com-trip-reminder-en",function(e){return/^Your trip is around the corner!/.test(e.subject)||/^Your Upcoming .*? Itinerary/.test(e.subject)},function(e){if(/^Your trip is around the corner!/.test(e.subject)||/^Your Upcoming .*? Itinerary/.test(e.subject)){var r=Scanner.fromMessage(e);r.setLocale("en_US");var t,a,n,i,s=[],o={},p=loadHelper("southwest.com-common.js");t=r.getSpan().innerCapture(/\bCheck In Online <(.*?)>/,1),i=r.getSpan().nextText("Passenger(s)").nextTag("table4").withEnd(r.getSpan().nextText("Departure/Arrival").parentTag("table4").getStart()),n=i.allInnerTags("table4").map(function(e){return e.allInnerTags("td4").map(function(e){return e.tagContents()}).filter(function(e){return e.getLength()})}).filter(function(e){return e.length>=1}).map(function(e){return e[e.length-1]});for(var a,m=0;a=n[m++];)a=""+a,o[a]={name:a,seats:{},seatingType:{}};var l=/What you need to know to travel:/.test(e.plain)?"What you need to know to travel:":"Carry-on Items";p.addFlightLegs(s,o,l,r.getSpan());for(var u=[],m=0;s.length>m;m++)for(var c=s[m],h=Object.keys(c.passengers),g=0;h.length>g;g++){var d=c.passengers[h[g]];schema={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:c.airlineName,airlineCode:c.airlineCode,flightNumber:c.flightNumber,departureAirportFuzzy:c.departureAirport,departureAirportCode:c.departureCode,departureTime:c.departureTime,arrivalAirportFuzzy:c.arrivalAirport,arrivalAirportCode:c.arrivalCode,arrivalTime:c.arrivalTime},underName:{"@type":"http://schema.org/Person",name:d.name},checkinUrl:t,reservationId:c.reservationId,reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:d.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:d.seats[c.flightNumber]}},totalPrice:d.totalPrice,priceCurrency:d.currency},not(d.membershipNumber)||(schema.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:d.membershipNumber,programName:"Rapid Rewards"}),u.push(schema)}if(u.length)return u}},"0/1/2/3/4/5/3/5/6/6/6/6/4/7/112/260/263","SGb3901f53")]);
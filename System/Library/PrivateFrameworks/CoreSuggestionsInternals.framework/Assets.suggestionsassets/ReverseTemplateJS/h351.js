// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var r=Scanner.fromMessage(e);r.setLocale(t);var a,i,o,s,x,d,g,p,c,h,m,l,u=r.getSpan(),f="Confirmed";a=u.next(n.underPersonNamePrefix).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s(.*)/,n.underPersonNamePrefix),1),i=r.getDetachedSpan(e.to).innerLink(),g=u.innerCapture(regExpFormatted(/\1\s(\d+\-\d+\-\d+)\s/,n.reservationIdPrefix),1),p=u.next(n.reservationModificationUrlPrefix).nextLink();var P=(""+u.next(n.bookingDetailBlockPrefix).nextAnyTag("table").nextAnyTag("td").tagContents()).split("\n");return o=P.shift(),d=P.join("\n"),x=u.nextText(n.hotelUrlPrefix).nextLink(),s=u.innerCapture(regExpFormatted(/<\1(.*)>/,n.hotelPhoneNumberPrefix),1),[c,h]=(""+u.next(n.hotelUrlPrefix).nextDate()).split(" - "),c=r.getDetachedSpan(c).innerDate(),h=r.getDetachedSpan(h).innerDate(),[,l,m]=u.next(RegExp(n.pricePrefix)).nextAnyTag("td").tagContents().innerCapture(/(\D)\s?([\d\,\.]+)/),ASSERT(OR(a,i),o,c)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:i},totalPrice:m,priceCurrency:l,checkinTime:c,checkoutTime:h,reservationStatus:"http://schema.org/Reservation"+f,reservationId:g,modifyReservationUrl:p,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:o,telephone:s,url:x,address:d}}]:void 0}}).call();
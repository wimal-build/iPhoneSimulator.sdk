// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r){var a=Scanner.fromMessage(e);a.setLocale(t);var n,i,s,p,o,c,l,g,m,d,x,u,h,T,f=a.getSpan();return i=f.innerCapture(regExpFormatted(/\1\s(.*?)\s/,r.reservationIdPrefix),1),o=f.nextText(r.ticketNumberPrefix).nextRegExp(/([0-9]+)/,1),airlineName=(""+f.nextText(r.airlineNameSuffix).previousAnyTag("td").tagContents().innerCapture(/\s?.*?\s(.*)/,1)).trim(),[,l,g]=f.nextText(r.airlineNameSuffix).previousAnyTag("td").tagContents().innerCapture(/([0-9A-Z]{2})(\d{3,4})/),d=(""+f.nextText(r.departureBlockPrefix).parentAnyTag("td").tagContents()).trim().replace(/\n/g," ").match(/.*?\s(.*?)\s\(.*?\)/)[1],x=(""+f.nextText(r.departureBlockPrefix).parentAnyTag("td").tagContents()).trim().replace(/\n/g," ").match(/\(\s?([A-Z]{3})\s?\)/)[1],m=a.getDetachedSpan((""+f.nextText(r.departureBlockPrefix).parentAnyTag("td").tagContents()).trim().replace(/\n/g," ").match(/\(\s?[A-Z]{3}\s?\)\s(.*)/)[1].replace(/(\d{2})\s(\d{2})\s(\d{4})/,"$1-$2-$3")).innerDate(),h=(""+f.nextText(r.arrivalBlockPrefix).parentAnyTag("td").tagContents()).trim().replace(/\n/g," ").match(/.*?\s(.*?)\s\(.*?\)/)[1],T=(""+f.nextText(r.arrivalBlockPrefix).parentAnyTag("td").tagContents()).trim().replace(/\n/g," ").match(/\(\s?([A-Z]{3})\s?\)/)[1],u=a.getDetachedSpan((""+f.nextText(r.arrivalBlockPrefix).parentAnyTag("td").tagContents()).trim().replace(/\n/g," ").match(/\(\s?[A-Z]{3}\s?\)\s(.*)/)[1].replace(/(\d{2})\s(\d{2})\s(\d{4})/,"$1-$2-$3")).innerDate(),n=(""+f.innerCapture(regExpFormatted(/\1\n(.*?)\.\D+\s/,r.underPersonNamePrefix),1)).replace(/(.*?)\/(.*)/,"$2 $1"),ASSERT(n,airlineName||l,d||x,m,h||T,u)?[{"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:airlineName,airlineCode:l,flightNumber:g,departureAirportFuzzy:d,departureAirportCode:x,departureTime:m,arrivalAirportFuzzy:h,arrivalAirportCode:T,arrivalTime:u},underName:{"@type":"http://schema.org/Person",name:n},checkinUrl:c,reservationId:i,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:s,priceCurrency:p,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:o,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:null,seatingType:null}}}]:CONTINUE}}).call();

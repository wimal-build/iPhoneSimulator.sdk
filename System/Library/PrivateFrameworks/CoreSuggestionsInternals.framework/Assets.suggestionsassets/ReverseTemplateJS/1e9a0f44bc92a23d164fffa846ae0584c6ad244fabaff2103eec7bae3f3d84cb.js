// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("expedia.com-flight-changes-en",function(e){return/^Changes have been made to your .*? flight/.test(e.subject)||/^Your flight itinerary .*? changed$/.test(e.subject)},function(e){if(/^Changes have been made to your .*? flight/.test(e.subject)||/^Your flight itinerary .*? changed$/.test(e.subject)){if(!/notifications@expedia.com/.test(e.from)){var r="en_US",t={};t.itineraryLabel="Revised Itinerary",t.confirmationLabel="Airline confirmation code",t.passenger="Traveler(s)",t.traveler="Traveler",t.ticketNo="Airline Ticket No.",t.cancelled=/Per your request, your flight is canceled/,t.cancelledLabel="CANCELED";var i=loadHelper("expediamail.com-flight-alternative-skeleton.js");return i(e,r,t)}var a=Scanner.fromMessage(e);a.setLocale("en_US");var n,l,o,s,c,p,u,d,m,v,g,f,h,b,T,y,C=[],k={};if(n=a.getSpan().nextText("Passenger(s):").parentAnyTag("td").tagContents().innerCapture(/\bPassenger\(s\): (.*)/,1),not(n))return CONTINUE;n=n.split(",").map(function(e){return e.trim()});for(var j=0;n.length>j;j++)k[""+n[j]]={name:n[j],seats:{},seatingType:{}};c=a.getSpan().nextText("Your updated flight itinerary is below").nextText("Flight Details").parentAnyTag("table");var x=c.getTagNumber();c=c.withStart(a.getSpan().nextText("Your updated flight itinerary is below").getEnd()).allInnerTags("tr"+x).map(function(e){return e.allInnerTagsFiltered("td"+x)}).filter(function(e){return e.length>0});for(var S=0;c.length>S;S++)if(l=c[S],l[0].innerCapture(/^Flight(?: Change)? Details/)&&l[1])g=l[1];else if(l[1]&&l[1].innerCapture(/^Flight Number:/))u=l[0],p=l[1].innerCapture(/^Flight Number: ($<code>\w{2})($<flightNumber>\d+)/),d=p?p.$code:null,m=p?p.$flightNumber:null,a.getSpan().nextText(""+u+" confirmation code:").exists()&&(o=a.getSpan().innerCapture(RegExp(regExpEscape(""+u)+" confirmation code: (.*)\\s"),1));else if(l[0].innerCapture(/^From:/)&&l[1])f=l[0].innerCapture(/^From: \(([A-Z]{3})\)/,1);else if(l[0].innerCapture(/^To:/)&&l[1])b=l[0].innerCapture(/^To: \(([A-Z]{3})\)/,1),T=l[1].innerCapture(/^Arrive: .* \+1 day$/),h=combineDateAndTime(g,l[1].lastInnerDate()),not(T)||(h=modifyDate(h,1));else if(l[1]&&l[1].innerCapture(/^Class:/))y=l[1].innerCapture(/^Class: (.*)/,1);else if(l[0].innerCapture(/^Equipment:/)){if(l[1]&&l[1].innerCapture(/^Seats:/)&&(s=l[1].innerCapture(/^Seats: (.*)/,1).split(",").map(function(e){return e.trim()})),valid(m)){n=Object.keys(k);for(var j=0;n.length>j;j++)valid(s)&&(k[n[j]].seats[""+m]=s[j]),valid(y)&&(k[n[j]].seatingType[""+m]=y)}ASSERT(d,m,g,f,h,b)&&C.push({airlineName:u,airlineCode:d,flightNumber:m,departureTime:g,departureCode:f,arrivalTime:h,arrivalCode:b,reservationId:o,passengers:k}),p=u=d=m=v=g=f=h=b=y=s=o=null}for(var N,I=[],S=0;C.length>S;S++){N=C[S];for(var R=Object.keys(N.passengers),A=0;R.length>A;A++){var E=N.passengers[R[A]],P={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:N.airlineName,airlineCode:N.airlineCode,flightNumber:N.flightNumber,departureAirportFuzzy:N.departureAirport,departureAirportCode:N.departureCode,departureTime:N.departureTime,arrivalAirportFuzzy:N.arrivalAirport,arrivalAirportCode:N.arrivalCode,arrivalTime:N.arrivalTime},underName:{"@type":"http://schema.org/Person",name:E.name},checkinUrl:N.checkinUrl,reservationId:N.reservationId,reservationStatus:"http://schema.org/Reservation"+(N.reservationStatus||"Confirmed"),totalPrice:E.price,priceCurrency:E.currency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:E.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:E.seats[N.flightNumber],seatingType:E.seatingType[N.flightNumber]}}};valid(E.membershipNumber,E.programName)&&(P.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:E.membershipNumber,programName:E.programName}),I.push(P)}}if(I.length)return I}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/805","SG7272f80d"),new ReverseTemplate("expediamail.com-car-cancellation-en",function(e){return/^Expedia Car Booking Cancelled/.test(e.subject)},function(e){if(/^Expedia Car Booking Cancelled/.test(e.subject)){var r="en_US",t={};t.total="Total Price",t.reserved="Reserved for",t.pickUp="Pick up",t.dropOff="Drop off",t.cancelled=/Expedia Car Booking Cancelled/;var i=loadHelper("expediamail.com-car-skeleton.js");return i(e,r,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/806","SG54e4ebe4"),new ReverseTemplate("expediamail.com-car-cancellation-nl",function(e){return/^Expedia-autoreservering geannuleerd/.test(e.subject)},function(e){if(/^Expedia-autoreservering geannuleerd/.test(e.subject)){var r="nl_NL",t={};t.total="Totaalprijs",t.reserved="Geboekt voor",t.pickUp="Ophalen",t.dropOff="Inleveren",t.cancelled=/^Expedia-autoreservering geannuleerd/;var i=loadHelper("expediamail.com-car-skeleton.js");return i(e,r,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/809","SG793be28d"),new ReverseTemplate("expediamail.com-car-confirmation-nl",function(e){return/^Reisbevestiging van Expedia/.test(e.subject)},function(e){if(/^Reisbevestiging van Expedia/.test(e.subject)&&/Autoverhuur/.test(e.plain)){var r="nl_NL",t={};t.total="Totaalprijs",t.reserved="Geboekt voor",t.pickUp="Ophalen",t.dropOff="Afleveren",t.reservationId="Reisplan #",t.cancelled=/Expedia Car Booking Cancelled/;var i=loadHelper("expediamail.com-car-skeleton.js");return i(e,r,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/813","SG9b1674d8"),new ReverseTemplate("expediamail.com-flight-cancellation-en",function(e){return/^Your flight itinerary .*? cancell?ed$/.test(e.subject)||/\(Itin(?:erary)?# \d+\)$/.test(e.subject)},function(e){var r,t="en_US",i={};return/This reservation has been fully cancell?ed/.test(e.plain)?(i.travellers=/Travell?er Information/,i.priceSummary="Price Summary",i.totalPrice="Total:",i.priceCurrency="All prices quoted in",i.reservationId="Itinerary #",i.cancelled=/This reservation has been fully cancell?ed/,i.noProgramName="No frequent flyer details provided",i.ticketNumber="Ticket #",i.totalTravelTime="Total travel time",i.seat="Seat",(r=loadHelper("expediamail.com-flight-itinerary-skeleton.js"))(e,t,i)):/^Your flight itinerary .*? cancell?ed$/.test(e.subject)?(i.itineraryLabel="Revised Itinerary",i.confirmationLabel="Airline confirmation code",i.passenger="Traveler(s)",i.traveler="Traveler",i.ticketNo="Airline Ticket No.",i.reservationId="Expedia Itinerary No.",i.cancelled=/Per your request, your flight is canceled/,i.cancelledLabel="CANCELED",(r=loadHelper("expediamail.com-flight-alternative-skeleton.js"))(e,t,i)):void 0},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/814","SG31e236d5"),new ReverseTemplate("expediamail.com-flight-itinerary-en",function(e){return/\(Itin(?:erary)?\s*#\s*\d+\)$/.test(e.subject)},function(e){if(/Travell?er Information/.test(e.plain)&&/Airline Rules & Regulations/.test(e.plain)){var r={};r.travellers=/Travell?er Information/,r.priceSummary="Price Summary",r.totalPrice="Total:",r.priceCurrency="All prices quoted in",r.reservationId="Itinerary #",r.cancelled=/This reservation has been fully cancell?ed/,r.noProgramName="No frequent flyer details provided",r.ticketNumber="Ticket #",r.totalTravelTime="Total travel time",r.seat="Seat";var t="en_US",i=loadHelper("expediamail.com-flight-itinerary-skeleton.js");return i(e,t,r)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/816","SG5a713d71"),new ReverseTemplate("expediamail.com-flight-itinerary-es_MX",function(e){return/^Itinerario/.test(e.subject)},function(e){if(/Itinerario/.test(e.subject)&&/Informaci\xf3n del pasajero/.test(e.plain)){var r="es_MX",t={};t.travellers=/Informaci\xf3n del pasajero/,t.priceSummary="Resumen de precios",t.totalPrice="Total:",t.priceCurrency="Todos los precios se muestran en",t.reservationId="Itinerario #",t.cancelled=/Se ha cancelado por completo esta reserva/,t.noProgramName="No se proporcion\xf3 la informaci\xf3n de viajero frecuente",t.ticketNumber="No. de boleto ",t.totalTravelTime="Tiempo total de viaje",t.seat="Seat";var i=loadHelper("expediamail.com-flight-itinerary-skeleton.js");return i(e,r,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/818","SG23f26d08"),new ReverseTemplate("expediamail.com-flight-itinerary-it",function(e){return/\(Itinerario# \d+\)$/.test(e.subject)||/^Itinerario/.test(e.subject)},function(e){if(/Informazioni sul viaggiatore/.test(e.plain)&&/Regolamenti della compagnia aerea/.test(e.plain)){var r={};r.travellers="Informazioni sul viaggiatore",r.priceSummary="Riepilogo prezzi",r.totalPrice="Totale:",r.priceCurrency="Prezzi calcolati in",r.reservationId="Itinerario #",r.cancelled=/La prenotazione \xe8 stata cancellata/,r.noProgramName="Dettagli Frequent Flyer non forniti",r.ticketNumber="N\xb0 biglietto",r.totalTravelTime="Durata totale del viaggio",r.seat="Posto a sedere";var t="it_IT",i=loadHelper("expediamail.com-flight-itinerary-skeleton.js");return i(e,t,r)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/820","SG5ee84934"),new ReverseTemplate("expediamail.com-flight-itinerary-nl",function(e){return/^Reisbevestiging van Expedia/.test(e.subject)||/Reisplan#/.test(e.subject)},function(e){if((/^Reisbevestiging van Expedia/.test(e.subject)||/Reisplan#/.test(e.subject))&&/Extra vluchtservices/.test(e.plain)){var r="nl_NL",t={};t.travellers=/Reizigersinformatie/,t.priceSummary="Prijsoverzicht",t.totalPrice="Totaal:",t.priceCurrency="Alle prijzen vermeld in",t.reservationId="Reisplan #",t.cancelled=/Deze boeking is volledig geannuleerd/,t.pending=/Je ticket is nog niet bevestigd/,t.noProgramName="Geen Frequent Flyer-informatie gegeven",t.ticketNumber="Ticketnummer ",t.totalTravelTime="Totale reistijd",t.seat="Seat";var i=loadHelper("expediamail.com-flight-itinerary-skeleton.js");return i(e,r,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/822","SGab6dd9be"),new ReverseTemplate("expediamail.com-hotel-cancellation-en",function(e){return/^Expedia Hotel Cancellation Confirmation/.test(e.subject)},function(e){if(/^Expedia Hotel Cancellation Confirmation/.test(e.subject)){var r="en_US",t={};t.reservationId="Expedia Itinerary number:",t.name="Reserved for";var i=loadHelper("expediamail.com-hotel-cancellation-skeleton.js");return i(e,r,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/823","SG2b1c7dbc"),new ReverseTemplate("expediamail.com-hotel-cancellation-nl",function(e){return/^Expedia Annuleringsbevestiging hotel/.test(e.subject)},function(e){if(/^Expedia Annuleringsbevestiging hotel/.test(e.subject)){var r="nl_NL",t={};t.reservationId="Expedia-reisplannummer:",t.name="Geboekt voor";var i=loadHelper("expediamail.com-hotel-cancellation-skeleton.js");return i(e,r,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/826","SG82c8058f"),new ReverseTemplate("expediamail.com-hotel-itinerary-en",function(e){return/^Expedia Itinerary #:/.test(e.subject)||/^Expedia travel confirmation/.test(e.subject)},function(e){if(/View hotel details/.test(e.plain)){var r={};r.reservedFor="Reserved for",r.reservationId="Itinerary #",r.hotelDetails="View hotel details <",r.telephone="Tel:",r.checkin="Checking in",r.checkinTime="Check-in time starts",r.priceSummary="Price Summary",r.totalPrice="Total",r.priceCurrency="All prices quoted in";var t="en_US",i=loadHelper("expediamail.com-hotel-itinerary-skeleton.js");return i(e,t,r)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/827","SG20b2853d"),new ReverseTemplate("expediamail.com-hotel-itinerary-it",function(e){return/Itin#/.test(e.subject)||/^Itinerario aggiornato/.test(e.subject)},function(e){if((/Itin#/.test(e.subject)||/^Itinerario aggiornato/.test(e.subject))&&/Servizi aggiuntivi hotel/.test(e.plain)){var r="it_IT",t={};t.reservedFor="Prenotata per",t.reservationId="Itinerario #",t.hotelDetails="Mostra dettagli hotel <",t.telephone="Tel:",t.checkin="Arrivo",t.checkinTime="Check-in dalle ore",t.priceSummary="Riepilogo prezzi",t.totalPrice="Totale",t.priceCurrency="Prezzi calcolati in";var i=loadHelper("expediamail.com-hotel-itinerary-skeleton.js");return i(e,r,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/830","SG1e292879"),new ReverseTemplate("expediamail.com-hotel-itinerary-nl",function(e){return/^Bijgewerkt reisplan/.test(e.subject)||/^Reisbevestiging van Expedia/.test(e.subject)},function(e){if((/^Bijgewerkt reisplan/.test(e.subject)||/^Reisbevestiging van Expedia/.test(e.subject))&&/Extra hoteldiensten/.test(e.plain)){var r="nl_NL",t={};t.reservedFor="Geboekt voor",t.reservationId="Reisplan #",t.hotelDetails="Hotelinformatie weergeven <",t.telephone="Tel:",t.checkin="Inchecken",t.checkinTime="Check-in vanaf",t.priceSummary="Prijsoverzicht",t.totalPrice="Totaal",t.priceCurrency="Alle prijzen vermeld in";var i=loadHelper("expediamail.com-hotel-itinerary-skeleton.js");return i(e,r,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/831","SG5bb95105"),new ReverseTemplate("expediamail.com-travel-itinerary-en",function(e){return/^Your Trip Details/.test(e.subject)||/^Final Details For Your Trip/.test(e.subject)},function(e){if(/^Your Trip Details/.test(e.subject)||/^Final Details For Your Trip/.test(e.subject)){var r={flight:{},car:{},hotel:{}};r.emailHeader=["My Itineraries","My Account","Customer Support","Feedback"],r.mainContact="Main contact:",r.emailAddress="Email address:",r.confirmationCode="Confirmation Code:",r.flight.verify="Airline rules and regulations",r.flight.travelers=/Travell?er's name\(s\):/,r.flight.checkinUrl=/Online(?: Flight)? Check-in/,r.flight.details="Flight Details",r.flight.depart="Depart",r.flight.arrive="Arrive",r.flight.flightNumber="Flight Number:",r.flight.seatUnassigned="Seat Unassigned",r.car.verify="Car rules and regulations",r.car.pickup="Pick-up",r.car.dropoff="Drop-off",r.car.address="Address:",r.car.modify="Change/ Cancel <",r.hotel.verify="Hotel rules and regulations",r.hotel.checkin="Check-in",r.hotel.checkout="Check-out",r.hotel.modify="Change/Cancel",r.hotel.address="Address:",r.hotel.telephone="Telephone:";var t="en_US",i=loadHelper("expediamail.com-travel-itinerary-skeleton.js");return i(e,t,r)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/804/839","SG1eed6715")]);
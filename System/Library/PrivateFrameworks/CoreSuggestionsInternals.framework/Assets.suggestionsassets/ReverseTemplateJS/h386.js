// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,a,r){if(!(e&&t&&a&&r))return CONTINUE;var n=loadHelper("opentable.com-microdata-parser.js"),p=n(e);if(p)return p;var o=Scanner.fromMessage(e);o.setLocale(t);var s,g,i,l,m,d,c,h,u,S,x,E,C;return s=o.getSpan().innerCapture(regExpFormatted(/\b\1\s?(.*),/,a.hello),1),s.exists()||(s=o.getSpan().innerCapture(regExpFormatted(/(.+?)\s*\1/,a.hello),1)),g=o.getSpan().innerCapture(regExpFormatted(/\1: (\d+)/,a.number),1),m=o.getSpan().next(a.cancel).nextText(a.person),l=o.getSpan().withStart(m.previousText("\n").getEnd()).withEnd(m.nextText("\n").getStart()).innerCapture(regExpFormatted(/(\d+)/),1),l.exists()||(l=o.getSpan().innerCapture(regExpFormatted(/(\d+) \1/,a.person),1)),C=o.getSpan().next(a.cancel).collapseToEnd().withEnd(o.getSpan().next(a.cancel).nextText(a.number).getStart()).trim(),a.nameCapture&&(i=o.getSpan().innerCapture(a.nameCapture,1)),(a.nameCapture&&!i.exists()||!a.nameCapture)&&(i=C.innerCapture(regExpFormatted(/^(.+)/),1)),h=C.allInnerDates(),h.length>0&&(h=o.getSpan().withStart(h[0].getStart()).withEnd(h[h.length-1].getEnd()),c=getFuzzyDate(o.getDetachedSpan((""+h).replace(/[^\d\sa-zA-z:]+/g,"").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/")))),ASSERT(l,i,c,s)?[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:l,reservationId:g,reservationStatus:"http://schema.org/ReservationCancelled",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:i,url:d,telephone:u,address:S},startTime:c,bookingAgent:{"@type":"http://schema.org/Organization",name:"OpenTable",url:"http://www."+r+"/"},underName:{"@type":"http://schema.org/Person",name:s},cancelReservationUrl:E,modifyReservationUrl:x}]:CONTINUE}}).call();
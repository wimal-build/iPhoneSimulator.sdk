// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var r=Scanner.fromMessage(e);r.setLocale(t);var a,i,p,o,s,g,d,x,c,m,u,f,h,l,C,S,v,_,T,y="Confirmed";a=r.getSpan().next(n.underPersonName_prefix).nextAnyTag("td").tagContents().split(/[,\u3001]/)[0],i=r.getSpan().next(n.underPersonName_prefix).next(n.underPersonDetails_prefix).nextAnyTag("td").tagContents().split(",")[0],h=r.getSpan().innerCapture(regExpFormatted(/\1\s+?(\d+)\./,n.reservationId_prefix),1),g=""+r.getSpan().next(n.checkinDate_prefix).nextAnyTag("td").tagContents(),s=(""+r.getSpan().next(n.checkinTime_prefix).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+?(.*)/,n.checkinTime_prefix),1)).replace(".",":"),d=g+" "+s,c=""+r.getSpan().next(n.checkoutDate_prefix).nextAnyTag("td").tagContents(),x=(""+r.getSpan().next(n.checkoutTime_prefix).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+?(.*)/,n.checkoutTime_prefix),1)).replace(".",":"),m=c+" "+x,"ja_JP"===t&&(d=d.replace(/ /g,""),m=m.replace(/ /g,"")),d=r.getDetachedSpan(d).innerDate(),m=r.getDetachedSpan(m).innerDate(),S=r.getSpan().next(n.checkinTime_prefix).previousPhoneNumber(),C=r.getSpan().next(n.reservationForAddress_prefix).previousLink(),l=r.getSpan().next(n.reservationForAddress_prefix).parentAnyTag("td").tagContents().innerCapture(/\s+?(.*?)\s+?</,1),l===r.getNullSpan()&&(l=r.getSpan().next(n.reservationForAddress_prefix).previousAnyTag("td").tagContents().innerCapture(/(.*?)\s+</,1));r.getSpan().next(n.reservationForAddress_prefix).parentAnyTag("td").tagContents();v=(""+r.getSpan().next(n.reservationForAddress_prefix).parentAnyTag("td").tagContents()).replace(/\n/g," ").match(RegExp(n.reservationForAddress_prefix+"(.*)"+S))[1].replace(/\+/,"").trim(),u=r.getSpan().next(n.modifyReservationUrl_prefix).nextLink();var A=r.getSpan().next(n.price_prefix).nextAnyTag("td").tagContents();return p=""+A.innerCapture(/([\d,.]+)/,1),o=(""+A.tagContents()).replace(""+p,"").trim(),[,_,T]=r.getSpan().innerCapture(regExpFormatted(/\1\s*([-0-9]+\.?[0-9]*),\s*([-0-9]+\.?[0-9]*)/,n.geoCoordinates_prefix)),ASSERT(a,l,s)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:i},totalPrice:p,priceCurrency:o,checkinTime:d,checkoutTime:m,modifyReservationUrl:u,cancelReservationUrl:f,reservationStatus:"http://schema.org/Reservation"+y,reservationId:h,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:l,url:C,telephone:S,address:v,geo:{"@type":"http://schema.org/GeoCoordinates",latitude:_,longitude:T}}}]:CONTINUE}}).call();

// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var r=Scanner.fromMessage(e);r.setLocale(t);var a,o,i,g,p,s,x,u,c,d,l;a=r.getSpan().innerCapture(regExpFormatted(/\1\s(.*),/,n.underPersonNamePrefix),1),o=e.to,a===r.getNullSpan()&&(a=r.getSpan().innerCapture(regExpFormatted(/(.*)\1/,n.underPersonNamePrefix),1)),x=r.getSpan().innerCapture(regExpFormatted(/\1\s+?(\w+)\s+?\n/,n.reservationIdPrefix),1),i=r.getSpan().nextText(n.reservationIdPrefix).nextLink().nextLink().nextAnyTag("td").tagContents().innerCapture(/(.*)\n/,1),g=r.getSpan().nextText("Your Host ").nextPhoneNumber(),p=r.getSpan().nextText(n.reservationIdPrefix).nextTag("table3").tagContents().nextLink(),s=r.getSpan().nextText(n.reservationIdPrefix).nextTag("table2").tagContents().innerCapture(/(.*)\n/,1);var m=s.innerLink();m!==r.getNullSpan()&&(m=m.innerCapture(/daddr=(.*),(.*)/)),u=r.getSpan().next(n.checkInDateTimePrefix).nextDate(),c=r.getSpan().nextText(n.checkOutDateTimePrefix).nextDate();var h=r.getSpan().nextText(n.pricePrefix).nextTag("td2").tagContents();return l=""+h.innerCapture(/(.)\d+/,1),d=(""+h.tagContents()).replace(""+l,""),ASSERT(OR(a,o),i,u)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:o},totalPrice:d,priceCurrency:l,checkinTime:u,checkoutTime:c,reservationStatus:"http://schema.org/ReservationConfirmed",reservationId:x,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:i,telephone:g,url:p,address:"number"==typeof m.length&&3===m.length?null:s,geo:"number"==typeof m.length&&3===m.length?{"@type":"http://schema.org/GeoCoordinates",latitude:m[1],longitude:m[2]}:null}}]:CONTINUE}}).call();
// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("hawaiiairlines.com-reservation-confirmation-en",function(e){return/^Reservation Confirmation/.test(e.subject)},function(e){if(/^Reservation Confirmation/.test(e.subject)){var r="en_US",t=Scanner.fromMessage(e);if(t.setLocale(r),t.getSpan().next("Air Itinerary").exists()){var a={};a.reservationId="Your Hawaiian Airlines Reservation Confirmation:",a.itinerary="Air Itinerary",a.to="to",a.passenger="Name:",a.price="Total Air Travel Cost",a.checkInUrl="Web Check-in",a.passengerInfo="Passenger Info and Cost Breakdown",a.frequentFlyer=/(HawaiianMiles #)/;var n=loadHelper("hawaiiairlines.com-confirmation-skeleton.js");return n(e,r,a)}var i,o,s,l,p,m,g,u,d,c,h,T,C,f,v,b,y,x,A,N,$,S,I,k=[],D={};o=t.getSpan().innerCapture(/Reservation Confirmation:\s+([A-Z]{6})\s+</,1),s=t.getSpan().nextText("Web Check-in <").nextLink(),p=t.getSpan().nextText("Passenger and Seating Information").nextTag("table2").allInnerTags("table3"),h=t.getSpan().nextText("TOTAL COST").parentAnyTag("td").tagContents();var w=h.innerCapture(/TOTAL COST \(([A-Z]{3})\)/,1),F=h.nextAnyTag("td").tagContents().innerCapture(/([\d,.]+)/,1);if(p.length){var R=p[0].allInnerTagsFiltered("td3");for(I=1;p.length>I;I++){T=p[I].allInnerTags("td3");var M;if(T.length>=4&&((""+R[0]).indexOf("HawaiianMiles")>=0?(l=T[1].tagContents().innerCapture(/($<name>[^\d]+)(?:($<membershipNumber>[\d ]+))?/),M=l?l.$membershipNumber:null,l=l?l.$name.trim():null,i=T[2].tagContents()):(""+R[1]).indexOf("HawaiianMiles")>=0&&(l=T[1].tagContents(),M=T[2].tagContents(),i=T[3].tagContents()),valid(l)&&(D[""+l]={name:l,seats:{},seatingType:{},programName:"Hawaiian Miles",membershipNumber:M,ticketNumber:i,totalPrice:F,priceCurrency:w},m=p[I].innerTag("table4").innerTag("tr4").allInnerTags("td4").map(function(e){return e.tagContents()}),m.length%2===0)))for(var O=0;m.length/2>O;O++)m[2*O].getLength()&&(D[""+l].seats[""+m[2*O]]=m[2*O+1].tagContents())}}d=t.getSpan().nextText("Flight").nextText("Date").nextText("Depart").nextText("Arrive").parentTag("table2").allInnerTags("table3").map(function(e){return e.allInnerTagsFiltered("td3")}).filter(function(e){return e.length>=5});for(I=1;d.length>I;I++)u=d[I],C=u[0].innerCapture(/($<code>\D+)($<flightNumber>\d+)/),f=C?C.$code:null,c=C?C.$flightNumber:null,g=u[1].innerDate(),b=combineDateAndTime(g,u[2].innerDate()),N=combineDateAndTime(g,u[3].innerDate()),v=u[2].innerCapture(/($<airport>.*) \(($<code>[A-Z]{3})\)/),y=v?v.$airport:null,x=v?v.$code:null,A=u[3].innerCapture(/($<airport>.*) \(($<code>[A-Z]{3})\)[^+]+($<nextDay>\+1)?/),$=A?A.$airport:null,S=A?A.$code:null,A&&valid(A.$nextDay)&&(N=modifyDate(N,1)),ASSERT(f,c,b,x,N,S)&&k.push({airlineCode:f,flightNumber:c,departureTime:b,departureAirport:y,departureCode:x,arrivalTime:N,arrivalAirport:$,arrivalCode:S,passengers:D});var P=[];for(I=0;k.length>I;I++)for(var z=k[I],H=Object.keys(z.passengers),L=0;H.length>L;L++){var j=z.passengers[H[L]],U={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:z.airlineName,airlineCode:z.airlineCode,flightNumber:z.flightNumber,departureAirportFuzzy:z.departureAirport,departureAirportCode:z.departureCode,departureTime:z.departureTime,arrivalAirportFuzzy:z.arrivalAirport,arrivalAirportCode:z.arrivalCode,arrivalTime:z.arrivalTime},underName:{"@type":"http://schema.org/Person",name:j.name},checkinUrl:s,reservationId:o,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:j.totalPrice,priceCurrency:j.priceCurrency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:i,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:j.seats[""+z.airlineCode+(""+z.flightNumber)],seatingType:j.seatingType[z.flightNumber]}}};valid(j.membershipNumber,j.programName)&&(U.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:j.membershipNumber,programName:j.programName}),P.push(U)}if(P.length)return P}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/185/339/340","SG5fc144b3")]);
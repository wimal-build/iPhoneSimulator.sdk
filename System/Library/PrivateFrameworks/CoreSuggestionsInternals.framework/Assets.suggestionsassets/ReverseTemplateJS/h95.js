// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,r,t){var a=Scanner.fromMessage(e);a.setLocale(r);var i,p,n,o,u,s,m=a.getSpan(),c=[],d=[],g=1,l="Confirmed",h="NH",v="All Nippon Airways";n=m.innerCapture(regExpFormatted(/\1.*\n\s(.*)\n/,t.reservationId_prefix),1),i=m.innerCapture(regExpFormatted(/\1.*\n\s(.*)\n/,t.name_prefix),1);for(var z=m.innerCapture(regExpFormatted(/\1(.*)\n(.*)\n(.*)\n(.*)\n/,"["+g+"]"));z;){var y,F,p={};y=F=getFuzzyDate(a.getDetachedSpan(""+z[1]).firstDate()),p.flightNumber=/NH(.*)/.exec(z[1])[1];var f=/\s(.*)\s-\s(.*)/.exec(z[2]);p.departureAirportFuzzy=f[1],p.arrivalAirportFuzzy=f[2];var A=/\s(.*)\u767a(.*)\u7740/.exec(z[3]),D=A[1],T=A[2];p.departureDateTime=getFuzzyDate(a.getDetachedSpan(""+y+(""+D)).firstDate()),p.arrivalDateTime=getFuzzyDate(a.getDetachedSpan(""+F+(""+T)).firstDate()),p.seatingType=/\s(.*)\//.exec(z[4])[1],ASSERT(p.flightNumber,p.departureDateTime,p.arrivalDateTime,p.departureAirportFuzzy,p.arrivalAirportFuzzy)&&c.push(p),g++,z=m.innerCapture(regExpFormatted(/\1(.*)\n(.*)\n(.*)\n(.*)\n/,"["+g+"]"))}for(var N=0;c.length>N;N++){var x=c[N],C={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:v,airlineCode:h,flightNumber:x.flightNumber,departureAirportFuzzy:x.departureAirportFuzzy,departureAirportCode:x.departureAirportCode,departureTime:x.departureDateTime,arrivalAirportFuzzy:x.arrivalAirportFuzzy,arrivalAirportCode:x.arrivalAirportCode,arrivalTime:x.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:i},checkinUrl:s,reservationId:n,reservationStatus:"http://schema.org/Reservation"+l,totalPrice:o,priceCurrency:u,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:x.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:x.seatNumber,seatingType:x.seatingType}}};d.push(C)}return d.length?d:void 0}}).call();
// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("lufthansa.com-e-ticket-en",function(e){return/^Travel Information/.test(e.subject)||/^Booking details\,/.test(e.subject)},function(e){if(/^Travel Information/.test(e.subject)||/^Booking details\,/.test(e.subject)){var r="en_US",t={};t.reservationCodePrefix="Reservation code:",t.passengerNamePrefix=/((?:New)?\s*Travel dates for\:)/i,t.ticketNumberPrefix="Ticket number",t.flightColumnHeader="Flight",t.dateColumnHeader="Date",t.departureAirportColumnHeader="from",t.arrivalAirportColumnHeader="to",t.departureTimeColumnHeader="Departure",t.arrivalTimeColumnHeader="Arrival",t.operatedByPrefix="operated by:",t.reservationColumnHeader="Reservation",t.baggageRegulations=/(Baggage regulations|Flight information)/,t.seatPrefix="seat";var a=loadHelper("lufthansa.com-e-ticket.js");return a(e,r,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/510/512","SGe9b28459"),new ReverseTemplate("lufthansa.com-e-ticket-es",function(e){return/^Detalles de la reserva/.test(e.subject)},function(e){if(/^Detalles de la reserva/.test(e.subject)){var r="es_ES",t={};t.reservationCodePrefix="C\xf3digo de reserva:",t.travelInformationHeader="Detalles de la reserva",t.passengerNamePrefix="Fechas del viaje para:",t.ticketNumberPrefix="N\xfamero de billete",t.flightColumnHeader="Vuelo",t.dateColumnHeader="Fecha",t.departureAirportColumnHeader="De",t.arrivalAirportColumnHeader="A",t.departureTimeColumnHeader="Salida",t.arrivalTimeColumnHeader="Llegada",t.operatedByPrefix="operado por:",t.reservationColumnHeader="Reserva",t.baggageRegulations="Informaci\xf3n de vuelos",t.seatPrefix="asiento";var a=loadHelper("lufthansa.com-e-ticket.js");return a(e,r,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/510/513","SG6cb2de72"),new ReverseTemplate("lufthansa.com-e-ticket-it",function(e){return/^Dettagli della prenotazione/.test(e.subject)},function(e){if(/^Dettagli della prenotazione/.test(e.subject)){var r="it_IT",t={};t.reservationCodePrefix="Codice di prenotazione:",t.passengerNamePrefix=/(Le nuove date del viaggio sono|Date di viaggio per)\:/i,t.ticketNumberPrefix="Numero del biglietto",t.flightColumnHeader="Volo",t.dateColumnHeader="Data",t.departureAirportColumnHeader="Da",t.arrivalAirportColumnHeader="A",t.departureTimeColumnHeader="Partenza",t.arrivalTimeColumnHeader="Arrivo",t.operatedByPrefix="operato da",t.reservationColumnHeader="Prenotazione",t.baggageRegulations=/(Informazione sui suoi voli|regolamenti bagagli)/,t.seatPrefix="posto";var a=loadHelper("lufthansa.com-e-ticket.js");return a(e,r,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/510/514","SG7faa7170"),new ReverseTemplate("lufthansa.com-ticket-details",function(e){return/^Your ticket details & travel information/.test(e.subject)},function(e){if(/^Your ticket details & travel information/.test(e.subject)){var r="Reservation code:",t="Total Price for all passengers",a="Travel dates for:",i="Your flight itinerary",n="Total Price of your Ticket",o="seat:",l=Scanner.fromMessage(e);if(l.setLocale("en_US"),!l.getSpan().nextText("Reservation code:").exists())return CONTINUE;var s,u,d,m,p,g,c,v,f,h,b,T,C,x,H=[],N={};v=l.getSpan().innerCapture(regExpFormatted(/\1\s+($<reservationId>.*?) <($<checkinUrl>.*)>/,r)),s=v?v.$reservationId:null,u=v?v.$checkinUrl:null;var k,S;k=l.getSpan().nextText(t).nextTag("td1").nextTag("td1").tagContents(),S=k.nextTag("td1").tagContents(),m=l.getSpan().nextText(a).parentTag("table5").allInnerTagsFiltered("td5"),m.length&&(d=""+m[1],N[d]={name:d,price:S,currency:k,seats:{}}),g=l.getSpan().nextText(i).nextTag("table1").nextTag("table1").withEnd(l.getSpan().nextText(n).getStart()).allInnerTags("table1");for(var P,A=0;P=g[A++];)if(p=P.allInnerTagsFiltered("td1"),7===p.length){f=p[0].innerCapture(/^($<code>[A-Z]+) ($<flightNumber>\d+)/),h=f?f.$code:null,c=f?f.$flightNumber:null;var y=p[1].allDates();y&&(b=l.getDetachedSpan(""+y[0]+" "+p[4]).innerDate(),C=l.getDetachedSpan((1===y.length?""+y[0]:""+y[1])+" "+p[5]).innerDate()),T=p[2].innerCapture(/^([^<\n]+)/,1),x=p[3].innerCapture(/^([^<\n]+)/,1);var R=p[6].innerCapture(RegExp("\\b"+o+" ([\\w]+)"),1);valid(R,c)&&(N[d].seats[c]=R),ASSERT(h,c,b,T,C,x)&&H.push({airlineCode:h,flightNumber:c,departureAirport:T,departureTime:b,arrivalAirport:x,arrivalTime:C,passengers:N})}for(var D=[],A=0;H.length>A;A++)for(var j=H[A],F=Object.keys(j.passengers),I=0;F.length>I;I++){var z=j.passengers[F[I]],w={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:"LH",flightNumber:j.flightNumber,departureAirportFuzzy:j.departureAirport,departureAirportCode:j.departureCode,departureTime:j.departureTime,arrivalAirportFuzzy:j.arrivalAirport,arrivalAirportCode:j.arrivalCode,arrivalTime:j.arrivalTime},underName:{"@type":"http://schema.org/Person",name:z.name},checkinUrl:u,reservationId:s,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:z.price,priceCurrency:z.currency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:z.seats[j.flightNumber]}}};valid(z.membershipNumber,z.programName)&&(w.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:z.membershipNumber,programName:z.programName}),D.push(w)}if(D.length)return D}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/510/515","SGaf720b5e")]);

// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("travelocity.com-car-cancellation-en",function(e){return/^Travelocity Car Booking Cancelled/.test(e.subject)},function(e){return/^Travelocity Car Booking Cancelled/.test(e.subject)?STOP:void 0},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/903/905","SG465c4cb1"),new ReverseTemplate("travelocity.com-car-confirmation-en",function(e){return/^Travelocity\s+travel confirmation/.test(e.subject)||/^Car rental/i.test(e.subject)},function(e){if(/^Travelocity\s+travel confirmation/.test(e.subject)&&/Car rental/i.test(e.html)||/^Car rental/i.test(e.subject)){var t,r="en_US",a={};return int(e.epoch)<1404172800?(a.carRentalSummary="Car rental summary",a.provider="Reservation has been sent to",a.reservationId="confirmation number:",a.travelerDetails="Traveler and cost summary",a.name="Driver:",a.price="Car rental total",a.rentalSummary="Car rental summary",a.pickupTime="Pick up:",a.dropoffTime="Drop off:",a.pickupAddress="Location:",a.cancellationUrl="Remember to cancel this car reservation",t=loadHelper("travelocity-car-skeleton-old.js")):(a=loadHelper("travelocity.com-vocabulary-en.js")().car,t=loadHelper("travelocity-car-skeleton-new.js")),t(e,r,a)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/903/906","SGdd143b67"),new ReverseTemplate("travelocity.com-flight-change-en",function(e){return/^Changes have been made to your.*flight$/.test(e.subject)},function(e){if(/Changes have been made to your.*flight$/.test(e.subject)){var t="en_US",r={};r.itinerary="Your updated flight itinerary is below",r.flightNumber="Flight Number:",r.from="From:",r.to="To:",r.arrive="Arrive:",r.seatingType="Class:",r.passengers="Passenger(s):",r.reservationId="Travelocity Itinerary Number:",r.seatNumber="Seat:";var a,n,i,o,l,s,c,m,u,p,v=[],d=[],g=Scanner.fromMessage(e);for(g.setLocale(t),c=g.getSpan().next(r.reservationId).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,r.reservationId),1),a=g.getSpan().next(r.itinerary).nextAnyTag("table").allInnerTags("tr2"),m=g.getSpan().next(r.passengers).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,r.passengers),1),d.push(m),n=0;a.length>n;n++)a[n].tagContents().innerCapture(/\s+to\s+/)&&(u={},u.reservationStatus=a[n].nextAnyTag("td").nextAnyTag("td").tagContents().innerCapture(/Cancelled/)?"Cancelled":"Confirmed",i=a[n].nextDate().parentAnyTag("td").lastInnerDate(),o=a[n].next(r.flightNumber).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+($<airlineCode>[A-Z]+)(?:($<flightNumber1>\d+)|.*\s+($<flightNumber2>\d+)\s+\()/,r.flightNumber)),u.airlineCode=o.$airlineCode,u.flightNumber=""+o.$flightNumber1==""?o.$flightNumber2:o.$flightNumber1,u.airlineName=u.airlineCode.previousAnyTag("td").tagContents(),o=u.airlineName.next(r.from).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+($<departureAirport>.*),.*\(($<departureCode>.*)-/,r.from)),u.departureAirport=o.$departureAirport,u.departureCode=o.$departureCode,o=u.airlineName.next(r.to).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+($<arrivalAirport>.*),.*\(($<arrivalCode>.*)-/,r.to)),u.arrivalAirport=o.$arrivalAirport,u.arrivalCode=o.$arrivalCode,u.arrivalTime=u.airlineName.next(r.arrive).parentAnyTag("td").tagContents().lastInnerDate(),u.departureTime=i,u.arrivalTime=combineDateAndTime(i,u.arrivalTime),u.seatingType=u.airlineName.next(r.seatingType).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,r.seatingType),1),u.seatNumber=u.seatingType.nextAnyTag("tr").inner(r.seatNumber).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,r.seatNumber),1),ASSERT(u.departureTime,u.arrivalTime,u.departureCode,u.arrivalCode,u.airlineCode,u.flightNumber)&&v.push(u));var y,f=[];for(n=0;v.length>n;n++){var h=v[n];for(p=0;d.length>p;p++)y={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:h.airlineName,airlineCode:h.airlineCode,flightNumber:h.flightNumber,departureAirportFuzzy:h.departureAirport,departureAirportCode:h.departureCode,departureTime:h.departureTime,arrivalAirportFuzzy:h.arrivalAirport,arrivalAirportCode:h.arrivalCode,arrivalTime:h.arrivalTime},underName:{"@type":"http://schema.org/Person",name:d[p]},checkinUrl:h.checkinUrl,reservationId:c,reservationStatus:"http://schema.org/Reservation"+(h.reservationStatus||"Confirmed"),reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:null,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:h.seatNumber,seatingType:h.seatingType}},totalPrice:l,priceCurrency:s},f.push(y)}if(f.length)return f}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/903/908","SG9899900f"),new ReverseTemplate("travelocity.com-flight-confirmation-en",function(e){return/^Travelocity travel confirmation/.test(e.subject)||/Itinerary#/.test(e.subject)},function(e){if(/Travelocity travel confirmation/.test(e.subject)||/Itinerary#/.test(e.subject)&&/Additional Flight Services/.test(e.plain)){var t="en_US",r={};r.flightSummary="Airline Rules & Regulations",r.names="Traveler Information",r.price="Price Summary",r.totalPrice="Total:",r.priceCurrency="All prices quoted in",r.frequentFlyer="No frequent flyer details",r.programName="Frequent Flyer",r.ticketNumber="Ticket",r.travelerInfo="Traveler Information",r.importantInfo="Important Information",r.reservationId="Itinerary #",r.cancelled=/This reservation has been fully cancelled/;var a=loadHelper("travelocity-flight-skeleton.js");return a(e,t,r)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/903/909","SG6a22fa57"),new ReverseTemplate("travelocity.com-hotel-cancellation-en",function(e){return/^Travelocity Hotel (?:Cancellation)?\s*Confirmation/.test(e.subject)},function(e){if(/^Travelocity Hotel Cancellation Confirmation/.test(e.subject)||/All rooms in this reservation have been cancelled/.test(e.plain)){var t,r="en_US",a={};return/All rooms in this reservation have been cancelled/.test(e.plain)?(a=loadHelper("travelocity.com-vocabulary-en.js")().hotel,t=loadHelper("travelocity.com-hotel-confirmation-skeleton.js")):(a.name="Reserved for",a.reservationId="Travelocity Itinerary number:",t=loadHelper("travelocity.com-hotel-cancellation-skeleton.js")),t(e,r,a)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/903/911","SGbfb3515a"),new ReverseTemplate("travelocity.com-hotel-confirmation-en",function(e){return/(^Travelocity travel confirmation|Itinerary\s*#)/.test(e.subject)},function(e){if(/(^Travelocity travel confirmation|Itinerary\s*#)/.test(e.subject)&&!/car rental/i.test(e.html)&&/Additional Hotel Services/.test(e.plain)){var t="en_US",r=loadHelper("travelocity.com-vocabulary-en.js")().hotel,a=loadHelper("travelocity.com-hotel-confirmation-skeleton.js");return a(e,t,r)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/771/903/912","SGe3435f47")]);
// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var r=Scanner.fromMessage(e);r.setLocale(t);var a,p,o,i,s,c,g,d,l,m,h,u,x,T,C,v,f,S,y,R;if(n.confirmSubject.test(e.subject)){o=r.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),a=r.getSpan().nextText(n.guestName).nextTag("td4").nextTag("td4").tagContents(),c=r.getSpan().nextText(n.modifyUrl).parentTag("td3").tagContents().innerLink(),g=c,m=r.getSpan().nextText(n.car).nextTag("table3").nextTag("td3").tagContents();var k=r.getSpan().nextText(n.pickup).parentTag("table3");R=k.innerDate(t),y=k.innerPhoneNumber();var A=k.nextText(n.pickupAddress).parentTag("td3").tagContents();k=0===(""+A).length&&n.pickupAddressAlt?k.nextText(n.pickupAddressAlt).parentTag("td3").tagContents():A,(""+k).indexOf(n.telephone)>-1?S=k.innerCapture(regExpFormatted(/\1([\s\S]*)\2/,n.pickupAddress,n.telephone),1).trim():(k=(""+k).split("\n"),S=k.slice(4).join("\n"));var E=r.getSpan().nextText(n.dropoff).parentTag("table3");v=E.innerDate(t),C=E.innerPhoneNumber();var I=E.nextText(n.pickupAddress).parentTag("td3").tagContents();E=0===(""+I).length&&n.pickupAddressAlt?E.nextText(n.pickupAddressAlt).parentTag("td3").tagContents():I,(""+E).indexOf(n.telephone)>-1?T=E.innerCapture(regExpFormatted(/\1([\s\S]*)\2/,n.pickupAddress,n.telephone),1).trim():(E=(""+E).split("\n"),T=E.slice(4).join("\n"));var N=r.getSpan().nextText(n.price).nextTag("td4").tagContents();0===(""+N).length&&n.priceAlt&&(N=r.getSpan().nextText(n.priceAlt).nextTag("td4").tagContents());var b=N.innerCapture(/^(.+)\(/,1);if(0===(""+N).length&&(N=b),n.priceInner){var P=N.innerCapture(n.priceInner,1);0!==(""+P).length&&(N=N.innerCapture(n.priceInner,1))}if(d=N.innerCapture(/([\d,.]+)/,1),l=N.innerCapture(/([^\d,.]+)/,1).trim(),!ASSERT(a,o,R,v,S,T))return CONTINUE}else if(n.cancellationSubject.test(e.subject)&&(a=r.getSpan().nextRegExp(n.cancelGuestName).tagContents().innerCapture(n.cancelGuestName,1),o=r.getSpan().nextRegExp(n.cancelReservationId).tagContents().innerCapture(n.cancelReservationId,1),i="Cancelled",R=r.getSpan().nextText(n.time).nextDate(),!ASSERT(a,o)))return CONTINUE;return m?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:d,priceCurrency:l,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),checkinUrl:s,modifyReservationUrl:c,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:a,email:p},provider:{"@type":"http://schema.org/Organization",name:"Europcar"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:m},license:h,color:u},pickupTime:R,pickupLocation:{"@type":"http://schema.org/Place",name:f,telephone:y,address:S},dropoffTime:v,dropoffLocation:{"@type":"http://schema.org/Place",name:x,telephone:C,address:T}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:d,priceCurrency:l,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),checkinUrl:s,modifyReservationUrl:c,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:a,email:p},provider:{"@type":"http://schema.org/Organization",name:"Europcar"},pickupTime:R,pickupLocation:{"@type":"http://schema.org/Place",name:f,telephone:y,address:S},dropoffTime:v,dropoffLocation:{"@type":"http://schema.org/Place",name:x,telephone:C,address:T}}]}}).call();
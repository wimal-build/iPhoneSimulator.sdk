// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r){if(!e||!t||!r)return CONTINUE;var n=Scanner.fromMessage(e);n.setLocale(t);var a,o,p,s,i,g,m,d,c,h,u,l;return p=n.getSpan().innerCapture(regExpFormatted(/\1: (\d+) \2/,r.guest,r.person),1).trim(),o=n.getSpan().innerCapture(regExpFormatted(/\1: (.*)/,r.restaurant),1),h=n.getSpan().innerCapture(regExpFormatted(/\1: (.*)/,r.reference),1),m=getFuzzyAddress(n.getDetachedSpan((""+n.getSpan().nextText(r.phone).previousText(o).collapseToEnd().withEnd(n.getSpan().nextText(r.phone).getStart())).replace(",",""))),i=getFuzzyDate(n.getSpan().nextText(r.restaurant).collapseToEnd().withEnd(n.getSpan().nextText(r.guest).getStart())),a=n.getDetachedSpan((""+n.getSpan().innerCapture(regExpFormatted(/\1 (.*),/,r.dear,r.mister),1)).replace(r.mister,"")).trim(),u=n.getSpan().innerCapture(regExpFormatted(/\1 (.*)</,r.visit),1).trim(),l=n.getSpan().nextText(r.visit).nextLink(),ASSERT(p,o,i,a)?[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:p,reservationId:h,reservationStatus:"http://schema.org/ReservationCancelled",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:o,url:s,telephone:g,address:m},startTime:i,bookingAgent:{"@type":"http://schema.org/Organization",name:u,url:l},underName:{"@type":"http://schema.org/Person",name:a},cancelReservationUrl:c,modifyReservationUrl:d}]:CONTINUE}}).call();

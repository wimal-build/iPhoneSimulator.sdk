// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var a=Scanner.fromMessage(e);a.setLocale(t);var r,g,s,o,p,x,i,d,h,S,m,l;return s=a.getSpan().nextText(n.person).collapseToEnd().withEnd(a.getSpan().nextText(n.person).nextText(n.name).getStart()).trim(),S=a.getSpan().withStart(a.getSpan().nextText(n.number).getEnd()).withEnd(a.getSpan().nextText(n.number).nextText("\u25a0"+n.restaurant).getStart()).trim(),g=a.getSpan().withStart(a.getSpan().nextText(n.number).nextText(n.restaurant).getEnd()).withEnd(a.getSpan().nextText("\u25a0"+n.date).getStart()).trim(),x=a.getSpan().nextText(n.phone).nextPhoneNumber().innerCapture(/([\d\s-,\.]+)/,1).trim(),i=a.getSpan().nextText(n.address).nextAddress(),r=a.getSpan().innerCapture(regExpFormatted(/\1\uff1a(.+)/,n.underName),1),l=a.getSpan().nextText(n.date),m=a.getSpan().withInterval(l.nextText("\n").getEnd(),l.nextText("\n").nextText("\n").getStart()).allInnerDates(),m.length>0&&(m=a.getSpan().withStart(m[0].getStart()).withEnd(m[m.length-1].getEnd()),p=getFuzzyDate(a.getDetachedSpan((""+m).replace(/[^\d\sa-zA-z:]+/g," ").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2 ")))),r=a.getDetachedSpan(" "),ASSERT(s,g,r)?[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:s,reservationId:S,reservationStatus:"http://schema.org/ReservationCancelled",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:g,url:o,telephone:x,address:i},startTime:p,bookingAgent:{"@type":"http://schema.org/Organization",name:"Tabelog",url:"http://www.tabelog.com/"},underName:{"@type":"http://schema.org/Person",name:r},cancelReservationUrl:h,modifyReservationUrl:d}]:CONTINUE}}).call();

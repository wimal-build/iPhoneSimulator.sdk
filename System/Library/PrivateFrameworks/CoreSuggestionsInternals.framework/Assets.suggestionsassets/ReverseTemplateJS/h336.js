// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var r=Scanner.fromMessage(e);r.setLocale(t);var a,i,o,g,p,c,s,l,d,x,h,m,u;return"html"===n.version?(p=r.getSpan().nextText(n.reservationCancellationTitle).withEnd(r.getSpan().nextText(n.reservationCancelled).nextText(n.reservationCancellation).getStart()),a=r.getSpan().innerCapture(regExpFormatted(/\1 (.*)\s/,n.reservationCancellationTitle),1).trim(),g=p.innerCapture(regExpFormatted(/\1 (\d+)/,n.reservationCancelled),1),l=p.innerText(n.checkin).nextDate(),d=p.innerText(n.checkout).nextDate(),p=r.getSpan().nextText(n.cancellationInformation).withEnd(r.getSpan().nextText(n.rateInformation).getStart()),h=p.innerCapture(regExpFormatted(/\1 (.*)\s/,n.hotelName),1),p=r.getSpan().withEnd(r.getSpan().nextText(n.reservationCancellationTitle).getStart()),m=p.innerCapture(regExpFormatted(/\1 (.+?) \2/,n.phone,n.fax),1),valid(h,m,p)&&(u=p.withStart(h.getLength()).withEnd(p.innerText(n.phone).getStart()).trim(),p.innerAddress().getLength()>=u.getLength()&&(u=p.innerAddress()))):"txt"===n.version&&(a=r.getSpan().innerCapture(regExpFormatted(/\1 (.+?)[,:]/,n.name),1),p=r.getSpan().nextText(n.cancellationInformation).withEnd(r.getSpan().nextText(n.rateInformation).getStart()),valid(p)&&(g=p.innerCapture(regExpFormatted(/\1 (\d+)\n/,n.reservationId),1),l=p.innerCapture(regExpFormatted(/\1 (.+)\n/,n.checkin),1).innerDate(),d=p.innerCapture(regExpFormatted(/\1 (.+)\n/,n.checkout),1).innerDate(),h=u=r.getSpan().innerCapture(regExpFormatted(/\1 (.+?)\n/,n.hotelName),1))),ASSERT(l,d,u)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a},totalPrice:i,priceCurrency:o,checkinTime:l,checkoutTime:d,modifyReservationUrl:c,cancelReservationUrl:s,reservationStatus:"http://schema.org/ReservationCancelled",reservationId:g,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:h,url:x,telephone:m,address:u}}]:void 0}}).call();

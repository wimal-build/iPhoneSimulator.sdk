// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r){var a=Scanner.fromMessage(e);a.setLocale(t);var n,i,o,s,m,p,h,c,u,f,l,g,x,d,v=a.getSpan(),F="Confirmed";return m=v.innerCapture(regExpFormatted(/\1 (.*) \n/,r.reservationId_prefix),1),n=v.innerCapture(regExpFormatted(/(.*) \1/,r.name_suffix),1),p=v.allDates(),/Flexible/i.test(e.html)?(c=p[0],h=p[1]):(c=""+p[0]+" "+p[1],h=""+p[2]+" "+p[3],c=getFuzzyDate(a.getDetachedSpan(c).firstDate()),h=getFuzzyDate(a.getDetachedSpan(h).firstDate())),u=r.hotelName_suffix?v.innerCapture(regExpFormatted(/\1(.*)\2/,r.hotelName_prefix,r.hotelName_suffix),1).trim():v.innerCapture(regExpFormatted(/\1(.*)!/,r.hotelName_prefix),1).trim(),u="Airbnb, "+u,x=v.next(r.hotelPhone_prefix).nextPhoneNumber(),g=v.next(r.name_suffix).nextLink(),ASSERT(c,h,u),[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:n,email:i},totalPrice:o,priceCurrency:s,checkinTime:c,checkoutTime:h,modifyReservationUrl:f,cancelReservationUrl:l,reservationStatus:"http://schema.org/Reservation"+(F||"Confirmed"),reservationId:m,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:u,url:g,telephone:x,address:d}}]}}).call();

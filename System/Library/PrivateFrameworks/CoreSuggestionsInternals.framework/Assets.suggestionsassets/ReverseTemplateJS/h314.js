// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r){var a=Scanner.fromMessage(e);a.setLocale(t);var n,o,i,p,s,c,d,m,l=[],h=[],g=[];for(m=a.getSpan().next(r.contactPerson).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,r.contactPerson),1),c=m.next(r.email).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,r.email),1),i=a.getSpan().next(r.carSummary).parentTag("table3").allInnerCapture(r.carPickup,0),n=0;i.length>n;n++)s=i[n],p={},p.pickupTime=s.parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/),1).innerDate(),p.dropoffTime=s.next(r.carDropoff).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/),1).innerDate(),p.pickupAddress=p.dropoffAddress=s.next(r.carLocation).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,r.carLocation),1),p.reservationId=s.next(r.carReservationId).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,r.carReservationId),1),p.provider=s.parentTag("td4").tagContents().innerCapture(/(.*)\:/,1),p.name=m,ASSERT(p.name,p.provider,p.dropoffTime,p.pickupTime)&&h.push(p);for(n=0,p;h.length>n;n++)p=h[n],o={"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:p.totalPrice,priceCurrency:p.priceCurrency,reservationId:p.reservationId,reservationStatus:"http://schema.org/Reservation"+(p.reservationStatus||"Confirmed"),checkinUrl:p.checkinUrl,modifyReservationUrl:p.modifyReservationUrl,cancelReservationUrl:p.cancelReservationUrl,underName:{"@type":"http://schema.org/Person",name:p.name,email:p.email},provider:{"@type":"http://schema.org/Organization",name:p.provider},pickupTime:p.pickupTime,pickupLocation:{"@type":"http://schema.org/Place",name:p.pickupName,telephone:p.pickupTelephone,address:p.pickupAddress},dropoffTime:p.dropoffTime,dropoffLocation:{"@type":"http://schema.org/Place",name:p.dropoffName,telephone:p.dropoffTelephone,address:p.dropoffAddress}},p.brand&&(o.reservationFor={"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:p.brand},license:p.license,color:p.color}),l.push(o);for(n=0,d;g.length>n;n++)d=g[n],o={"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:d.name,email:d.email},totalPrice:d.totalPrice,priceCurrency:d.priceCurrency,checkinTime:d.checkInDateTime,checkoutTime:d.checkOutDateTime,modifyReservationUrl:d.modifyReservationUrl,cancelReservationUrl:d.cancelReservationUrl,reservationStatus:"http://schema.org/Reservation"+(d.reservationStatus||"Confirmed"),reservationId:d.reservationId,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:d.hotelName,url:d.hotelUrl,telephone:d.hotelPhone,address:d.hotelAddress}},l.push(o);return l.length?l:void 0}}).call();
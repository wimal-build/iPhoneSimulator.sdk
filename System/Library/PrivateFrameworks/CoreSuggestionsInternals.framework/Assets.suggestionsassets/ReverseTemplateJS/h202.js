// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=loadHelper("hotels-microdata-parser.js"),r=a(e);if(r)return r;var o=Scanner.fromMessage(e);o.setLocale(t);var i,g,c,l,p,s,d,u,h,m,x,S,T,v;if(1===n.version)i=o.getSpan().innerCapture(n.bookingName,1),p=o.getSpan().innerCapture(n.confirmationNumber,1),d=o.getSpan().nextRegExp(n.checkInDate).nextDate(),u=o.getSpan().nextRegExp(n.checkOutDate).nextDate(),m=o.getSpan().nextText(n.cancellationConfirmed).nextTag("td1").tagContents(),S=m.nextTag("td1").tagContents(),S.innerAddress().getLength()>=S.getLength()&&(S=S.innerAddress()),c=o.getSpan().innerCapture(n.cancellationTotalPrice,1).innerCapture(/([\d,.]+)/,1),l=o.getSpan().innerCapture(n.cancellationTotalPrice,1).innerCapture(/([^\d,.]+)/,1).trim(),x=(""+o.getSpan().nextRegExp(n.cancellationPhone).parentTag("td1").innerPhoneNumber()).replace(n.cancellationPhone,"");else if(2===n.version){p=o.getSpan().nextText(n.reservationId).nextAnyTag("td").tagContents(),d=o.getSpan().nextText(n.checkInDate).nextAnyTag("td").innerDate(),u=o.getSpan().nextText(n.checkOutDate).nextAnyTag("td").innerDate();var C=o.getSpan().nextText(n.hotel).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1 ($<name>.+?) <($<url>.*)>/,n.hotel));m=S=C?C.$name:null,h=C?C.$url:null,g=o.getSpan().innerCapture(regExpFormatted(/\1 (.+?)\n/,n.email),1)}return ASSERT(d,u,S)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:i,email:g},totalPrice:c,priceCurrency:l,checkinTime:d,checkoutTime:u,modifyReservationUrl:T,cancelReservationUrl:v,reservationStatus:"http://schema.org/ReservationCancelled",reservationId:p,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:m,url:h,telephone:x,geo:valid(s)?{"@type":"http://schema.org/GeoCoordinates",latitude:s.$latitude,longitude:s.$longitude}:null,address:S}}]:void 0}}).call();
// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var r=Scanner.fromMessage(e);r.setLocale(t);var a,i,o,s,p,c,g,d,m,u,h,l,v,x,C,S,T,A,y,D,E;return c=r.getSpan().next(n.reservationId).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s*(.*)/,n.reservationId),1),o=r.getSpan().next(n.arrivalDate).parentAnyTag("td").tagContents(),m=o.innerCapture(regExpFormatted(/\1\s*(.*)/,n.arrivalDate),1),l=o.innerCapture(regExpFormatted(/\1\s*(.*)/,n.departureDate),1),d=o.innerCapture(regExpFormatted(/\1\s*(.*)/,n.checkInTime),1),h=o.innerCapture(regExpFormatted(/\1\s*(.*)/,n.checkOutTime),1),d.exists()?(d=r.getDetachedSpan((""+d).replace(/([AP])\.M\./,"$1M")),u=combineDateAndTime(m,d)):u=m,h.exists()?(h=r.getDetachedSpan((""+h).replace(/([AP])\.M\./,"$1M")),v=combineDateAndTime(l,h)):v=l,D=r.getSpan().next(n.hotelInfo).nextAnyTag("td").tagContents(),C=D.innerCapture(/(.*)/,1),T=D.innerAddress(),S=(""+D.innerPhoneNumber()).replace(n.phone,""),a=r.getSpan().innerCapture(regExpFormatted(/\1\s*(.*)/,n.name),1),E=r.getSpan().next(n.price).nextAnyTag("td").tagContents(),s=E.innerCapture(/([\d,.]+)/,1),p=E.innerCapture(/([^\d,.]+)/,1).trim(),g=n.reservationStatus,ASSERT(a,C,u,v)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:i},totalPrice:s,priceCurrency:p,checkinTime:u,checkoutTime:v,modifyReservationUrl:A,cancelReservationUrl:y,reservationStatus:"http://schema.org/Reservation"+(g||"Confirmed"),reservationId:c,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:C,url:x,telephone:S,address:T}}]:void 0}}).call();

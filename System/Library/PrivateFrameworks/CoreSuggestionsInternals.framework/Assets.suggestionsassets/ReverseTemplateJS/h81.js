// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r=/($<weekday>.*?), ($<month>.*?) ($<day>\d{1,2}), ($<year>\d{4}) @ ($<time>\d{1,2}:\d{2} (AM|PM|a\.m\.|p\.m\.))/,i=a.getSpan().next(n.namePrefix).nextAnyTag("td").tagContents().trim(),o=a.getSpan().next(n.pickupPrefix).next(n.datePrefix).nextAnyTag("td").tagContents().innerCapture(r),p=o.$day+" "+o.$month+" "+o.$year+" "+o.$time,d=getFuzzyDate(a.getDetachedSpan(p)),g=a.getSpan().next(n.dropoffPrefix).next(n.datePrefix).nextAnyTag("td").tagContents().innerCapture(r);p=g.$day+" "+g.$month+" "+g.$year+" "+g.$time;var s=getFuzzyDate(a.getDetachedSpan(p)),x=a.getSpan().next(n.pickupPrefix).next(n.address).nextAnyTag("td").innerAddress();x===a.getNullSpan()&&(x=a.getSpan().next(n.pickupPrefix).next(n.address).nextAnyTag("td").tagContents());var c=a.getSpan().next(n.dropoffPrefix).next(n.address).nextAnyTag("td").innerAddress();c===a.getNullSpan()&&(c=a.getSpan().next(n.dropoffPrefix).next(n.address).nextAnyTag("td").tagContents());var m=a.getSpan().next(n.pickupPrefix).next(n.name).nextAnyTag("td").tagContents().trim(),y=a.getSpan().next(n.dropoffPrefix).next(n.name).nextAnyTag("td").tagContents().trim(),f=a.getSpan().next(n.pickupPrefix).next(n.phone).nextAnyTag("td").tagContents().trim(),u=a.getSpan().next(n.dropoffPrefix).next(n.phone).nextAnyTag("td").tagContents().trim(),h=a.getSpan().innerCapture(n.reservationId,1).trim();0===(""+h).length&&(h=a.getSpan().innerCapture(n.reservationIdAlt,1).trim());var l=a.getSpan().next(n.brand).nextAnyTag("td").tagContents().trim();l.exists()||(l=" ");var S=a.getSpan().next(n.totalPrice).nextAnyTag("td").nextAnyTag("td").tagContents(),C=S.innerCapture(/($<price>[\d,.]+)\s?($<currency>[A-Z]+)/);C&&0!==(""+C).length||(C=S.innerCapture(/($<currency>[A-Z]+)\s?($<price>[\d,.]+)/));var v=C?C.$price:null,A=C?C.$currency:null,P=a.getSpan().next(n.totalPrice).nextLink(),$=n.reservationStatus.test(e.subject)?"ReservationCancelled":"ReservationConfirmed";return ASSERT(d,x||m)?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",reservationId:h,totalPrice:v,priceCurrency:A,reservationStatus:"http://schema.org/"+$,checkinUrl:P,modifyReservationUrl:P,cancelReservationUrl:P,underName:{"@type":"http://schema.org/Person",name:i},provider:{"@type":"http://schema.org/Organization",name:"Enterprise"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:l},license:"",color:""},pickupTime:d,pickupLocation:{"@type":"http://schema.org/Place",name:m,telephone:f,address:x},dropoffTime:s,dropoffLocation:{"@type":"http://schema.org/Place",name:y,telephone:u,address:c}}]:void 0}}).call();

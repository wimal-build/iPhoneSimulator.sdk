// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var a=Scanner.fromMessage(e);a.setLocale(t);var r,p,s,i,o,g,d,h,l,m,S,x;r=a.getSpan().next(n.person).collapseToEnd().withEnd(a.getSpan().next(n.person).nextText(n.name).getStart()).trim(),m=a.getSpan().innerCapture(n.number,1),p=a.getSpan().next(n.thank).collapseToEnd().withEnd(a.getSpan().next(n.thank).nextText(n.endQuote).getStart()).trim(),o=a.getSpan().next(n.phone).nextPhoneNumber().innerCapture(/([\d\s-,\.]+)/,1).trim(),g=a.getSpan().innerCapture(n.address,1).innerAddress(),g.exists()||(g=a.getSpan().innerCapture(n.address,1)),i=a.getSpan().innerCapture(n.underName,1).trim();var c,u;if(n.time.test(e.plain))c=a.getSpan().next(n.date).collapseToEnd().withEnd(a.getSpan().next(n.time).getStart()).nextDate(),u=a.getSpan().next(n.time).collapseToEnd().withEnd(a.getSpan().next("\n").getStart()).nextDate(),s=combineDateAndTime(c,u);else if(S=a.getSpan().next(n.date),x=a.getSpan().withInterval(S.previousText("\n").getEnd(),S.nextText("\n").getStart()).allInnerDates(),x.length>0){var E;x=a.getSpan().withStart(x[0].getStart()).withEnd(x[x.length-1].getEnd()),c=(""+x).replace(/[^\d\sa-zA-z:]+/g," ").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/").trim(),E=c.lastIndexOf(" "),c=c.substr(0,E)+":"+c.substr(E+1),s=getFuzzyDate(a.getDetachedSpan(c))}return d=a.getSpan().nextText(n.cancel).nextLink(),h=d,ASSERT(r,p,s,i)?[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:r,reservationId:m,reservationStatus:"http://schema.org/ReservationConfirmed",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:p,url:l,telephone:o,address:g},startTime:s,bookingAgent:{"@type":"http://schema.org/Organization",name:"Hot Pepper",url:"http://www.hotpepper.jp/"},underName:{"@type":"http://schema.org/Person",name:i},cancelReservationUrl:d,modifyReservationUrl:h}]:CONTINUE}}).call();

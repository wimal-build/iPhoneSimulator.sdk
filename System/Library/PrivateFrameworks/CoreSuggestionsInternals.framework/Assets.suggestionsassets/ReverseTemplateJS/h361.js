// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var a=Scanner.fromMessage(e);a.setLocale(t);var r,o,g,i,c,s,p,x,d,m,h,u,T;n.isCancelled&&(s="Cancelled"),r=a.getSpan().nextText(n.guestName).nextAnyTag("td").tagContents(),c=a.getSpan().innerCapture(regExpFormatted(/\1 (\d+)/,n.confirmation),1),d=a.getSpan().nextText(n.phone).parentAnyTag("td").tagContents(),d&&(h=d.innerCapture(regExpFormatted(/(.+)\s+</),1),m=d.nextLink(),T=d.innerCapture(regExpFormatted(/>([\s\S]+)\1/,n.phone),1).trim(),T=(""+T).replace(/\n/g,""),u=d.innerPhoneNumber(),u=(""+u).replace("\u7535\u8bdd\uff1a","").trim());var l=a.getSpan().nextRegExp(n.yourSchedule).nextAnyTag("table");return p=l.nextText(n.checkin).nextAnyTag("td").innerDate(),x=l.nextText(n.checkout).nextAnyTag("td").innerDate(),i=a.getSpan().nextText(n.total).nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").tagContents(),g=i.nextAnyTag("td").tagContents(),ASSERT(p,x,T)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:o},totalPrice:g,priceCurrency:i,checkinTime:p,checkoutTime:x,reservationStatus:"http://schema.org/Reservation"+(s||"Confirmed"),reservationId:c,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:h,url:m,telephone:u,address:T}}]:void 0}}).call();

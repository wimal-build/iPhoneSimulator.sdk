// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,n,t){var r=Scanner.fromMessage(e);r.setLocale(n);var a,i,o,p,c,u,s,g,m,l,h,C,d,S,f,v,y;c=r.getSpan().innerCapture(t.reservationId,1),a=r.getSpan().innerCapture(t.guestName,1),g=""+r.getSpan().innerCapture(t.checkinDate,1),g=getFuzzyDate(r.getDetachedSpan(g)),s=""+r.getSpan().innerCapture(t.checkinTime,1),s=getFuzzyDate(r.getDetachedSpan(s)),m=combineDateAndTime(g,s),y=""+r.getSpan().innerCapture(t.numberOfNights,1),l=modifyDate(g,y);var D=r.getSpan().innerCapture(t.price,1);if(o=D.innerCapture(/([\d,.]+)/,1),p=D.innerCapture(/([^\d,.]+)/,1),v=f=""+r.getSpan().innerCapture(t.modifyUrl,1),C=r.getSpan().innerCapture(t.hotelName,1),d=r.getSpan().innerCapture(t.hotelPhone,1),h=""+r.getSpan().innerCapture(t.hotelUrl,1),t.emailTitelConfirmation.test(e.subject)&&(u="Confirmed"),t.emailTitelCancelConfirmation.test(e.subject)){var D=r.getSpan().innerCapture(t.cancelPrice,1);o=D.innerCapture(/([\d,.]+)/,1),p=D.innerCapture(/([^\d,.]+)/,1),u="Cancelled"}return ASSERT(a,c,m,C),[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:i},totalPrice:o,priceCurrency:p,checkinTime:m,checkoutTime:l,modifyReservationUrl:f,cancelReservationUrl:v,reservationStatus:"http://schema.org/Reservation"+(u||"Confirmed"),reservationId:c,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:C,url:h,telephone:d,address:S}}]}}).call();

// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,i,o,s,g,p,c,m,u,d,l,x,C,h;if(!n.emailTitelConfirmation.test(e.subject)&&!n.emailTitelCancelConfirmation.test(e.subject))return CONTINUE;if(n.emailTitelConfirmation.test(e.subject)){g=a.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),r=a.getSpan().nextRegExp(n.guestName).nextAnyTag("td").tagContents().innerCapture(/(.+)\,/,1),c=""+a.getSpan().nextRegExp(n.checkInDate).nextAnyTag("td").tagContents(),m=""+a.getSpan().nextRegExp(n.checkOutDate).nextAnyTag("td").tagContents(),d=a.getSpan().nextRegExp(n.hotelName).nextAnyTag("td").tagContents();var f=a.getSpan().nextRegExp(n.price).nextAnyTag("td").tagContents();if(o=f.innerCapture(/([\d,.]+)/,1),s=f.innerCapture(/([^\d,.]+)/,1).trim(),C=h=""+a.getSpan().nextRegExp(n.modifyUrl).innerCapture(n.modifyUrl,1),!ASSERT(r,g,c,m,x||d))return CONTINUE;p="Confirmed"}return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:i},totalPrice:o,priceCurrency:s,checkinTime:c,checkoutTime:m,modifyReservationUrl:C,cancelReservationUrl:h,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),reservationId:g,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:d,url:u,telephone:l,address:x}}]}}).call();

// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,o,s,p,i,c,g,d,m,h,x,l,T,y,u,C,v,f,S,A,R="DriveNow";s=a.getDetachedSpan(e.subject).innerCapture(n.reservationId,1),c=g=a.getSpan().nextText(n.modifyUrl).nextLink(),r=a.getSpan().nextText(n.guestName).nextAnyTag("td").tagContents().innerCapture(regExpFormatted(/(.+)\s+</),1),o=a.getSpan().nextText(n.guestName).nextAnyTag("td").tagContents().innerLink(),h=a.getSpan().nextText(n.brand).nextAnyTag("td").tagContents(),A=a.getSpan().nextText(n.date).nextAnyTag("td").tagContents().innerDate(),C=a.getSpan().nextText(n.date).nextText(n.date).nextAnyTag("td").tagContents().innerDate(),f=a.getSpan().nextText(n.address).nextAnyTag("td").tagContents(),y=a.getSpan().nextText(n.address).nextText(n.address).nextAnyTag("td").tagContents(),S=a.getSpan().nextText(n.phone).nextAnyTag("td").tagContents(),u=a.getSpan().nextText(n.phone).nextText(n.phone).nextAnyTag("td").tagContents();var k=a.getSpan().nextText(n.price).nextAnyTag("td").tagContents();return d=k.innerCapture(/([\d,.]+)/,1),m=k.innerCapture(/([^\d,.]+)/,1),n.confirmSubject.test(e.subject)&&(p="Confirmed"),n.cancellationSubject.test(e.subject)&&(p="Cancelled"),0===(""+h).length||null===h?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:d,priceCurrency:m,reservationId:s,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:i,modifyReservationUrl:c,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:r,email:o},provider:{"@type":"http://schema.org/Organization",name:R},pickupTime:A,pickupLocation:{"@type":"http://schema.org/Place",name:v,telephone:S,address:f},dropoffTime:C,dropoffLocation:{"@type":"http://schema.org/Place",name:T,telephone:u,address:y}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:d,priceCurrency:m,reservationId:s,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:i,modifyReservationUrl:c,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:r,email:o},provider:{"@type":"http://schema.org/Organization",name:R},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:h},license:x,color:l},pickupTime:A,pickupLocation:{"@type":"http://schema.org/Place",name:v,telephone:S,address:f},dropoffTime:C,dropoffLocation:{"@type":"http://schema.org/Place",name:T,telephone:u,address:y}}]}}).call();

// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,o,i,g,s,c,p,m,l,x,C,d,u,h;if(!n.emailTitelConfirmation.test(e.subject)&&!n.emailTitelCancelConfirmation.test(e.subject))return CONTINUE;s=a.getSpan().nextRegExp(n.reservationId).nextAnyTag("td").tagContents(),r=a.getSpan().nextRegExp(n.guestName).nextAnyTag("td").tagContents(),o=a.getSpan().nextRegExp(n.guestEmail).nextAnyTag("td").tagContents(),p=a.getSpan().nextRegExp(n.checkInDate).nextAnyTag("td").tagContents(),m=a.getSpan().nextRegExp(n.checkOutDate).nextAnyTag("td").tagContents();var T=a.getSpan().nextRegExp(n.price).nextAnyTag("td").tagContents();if(i=T.innerCapture(/([\d,.]+)/,1),g=T.innerCapture(/([^\d,.]+)/,1).trim(),x=a.getSpan().nextRegExp(n.hotelName).tagContents().innerCapture(n.hotelName,1),d=a.getSpan().nextRegExp(n.hotelAddress).nextAnyTag("td").tagContents(),C=a.getSpan().nextRegExp(n.hotelPhone).nextAnyTag("td").tagContents(),n.emailTitelConfirmation.test(e.subject)){if(!ASSERT(r,s,p,m,d))return CONTINUE;c="Confirmed"}if(n.emailTitelCancelConfirmation.test(e.subject)){if(!ASSERT(r,s,p,m,d))return CONTINUE;c="Cancelled"}return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:o},totalPrice:i,priceCurrency:g,checkinTime:p,checkoutTime:m,modifyReservationUrl:u,cancelReservationUrl:h,reservationStatus:"http://schema.org/Reservation"+(c||"Confirmed"),reservationId:s,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:x,url:l,telephone:C,address:d}}]}}).call();

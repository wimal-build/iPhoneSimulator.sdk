// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,r,t){var a=Scanner.fromMessage(e);a.setLocale(r);var i,n,o,p,m=a.getSpan(),u="Confirmed",d=[],l=[];i=""+m.next(t.reservationId_prefix).parentAnyTag("td").tagContents(),i=/: (.*)/.exec(i)[1];var s=t.leg_prefixes;return s.forEach(function(e,r){var i,n,o,p,u,l,s,g,c,h,A="Volotea",v="V7",N=m.next(e);if(N===a.getNullSpan())return null;var T=N.nextAnyTag("td").nextAnyTag("td"),x=T.nextAnyTag("td"),o=x.nextAnyTag("td"),s=o.nextAnyTag("td"),y=s.nextAnyTag("td");T=/(.*) \xb7 (.*)/.exec(""+T.tagContents()),u=T[1],c=T[2],x=x.nextDate(),o=o.nextDate(),s=s.nextDate(),p=combineDateAndTime(x,o),g=combineDateAndTime(x,s),i=/V7 ([0-9]*)/.exec(""+y)[1];var b=m.next(t.passager);if(""+b!="")for(;""+b!="";){var f=b.nextAnyTag("td").tagContents();d.push({airlineName:A,airlineCode:v,flightNumber:i,departureDateTime:p,departureAirport:u,departureAirportCode:l,arrivalDateTime:g,arrivalAirport:c,arrivalAirportCode:h,ticketNumber:n,underPersonName:f}),b=b.next(t.passager)}else d.push({airlineName:A,airlineCode:v,flightNumber:i,departureDateTime:p,departureAirport:u,departureAirportCode:l,arrivalDateTime:g,arrivalAirport:c,arrivalAirportCode:h,ticketNumber:n})}),d.forEach(function(e,r){ASSERT(e.departureAirport,e.arrivalAirport,e.flightNumber,e.airlineName,e.arrivalDateTime,e.departureDateTime),l.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:e.airlineName,airlineCode:e.airlineCode,flightNumber:e.flightNumber,departureAirportFuzzy:e.departureAirport,departureAirportCode:e.departureAirportCode,departureTime:e.departureDateTime,arrivalAirportFuzzy:e.arrivalAirport,arrivalAirportCode:e.arrivalAirportCode,arrivalTime:e.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:e.underPersonName},checkinUrl:p,reservationId:i,reservationStatus:"http://schema.org/Reservation"+u,totalPrice:n,priceCurrency:o,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:e.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:e.seatNumber,seatingType:e.seatType}},programMembershipUsed:{"@type":"http://schema.org/ProgramMembership",membershipNumber:e.membershipNumber,programName:e.programName}})}),l.length>=1?l:CONTINUE}}).call();

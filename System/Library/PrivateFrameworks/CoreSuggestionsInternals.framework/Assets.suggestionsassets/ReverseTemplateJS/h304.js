// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var r=Scanner.fromMessage(e);r.setLocale(t);var a,i,o,s,x,g,d,c,l,p,T,m=r.getSpan(),h=n.isCancellation?"Cancelled":"Confirmed";if(g=m.nextText(n.reservationIdPrefix).nextAnyTag("td").tagContents(),a=m.nextText(n.underPersonNamePrefix).nextAnyTag("td").tagContents(),i=m.nextText(n.underPersonEmailPrefix).nextAnyTag("td").tagContents(),o=(""+m.nextText(n.hotelNamePrefix).nextAnyTag("td").nextAnyTag("td").tagContents()).split(/\n/)[0].trim(),x=m.nextText(n.hotelAddressPrefix).nextAnyTag("td").tagContents(),s=m.nextText(n.hotelPhonePrefix).nextAnyTag("td").tagContents(),d=m.nextText(n.modifyReservationUrlPrefix).nextLink(),[c,l]=m.nextText(n.checkInDateTime).parentAnyTag("table").allInnerTags("tr4").slice(1)[0].allInnerTags("td4").map(function(e){return e.tagContents()}),n.pricePrefix){var f=m.nextText(n.pricePrefix).nextAnyTag("td").tagContents().innerCapture(/(\D)([\d\,\.]+)/);f&&f!==r.getNullSpan()?[,T,p]=f:(f=m.innerCapture(regExpFormatted(/\1\s(\D)\s?([\d\,\.]+)/,n.pricePrefix)),f&&3===f.length?[,T,p]=f:(f=m.innerCapture(regExpFormatted(/\1\s?([\d\,\.]+)\s(\D)/,n.pricePrefix)),f&&3===f.length&&([,T,p]=f)))}return ASSERT(c,o||x)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:i},totalPrice:p,priceCurrency:T,checkinTime:c,checkoutTime:l,modifyReservationUrl:d,reservationStatus:"http://schema.org/Reservation"+h,reservationId:g,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:o,telephone:s,address:x}}]:void 0}}).call();

// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r){var a=Scanner.fromMessage(e);a.setLocale(t);var n,s,o,c,p,i,m,u,h,g,S,d,$,v,l,E,x,C=a.getSpan();h=C.innerCapture(regExpFormatted(/Your order number for this purchase is (.*?)\./),1);var R=["PRINT YOUR TICKETS","Print my tickets"];for(var T in R)if(a.getSpan().nextText(R[T]).exists()){u=a.getSpan().innerCapture(RegExp(regExpEscape(R[T])+" <(.*)>"),1);break}return u||(u=a.getSpan().innerCapture(/Show complete order detail <(.*)>/,1)),c=a.getSpan().nextRegExp(/You purchased (.*) to:/).nextDate(),x=RegExp("You purchased ($<numSeats>.*) to:(?:[\\s_]+)\\b($<eventName>.*)\\s\\b($<address>.*)\\s(?:[\\s\\S]+)\\bOrder for: ($<name>.*)\\s\\bSeat location:(?: section ($<seatSection>.*?),?)?(?: row ($<seatRow>.*?),?)?(?: seats ($<seat>.*?))?\\s\\bTotal Charge: ($<priceCurrency>\\w+)?(.*?)($<price>[\\d.,]+)\\s"),g=a.getSpan().innerCapture(x),g&&(p=g.$eventName,S=g.$address,n=g.$name,m=g.$seatSection,E=g.$seatRow,i=g.$seat,s=g.$price,o=g.$priceCurrency),ASSERT(c,p)?[{"@context":"http://schema.org","@type":"http://schema.org/EventReservation",name:n,totalPrice:s,priceCurrency:o,reservedTicket:{"@type":"http://schema.org/Ticket",ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:i,seatRow:E,seatSection:m},ticketToken:u,ticketNumber:h},reservationFor:{"@type":"http://schema.org/Event",eventStatus:"http://schema.org/EventConfirmed",name:p,url:d,startDate:c,endDate:l,location:{"@type":"http://schema.org/Place",name:$,telephone:v,address:S}}}]:CONTINUE}}).call();

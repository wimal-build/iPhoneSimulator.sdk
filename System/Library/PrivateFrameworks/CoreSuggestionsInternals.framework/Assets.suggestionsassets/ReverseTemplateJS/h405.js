// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var r=Scanner.fromMessage(e);r.setLocale(t);var a,i,c,o,d,m,h,s,g,p,u,T,x,l,k,C;if(a=r.getSpan().nextText(n.reservedFor).nextAnyTag("td").tagContents(),""+a==""&&(a=a.nextAnyTag("td").tagContents()),a=a.innerCapture(/\*\s+(.*)/,1).trim(),m=r.getSpan().innerCapture(regExpFormatted(/\1 (\w+\-\d+\-\d+\-\d+)/,n.reservationId),1),c=r.getSpan().nextText(n.checkin).parentAnyTag("td"),valid(c)){var D,v;D=c.innerCapture(regExpFormatted(/\1 ($<checkInDate>.*) \| \2 ($<checkOutDate>.*)/,n.checkin,n.checkout)),v=c.innerCapture(regExpFormatted(/\1 ($<checkInTime>\d{4})\s($<checkOutTime>\d{4})/,n.checkinTime)),v||(v=c.innerCapture(regExpFormatted(/\1 ($<checkInTime>\d{2}\:\d{2}\s[A-Z]{2})\s($<checkOutTime>\d{2}\:\d{2}\s[A-Z]{2})/,n.checkinTime))),3===D.length&&3===v.length&&(g=r.getDateDD(D.$checkInDate.innerDate()),u=r.getDateDD(D.$checkOutDate.innerDate()),valid(g,u,v.$checkInTime,v.$checkOutTime)&&(p=combineDateAndTime(g,v.$checkInTime),T=combineDateAndTime(u,v.$checkOutTime)))}return x=r.getSpan().nextText(n.hotelDetails).nextLink(),c=x.parentAnyTag("td").tagContents(),l=c.innerCapture(regExpFormatted(/\1($<name>.*) \2/,n.hotelDetails,n.hotelNameSuffix),1),C=c.nextAddress(),k=c.nextPhoneNumber().innerCapture(regExpFormatted(/\1 ($<phone>.*)/,n.telephone),1),o=r.getSpan().nextText(n.priceSummary).nextText(n.totalPrice).nextTag("td4").tagContents().innerCapture(/([\d,.]+)/,1),d=r.getSpan().nextText(o).parentAnyTag("td").tagContents().innerCapture(/($<currency>.)[\d,.]+/,1),ASSERT(C,p,T)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:i},totalPrice:o,priceCurrency:d,checkinTime:p,checkoutTime:T,modifyReservationUrl:h,cancelReservationUrl:s,reservationStatus:"http://schema.org/ReservationConfirmed",reservationId:m,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:l,url:x,telephone:k,address:C}}]:void 0}}).call();

// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,i,o,s,g,d,p,x,c,T,m,u,l,C;if(!n.emailTitelConfirmation.test(e.subject))return CONTINUE;g=a.getSpan().nextRegExp(n.reservationId).parentTag("td3").tagContents().innerCapture(n.reservationId,1);var h=a.getSpan().nextRegExp(n.reservationId).nextTag("table5").nextTag("td5").nextTag("td5").tagContents();return T=h.innerCapture(regExpFormatted(/(.+)</),1),c=h.innerLink(),m=h.innerPhoneNumber(),u=h.innerCapture(regExpFormatted(/.+\n([\s\S]*)\1/,n.hotelPhone),1),r=a.getSpan().nextText(n.guestName).nextTag("td3").nextTag("td3").nextTag("td3").nextTag("td3").tagContents().innerCapture(/(.+)\s+?\n/,1),i=a.getSpan().nextText(n.guestName).nextTag("td3").nextTag("td3").nextTag("td3").nextTag("td3").tagContents().innerCapture(n.guestEmail,1),o=a.getSpan().nextText(n.totalPrice).nextTag("td4").tagContents().innerCapture(/=\s+?([\d,.]+)\s(\w{3})/,1),s=a.getSpan().nextText(n.totalPrice).nextTag("td4").tagContents().innerCapture(/=\s+?([\d,.]+)\s(\w{3})/,2),p=a.getSpan().nextText(n.checkIn).parentTag("td3").firstDate(),x=a.getSpan().nextText(n.checkIn).parentTag("td3").lastInnerDate(),n.emailTitelConfirmation.test(e.subject)&&(d="Confirmed"),n.emailTitelCancellation.test(e.subject)?CONTINUE:ASSERT(p,x,u)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:i},totalPrice:o,priceCurrency:s,checkinTime:p,checkoutTime:x,modifyReservationUrl:l,cancelReservationUrl:C,reservationStatus:"http://schema.org/Reservation"+(d||"Confirmed"),reservationId:g,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:T,url:c,telephone:m,address:u}}]:void 0}}).call();

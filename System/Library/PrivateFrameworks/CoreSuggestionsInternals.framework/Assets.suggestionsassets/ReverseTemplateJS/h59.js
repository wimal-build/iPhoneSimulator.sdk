// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var r=Scanner.fromMessage(e);r.setLocale(t);var a,o,i,s,p,m,c,d,g,l,h,x,u,v,f,S,y,P,$,C,R,k;if(i=r.getSpan().innerCapture(regExpFormatted(/\b\1 (\w+)\s/,n.reservationIdPrefix),1),not(i)&&(i=r.getSpan().nextText(n.reservationIdPrefix).nextAnyTag("td").tagContents()),k=r.getSpan().nextText(n.pickUpInformation).nextDate(),R=k.nextPhoneNumber(),P=r.getSpan().withInterval(k.getEnd(),R.getStart()).trim().innerCapture(/^($<name>.*)\s(.*?\s)?($<address>.*(?:\s\(\d{5} \))?)$/),$=P?P.$name:null,C=P?P.$address:null,y=k.nextRegExp(n.returnDateRegExp).nextDate(),S=y.nextPhoneNumber(),u=r.getSpan().withInterval(y.getEnd(),S.getStart()).trim().innerCapture(/^($<name>.*)\s(.*?\s)?($<address>.*(?:\s\(\d{5} \))?)$/),v=u?u.$name:null,f=u?u.$address:null,a=r.getSpan().innerCapture(regExpFormatted(/\1 (.*?)\s+/,n.namePrefix),1),m=r.getSpan().nextText(n.reservationIdPrefix).nextLink().nextLink(),c=m.nextLink(),ASSERT(i,a,C,k)){var E={"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:d,priceCurrency:g,reservationId:i,reservationStatus:"http://schema.org/Reservation"+(s||"Confirmed"),checkinUrl:p,modifyReservationUrl:m,cancelReservationUrl:c,underName:{"@type":"http://schema.org/Person",name:a,email:o},provider:{"@type":"http://schema.org/Organization",name:"Avis"},pickupTime:k,pickupLocation:{"@type":"http://schema.org/Place",name:$,telephone:R,address:C},dropoffTime:y,dropoffLocation:{"@type":"http://schema.org/Place",name:v,telephone:S,address:f}};return l&&(E.reservationFor={"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:l},license:h,color:x}),[E]}}}).call();

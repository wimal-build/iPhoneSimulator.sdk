// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("mauritius-flight-confirmation-fr",function(e){return/^Confirmation de r\xe9servation/.test(e.subject)},function(e){if(/^Confirmation de r\xe9servation/.test(e.subject)){var t=Scanner.fromMessage(e);t.setLocale("fr_FR");var r,a,n,i,o,s,l,m,p,d,g,c,u,v,T,h,C,x,f,y,A,b,N=t.getSpan(),F=[],S={};for(a=N.nextText("Num\xe9ro de r\xe9servation : ").parentTag("td2").tagContents().innerCapture(regExpFormatted(/\1(.+)/,"Num\xe9ro de r\xe9servation : "),1).trim(),m=N.nextText("Paiement et billet du vol").nextTag("td3").tagContents().innerCapture(/($<totalPrice>[\d,.\s]+)($<priceCurrency>[\w]+)/),p=m?m.$totalPrice:null,d=m?m.$priceCurrency:null,o=N.withInterval(N.nextText("informations sur le voyageur").getEnd(),N.nextText("Vos coordonn\xe9es").getStart()).allInnerTagsFiltered("td2"),o.pop(),A=0;o.length>A;A++)/Carte\(s\) de fid\xe9lit\xe9/.test(o[A])||(i=o[A].trim(),S[""+i]={name:i,totalPrice:p.trim(),priceCurrency:d.trim()});for(s=N.withInterval(N.nextText("votre s\xe9lection de vols").getEnd(),N.nextText("Paiement et billet du vol").getStart()).allInnerTagsFiltered("td2"),A=0;s.length>A;A++)/Vol/.test(s[A])||/Changement d'avion n\xe9cessaire/.test(s[A])||/confirm\xe9/.test(s[A])||(/D\xe9part :/.test(s[A])?(v=s[A].innerText("D\xe9part :").nextTag("td4").tagContents(),T=s[A].innerText("D\xe9part :").nextTag("td4").nextTag("td4").tagContents(),/, terminal/.test(T)&&(T=(""+T).match(/(.+), terminal/)[1]),C=s[A].innerText("Arriv\xe9e : ").nextTag("td4").tagContents(),x=s[A].innerText("Arriv\xe9e : ").nextTag("td4").nextTag("td4").tagContents(),/, terminal/.test(x)&&(x=(""+x).match(/(.+), terminal/)[1]),[,g,c,l]=s[A].innerText("Compagnie :").nextTag("td3").tagContents().innerCapture(/(.+)([A-Z0-9]{2}) (\d+)/),v=combineDateAndTime(u,v),C=combineDateAndTime(u,C),ASSERT(l,v,C)&&F.push({airlineName:g,airlineCode:c,flightNumber:l,departureTime:v,departureCode:h,departureAirport:T.trim(),arrivalTime:C,arrivalCode:f,arrivalAirport:x.trim(),passengers:S})):u=s[A].innerDate());var P=[];for(A=0;F.length>A;A++){var k=F[A],z=Object.keys(k.passengers);for(b=0;z.length>b;b++){y=k.passengers[z[b]];var D={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:k.airlineName.trim(),airlineCode:k.airlineCode,flightNumber:k.flightNumber,departureAirportFuzzy:k.departureAirport,departureAirportCode:k.departureCode,departureTime:k.departureTime,arrivalAirportFuzzy:k.arrivalAirport,arrivalAirportCode:k.arrivalCode,arrivalTime:k.arrivalTime},underName:{"@type":"http://schema.org/Person",name:y.name},checkinUrl:n,reservationId:a,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:y.totalPrice,priceCurrency:y.priceCurrency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:r,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:"",seatingType:""}}};P.push(D)}}if(P.length)return P}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/516/517","SG79e134e9")]);

// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,a){var r=Scanner.fromMessage(e);r.setLocale(t);var n,i,l,g,m,o,p,s,b,T,u,c,h,x,d,v,C,N=[],f={};g=r.getSpan().nextText(a.ticketInfo).parentTag("table3").nextTag("table3").allInnerTags("table6");for(var y=0;g.length>y;y++){s=g[y].nextTag("table7").nextTag("table7").nextTag("table7").nextTag("table7").nextTag("table7").nextTag("table7"),l=s.nextTag("table7").tagContents(),l=(""+l).split("\n").filter(function(e,t,a){return a.indexOf(e)==t}),c=s.nextTag("table7").nextTag("table7").tagContents().innerCapture(/(.+)\n(.+)\n(.+)/,1),u=s.nextTag("table7").nextTag("table7").tagContents().allInnerDates(),u=combineDateAndTime(u[0],u[1]),x=s.nextTag("table7").nextTag("table7").nextTag("table7").tagContents().innerCapture(/(.+)\n(.+)\n(.+)/,1),h=s.nextTag("table7").nextTag("table7").nextTag("table7").tagContents().allInnerDates(),h=combineDateAndTime(h[0],h[1]),T=s.nextTag("table7").nextTag("table7").nextTag("table7").nextTag("table7").tagContents().innerCapture(/(\w+)\s(\d+)/,1),m=s.nextTag("table7").nextTag("table7").nextTag("table7").nextTag("table7").tagContents().innerCapture(/(\w+)\s(\d+)/,2);for(var A=0;l.length>A;A++)f[A]={name:l[A],programName:C,membershipNumber:v,ticketNumber:d,seats:{},seatingType:{},totalPrice:o,priceCurrency:p};ASSERT(T,m,u,c,h,x)&&N.push({airlineCode:T,airlineName:b,flightNumber:m,departureAirport:c,departureTime:u,arrivalAirport:x,arrivalTime:h,passengers:f})}for(var k=[],y=0;N.length>y;y++)for(var S=N[y],z=Object.keys(S.passengers),A=0;z.length>A;A++){var F=S.passengers[z[A]],I={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:S.airlineName,airlineCode:S.airlineCode,flightNumber:S.flightNumber,departureAirportFuzzy:S.departureAirport,departureAirportCode:S.departureCode,departureTime:S.departureTime,arrivalAirportFuzzy:S.arrivalAirport,arrivalAirportCode:S.arrivalCode,arrivalTime:S.arrivalTime},underName:{"@type":"http://schema.org/Person",name:F.name,email:F.email},checkinUrl:i,reservationId:n,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:F.totalPrice,priceCurrency:F.priceCurrency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:F.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:F.seats[S.flightNumber],seatingType:F.seatingType[S.flightNumber]}}};valid(F.membershipNumber,F.programName)&&(I.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:F.membershipNumber,programName:F.programName}),k.push(I)}return k.length?k:void 0}}).call();

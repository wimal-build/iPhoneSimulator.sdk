// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("southwest-cancellation-en",function(e){return/^CANCELLED flight reservation/.test(e.subject)},function(e){if(/^CANCELLED flight reservation/.test(e.subject)){var r="en_US",t="Cancelled",a={};a.reservationId_prefix=/AIR Confirmation\:/,a.price_prefix=/Total Air Cost/,a.checkinUrl_prefix=/Check In Online/,a.passengers_prefix=/Passenger\(s\)/;var n=loadHelper("southwest-skeleton.js");return n(e,r,a,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/564/565","SGd8485f4e"),new ReverseTemplate("southwest-change-en",function(e){return/^UPDATED flight reservation/.test(e.subject)},function(e){if(/^UPDATED flight reservation/.test(e.subject)){var r="en_US",t="Confirmed",a={};a.reservationId_prefix=/AIR Confirmation\:/,a.price_prefix=/Total Air Cost/,a.checkinUrl_prefix=/Check In Online/,a.passengers_prefix=/Passenger\(s\)/;var n=loadHelper("southwest-skeleton.js");return n(e,r,a,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/564/566","SG724ab2e2"),new ReverseTemplate("southwest-confirmation-en",function(e){return/^Flight reservation/.test(e.subject)},function(e){if(/^Flight reservation/.test(e.subject)){var r="en_US",t="Confirmed",a={};a.reservationId_prefix=/AIR Confirmation\:/,a.price_prefix=/Total Air Cost/,a.checkinUrl_prefix=/Check In Online/,a.passengers_prefix=/Passenger\(s\)/;var n=loadHelper("southwest-skeleton.js");return n(e,r,a,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/564/567","SGec54fde0"),new ReverseTemplate("southwest-reminder-en",function(e){return/^Your Upcoming.*Itinerary/.test(e.subject)},function(e){if(/^Your Upcoming.*Itinerary/.test(e.subject)){var r="en_US",t="Confirmed",a={};a.reservationId_prefix=/Air Confirmation/,a.price_prefix=/Total Air Cost/,a.checkinUrl_prefix=/Check In Online/,a.passengers_prefix=/Passenger\(s\)/;var n=loadHelper("southwest-reminder-skeleton.js");return n(e,r,a,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/564/568","SG525ea202"),new ReverseTemplate("southwest-sharing-en",function(e){return/^Ticketless Travel Passenger Itinerary/.test(e.subject)},function(e){if(/^Ticketless Travel Passenger Itinerary/.test(e.subject)){var r="en_US",t="Confirmed",a={};a.reservationId_prefix=/AIR Confirmation\:/,a.checkinUrl_prefix=/Check In Online/,a.passengers_prefix=/Passenger\(s\)/;var n=loadHelper("southwest-sharing-skeleton.js");return n(e,r,a,t)}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/564/569","SGedd3a16e"),new ReverseTemplate("southwest.com-earlybird-confirmation-en",function(e){return/EarlyBird Confirmation/.test(e.subject)},function(e){if(/EarlyBird Confirmation/.test(e.subject)){var r=Scanner.fromMessage(e);r.setLocale("en_US");var t,a,n,i,s,o,p,l,u,m,c,h,g,d,v,f,b,C,T,y,A=[],N={},k=loadHelper("southwest.com-common.js");a=r.getSpan().innerCapture(/\bCheck-In Online <(.*?)>/,1),t=r.getSpan().innerCapture(/\bConfirmation Number: (\w+)/,1),u=r.getSpan().nextText("Departure/Arrival").parentTag("table4").allInnerTags("tr4").map(function(e){return e.allInnerTagsFiltered("td4")}),l=r.getSpan().innerCapture(/\bTotal Cost: .*?([\d,.]+)/,1);for(var S=1;u.length>S;S++)o=u[S],4===o.length&&(i=o[0],s=o[3].innerDate(),p=o[2].innerCapture(/(\d+)/,1),g=o[1].innerCapture(k.departureRegex),b=o[1].innerCapture(k.arrivalRegex),valid(g,b)&&(m=o[1].allDates(),h=g.$name.result()||g.$changeName.result()||"Southwest Airlines",v=g.$departureAirport,f=g.$departureCode,d=combineDateAndTime(s,m[0]),T=b.$arrivalAirport,y=b.$arrivalCode,C=combineDateAndTime(s,m[1])),ASSERT(i,h,p,f,d,y,C)&&(N[""+i]={name:i,seats:{},seatingType:{},totalPrice:l},A.push({airlineName:h,flightNumber:p,reservationId:t,departureAirport:v,departureCode:f,departureTime:d,arrivalAirport:T,arrivalCode:y,arrivalTime:C,passengers:N}),c=p=m=h=v=f=d=T=y=C=null,N={}));for(var x=[],I=0;A.length>I;I++)for(var w=A[I],j=Object.keys(w.passengers),R=0;j.length>R;R++){var P=w.passengers[j[R]];n={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:w.airlineName,airlineCode:w.airlineCode||"WN",flightNumber:w.flightNumber,departureAirportFuzzy:w.departureAirport,departureAirportCode:w.departureCode,departureTime:w.departureTime,arrivalAirportFuzzy:w.arrivalAirport,arrivalAirportCode:w.arrivalCode,arrivalTime:w.arrivalTime},underName:{"@type":"http://schema.org/Person",name:P.name},checkinUrl:a,reservationId:w.reservationId,reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:P.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:P.seats[w.flightNumber]}},totalPrice:P.totalPrice,priceCurrency:P.currency},valid(P.membershipNumber)&&(n.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:P.membershipNumber,programName:"Rapid Rewards"}),x.push(n)}if(x.length)return x}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/564/570","SG6e7f80fd"),new ReverseTemplate("southwest.com-itinerary-en",function(e){return/^Southwest Airlines Confirmation/.test(e.subject)||/^(?:(?:UPDATED|CANCELLED) )?[Ff]light reservation/.test(e.subject)||/^Ticketless Travel Passenger Itinerary/.test(e.subject)},function(e){if(/^Southwest Airlines Confirmation/.test(e.subject)||/^(?:(?:UPDATED|CANCELLED) )?[Ff]light reservation/.test(e.subject)||/^Ticketless Travel Passenger Itinerary/.test(e.subject)){var r=Scanner.fromMessage(e);r.setLocale("en_US");var t,a,n,i,s,o,p=[],l={},u=loadHelper("southwest.com-common.js"),m=/^CANCELLED flight reservation/.test(e.subject)?"Carryon Items:":/What you need to know to travel:/.test(e.plain)?"What you need to know to travel:":"Carry-on Items";/^CANCELLED flight reservation/.test(e.subject)&&(a="Cancelled"),t=r.getSpan().innerCapture(/\bCheck In Online <(.*?)>/,1),s=r.getSpan().nextText("Total Air Cost").nextTag("td5").nextTag("td5").tagContents();for(var c=r.getSpan();c.nextText("AIR Itinerary").exists();){c=c.nextText("AIR Itinerary").withEnd(c.nextText(m).getEnd()),l={},o=c.innerText("Passenger(s)").nextTag("table4").withEnd(c.innerText("Departure/Arrival").parentTag("table4").getStart()).allInnerTags("table4").map(function(e){return e.allInnerTagsFiltered("td4")}).filter(function(e){return e.length>=1&&e[0].innerCapture(/^[A-Z\/\s]+$/)});for(var h,g=0;h=o[g++];)i=""+h[0],l[i]={name:i,membershipNumber:h[1]&&h[1].innerCapture(/^(\d+)/,1),ticketNumber:h[2],totalPrice:s,seats:{},seatingType:{}};u.addFlightLegs(p,l,m,c),c=c.collapseToEnd()}for(var d=[],g=0;p.length>g;g++)for(var v=p[g],f=Object.keys(v.passengers),b=0;f.length>b;b++){var C=v.passengers[f[b]];n={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:v.airlineName,airlineCode:v.airlineCode||"WN",flightNumber:v.flightNumber,departureAirportFuzzy:v.departureAirport,departureAirportCode:v.departureCode,departureTime:v.departureTime,arrivalAirportFuzzy:v.arrivalAirport,arrivalAirportCode:v.arrivalCode,arrivalTime:v.arrivalTime},underName:{"@type":"http://schema.org/Person",name:C.name},checkinUrl:t,reservationId:v.reservationId,reservationStatus:"http://schema.org/Reservation"+(a||"Confirmed"),reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:C.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:C.seats[v.flightNumber]}},totalPrice:C.totalPrice,priceCurrency:C.currency},not(C.membershipNumber)||(n.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:C.membershipNumber,programName:"Rapid Rewards"}),d.push(n)}if(d.length)return d}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/564/571","SGe353d903"),new ReverseTemplate("southwest.com-trip-reminder-en",function(e){return/^Your trip is around the corner!/.test(e.subject)||/^Your Upcoming .*? Itinerary/.test(e.subject)},function(e){if(/^Your trip is around the corner!/.test(e.subject)||/^Your Upcoming .*? Itinerary/.test(e.subject)){var r=Scanner.fromMessage(e);r.setLocale("en_US");var t,a,n,i,s,o=[],p={},l=loadHelper("southwest.com-common.js");t=r.getSpan().innerCapture(/\bCheck In Online <(.*?)>/,1),s=r.getSpan().nextText("Passenger(s)").nextTag("table4").withEnd(r.getSpan().nextText("Departure/Arrival").parentTag("table4").getStart()),i=s.allInnerTags("table4").map(function(e){return e.allInnerTags("td4").map(function(e){return e.tagContents()}).filter(function(e){return e.getLength()})}).filter(function(e){return e.length>=1}).map(function(e){return e[e.length-1]});for(var n,u=0;n=i[u++];)n=""+n,p[n]={name:n,seats:{},seatingType:{}};var m=/What you need to know to travel:/.test(e.plain)?"What you need to know to travel:":"Carry-on Items";l.addFlightLegs(o,p,m,r.getSpan());for(var c=[],u=0;o.length>u;u++)for(var h=o[u],g=Object.keys(h.passengers),d=0;g.length>d;d++){var v=h.passengers[g[d]];a={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:h.airlineName,airlineCode:h.airlineCode||"WN",flightNumber:h.flightNumber,departureAirportFuzzy:h.departureAirport,departureAirportCode:h.departureCode,departureTime:h.departureTime,arrivalAirportFuzzy:h.arrivalAirport,arrivalAirportCode:h.arrivalCode,arrivalTime:h.arrivalTime},underName:{"@type":"http://schema.org/Person",name:v.name},checkinUrl:t,reservationId:h.reservationId,reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:v.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:v.seats[h.flightNumber]}},totalPrice:v.totalPrice,priceCurrency:v.currency},not(v.membershipNumber)||(a.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:v.membershipNumber,programName:"Rapid Rewards"}),c.push(a)}if(c.length)return c}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/244/564/572","SG52dcfe11")]);

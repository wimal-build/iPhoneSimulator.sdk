// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r){var a=Scanner.fromMessage(e),n=a.getSpan();a.setLocale(t);var i,o,p,l,s,g,u,d,c=[],m=[],C=n.nextText(r.underPersonNamePrefix).nextAnyTag("table").nextAnyTag("tr").allInnerTags("td8");return i=C[0].tagContents(),o=C[2].tagContents(),p=C[4].tagContents(),[,s,g]=n.nextText(r.pricePrefix).nextAnyTag("td").tagContents().innerCapture(/([\d,.]+)\s?(\D)/),u=n.nextText(r.ticketNumberPrefix).nextAnyTag("td").tagContents(),n.nextText(r.flightBlock).parentTag("table8").allInnerTags("table9").forEach(function(e){for(var t=e.allInnerTags("tr9").filter(function(e){var t=""+e.tagContents();return 0!==(""+e.tagContents()).length&&-1===t.indexOf(r.flightBlock)}),n=t.length,i=0;n>i;i+=3){var o,p,l,s,g,u,d,m,C=t[i+2].allInnerTags("td10");[,o,p]=t[i+1].tagContents().innerCapture(/.*?\s(\D{2})(\d+)/);var h=""+t[i].tagContents();l=a.getDetachedSpan(h+" "+C[2].tagContents()).innerDate(),[,s,g]=C[0].tagContents().innerCapture(/(.*)?\s\((\D{3})\)/),u=a.getDetachedSpan(h+" "+C[5].tagContents()).innerDate(),[,d,m]=C[3].tagContents().innerCapture(/(.*)?\s\((\D{3})\)/),c.push({airlineName:null,airlineCode:o,flightNumber:p,departureDateTime:l,departureAirport:s,departureAirportCode:g,arrivalDateTime:u,arrivalAirport:d,arrivalAirportCode:m,seatNumber:null,seatType:null})}}),c.forEach(function(e){ASSERT(i,e.airlineName||e.airlineCode,e.departureAirport||e.departureAirportCode,e.departureDateTime,e.arrivalAirport||e.arrivalAirportCode,e.arrivalDateTime)&&m.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:e.airlineName,airlineCode:e.airlineCode,flightNumber:e.flightNumber,departureAirportFuzzy:e.departureAirport,departureAirportCode:e.departureAirportCode,departureTime:e.departureDateTime,arrivalAirportFuzzy:e.arrivalAirport,arrivalAirportCode:e.arrivalAirportCode,arrivalTime:e.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:i},checkinUrl:d,reservationId:l,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:s,priceCurrency:g,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:u,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:e.seatNumber,seatingType:e.seatingType}}})}),m.length>=1?m:CONTINUE}}).call();
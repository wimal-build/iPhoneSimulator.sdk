// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e){var t=Scanner.fromMessage(e);t.setLocale("en_US");var n,a,r,o,i,g,s,p,c,d,h,m,x,T,u;d=t.getSpan().nextText("Showtime & Theater Details").nextAnyTag("table"),g=d.innerRegExp(/Movie ?:/).nextAnyTag("td").tagContents(),p=d.innerRegExp(/Date ?:/).nextAnyTag("td").innerDate(),c=d.innerRegExp(/Time ?:/).nextAnyTag("td").innerDate(),m=combineDateAndTime(p,c),i=d.innerText("Quantity:").nextAnyTag("td").tagContents(),h=t.getDetachedSpan(""+d.innerText("Where:").nextAnyTag("td").tagContents()),u=getFuzzyAddress(h),T=h.nextPhoneNumber(),d=t.getSpan().innerText("Where:").nextAnyTag("td").tagContents().innerCapture(/\b($<place>.*)\s($<address>[^]+)\nPhone/);var y=d?d.$place:null;return u=d&&not(u)?d.$address.trim():u,r=t.getSpan().nextText("Confirmation Number").nextAnyTag("td").tagContents(),o=t.getSpan().innerCapture(/\bView your ticket confirmation page:(?:.*)<(.*)>/,1),n=t.getSpan().nextText("Total Order Amount").nextAnyTag("td").tagContents().innerCapture(/([\d,.]+)/,1),ASSERT(m,g)?[{"@context":"http://schema.org","@type":"http://schema.org/EventReservation",totalPrice:n,priceCurrency:a,reservedTicket:{"@type":"http://schema.org/Ticket",ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:i},ticketToken:o,ticketNumber:r},reservationFor:{"@type":"http://schema.org/MovieShowing",eventStatus:"http://schema.org/EventConfirmed",url:s,startDate:m,endDate:x,movie:{"@type":"http://schema.org/Movie",name:g},location:{"@type":"http://schema.org/Place",name:y,telephone:T,address:u}}}]:void 0}}).call();
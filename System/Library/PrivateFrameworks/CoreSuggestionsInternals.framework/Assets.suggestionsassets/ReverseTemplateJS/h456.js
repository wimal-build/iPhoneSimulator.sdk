// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,i,s,o,g,c,d,p,m,u,l,x,T,h,C;return n.cancellation.test(e.subject)&&(d="Cancelled"),c=a.getSpan().nextText(n.reservationId).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1 (.*)/,n.reservationId),1),s=a.getSpan().nextText(n.reservationDetails).nextTag("table5"),C=s.innerTag("td5").tagContents().innerCapture(/($<name>.*)\n($<address>[^]+)$/),l=C?C.$name.trim():null,T=C?C.$address.trim():null,p=s.innerText(n.checkIn).nextDate(),m=s.innerText(n.checkOut).nextDate(),s=a.getSpan().nextText(n.guestDetails).nextTag("table5"),r=s.innerText(n.underName).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)$/,n.underName),1),i=s.innerText(n.email).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)$/,n.email),1),h=a.getSpan().nextText(n.price).nextAnyTag("td").tagContents(),o=h.innerCapture(/([\d,.]+)/,1),g=h.innerCapture(/([^\d,.]+)/,1),ASSERT(r,p,m,T)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:i},totalPrice:o,priceCurrency:g,checkinTime:p,checkoutTime:m,reservationStatus:"http://schema.org/Reservation"+(d||"Confirmed"),reservationId:c,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:l,url:u,telephone:x,address:T}}]:void 0}}).call();

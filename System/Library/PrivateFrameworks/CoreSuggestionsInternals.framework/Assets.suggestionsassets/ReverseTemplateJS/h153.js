// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,r){var t=Scanner.fromMessage(e);t.setLocale(r);var a,i,n,o,l,p,d,u,m,g,T,h=[];a=t.getSpan().nextText("Confirmation code").nextTag("td5").nextTag("td5").nextTag("td5").tagContents(),d=a.nextTag("td5").tagContents(),l=t.getSpan().nextText("Flight #").nextText("Departure time").parentTag("table5"),o=l.previousTag("table6").innerDate(),l=l.allInnerTags("tr5").map(function(e){return e.allInnerTagsFiltered("td5")}).filter(function(e){return e.length>=3}),p=l[1][0],u=combineDateAndTime(o,l[1][1].innerDate()),m=l[1][1].innerCapture(/([A-Z]{3})$/,1),g=combineDateAndTime(o,l[1][2].innerDate()),T=l[1][2].innerCapture(/([A-Z]{3})$/,1),ASSERT(d,p,m,u,T,g)&&(u>g&&(g=modifyDate(g,1)),h.push({airlineName:d,flightNumber:p,departureCode:m,departureTime:u,arrivalCode:T,arrivalTime:g}));for(var s=[],v=0;h.length>v;v++){var c=h[v];n={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:c.airlineName,airlineCode:c.airlineCode||"US",flightNumber:c.flightNumber,departureAirportFuzzy:c.departureAirport,departureAirportCode:c.departureCode,departureTime:c.departureTime,arrivalAirportFuzzy:c.arrivalAirport,arrivalAirportCode:c.arrivalCode,arrivalTime:c.arrivalTime},checkinUrl:i,reservationId:a,reservationStatus:"http://schema.org/ReservationConfirmed"},s.push(n)}return s.length?s:void 0}}).call();
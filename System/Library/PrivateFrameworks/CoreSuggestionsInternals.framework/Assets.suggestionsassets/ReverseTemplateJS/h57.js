// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,s,o,p,d,g,i,c,x,l,A,T,h,m,y,u,S,f,C,v,b;if(s=a.getSpan().next(n.name).parentAnyTag("td").tagContents().innerCapture(n.name,1),b=a.getSpan().nextText(n.pickup).parentAnyTag("td").tagContents().innerDate(),S=b.nextAnyTag("td").tagContents().innerDate(),p=a.getSpan().nextText(n.reservationId).nextAnyTag("td").tagContents(),i=c=p.nextLink(),A=a.getSpan().nextText(n.brand).nextAnyTag("td").nextAnyTag("td").tagContents(),r=a.getSpan().nextText(n.price).nextAnyTag("td").tagContents(),x=r.innerCapture(/([\d,.]+)/,1),l=r.innerCapture(/([^\d,.]+)/,1),f=a.getSpan().nextText(n.pickupAddress).nextAnyTag("td").tagContents(),C=a.getDetachedSpan(a.getSpan().nextText(n.pickupAddress).parentAnyTag("table").allInnerAddresses().join(", ")).lastInnerAddress(),C.exists()||(C=a.getSpan().next(n.pickupAddress).nextAnyTag("td").tagContents()),v=a.getSpan().next(n.pickupAddress).parentAnyTag("table").innerPhoneNumber(),m=a.getSpan().nextText(n.dropoffAddress).nextAnyTag("td").tagContents(),y=a.getDetachedSpan(a.getSpan().nextText(n.dropoffAddress).parentAnyTag("table").allInnerAddresses().join(", ")).lastInnerAddress(),y.exists()||(y=a.getSpan().next(n.dropoffAddress).nextAnyTag("td").tagContents()),u=a.getSpan().next(n.dropoffAddress).parentAnyTag("table").innerPhoneNumber(),n.cancellation.test(e.subject)&&(d="Cancelled"),ASSERT(p,s,C,b)){var k={"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:x,priceCurrency:l,reservationId:p,reservationStatus:"http://schema.org/Reservation"+(d||"Confirmed"),checkinUrl:g,modifyReservationUrl:i,cancelReservationUrl:c,underName:{"@type":"http://schema.org/Person",name:s,email:o},provider:{"@type":"http://schema.org/Organization",name:"Avis"},pickupTime:b,pickupLocation:{"@type":"http://schema.org/Place",name:f,telephone:v,address:C},dropoffTime:S,dropoffLocation:{"@type":"http://schema.org/Place",name:m,telephone:u,address:y}};return A&&(k.reservationFor={"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:A},license:T,color:h}),[k]}}}).call();

// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,r,t,a){var i=Scanner.fromMessage(e);i.setLocale(r);var n,o,p,s,m,u,l=i.getSpan(),c=[],g=[];n=(""+l.innerCapture(regExpFormatted(/\1 (.*)/,t.reservationId_prefix),1)).trim(),s=l.next(t.checkinUrl_prefix).nextLink();var h=l.allInnerTags("tr5").filter(function(e,r){var t=""+e.tagContents();return 0!==t.length&&(t.indexOf("Depart ")>-1||t.indexOf("Arrive in")>-1)});return h.forEach(function(e,r){var a,n,o,p,s,g,h,d,v,f,C,N,T,A="Southwest Airlines",b="WN";e=e.allInnerTags("td5"),""+e[0].tagContents()!=""&&(m=u=e[0].tagContents()),a=e[1].tagContents(),o=/(?:Depart|Change planes to.*in)\s(.*)\s\((.*)\).*at\s(.*)/.exec(""+e[2]),g=o[1],h=o[2],p=o[3],d=/Arrive in\s(.*)\s\((.*)\)\s.*at\s(.*)\s\s\n/.exec(""+e[2]),C=d[1],N=d[2],v=d[3],s=getFuzzyDate(i.getDetachedSpan(m+" "+p).firstDate()),f=getFuzzyDate(i.getDetachedSpan(u+" "+v).firstDate()),T=l.next(t.passengers_prefix).parentTag("table3").allInnerTags("tr4").filter(function(e,r){var t=e.allInnerTags("td4");return!(1!==t.length||!/.*\/.*/.exec((""+t[0].tagContents()).trim()))}),T.forEach(function(e,r){var t=e.tagContents();c.push({airlineName:A,airlineCode:b,flightNumber:a,departureDateTime:s,departureAirport:g,departureAirportCode:h,arrivalDateTime:f,arrivalAirport:C,arrivalAirportCode:N,ticketNumber:n,underPersonName:t})})}),c.forEach(function(e,r){ASSERT(e.departureDateTime,e.arrivalDateTime,e.departureAirportCode,e.arrivalAirportCode),g.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:e.airlineName,airlineCode:e.airlineCode,flightNumber:e.flightNumber,departureAirportFuzzy:e.departureAirport,departureAirportCode:e.departureAirportCode,departureTime:e.departureDateTime,arrivalAirportFuzzy:e.arrivalAirport,arrivalAirportCode:e.arrivalAirportCode,arrivalTime:e.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:e.underPersonName},checkinUrl:s,reservationId:n,reservationStatus:"http://schema.org/Reservation"+a,totalPrice:o,priceCurrency:p,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:e.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:e.seatNumber,seatingType:e.seatType}},programMembershipUsed:{"@type":"http://schema.org/ProgramMembership",membershipNumber:e.membershipNumber,programName:e.programName}})}),g.length>=1?g:CONTINUE}}).call();

// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var r=Scanner.fromMessage(e);r.setLocale(t);var a=loadHelper("lafourchette.com-microdata-parser.js"),o={"@type":"http://schema.org/Organization",name:"La Fourchette",url:"http://www.lafourchette.com/"},s=r.getSpan().nextText(n.restaurantInformationBlockLabel),i=s.nextTag("table6").innerPhoneNumber(),l=s.nextText(n.restaurantUrlPrefix).nextLink(),g=a(e);if(g)return g[0].reservationStatus="http://schema.org/ReservationCancelled",g[0].bookingAgent=o,g[0].reservationFor.telephone=i,g[0].reservationFor.url=l,g;var p,m,h,u,c,d,x=e.subject;d=x.indexOf(n.emailType)>-1?r.getSpan().innerCapture(regExpFormatted(/\b\1 (\w*)/,n.hello),1):r.getSpan().nextTag("table2").innerTag("tr2").nextTag("tr2").innerTag("td2").tagContents().innerCapture(regExpFormatted(/(.*) \1/,n.underNameSuffix),1).trim();var T=r.getSpan().nextTag("table5");if(c=T.nextDate(),p=T.nextTag("table6").allInnerTags("tr6")[2].allInnerTags("td6")[1].tagContents().innerCapture(/(\d+)/,1),h=(""+s.nextTag("td5").tagContents()).split("\n")[0].split("<")[0].trim(),u=s.nextAddress(),u===r.getNullSpan()){var f=""+s.nextTag("td5").tagContents();u=f.indexOf("http://")>-1?f.substring(f.lastIndexOf(">")+1,f.length).replace(/(\r\n|\n|\r)/gm," ").trim():f.replace(/(\r\n|\n|\r)/gm,", ").trim()}return ASSERT(p,h,c,d)?[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:p,reservationId:m,reservationStatus:"http://schema.org/ReservationCancelled",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:h,url:l,telephone:i,address:u},startTime:c,bookingAgent:o,underName:{"@type":"http://schema.org/Person",name:d}}]:void 0}}).call();

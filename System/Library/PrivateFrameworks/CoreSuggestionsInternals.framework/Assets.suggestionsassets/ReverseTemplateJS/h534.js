// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var r=Scanner.fromMessage(e);r.setLocale(t);var a,o,p,i,s,g,m,d,x,h;return i=r.getSpan().innerCapture(regExpFormatted(/\1(.*)/,n.under),1).trim(),i.exists()||(i=r.getDetachedSpan(" ")),a=r.getSpan().innerCapture(regExpFormatted(/\1: (\d+)/,n.number),1),m=r.getSpan().innerCapture(regExpFormatted(/reservation_id=(\d+)/),1),o=r.getSpan().innerCapture(regExpFormatted(/\1 (.*)&dates/,n.name),1).trim(),g=r.getSpan().nextText(n.phone).nextText(n.phone),g=r.getSpan().withInterval(g.previousText("\n").getEnd(),g.nextText("\n").getStart()).innerCapture(regExpFormatted(/\1 (.*)/,n.phone),1).trim(),g.innerTag("td1").exists()&&(g=g.innerTag("td1").tagContents()),d=r.getSpan().nextText(n.address).nextAddress(),p=getFuzzyDate(r.getSpan().next(n.date).collapseToEnd().withEnd(r.getSpan().next(n.number).getStart()).trim()),x=r.getSpan().nextText(n.cancel).nextLink(),h=x,ASSERT(a,o,p,i)?[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:a,reservationId:m,reservationStatus:"http://schema.org/ReservationConfirmed",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:o,url:s,telephone:g,address:d},startTime:p,bookingAgent:{"@type":"http://schema.org/Organization",name:"MyTable",url:"http://www.mytable.com/"},underName:{"@type":"http://schema.org/Person",name:i},cancelReservationUrl:x,modifyReservationUrl:h}]:CONTINUE}}).call();

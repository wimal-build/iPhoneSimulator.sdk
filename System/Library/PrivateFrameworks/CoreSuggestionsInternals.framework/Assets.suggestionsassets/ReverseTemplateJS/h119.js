// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,o,i,p,c,s,g,m,l,d,h,u,v,x,C,f,y,S,T,R;if(n.confirmSubject.test(e.subject)){i=a.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),r=a.getSpan().nextText(n.guestName).nextAnyTag("td").tagContents(),o=a.getSpan().nextText(n.guestEmail).nextAnyTag("td").tagContents();var E=a.getSpan().nextText(n.pickup).nextAnyTag("td").nextAnyTag("td").tagContents();R=E.innerDate(),E=(""+E).split("\n"),S=""+E.slice(0,-1);var P=a.getSpan().nextText(n.dropoff).nextAnyTag("td").nextAnyTag("td").tagContents();f=P.innerDate(),P=(""+P).split("\n"),x=""+P.slice(0,-1);var k=a.getSpan().nextRegExp(n.price).tagContents().innerCapture(n.price,1);if(m=k.innerCapture(/([\d,.]+)/,1),l=k.innerCapture(/([^\d,.]+)/,1),0===(""+m).length){var k=a.getSpan().nextText(n.priceAlt).nextTag("td3").tagContents();m=k.innerCapture(/([\d,.]+)/,1),l=k.innerCapture(/([^\d,.]+)/,1).trim()}if(!ASSERT(r,i,R,f,S,x))return CONTINUE}else if(n.cancellationSubject.test(e.subject)){i=a.getSpan().nextRegExp(n.cancelReservationId).tagContents().innerCapture(n.cancelReservationId,1),r=a.getSpan().nextRegExp(n.cancelGuestName).tagContents().innerCapture(n.cancelGuestName,1);var E=a.getSpan().nextRegExp(n.cancelPickup).tagContents();if(S=E.innerCapture(n.cancelPickup,1),R=a.getSpan().innerDate(),p="Cancelled",!ASSERT(i,r))return CONTINUE}return d?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:m,priceCurrency:l,reservationId:i,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:r,email:o},provider:{"@type":"http://schema.org/Organization",name:"Vroomvroomvroom"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:d},license:h,color:u},pickupTime:R,pickupLocation:{"@type":"http://schema.org/Place",name:y,telephone:T,address:S},dropoffTime:f,dropoffLocation:{"@type":"http://schema.org/Place",name:v,telephone:C,address:x}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:m,priceCurrency:l,reservationId:i,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:r,email:o},provider:{"@type":"http://schema.org/Organization",name:"Vroomvroomvroom"},pickupTime:R,pickupLocation:{"@type":"http://schema.org/Place",name:y,telephone:T,address:S},dropoffTime:f,dropoffLocation:{"@type":"http://schema.org/Place",name:v,telephone:C,address:x}}]}}).call();

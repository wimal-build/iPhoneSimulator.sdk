// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var a=loadHelper("seatme.com-microdata-parser.js"),r=a(e),i=Scanner.fromMessage(e);if(i.setLocale(t),r)return delete r[0].modifiedTime,r[0].startTime="zh_Hans_CN"===t||"ja_JP"===t?combineDateAndTime(/(.*)T/.exec(r[0].startTime)[1],i.getSpan().innerCapture(/(\d{2}:\d{2})/,1).innerDate()):i.getSpan().innerDate(),r[0]["@context"]="http://schema.org",r[0].reservationStatus="http://schema.org/ReservationConfirmed",r;var o,s,p,m,g,c,d,l,h,S,u;return o=i.getSpan().innerCapture(n.underNameLabel,1),l=i.getSpan().nextAddress(),d=i.getSpan().nextText(n.contactLabel).nextPhoneNumber(),u=i.getSpan().nextRegExp(n.agentUrlLabel).nextLink(),g=i.getSpan().nextText(n.urlLabel).nextLink(),m=i.getSpan().innerCapture(n.partySize,1),p=i.getSpan().innerCapture(n.name,1),c=i.getDetachedSpan(""+i.getSpan().innerCapture(n.startTime,1)).innerDate(),h=i.getSpan().next(n.modifyUrlLabel).nextLink(),h.exists()&&h.innerRegExp(/\/edit\/[-\w]+\//)&&(s=h.innerCapture(/\/edit\/([-\w]+)\//,1)),S=i.getSpan().nextText(n.cancelUrlLabel).nextLink(),ASSERT(p,c,o)?[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:m,reservationId:s,reservationStatus:"http://schema.org/ReservationConfirmed",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:p,url:g,telephone:d,address:l},startTime:c,bookingAgent:{"@type":"http://schema.org/Organization",name:"SeatMe",url:u},underName:{"@type":"http://schema.org/Person",name:o},cancelReservationUrl:S,modifyReservationUrl:h}]:void 0}}).call();
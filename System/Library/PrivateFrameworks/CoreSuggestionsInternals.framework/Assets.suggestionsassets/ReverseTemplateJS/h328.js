// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r){var n=Scanner.fromMessage(e);n.setLocale(t);var a,i=n.getSpan().innerCapture(regExpFormatted(/\1\s(\d+)/,r.reservationIdPrefix),1),c=n.getSpan().nextText(r.orderDetailsHeader).parentTag("table3"),g=n.getSpan().withInterval(c.nextTag("td6").tagContents().getStart(),c.nextText("<").getStart()).trim(),p=n.getSpan().withInterval(c.nextText(">").getEnd(),c.nextText(r.viewMapSuffix).getStart()).trim(),s=n.getSpan().innerCapture(regExpFormatted(/<\1(.*?)>/,r.phoneNumberPrefix),1),o=/[\D]{3}\s(\d{1,2})\s([a-z]{3})\s(\d{4})\s(\d{1,2}:\d{2})/,x=function(e,r,n,a,i){return"es_ES"===t&&(n=n.replace(/^may$/,"mayo")),r+" "+n+" "+a+" "+i},d=n.getDetachedSpan((""+n.getSpan().nextText(r.checkInPrefix).nextAnyTag("td").tagContents()).replace(o,x)).innerDate(),u=n.getDetachedSpan((""+n.getSpan().nextText(r.checkOutPrefix).nextAnyTag("td").tagContents()).replace(o,x)).innerDate(),m=n.getSpan().nextText(r.guestNamePrefix).parentTag("td5").tagContents().innerCapture(regExpFormatted(/\1: (.+)/,r.guestNamePrefix),1).trim(),h=n.getSpan().nextText(r.pricePrefix).parentTag("td5").tagContents().innerCapture(regExpFormatted(/\1 ($<currency>[^\d]+)?($<price>[\d\.,]+)($<currency_suffix>[^\d]+)?/,r.pricePrefix));a=h.$currency.exists()?h.$currency.trim():h.$currency_suffix.trim();var S=h.$price;return ASSERT(m,i,d,u,p)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:m},totalPrice:S,priceCurrency:a,checkinTime:d,checkoutTime:u,reservationStatus:"http://schema.org/ReservationConfirmed",reservationId:i,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:g,telephone:s,address:p}}]:void 0}}).call();
// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,r,t){var a=Scanner.fromMessage(e);a.setLocale(r);var i,n,o,p,m=a.getSpan(),l="Confirmed",s=[],u=[],g=[];i=/- (.*)/.exec(e.subject)[1];for(var c=m.next(t.flightDetails_prefix);c!==a.getNullSpan();){var d,h,v,A,N,T,b,f,u,y="Monarch Airlines",C="ZB",x=c.parentAnyTag("table"),D=t.airportsName_regex.exec(x.nextAnyTag("td").tagContents());A=D[1],b=D[2];var S=x.nextAnyTag("td").nextAnyTag("td").tagContents();d=t.flightNumber_regex.exec(""+S)[1];var k=S.allInnerDates();v=combineDateAndTime(k[0],k[1]),T=combineDateAndTime(k[1],k[2]),u=c.nextAnyTag("table").allInnerTags("tr5"),u.forEach(function(e,r){var t;t=e.nextAnyTag("td").tagContents(),s.push({airlineName:y,airlineCode:C,flightNumber:d,departureDateTime:v,departureAirport:A,departureAirportCode:N,arrivalDateTime:T,arrivalAirport:b,arrivalAirportCode:f,ticketNumber:h,underPersonName:t})}),c=c.next(t.flightDetails_prefix)}return s.forEach(function(e,r){ASSERT(e.departureDateTime,e.arrivalDateTime,e.departureAirport,e.arrivalAirport,e.flightNumber,e.airlineCode),g.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:e.airlineName,airlineCode:e.airlineCode,flightNumber:e.flightNumber,departureAirportFuzzy:e.departureAirport,departureAirportCode:e.departureAirportCode,departureTime:e.departureDateTime,arrivalAirportFuzzy:e.arrivalAirport,arrivalAirportCode:e.arrivalAirportCode,arrivalTime:e.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:e.underPersonName},checkinUrl:p,reservationId:i,reservationStatus:"http://schema.org/Reservation"+l,totalPrice:n,priceCurrency:o,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:e.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:e.seatNumber,seatingType:e.seatType}},programMembershipUsed:{"@type":"http://schema.org/ProgramMembership",membershipNumber:e.membershipNumber,programName:e.programName}})}),g.length>=1?g:CONTINUE}}).call();

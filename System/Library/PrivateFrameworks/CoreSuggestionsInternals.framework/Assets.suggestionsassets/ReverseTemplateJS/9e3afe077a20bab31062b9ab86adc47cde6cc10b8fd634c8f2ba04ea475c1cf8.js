// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("usairways.com-flight-delay-en",function(e){return/^Flight [Dd]elay impacting/.test(e.subject)},function(e){if(/^Flight [Dd]elay impacting/.test(e.subject)){var r=Scanner.fromMessage(e);r.setLocale("en_US");var t,a,i,n,o,p,d,l,u,s,m,g,v=[];if(r.getSpan().nextText("BeNotified").nextText("Your flight is delayed").exists()){var h={},c="en_US",f=loadHelper("usairways.com-departure-reminder.js");return f(e,c,h)}r.getSpan().nextText("Your updated flight information:").exists()&&(n=r.getSpan().innerCapture(concatRegExp(/Your updated flight information:\s/,/Departing on: ($<currentDate>.*?)\s/,/($<airlineName>.*?) flight # ($<flightNumber>\d+)\s/,/Depart: ($<departureAirport>.*?) \(($<departureCode>[A-Z]{3})\) at ($<departureTime>\d{1,2}:\d{2} [AP]M)\s/,/Arrive: ($<arrivalAirport>.*?) \(($<arrivalCode>[A-Z]{3})\) at ($<arrivalTime>\d{1,2}:\d{2} [AP]M)/)),n&&(p=n.$airlineName,o=n.$flightNumber,l=n.$departureAirport,u=n.$departureCode,d=r.getDetachedSpan(""+n.$currentDate+" "+n.$departureTime).innerDate(),m=n.$arrivalAirport,g=n.$arrivalCode,s=r.getDetachedSpan(""+n.$currentDate+" "+n.$arrivalTime).innerDate(),valid(p,o,l,u,d,m,g,s)&&(r.getDateDD(s).iso8601<r.getDateDD(d).iso8601&&(s=modifyDate(s,1)),v.push({airlineName:p,flightNumber:o,departureAirport:l,departureCode:u,departureTime:d,arrivalAirport:m,arrivalCode:g,arrivalTime:s}))));for(var $=[],D=0;v.length>D;D++){var A=v[D];i={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:A.airlineName,airlineCode:A.airlineCode||"US",flightNumber:A.flightNumber,departureAirportFuzzy:A.departureAirport,departureAirportCode:A.departureCode,departureTime:A.departureTime,arrivalAirportFuzzy:A.arrivalAirport,arrivalAirportCode:A.arrivalCode,arrivalTime:A.arrivalTime},checkinUrl:a,reservationId:t,reservationStatus:"http://schema.org/ReservationConfirmed"},$.push(i)}if($.length)return $}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/185/464/468","SGf27c4f3b")]);
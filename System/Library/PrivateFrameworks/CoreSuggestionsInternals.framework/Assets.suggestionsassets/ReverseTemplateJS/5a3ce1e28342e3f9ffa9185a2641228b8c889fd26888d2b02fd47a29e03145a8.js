// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("opentable.com-cancellation-en",function(e){return/Cancell?ation$/.test(e.subject)},function(e){if(/Cancell?ation$/.test(e.subject)){var t=loadHelper("opentable.com-microdata-parser.js"),n=t(e);if(n)return n;var r=Scanner.fromMessage(e);r.setLocale("en_US");var a,o,s,i,p,l,c,u,m,d,g;if(a=r.getSpan().innerCapture(/^Dear (.*),/,1),o=r.getSpan().innerCapture(/\boriginal reservation: (\d+)/,1),r.getSpan().innerCapture(/\b has cancell?ed your reservation/)?(s=r.getSpan().innerCapture(concatRegExp(/^Dear ($<underName>.*)\,/,/\s*\n($<name>.*) has cancell?ed your reservation for ($<partySize>\d+) ($<startTime>on .*)\./,/\s*\n.*please contact ($=name) at ($<phone>.*?)\./)),p=s?s.$partySize:null,i=s?s.$name:null,c=s?s.$startTime:null,u=s?s.$phone.innerPhoneNumber():null):r.getSpan().innerCapture(/\bYou've successfully cancell?ed your reservation/)&&(s=r.getSpan().innerCapture(/\bYou've successfully cancell?ed your reservation for a party of ($<partySize>\d+) at ($<name>.*) ($<startTime>on .*)\./),p=s?s.$partySize:null,i=s?s.$name:null,c=s?s.$startTime:null),ASSERT(p,i,c,a))return[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:p,reservationId:o,reservationStatus:"http://schema.org/ReservationCancelled",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:i,url:l,telephone:u,address:m},startTime:c,bookingAgent:{"@type":"http://schema.org/Organization",name:"OpenTable",url:"http://www.opentable.com/"},underName:{"@type":"http://schema.org/Person",name:a},cancelReservationUrl:g,modifyReservationUrl:d}]}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/929/990/994","SG90a7c84d"),new ReverseTemplate("opentable.com-cancellation-es",function(e){return/^Cancelaci\xf3n/.test(e.subject)},function(e){if(!/^Cancelaci\xf3n/.test(e.subject))return CONTINUE;var t={};t.hello="Estimado(a)",t.number="N\xfamero de confirmaci\xf3n",t.person="Grupo de",t.cancel="cancelada:";var n="es_MX",r="opentable.com.mx",a=loadHelper("opentable.com-cancellation-skeleton.js");return a(e,n,t,r)},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/929/990/995","SG457b9439"),new ReverseTemplate("opentable.com-confirmation-en",function(e){return/^Your Reservation Confirmation for/.test(e.subject)||/^Your request for a reservation [\s\S]* is confirmed$/.test(e.subject)},function(e){if(/^Your Reservation Confirmation for/.test(e.subject)||/^Your request for a reservation [\s\S]* is confirmed$/.test(e.subject)){var t="en_US",n=loadHelper("opentable.com-microdata-parser.js"),r=n(e,t);if(r)return r;if(int(e.epoch)<1325376e3)return CONTINUE;var a=Scanner.fromMessage(e);a.setLocale(t);var o={};o.partySize=/(?:Table\sfor|Party\sof)/,o.reservation="Your reservation is confirmed for",o.thanks="Thanks for using OpenTable!";var s,i,p,l,c,u,m,d,g,S,h;if(p=a.getSpan().innerCapture(/Your (?:table|reservation) for ($<partySize>\d+) at ($<name>.*)\s+(?:will be ready on|is confirmed for)\s+($<startTime>.*)\. The reservation is held under: ($<underName>.*)\./),s=a.getSpan().innerCapture(/^Dear (.*),/,1),s=p?p.$underName||s:null,(s===a.getNullSpan()||null===s)&&(s=a.getSpan().next(o.partySize).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/(.*)\s+\1/,o.partySize),1),""+s==""&&(s=a.getSpan().next(o.partySize).previousTag("td6").tagContents())),c=p?p.$partySize:null,null===c&&(c=a.getSpan().next(o.partySize).parentAnyTag("td").innerCapture(regExpFormatted(/\1\s(\d+)\s/,o.partySize),1)),i=a.getSpan().innerCapture(/\bYour confirmation number: (\d+)/,1),i===a.getNullSpan()&&(i=a.getSpan().nextText("Have questions?").parentTag("td4").innerCapture(/\bYou can reference reservation number (\d+)/,1)),g=a.getSpan().nextText("To get there:").collapseToEnd().withEnd(a.getSpan().nextText("Cross Street:").getStart()).trim(),g=not(g.innerAddress())?g.innerCapture(/^.*\r?\n(.*)$/,1):g.innerAddress(),g===a.getNullSpan()&&(g=a.getSpan().nextTag("table8").nextTag("td8").tagContents().innerCapture(/^([.\S\s]*)\sCross\sStreet/,1),g.innerAddress()!==a.getNullSpan()&&(g=g.innerAddress())),d=a.getSpan().nextText("Questions about your reservation? You can always contact").nextPhoneNumber(),d===a.getNullSpan()&&(d=a.getSpan().nextTag("table8").nextTag("td8").innerPhoneNumber()),l=p?p.$name:null,null===l&&(l=(""+a.getSpan().nextTag("table3").nextTag("td3").nextTag("td3").tagContents()).replace(o.reservation,"").replace(o.thanks,"").trim()),m=p?a.getDetachedSpan(""+p.$startTime):null,null===m&&(m=a.getSpan().next(o.partySize).parentAnyTag("td").innerDate()),S=a.getSpan().nextText("Update your reservation date").nextLink(),S===a.getNullSpan()&&(S=a.getSpan().nextText("View or modify reservation").parentTag("td6").innerLink()),h=a.getSpan().nextText("Cancel your reservation").nextLink(),h===a.getNullSpan()&&(h=a.getSpan().nextText("Cancel reservation").parentTag("td6").innerLink()),ASSERT(c,l,m,s))return[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:c,reservationId:i,reservationStatus:"http://schema.org/ReservationConfirmed",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:l,url:u,telephone:d,address:g},startTime:m,bookingAgent:{"@type":"http://schema.org/Organization",name:"OpenTable",url:"http://www.opentable.com/"},underName:{"@type":"http://schema.org/Person",name:s},cancelReservationUrl:h,modifyReservationUrl:S}]}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/929/990/996","SG76b9fe70"),new ReverseTemplate("opentable.com-confirmation-es",function(e){return/^Confirmaci\xf3n/.test(e.subject)},function(e){if(!/^Confirmaci\xf3n/.test(e.subject))return CONTINUE;var t={};t.number="N\xfamero de confirmaci\xf3n",t.address="DIRECCI\xd3N",t.description="DESCRIPCI\xd3N DEL RESTAURANT",t.reservation="reservaci\xf3n en",t.person="Grupo de",t.modify="CAMBIAR SU RESERVACI\xd3N",t.cancel="CANCELAR SU RESERVACI\xd3N",t.infos=/DETALLES DE LA RESERVACI\xd3N/,t.hello="";var n="es_MX",r="opentable.com.mx",a=loadHelper("opentable.com-confirmation-skeleton.js");return a(e,n,t,r)},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/929/990/997","SG0e6accee"),new ReverseTemplate("opentable.com-reservation-change-en",function(e){return/Change$/.test(e.subject)},function(e){if(/Change$/.test(e.subject)){var t=loadHelper("opentable.com-microdata-parser.js"),n=t(e);if(n)return n;var r=Scanner.fromMessage(e);r.setLocale("en_US");var a,o,s,i,p,l,c,u,m,d,g,S;if(a=r.getSpan().innerCapture(/^Dear (.*),/,1),o=r.getSpan().innerCapture(/\bConfirmation Number: (\d+)/,1),d=r.getSpan().nextText("To get there:").collapseToEnd().withEnd(r.getSpan().nextText("Cross Street:").getStart()).trim(),d=not(d.innerAddress())?d.innerCapture(/^.*\r?\n(.*)$/,1):d.innerAddress(),m=r.getSpan().nextText("Questions about your reservation? You can always contact").nextPhoneNumber(),s=r.getSpan().innerCapture(/\. ($<name>.*) will be ready for your party of ($<partySize>\d+) ($<startTime>at .*)\./),i=s?s.$name:null,p=s?s.$partySize:null,u=s?s.$startTime:null,g=r.getSpan().nextText("To make another change:").nextLink(),S=r.getSpan().nextText("To cancel:").nextLink(),ASSERT(p,i,u,a))return[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:p,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(c||"Confirmed"),reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:i,url:l,telephone:m,address:d},startTime:u,bookingAgent:{"@type":"http://schema.org/Organization",name:"OpenTable",url:"http://www.opentable.com/"},underName:{"@type":"http://schema.org/Person",name:a},cancelReservationUrl:S,modifyReservationUrl:g}]}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/929/990/999","SG314bcf29"),new ReverseTemplate("opentable.com-reservation-change-es",function(e){return/^Cambio/.test(e.subject)},function(e){if(!/^Cambio/.test(e.subject))return CONTINUE;var t={};t.person="Grupo de",t.reservation="reservaci\xf3n en",t.number="N\xfamero de confirmaci\xf3n",t.address="DIRECCI\xd3N",t.description="DESCRIPCI\xd3N DEL RESTAURANTE",t.modify="CAMBIAR SU RESERVACI\xd3N",t.cancel="CANCELAR SU RESERVACI\xd3N",t.infos="DETALLES DE LA RESERVACI\xd3N",t.infosCapture=/(DETALLES DE LA RESERVACI\xd3N)/,t.hello="";var n="es_MX",r="opentable.com.mx",a=loadHelper("opentable.com-reservation-change-skeleton.js");return a(e,n,t,r)},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/929/990/1000","SGd3b6a3ba"),new ReverseTemplate("opentable.com-upcoming-reservation-en",function(e){return/^Your Upcoming Reservation at/.test(e.subject)},function(e){if(/^Your Upcoming Reservation at/.test(e.subject)){var t=Scanner.fromMessage(e);t.setLocale("en_US");var n,r,a,o,s,i,p,l,c,u,m,d;if(n=t.getSpan().innerCapture(/^Dear (.*),/,1),r=t.getSpan().innerCapture(/\bConfirmation Number: (\d+)/,1),u=t.getSpan().nextText("To get there:").collapseToEnd().withEnd(t.getSpan().nextText("Cross Street:").getStart()).trim(),u=not(u.innerAddress())?u.innerCapture(/^.*\r?\n(.*)$/,1):u.innerAddress(),c=t.getSpan().nextText("Questions about your reservation? You can always contact").nextPhoneNumber(),a=t.getSpan().innerCapture(/\s+($<name>.*) will be ready for your\s+party of ($<partySize>\d+) ($<startTime>at .*)\./),s=a?a.$partySize:null,o=a?a.$name:null,l=a?t.getDetachedSpan(""+a.$startTime):null,n=a?a.$underName||n:null,m=t.getSpan().nextText("Update your reservation date").nextLink(),d=t.getSpan().nextText("Cancel your reservation").nextLink(),ASSERT(s,o,l,n))return[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:s,reservationId:r,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:o,url:i,telephone:c,address:u},startTime:l,bookingAgent:{"@type":"http://schema.org/Organization",name:"OpenTable",url:"http://www.opentable.com/"},underName:{"@type":"http://schema.org/Person",name:n},cancelReservationUrl:d,modifyReservationUrl:m}]}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/929/990/1003","SG700fd22b")]);
// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,a){var r=Scanner.fromMessage(e);r.setLocale(t);var n,o,p,i,c,s,m,u,l,d,g,h,f,v,S,C,y,R,k,$;if(a.confirmSubject.test(e.subject)){p=r.getSpan().innerCapture(a.reservationId,1),n=r.getSpan().innerCapture(a.guestName,1);var b=r.getSpan().next(a.locations).innerCapture(a.locations);R=b.$pickupLocation,v=b.$dropoffLocation;var L=r.getSpan().next(a.dates).innerCapture(a.dates);$=r.getDetachedSpan(L.$pickupDate+" "+L.$pickupTime),C=r.getDetachedSpan(L.$dropoffDate+" "+L.$dropoffTime),d=r.getSpan().innerCapture(a.car,1);var T=r.getSpan().innerCapture(a.price,1);u=T.innerCapture(/([\d,.]+)/,1),l=T.innerCapture(/([^\d,.]+)/,1).trim()}else a.cancellationSubject.test(e.subject)&&(n=r.getSpan().innerCapture(a.cancelGuestName,1).trim(),p=r.getSpan().innerCapture(a.cancelReservationId,1).trim(),i="Cancelled");if(ASSERT(n,p)){var j={"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:u,priceCurrency:l,reservationId:p,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:m,underName:{"@type":"http://schema.org/Person",name:n,email:o},provider:{"@type":"http://schema.org/Organization",name:"Europcar"},pickupTime:$,pickupLocation:{"@type":"http://schema.org/Place",name:y,telephone:k,address:R},dropoffTime:C,dropoffLocation:{"@type":"http://schema.org/Place",name:f,telephone:S,address:v}};return d&&(j.reservationFor={"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:d},license:g,color:h}),[j]}}}).call();

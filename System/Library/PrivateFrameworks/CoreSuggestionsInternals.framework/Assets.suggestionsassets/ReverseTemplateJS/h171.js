// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,r,t){var a=Scanner.fromMessage(e);a.setLocale(r);var i,o,p,n,l,u,m,h,d,s,g,c,v,A,z=[],y=[],f=[],C=[],T=a.getSpan();for(c=T.innerCapture(t.passengersRegExp),c&&3===c.length&&(z=c[1].split(","),y=c[2].split(",")),c=T.allInnerCapture(t.flightRegExp),v=0;c.length>v;v++)c[v]&&10===c[v].length&&([,p,n,l,u,m,h,d,s,g]=c[v],i=combineDateAndTime(l.trim(),s),o=combineDateAndTime(l.trim(),g),Date.parse(""+o)<Date.parse(""+i)&&(o=modifyDate(o,1)),ASSERT(p,n,i)&&f.push({airlineCode:p,flightNumber:n,departureAirportCode:u,departureAirportFuzzy:m,arrivalAirportCode:h,arrivalAirportFuzzy:d,departureDateTime:i,arrivalDateTime:o}));for(v=0;z.length>v;v++){var F=z[v],D=y[v];for(A=0;f.length>A;A++){var S=f[A],b={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:S.airlineCode,flightNumber:S.flightNumber,departureAirportFuzzy:S.departureAirportFuzzy,departureAirportCode:S.departureAirportCode,departureTime:S.departureDateTime,arrivalAirportFuzzy:S.arrivalAirportFuzzy,arrivalAirportCode:S.arrivalAirportCode,arrivalTime:S.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:F},reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:D,ticketedSeat:{"@type":"http://schema.org/Seat"}},reservationStatus:"http://schema.org/ReservationConfirmed"};C.push(b)}}return C.length?C:void 0}}).call();

// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,r,t){var a=Scanner.fromMessage(e);a.setLocale(r);var i,n,p,o,g,l,m,u=[],d=[];o=a.getSpan().innerCapture(regExpFormatted(/\1(.*)/,t.reference),1).trim(),g=a.getSpan().innerCapture(regExpFormatted(/\1(.*)/,t.total),1),l=g.innerCapture(/([\d,\.]+)/,1),m=g.innerCapture(/([A-Z]{3})/,1),i=a.getSpan().next(t.passenger).nextTag("td4").tagContents(),p=a.getSpan().next(t.info).nextTag("table4").allInnerTags("tr4");for(var h=0;p.length-1>h;h++){var v,s=p[h].allInnerTags("td4"),c={};4>s.length||(c.flightNumber=s[0].tagContents().innerCapture(/(\d{3,4})/,1),v=s[0].innerDate(),c.departureTime=s[1].innerDate(),c.arrivalTime=c.departureTime.nextDate(),c.departureAirport=a.getSpan().withInterval(c.departureTime.getEnd(),c.departureTime.next("\n").getStart()).trim(),c.arrivalAirport=a.getSpan().withInterval(c.arrivalTime.getEnd(),c.arrivalTime.next("\n").getStart()).trim(),c.departureTime=a.getDetachedSpan(v+" "+c.departureTime),c.arrivalTime=a.getDetachedSpan(v+" "+c.arrivalTime),ASSERT(c.departureTime,c.arrivalTime,c.arrivalAirport,c.departureAirport,c.flightNumber)&&u.push(c))}for(var T=0;u.length>T;T++){var S=u[T],A={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:"Norwegian",airlineCode:"DY",flightNumber:S.flightNumber,departureAirportFuzzy:S.departureAirport,departureAirportCode:S.departureAirportCode,departureTime:S.departureTime,arrivalAirportFuzzy:S.arrivalAirport,arrivalAirportCode:S.arrivalAirportCode,arrivalTime:S.arrivalTime},underName:{"@type":"http://schema.org/Person",name:i},checkinUrl:"",reservationId:o,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:l,priceCurrency:m,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:n,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:"",seatingType:""}}};d.push(A)}return d.length?d:void 0}}).call();
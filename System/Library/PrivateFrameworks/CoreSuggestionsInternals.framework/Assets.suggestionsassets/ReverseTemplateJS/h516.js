// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var a=Scanner.fromMessage(e);a.setLocale(t);var r,o,g,s,p,i,d,x,m,l;return r=a.getSpan().nextText(n.for).collapseToEnd().withEnd(a.getSpan().nextText(n.person).getStart()).trim(),l=a.getSpan().innerCapture(regExpFormatted(/bookingConfirmationCode=(.*)&email/),1).trim(),o=a.getSpan().nextTag("td2").next(n.restaurant).nextAnyTag("td").nextAnyTag("td").tagContents(),o.getLength()||(o=a.getSpan().innerCapture(regExpFormatted(/\1\s+(.*)/,n.restaurant),1).trim()),m=a.getSpan().next(n.url).nextAnyTag("td").nextAnyTag("td").tagContents(),m.getLength()||(m=a.getSpan().nextTag("table2").lastInnerTag("tr2").previousTag("tr2").lastInnerTag("td2").innerLink()),p=a.getSpan().nextText(n.reference).nextPhoneNumber(),i=a.getDetachedSpan((""+a.getSpan().nextText(n.address).nextAnyTag("td").nextAnyTag("td").tagContents()).replace(","," ").replace("  "," ")),i=i.innerAddress().exists()?i.innerAddress():i,""+i==""&&(i=a.getDetachedSpan((""+a.getSpan().withInterval(p.previousText(""+o).nextText("\n").getEnd(),p.previousText("\n").getStart())).replace(","," "))),g=a.getSpan().next(n.date).nextDate(),s=a.getSpan().innerCapture(regExpFormatted(/(?:\1\s+)?(.*?)\,/,n.dear),1).trim(),d=a.getSpan().nextText(n.cancel).nextLink(),ASSERT(r,o,g,s)?[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",partySize:r,reservationId:l,reservationStatus:"http://schema.org/ReservationConfirmed",reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:o,url:m,telephone:p,address:i},startTime:g,bookingAgent:{"@type":"http://schema.org/Organization",name:"Bookatable",url:"http://www.bookatable.com/"},underName:{"@type":"http://schema.org/Person",name:s},cancelReservationUrl:d,modifyReservationUrl:x}]:CONTINUE}}).call();

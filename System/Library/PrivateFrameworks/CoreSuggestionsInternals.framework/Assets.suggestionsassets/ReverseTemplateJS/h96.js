// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,o,c,p,g,i,s,d,x,l,T,m,h,u,y,C,f,S,v,A;if(n.confirmSubject.test(e.subject)){c=a.getSpan().nextText(n.reservationId).nextAnyTag("td").tagContents().innerCapture(/(.+)\s/,1),r=a.getSpan().nextText(n.guestName).nextAnyTag("td").tagContents(),o=a.getSpan().nextText(n.guestEmail).nextAnyTag("td").tagContents(),g=a.getSpan().nextText(n.checkinUrl).parentTag("td2").tagContents().innerLink(),l=a.getSpan().nextText(n.car).nextAnyTag("td").tagContents(),S=a.getSpan().nextText(n.pickupLoc).nextAnyTag("td").tagContents(),A=a.getSpan().nextText(n.pickupDate).nextAnyTag("td").tagContents().innerDate(),u=a.getSpan().nextText(n.dropoffLoc).nextAnyTag("td").tagContents(),C=a.getSpan().nextText(n.dropoffDate).nextAnyTag("td").tagContents().innerDate();var R=a.getSpan().nextText(n.price).nextAnyTag("td").tagContents();if(d=R.innerCapture(/([\d,.]+)/,1),x=R.innerCapture(/([^\d,.]+)/,1),!ASSERT(r,c,A,C,S,u))return CONTINUE}if(n.cancellationSubject.test(e.subject)){c=a.getSpan().nextRegExp(n.cancelReservationId).tagContents().innerCapture(n.cancelReservationId,1),r=a.getSpan().nextText(n.guestName).nextAnyTag("td").tagContents(),o=a.getSpan().nextText(n.cancelGuestEmail).nextAnyTag("td").tagContents();var R=a.getSpan().nextText(n.cancelPrice).nextAnyTag("td").tagContents();if(d=R.innerCapture(/([\d,.]+)/,1),x=R.innerCapture(/([^\d,.]+)/,1),l=a.getSpan().nextText(n.cancelCar).nextAnyTag("td").tagContents(),S=a.getSpan().nextText(n.pickupLoc).nextAnyTag("td").tagContents(),A=a.getSpan().nextText(n.cancelpickupdate).nextAnyTag("td").tagContents(),A=getFuzzyDate(A),u=a.getSpan().nextText(n.dropoffLoc).nextAnyTag("td").tagContents(),C=a.getSpan().nextText(n.canceldropffdate).nextAnyTag("td").tagContents(),C=getFuzzyDate(C),p="Cancelled",!ASSERT(r,c,A,C,S,u))return CONTINUE}return 0===(""+l).length||null===l?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:d,priceCurrency:x,reservationId:c,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:g,modifyReservationUrl:i,cancelReservationUrl:s,underName:{"@type":"http://schema.org/Person",name:r,email:o},provider:{"@type":"http://schema.org/Organization",name:"Jucyworld"},pickupTime:A,pickupLocation:{"@type":"http://schema.org/Place",name:f,telephone:v,address:S},dropoffTime:C,dropoffLocation:{"@type":"http://schema.org/Place",name:h,telephone:y,address:u}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:d,priceCurrency:x,reservationId:c,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:g,modifyReservationUrl:i,cancelReservationUrl:s,underName:{"@type":"http://schema.org/Person",name:r,email:o},provider:{"@type":"http://schema.org/Organization",name:"Jucyworld"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:l},license:T,color:m},pickupTime:A,pickupLocation:{"@type":"http://schema.org/Place",name:f,telephone:v,address:S},dropoffTime:C,dropoffLocation:{"@type":"http://schema.org/Place",name:h,telephone:y,address:u}}]}}).call();

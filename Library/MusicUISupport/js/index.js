!function t(e,n,i){function a(o,l){if(!n[o]){if(!e[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return a(n?n:t)},c,c.exports,t,e,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(t,e,n){var i=t("./lib"),a=new i;e.exports=a},{"./lib":293}],2:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,o=i.controller.MultiElementController,l=i.event.Event,s=t("../../../common").traits.EventMap,c=t("../../../common").traits.TabComponent,u=t("../../../base").style,h=t("./style.hbs"),d=t("../../subscribe/style.hbs"),p=t("./template.hbs"),m=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new u({styleTemplate:h})),t.styles.push(new u({styleTemplate:d})),t.events=t.events||[],t.events.push("select"),this.templateData=t.data,this.strings={header:t.data.header,subheader:t.data.subheader,differentUser:r.locWithMarkupTokens("FUSE.CarrierBilling.LinkToAppleID.UseDifferentId",{firstName:itms.accountInfo.firstName}),aboutMusicAndPrivacy:r.loc("FUSE.Footer.aboutAppleMusic"),subscriptionDisclosure:t.data.showDiscosureForSignIn},o.call(this,t,e),s.call(this,t),a.extend(this.onSelect,{"continue-button":this.authenticate.bind(this),"sign-in-different-user":this.signInAsDifferentUser.bind(this),"about-music-button":this.pushLearnMore})};a.inherit(m,o),a.inherit(m,s,!0),a.inherit(m,c,!0),m.prototype.authenticate=function(){a.account.auth({success:this.linkCarrier.bind(this)})},m.prototype.linkCarrier=function(){this.dispatchEvent(new l("linkCarrier"))},m.prototype.signInAsDifferentUser=function(){this.dispatchEvent(new l("signInAsDifferentUser"))},m.prototype.template=p,e.exports=m},{"../../../../util":304,"../../../base":84,"../../../common":92,"../../subscribe/style.hbs":68,"./style.hbs":4,"./template.hbs":5,itml:355}],3:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,o=t("./title.hbs"),l=a.pubSub,s=t("./element"),c=t("../../signin/element"),u=i.controller.DocumentController,h=function(t,e){t=t||{},t.data=t.data||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("template");var n=itms.DSID;t.data.showDiscosureForSignIn=r.loc("FUSE.AccountLinking.Disclosure"),0===t.controllers.length&&(n?(this.documentType="panelTemplate",t.data.header=t.data.header||r.loc("FUSE.CarrierBilling.ConfirmAppleId.Title"),t.data.subheader=t.data.subheader||r.locWithMarkupTokens("FUSE.CarrierBilling.ConfirmAppleId.Subtitle",{carrierName:Telephony.providerName,AppleId:itms.accountInfo.appleId}),this.controller=new s({data:t.data})):(this.documentType="signInTemplate",t.data.header=t.data.header||r.loc("FUSE.CarrierBilling.LinkToAppleID.Title"),t.data.subheader=t.data.subheader||r.locWithMarkupTokens("FUSE.CarrierBilling.LinkToAppleID.Description",{carrierName:Telephony.providerName}),t.data.showAboutMusicAndPrivacy=!0,this.controller=new c({data:t.data})),t.controllers.push(this.controller)),this.dontUseNativeModal=!0,u.call(this,t,e);var i=this.el.getElementsByTagName("signInTemplate").item(0);i&&i.addEventListener("change",this.handleChange.bind(this));var a=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.handleCancel.bind(this))};this.addEventListener("render",a.bind(this)),this.controller.addEventListener("signInAsDifferentUser",this.signInAsDifferentUser.bind(this)),this.controller.addEventListener("createAppleId",this.createAppleId.bind(this)),this.controller.addEventListener("linkCarrier",this.linkCarrier.bind(this)),this.addEventDelegates(this.controller,["tabPush","closeIntroPage","replaceNativeModal"]),a.call(this),localStorage.setItem("Music.hasAccountLinkingSheetOpened"+Telephony.phoneNumber,"true")};a.inherit(h,u),h.prototype.signInAsDifferentUser=function(){l.subscribe("serviceChange",function(){if(!itms.DSID){l.unsubscribe("serviceChange");var t=this.el.ownerDocument,e=new h({});t.replace(e.el)}}.bind(this)),itms.signOut()},h.prototype.createAppleId=function(){l.subscribe("serviceChange",function(){if(itms.DSID){l.unsubscribe("serviceChange");var t=this.el.ownerDocument,e=new h({});t.replace(e.el)}}.bind(this))},h.prototype.documentType=itms.DSID?"panelTemplate":"signInTemplate",h.prototype.titleTemplate=o,h.prototype.handleChange=function(t){"success"===t.result&&this.linkCarrier()},h.prototype.handleCancel=function(){a.account.closeAccountModal.call(this),itms.updateServiceEligibility({carrierBundle:"unlinked"}),a.account.getSubscriptionStatus({service:"AppleMusic"},function(t,e){e.isFinal&&"unlinked"===e.carrierBundle?this.handleCancelCallback():e.isFinal&&(a.log.warn('client did not return expected "unlinked" status: ',e.carrierBundle),this.handleUnexpectedData("unlinked",this.handleCancelCallback.bind(this)))}.bind(this))},h.prototype.handleCancelCallback=function(){a.log.warn("Linking Cancelled",itms.eligibilityForService().carrierBundle),l.publish("serviceChange",{}),l.publish("setSelectedTab","new")},h.prototype.linkCarrier=function(){a.account.showTermsIfRequired({successCallback:this.linkCarrierSrv.bind(this),failureCallback:this.termsDeclined.bind(this)})},h.prototype.termsDeclined=function(){if("signInTemplate"===this.documentType&&itms.DSID){var t=this.el.ownerDocument,e=new h({});t.replace(e.el)}},h.prototype.linkCarrierSrv=function(){var t=a.bag().carrierLinkSrv,e={url:t,params:"guid="+Device.guid,method:"POST",success:this.linkCarrierSuccess.bind(this),failure:this.linkCarrierFailed.bind(this)};a.xhr(e)},h.prototype.linkCarrierSuccess=function(t){var e,n=JSON.parse(t);if(a.log.warn("linkCarrierSuccess"),e=n.message?this.showAlreadySubscribedMessage.bind(this,n):this.goToForYou.bind(this),0===n.status)itms.updateServiceEligibility({carrierBundle:"eligible"}),a.account.getSubscriptionStatus({service:"AppleMusic"},function(t,n){n.isFinal&&"eligible"===n.carrierBundle?(a.log.warn("carrier linked successfully",itms.eligibilityForService().carrierBundle,n),e()):n.isFinal&&(a.log.warn('client did not return "eligible" status: ',n.carrierBundle),this.handleUnexpectedData("eligible",e))}.bind(this));else if(n.userPresentableErrorMessage){var i={data:{type:"error",title:n.userPresentableErrorMessage,buttons:[{title:r.loc("OK"),className:"comfirm-button"}]},dataType:"dialog",navigationDocument:modal};l.publish("showModal",{detail:i})}},h.prototype.showAlreadySubscribedMessage=function(t){var e={data:{type:"error",title:t.message,buttons:[{title:r.loc("OK"),className:"comfirm-success",callback:this.goToForYou.bind(this)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};l.publish("showModal",{detail:e})},h.prototype.goToForYou=function(){a.account.closeAccountModal.call(this),l.publish("setSelectedTab","new"),l.publish("serviceChange",{})},h.prototype.handleUnexpectedData=function(t,e){a.account.getSubscriptionStatus({ignoreCache:!0},function(n,i){a.log.warn("trying to force getSubscriptionStatus. Expected and Returned value ",t,i.carrierBundle),i.carrierBundle===t&&e()})},h.prototype.linkCarrierFailed=function(){a.log.error("Carrier Link XHR Failed")},e.exports=h},{"../../../../util":304,"../../signin/element":60,"./element":2,"./title.hbs":6,itml:355}],4:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* loading */\n.title {\n    font-size: 22pt;\n    color: tint-color;\n}\n\n.page-title {\n    itml-text-max-lines: 0;\n    font-weight: thin;\n    font-size: 27pt;\n    text-align: center;\n    margin: 40 0 20 0;\n}\n.page-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 16pt;\n    text-align: center;\n    color: rgb(150, 150, 150);\n    margin: 0 0 10 0;\n}\n.continue-button {\n  	border-color: tint-color;\n  	border-width: 1pt;\n    border-radius: 20pt;\n  	color: tint-color;\n    itml-text-max-lines: 0;\n    font-size: 15pt;\n    text-align: center;\n    border-radius: circle-caps;\n    padding: 15 80;\n    margin: 40 0 20 0;\n}\n.buy-button-title {\n  font-weight: bold;\n}\n.buy-button-subtitle {\n  color: rgb(150,150,150);\n  font-size: 12pt;\n}\n.divider {\n    margin: 10 0 0 0;\n    padding: 10;\n}\n.small-button {\n    font-size: 14pt;\n}\n.button-footer-text {\n    margin: 10 0 0 0;\n}\n.icloud-disclosure {\n    color: rgba(0,0,0,.6);\n    itml-text-max-lines: 0;\n    margin: 10 0 30 0;\n    text-align: center;\n    font-size: 14pt;\n}\n.about-music-button {\n    margin: 10 0 15 0;\n}\n"},useData:!0})},{"hbsfy/runtime":338}],5:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+'<title class="page-title top">'+o(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+'</title>\n<subtitle class="page-subtitle middle">'+o(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+'</subtitle>\n<button class="middle sign-in-different-user">'+o(r(null!=(a=null!=t?t.strings:t)?a.differentUser:a,t))+'</button>\n<button class="continue-button middle">'+o((e.loc||t&&t.loc||l).call(t,"FUSE.CarrierBilling.ConfirmAppleId.Continue",{name:"loc",hash:{},data:i}))+'</button>\n<text class="bottom caption2 disclosure-text">'+o(r(null!=(a=null!=t?t.strings:t)?a.subscriptionDisclosure:a,t))+'</text>\n<button class="small-button tint-color about-music-button bottom" data-content-kind="learn_more_page" type-key="MusicAndPrivacy" push-type="sheet">'+o(r(null!=(a=null!=t?t.strings:t)?a.aboutMusicAndPrivacy:a,t))+"</button>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],6:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelSheetButton" type="link" class="align-left cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.NotNow",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":338}],7:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.pubSub,o=a.loc,l=i.controller.MultiElementController,s=t("../../../common").traits.EventMap,c=t("../../../base").style,u=t("./style.hbs"),h=t("./template.hbs"),d=t("../sms_verification"),p=t("../phone_number_entry"),m=t("../account_linking"),f=t("../../signin"),g=function(t,e){this.options=e||{reason:"deepLink",ignoreCache:!0},t=t||{},this.data=t.data||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],t.events.push("select"),this.showCancelButton=this.data.showCancelButton,l.call(this,t,e),s.call(this,t),this.bgImageName="resource://WelcomeBg-"+a.screen.getScreenDimensions().height+"h.jpg",this.render()};a.inherit(g,l),a.inherit(g,s,!0),g.prototype.template=h,g.prototype.appearCallback=function(){""===itms.networkConnectionType?this.verificationErrorMessage(o.loc("FUSE.CarrierBilling.NoConnection")):this.hasRendered?this.hasRendered=!0:a.account.getSubscriptionStatus(this.options,this.handleServiceEligibility.bind(this))},g.prototype.verificationErrorMessage=function(t){var e={data:{type:"error",title:t,buttons:[{title:o.loc("OK"),className:"close-modal",callback:a.account.closeAccountModal.bind(this)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};r.publish("showModal",{detail:e})},g.prototype.handleServiceEligibility=function(t,e){if(!e||e.isFinal){if(a.account.setAlreadySubscribedCheckInProgress(!1),!e)return void this.verificationErrorMessage(o.loc("FUSE.CarrierBilling.NoConnection"));var n,i=this.el.ownerDocument;if(1===t&&e&&"unlinked"===e.carrierBundle)itms.updateServiceEligibility({carrierBundle:"unlinked"}),n=new m;else if(1===t)modal.popDocument(),r.publish("serviceChange",{});else if(e&&"needsVerification"===e.carrierBundle)n=Telephony.phoneNumber?new d({data:e}):new p({data:e});else if(!itms.DSID&&this.data.alreadySubscribed){var l=this.data||{};n=new f({data:l})}else a.log.warn("No subscription found - doing additional check in case cached value was used"),a.account.getSubscriptionStatus({ignoreCache:!0},function(t,e){if(e.isFinal&&1===t)this.handleServiceEligibility(t,e);else if(e.isFinal){var n=o.locWithMarkupTokens("FUSE.CarrierBundling.NoSubscription",{carrier:Telephony.providerName});this.verificationErrorMessage(n)}}.bind(this));if(n){var s={currentDoc:i,newDoc:n};this.addEventDelegates(n,["tabPush"]),a.account.replaceAccountModal.call(this,s)}}},e.exports=g},{"../../../../util":304,"../../../base":84,"../../../common":92,"../../signin":61,"../account_linking":3,"../phone_number_entry":13,"../sms_verification":18,"./style.hbs":9,"./template.hbs":10,itml:355}],8:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),o=t("./element"),l=i.controller.DocumentController,s=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new o(t,e),t.controllers.push(n)),this.controller=n,this.dontUseNativeModal=!0,l.call(this,t,e);var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.handleCancel.bind(this))};this.addEventDelegates(this.controller,["tabPush","closeIntroPage","replaceNativeModal"]),this.addEventListener("render",i.bind(this)),this.addEventListener("appear",this.controller.appearCallback.bind(this.controller)),i.call(this)};a.inherit(s,l),s.prototype.documentType="panelTemplate",s.prototype.titleTemplate=r,s.prototype.handleCancel=function(){a.account.closeAccountModal.call(this)},e.exports=s},{"../../../../util":304,"./element":7,"./title.hbs":11,itml:355}],9:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* loading */\n.welcome-bg {\n    itml-img-fill: scale-to-fill;\n}\n\n.title {\n    font-size: 22pt;\n    color: tint-color;\n}"},useData:!0})},{"hbsfy/runtime":338}],10:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+'<background>\n    <img class="welcome-bg" src="'+o(r(null!=t?t.bgImageName:t,t))+'" />\n</background>\n<title class="position-center title">'+o((e.loc||t&&t.loc||l).call(t,"FUSE.CarrierBundling.VerifyingSubscription",{name:"loc",hash:{},data:i}))+'</title>\n<activityIndicator class="position-center"/>'},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],11:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelSheetButton" type="link" class="align-right cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":338}],12:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,o=i.controller.MultiElementController,l=t("../../../common").traits.EventMap,s=t("../../../base").style,c=t("./style.hbs"),u=t("./template.hbs"),h=t("../sms_verification"),d=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new s({styleTemplate:c})),t.events=t.events||[],t.events.push("select"),this.attributes=t||{},o.call(this,t,e),l.call(this,t),this.strings={header:r.loc("FUSE.PhoneNumberEntry.Title"),subheader:r.loc("FUSE.PhoneNumberEntry.Subtitle")},this.render()};a.inherit(d,o),a.inherit(d,l,!0),d.prototype.template=u,d.prototype.appearCallback=function(){this.hasRendered=!0,this.errorToRenderOnAppear&&(this.errorToRenderOnAppear(),this.errorToRenderOnAppear=null)},d.prototype.setPinValue=function(t){if(10===t.length){t=t.slice(1);var e={currentDoc:this.el.ownerDocument,newDoc:new h({data:this.attributes.data,phoneNumber:"+61"+t})};modal.popDocument(),setTimeout(function(){modal.pushDocument(e.newDoc.el)}.bind(this),2e3)}},e.exports=d},{"../../../../util":304,"../../../base":84,"../../../common":92,"../sms_verification":18,"./style.hbs":14,"./template.hbs":15,itml:355}],13:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),o=t("./element"),l=i.controller.DocumentController,s=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new o(t),t.controllers.push(n)),this.PhoneNumberEntryController=n,l.call(this,t,e);var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.handleCancel.bind(this));var e=this.el.getElementsByTagName("input").item(0);e&&e.addEventListener("change",this.setPinValue.bind(this))};this.controller=n,this.dontUseNativeModal=!0,this.addEventDelegates(this.controller,["tabPush"]),this.addEventListener("render",i.bind(this)),this.addEventListener("appear",this.controller.appearCallback.bind(this.controller)),i.call(this)};a.inherit(s,l),s.prototype.documentType="panelTemplate",s.prototype.titleTemplate=r,s.prototype.handleCancel=function(){a.account.closeAccountModal.call(this)},s.prototype.setPinValue=function(t){this.PhoneNumberEntryController.setPinValue(t.term||"")},e.exports=s},{"../../../../util":304,"./element":12,"./title.hbs":16,itml:355}],14:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* phone number entry */\n.middle {\n    itml-position: center;\n}\n.pin {\n    itml-text-style: pin;\n    margin: 0 0 18;\n}\n.subtitle {\n    color: rgb(0,0,0);\n    font-size: 18pt;\n    font-weight: light;\n    text-align: center;\n    margin: 0 0 30;\n    itml-text-max-lines: 0;\n}\n.title {\n    color: rgb(0,0,0);\n    font-size: 30pt;\n    font-weight: light;\n    margin: 0 0 10;\n    itml-text-max-lines: 0;\n    text-align: center;\n}\n\n@media (width: 320pt) {\n    .title {\n        font-size:24pt;\n    }\n}\n"},useData:!0})},{"hbsfy/runtime":338}],15:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(l+=a),l+'<title class="middle title">'+o(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+'</title>\n<subtitle class="middle subtitle" maxLines="0">'+o(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+'</subtitle>\n<input class="middle pin searchInputField" type="number" maxlength="10"/>\n'},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],16:[function(t,e,n){e.exports=t(11)},{"hbsfy/runtime":338}],17:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,o=i.controller.MultiElementController,l=t("../../../common").traits.EventMap,s=t("../../../base").style,c=t("./style.hbs"),u=t("./model"),h=t("./template.hbs"),d=t("../account_linking"),p=a.pubSub,m=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new s({styleTemplate:c})),t.events=t.events||[],t.events.push("select"),o.call(this,t,e),l.call(this,t),a.extend(this.onSelect,{"resend-code-button":this.resendCodeButtonHandler.bind(this)});var n=new u(t);this.model=n,this.model.setEligibilityData(t),this.model.getSMS(),this.model.addEventListener("smsPinVerified",this.handleSendSMSPosted.bind(this)),this.model.addEventListener("smsPinIncorrect",this.handleSendSMSIncorrect.bind(this)),this.model.addEventListener("sendSMSFailed",this.handleSendSMSFailed.bind(this)),this.strings={header:r.loc("FUSE.SMSVerification.Header"),subheader:r.locWithMarkupTokens("FUSE.SMSVerification.EnterSMSCode",{number:t.phoneNumber}),resendCode:r.loc("FUSE.SMSVerification.SendSMSCodeAgain")},this.render()};a.inherit(m,o),a.inherit(m,l,!0),m.prototype.template=h,m.prototype.appearCallback=function(){this.hasRendered=!0,this.errorToRenderOnAppear&&(this.errorToRenderOnAppear(),this.errorToRenderOnAppear=null)},m.prototype.setPinValue=function(t){this.pinValue=t,4===this.pinValue.length&&this.model.verifySMSPin(this.pinValue)},m.prototype.resendCodeButtonHandler=function(){this.model.getSMS()},m.prototype.handleSendSMSIncorrect=function(t){var e=this.el.ownerDocument.getElementsByTagName("input").item(),n=e.getFeature("animator");if(n&&n.animate("shake",{erase:1,vibrate:1}),t.detail&&t.detail.dialog){var i={data:{type:"error",title:t.detail.dialog.message,buttons:[{title:r.loc("OK")}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};p.publish("showModal",{detail:i})}},m.prototype.handleSendSMSFailed=function(t){if(!this.hasRendered)return void(this.errorToRenderOnAppear=this.handleSendSMSFailed.bind(this,t));var e={};e=t.detail&&t.detail.dialog?{data:{type:"error",title:t.detail.dialog.message,buttons:[{title:r.loc("Cancel")},{title:r.loc("FUSE.SMSVerification.SendSMSCodeAgain"),className:"confirm-failed",callback:this.resendCodeButtonHandler.bind(this)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}}:{data:{type:"error",title:r.loc("FUSE.Error.AnErrorOccurred"),buttons:[{title:r.loc("OK")}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}},p.publish("showModal",{detail:e})},m.prototype.handleSendSMSPosted=function(){itms.updateServiceEligibility({carrierBundle:"unlinked"}),p.publish("serviceChange",{});var t,e,n=this.el.ownerDocument;t=new d({data:{subheader:e}}),this.addEventDelegates(t,["tabPush"]);var i={currentDoc:n,newDoc:t};a.account.replaceAccountModal.call(this,i)},e.exports=m},{"../../../../util":304,"../../../base":84,"../../../common":92,"../account_linking":3,"./model":19,"./style.hbs":20,"./template.hbs":21,itml:355}],18:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),o=t("./element"),l=i.controller.DocumentController,s=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[],t.data=t.data||{},t.data.phoneNumber=t.phoneNumber||Telephony.phoneNumber;var n;0===t.controllers.length&&(n=new o(t.data),t.controllers.push(n)),this.SMSVerificationController=n,l.call(this,t,e);var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.handleCancel.bind(this));var e=this.el.getElementsByTagName("input").item(0);e&&e.addEventListener("change",this.setPinValue.bind(this))};this.controller=n,this.dontUseNativeModal=!0,this.addEventDelegates(this.controller,["tabPush"]),this.addEventListener("render",i.bind(this)),this.addEventListener("appear",this.controller.appearCallback.bind(this.controller)),i.call(this)};a.inherit(s,l),s.prototype.documentType="panelTemplate",s.prototype.titleTemplate=r,s.prototype.handleCancel=function(){a.account.closeAccountModal.call(this)},s.prototype.setPinValue=function(t){this.SMSVerificationController.setPinValue(t.term||"")},e.exports=s},{"../../../../util":304,"./element":17,"./title.hbs":22,itml:355}],19:[function(t,e,n){function i(t){t=t||{},this.phoneNumber=t.phoneNumber||Telephony.phoneNumber,o.call(this,t)}var a=t("itml"),r=a.event.Event,o=t("../../../base").model,l=t("../../../../util");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.getSMS=function(){var t=l.urls.fuseSendSmsCode(),e="sessionId="+encodeURIComponent(this.getSessionId())+"&phoneNumber="+encodeURIComponent(this.phoneNumber)+"&carrier="+encodeURIComponent(Telephony.providerName),n={url:t,params:e,method:"POST",success:this.onGetSMSSuccess.bind(this),failure:this.onGetSMSFailed.bind(this)};l.xhr(n)},i.prototype.onGetSMSSuccess=function(t){var e=JSON.parse(t);if(-1===e.status&&e.userPresentableErrorMessage){var n={dialog:e.dialog};this.dispatchEvent(new r("sendSMSFailed",{detail:n}))}},i.prototype.onGetSMSFailed=function(){l.log.warn("getSMSFailed"),this.dispatchEvent(new r("sendSMSFailed",{detail:{}}))},i.prototype.verifySMSPin=function(t){var e=l.urls.fuseVerifySmsCode(),n="sessionId="+encodeURIComponent(this.getSessionId())+"&phoneNumber="+encodeURIComponent(this.phoneNumber)+"&carrier="+encodeURIComponent(Telephony.providerName)+"&smsCode="+t,i={url:e,params:n,method:"POST",success:this.onVerifySMSPinSuccess.bind(this),failure:this.onVerifySMSPinFailed.bind(this)};l.xhr(i)},i.prototype.onVerifySMSPinSuccess=function(t){var e=JSON.parse(t);if(e.status<0){var n={dialog:e.dialog};this.dispatchEvent(new r("smsPinIncorrect",{detail:n}))}else 1===e.fuseCarrierBundleStatus?this.dispatchEvent(new r("smsPinVerified")):(l.log.warn("No carrier bundling with this phone number"),l.account.closeAccountModal.call(this))},i.prototype.onVerifySMSPinFailed=function(t){l.log.warn("FAIL: ",t)},i.prototype.getSessionId=function(){return this.data&&this.data.sessionId},i.prototype.setEligibilityData=function(t){this.data=t||{}},e.exports=i},{"../../../../util":304,"../../../base":84,itml:355}],20:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* subscribe */\n.middle {\n    itml-position: center;\n}\n.pin {\n    itml-text-style: pin;\n    margin: 0 0 18;\n}\n.subtitle {\n    color: rgb(0,0,0);\n    font-size: 18pt;\n    font-weight: light;\n    text-align: center;\n    margin: 0 0 30;\n}\n.error {\n    color: rgb(255,0,0);\n    font-size: 14pt;\n    font-weight: light;\n    text-align: center;\n    margin: 0 0 10;\n}\n.title {\n    color: rgb(0,0,0);\n    font-size: 30pt;\n    font-weight: light;\n    margin: 0 0 10;\n}\n.continue-button {\n    itml-item-width: 208pt;\n    font-size: 14pt;\n}\n.resend-code-button {\n	itml-item-width: 208pt;\n	font-size: 14pt;\n}"},useData:!0})},{"hbsfy/runtime":338}],21:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(l+=a),l+'<title class="middle title">'+o(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+'</title>\n<subtitle class="middle subtitle" maxLines="0">'+o(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+'</subtitle>\n<text class="middle error" id="errorMessage" maxLines="0"></text>\n<input class="middle pin searchInputField" type="number" maxlength="4"/>\n<button class="resend-code-button middle">'+o(r(null!=(a=null!=t?t.strings:t)?a.resendCode:a,t))+"</button>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],22:[function(t,e,n){e.exports=t(11)},{"hbsfy/runtime":338}],23:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,o=a.pubSub,l=i.controller.MultiElementController,s=t("../../../common").traits.EventMap,c=t("../../../base").style,u=t("./style.hbs"),h=t("./template.hbs"),d=t("../account_linking"),p=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],this.data=t.data,t.events.push("select"),this.strings={header:r.loc("FUSE.CarrierBundling.UnlinkedForYou.Header"),subheader:r.loc("FUSE.CarrierBundling.UnlinkedForYou.Subheader"),signIn:r.loc("FUSE.CarrierBundling.UnlinkedForYou.SignIn")},l.call(this,t,e),s.call(this,t),a.extend(this.onSelect,{"continue-button":this.authenticate.bind(this)});var n="";Device.pixelRatio>1&&(n="@"+Device.pixelRatio+"x"),a.log.warn("resource://ForYouUnlinked"),this.bgImageName="resource://ForYouUnlinked",this.render()};a.inherit(p,l),a.inherit(p,s,!0),p.prototype.template=h,p.prototype.authenticate=function(){if("eligible"===this.data.carrierBundle)a.account.auth({success:function(){o.publish("serviceChange",{})}});else{var t=new d({});this.addEventDelegates(t,["tabPush"]),modal.pushDocument(t.el)}},e.exports=p},{"../../../../util":304,"../../../base":84,"../../../common":92,"../account_linking":3,"./style.hbs":25,"./template.hbs":26,itml:355}],24:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./element"),o=i.controller.DocumentController,l=function(t,e){t=t||{},t.data=t.data||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("template"),this.controller=new r(t,e),t.controllers.push(this.controller),o.call(this,t,e),this.addEventDelegates(this.controller,["tabPush"])};a.inherit(l,o),l.prototype.documentType="panelTemplate",e.exports=l},{"../../../../util":304,"./element":23,itml:355}],25:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* loading */\n.title {\n    font-size: 22pt;\n    color: tint-color;\n}\n\n.page-title {\n    itml-text-max-lines: 0;\n    font-weight: thin;\n    font-size: 27pt;\n    text-align: center;\n    margin: 40 0 20 0;\n}\n.page-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 16pt;\n    text-align: center;\n    color: rgb(150, 150, 150);\n    margin: 0 0 10 0;\n}\n.continue-button {\n  	border-color: tint-color;\n  	border-width: 1pt;\n    border-radius: 20pt;\n  	color: tint-color;\n    itml-text-max-lines: 0;\n    font-size: 15pt;\n    text-align: center;\n    border-radius: circle-caps;\n    padding: 15 80;\n    margin: 0 0 90 0;\n}\n.buy-button-title {\n  font-weight: bold;\n}\n.buy-button-subtitle {\n  color: rgb(150,150,150);\n  font-size: 12pt;\n}\n.divider {\n    margin: 10 0 0 0;\n    padding: 10;\n}\n.small-button {\n    font-size: 14pt;\n}\n.button-footer-text {\n    margin: 10 0 0 0;\n}\n.about-music-button {\n    margin: 10 0 15 0;\n}\n\n"},useData:!0})},{"hbsfy/runtime":338}],26:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+'<background>\n    <img class="welcome-bg" src="'+o(r(null!=t?t.bgImageName:t,t))+'" />\n</background>\n<title class="page-title top">'+o(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+'</title>\n<subtitle class="page-subtitle top">'+o(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+'</subtitle>\n<button class="continue-button bottom">'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=(a=null!=t?t.strings:t)?a.signIn:a,{name:"toUpperCase",hash:{},data:i}))+"</button>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],27:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.event.Event,o=i.controller.MultiElementController,l=t("../../common").traits.EventMap,s=t("../../common").traits.TabComponent,c=t("../../base").style,u=t("./style.hbs"),h=t("./model"),d=a.pubSub,p=a.loc,m=t("./template.hbs"),f=function(t,e){t=t||{},e=e||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],t.events.push("select"),o.call(this,t,e),l.call(this,t),s.call(this),d.subscribe("buyConfirmed",this.handleBuyConfirmed.bind(this)),d.subscribe("buyFailed",this.handleBuyFailed.bind(this)),this.bag=itms.getBag(),a.extend(this.onSelect,{"migration-continue-button":this.confirmMigration.bind(this),"apple-music-already-subscribed":this.alreadySubscribed.bind(this),"learn-more-link":this.handleLearnMoreLink.bind(this),"about-music-button":this.pushLearnMore.bind(this)}),this.deepLink=t.deepLink;var n=new h({deepLink:this.deepLink});this.currentDoc=this.el.ownerDocument,this.addEventDelegates(this.currentDoc,["tabPush","handleAskToBuy"]);var i,r=itms.eligibilityForService();itms.accountInfo.DSID&&"needsAuthentication"!==r.accountStatus?itms.accountInfo.DSID&&a.account.isOnCarrierBundlingNetwork()&&!a.account.isEligibleForAppleMusic()&&(i=p.locWithMarkupTokens("FUSE.Footer.AlreadyaSubscriber.Carrier",{carrier:Telephony.providerName})):i=p.loc("FUSE.Footer.AlreadyaSubscriber"),this.strings={aboutMusicAndPrivacy:p.loc("FUSE.Footer.aboutAppleMusic"),alreadySubscribed:i,learnMore:p.loc("FUSE.Subscription.LearnMoreButton"),learnMoreUrl:p.loc("FUSE.Subscription.LearnMore.Url")},n.addEventListener("dataReady",function(){if(n.data=n.data||{},0===n.data.status)this.model=n,this.model.subscribed=a.account.isEligibleForAppleMusic(),
this.strings.migrationFooterText=p.loc(n.data.isATT?"Fuse.Migration.subscribeFooterTextATT":"Fuse.Migration.subscribeFooterText"),this.buyParams=n.data.buyParams,this.render();else{var t={data:{type:"error",title:n.data.userPresentableErrorMessage||p.loc("FUSE.Error.AnErrorOccurred"),buttons:[{title:p.loc("OK"),className:"comfirm-button",callback:a.account.closeAccountModal.bind(this)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};this.errorToRenderOnAppear=function(){d.publish("showModal",{detail:t})},this.hasRendered&&(this.errorToRenderOnAppear(),this.errorToRenderOnAppear=null)}}.bind(this)),n.get(this.bag.beatsMigrationInfoSrv)};a.inherit(f,o),a.inherit(f,l,!0),a.inherit(f,s,!0),f.prototype.template=m,f.prototype.appearCallback=function(){this.hasRendered=!0,this.errorToRenderOnAppear&&(this.errorToRenderOnAppear(),this.errorToRenderOnAppear=null)},f.prototype.checkAuth=function(){this.dsid=itms.accountInfo.DSID,this.dsid?this.confirmMigration():this.signin()},f.prototype.signin=function(){var t={callback:this.alreadySubscribed.bind(this),showCancelButton:!0,showCreateAppleId:!1},e={data:t,dataType:"signin",navigationDocument:modal};this.dispatchEvent(new r("tabPush",{detail:e}))},f.prototype.confirmMigration=function(){if(this.deepLink=this.deepLink.slice(this.deepLink.indexOf("?")+1),this.buyParams){var t={offers:[{buyParams:this.buyParams+"&"+this.deepLink+"&isBeatsMigration=true&clientBuyId="+a.metrics.buyId(this)}]};itms.buy(t),this.disableActionButtons(!0)}else a.log.error("Buy Failed: Missing buyParams data for selected offer.")},f.prototype.handleBuyConfirmed=function(){itms.isCloudLibraryEnabled()||itms.setCloudLibraryEnabled(!0,!0,function(){}),a.account.isAppleMusicEnabled()||a.account.enableAppleMusic(!0),a.account.closeAccountModal.call(this),this.disableActionButtons(!1),d.publish("serviceChange",{}),a.account.setIsMigrationInProgress(!0),d.publish("importingFavorites",{})},f.prototype.handleBuyFailed=function(t){if(1===t.error){t.document=this.el.ownerDocument,t.controller=this;var e=new r("handleAskToBuy",t);this.dispatchEvent(e)}this.disableActionButtons(!1)},f.prototype.disableActionButtons=function(t){var e,n=this.el.ownerDocument.getElementsByTagName("button"),i=0,a=n.length;for(i=0;a>i;i++)e=n.item(i),e.setAttribute("disabled",t)},f.prototype.alreadySubscribed=function(){a.account.getSubscriptionStatus({partialResults:!0},this.handleServiceEligibility.bind(this))},f.prototype.handleServiceEligibility=function(t,e){if(this.waitingForEligibilityData=!1,1===t)"unlinked"===e.carrierBundle?d.publish("serviceChange",{}):(this.model.subscribed=!0,this.render());else if(!itms.accountInfo.DSID&&e.isFinal)this.signin();else if(e.isFinal){var n={data:{type:"error",title:p.loc("FUSE.NotAlreadySubscribed"),buttons:[{title:p.loc("OK"),className:"comfirm-button"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};d.publish("showModal",{detail:n})}},f.prototype.metricsPageData={pageId:"Migration",pageType:"Unknown"},f.prototype.handleLearnMoreLink=function(){openURL(this.strings.learnMoreUrl)},e.exports=f},{"../../../util":304,"../../base":84,"../../common":92,"./model":33,"./style.hbs":34,"./template.hbs":35,itml:355}],28:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.controller.MultiElementController,o=t("../../../common").traits.TabComponent,l=t("../../../base").style,s=t("./style.hbs"),c=a.pubSub,u=t("./template.hbs"),h=function(t,e){t=t||{},e=e||{},t.styles=t.styles||[],t.styles.push(new l({styleTemplate:s})),t.events=t.events||[],t.events.push("select"),r.call(this,t,e),o.call(this),this.bag=itms.getBag(),this.currentDoc=this.el.ownerDocument,this.addEventDelegates(this.currentDoc,["tabPush"]),this.render(),this.checkMigrationStatus()};a.inherit(h,r),a.inherit(h,o,!0),h.prototype.template=u,h.prototype.checkMigrationStatus=function(){var t=a.urls.migration(),e={url:t,method:"GET",success:this.checkMigrationStatusSuccess.bind(this),failure:this.checkMigrationStatusFailure.bind(this)};a.xhr(e)},h.prototype.checkMigrationStatusSuccess=function(t){var e;try{e=JSON.parse(t)}catch(n){return void a.log.error("error in beatsMigrationStatusSrv response")}if(e&&0===e.status){a.log.warn(e);var i=e.migrationStatus;"finished"===i.TasteProfile?setTimeout(function(){c.publish("migrationComplete",{}),c.publish("serviceChange",{})},2e3):setTimeout(function(){this.checkMigrationStatus()}.bind(this),3e4)}else a.log.warn("beatsMigrationStatusSrv failed, trying again"),setTimeout(this.checkMigrationStatus.bind(this),3e4)},h.prototype.checkMigrationStatusFailure=function(){a.log.warn("Migrating Beats Content Failed")},e.exports=h},{"../../../../util":304,"../../../base":84,"../../../common":92,"./style.hbs":30,"./template.hbs":31,itml:355}],29:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./element"),o=i.controller.DocumentController,l=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new r,t.controllers.push(n)),this.controller=n,o.call(this,t,e),this.addEventDelegates(this.controller,["tabPush"])};a.inherit(l,o),l.prototype.documentType="panelTemplate",e.exports=l},{"../../../../util":304,"./element":28,itml:355}],30:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* migration */\n.page-title {\n    margin: 50 0 0 0;\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 27pt;\n    text-align: center;\n}\n.page-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 16pt;\n    text-align: center;\n    itml-align: center;\n    color: rgb(150, 150, 150);\n}\n.offers-grid {\n    itml-row-height: 65pt;\n    padding: 0;\n}\n.offers-grid-divider {\n    margin: 0;\n}\n.offer-title {\n    itml-text-max-lines: 1;\n    font-size: 18pt;\n}\n.selected {\n    color: tint-color;\n    font-size: 18pt;\n}\n.offer-subtitle {\n    itml-text-max-lines: 1;\n    font-size: 16pt;\n    color: rgb(150, 150, 150)\n}\n\n.refund-blurb {\n	font-size:10px;\n	itml-text-max-lines: 0;\n	text-align: left;\n}\n\n.migration-continue-button {\n    itml-text-max-lines: 1;\n    font-size: 20pt;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: tint-color;\n}\n\n.small-button {\n    font-size: 14pt;\n}\n"},useData:!0})},{"hbsfy/runtime":338}],31:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(l+=a),l+'<title class="page-title top">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.Loading.forYou.title",{name:"loc",hash:{},data:i}))+'</title>\n<subtitle class="page-subtitle top">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.Loading.forYou.explanation",{name:"loc",hash:{},data:i}))+'</subtitle>\n<activityIndicator class="position-center"/>\n'},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],32:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),o=t("./element"),l=t("../../common").traits.TabComponent,s=i.controller.DocumentController,c=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new o(t),t.controllers.push(n)),s.call(this,t,e),l.call(this),this.dontUseNativeModal=!0;var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.cancelMigration.bind(this))};this.controller=n,this.addEventListener("render",i.bind(this)),this.addEventListener("appear",this.controller.appearCallback.bind(this.controller)),i.call(this)};a.inherit(c,s),a.inherit(c,l,!0),c.prototype.documentType="panelTemplate",c.prototype.titleTemplate=r,c.prototype.cancelMigration=function(){a.account.closeAccountModal.call(this)},e.exports=c},{"../../../util":304,"../../common":92,"./element":27,"./title.hbs":36,itml:355}],33:[function(t,e,n){function i(t){t=t||{},this.deepLink=t.deepLink,o.call(this,t)}var a=t("itml"),r=a.event.Event,o=t("../../base").model,l=t("../../../util");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.get=function(t){if(t&&this.deepLink){var e=this.deepLink.substring(this.deepLink.indexOf("?")),n={url:t+e,method:"GET",success:this.onDataSuccess.bind(this),failure:this.onDataFailed.bind(this)};l.xhr(n)}else l.log.error("MigrationModel must have url and this.deepLink")},i.prototype.onDataSuccess=function(t){try{this.data=JSON.parse(t)}catch(e){l.log.error("beatsMigrationInfoSrv returned an error")}this.dispatchEvent(new r("dataReady"))},i.prototype.onDataFailed=function(t){l.log.warn("FAIL: ",t)},e.exports=i},{"../../../util":304,"../../base":84,itml:355}],34:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* migration */\n.page-title {\n    itml-text-max-lines: 0;\n    font-weight: thin;\n    font-size: 27pt;\n    text-align: center;\n    margin: 40 0 20 0;\n}\n.page-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 16pt;\n    text-align: center;\n    color: rgb(150, 150, 150);\n    margin: 0 0 10 0;\n}\n.migration-continue-button {\n    itml-text-max-lines: 0;\n    font-size: 15pt;\n    text-align: center;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: rgb(0,0,0);\n    itml-item-width: 100%;\n    border-radius: circle-caps;\n    padding: 15;\n    margin: 40 0 0 0;\n}\n.migration-button-title {\n  font-weight: bold;\n}\n.migration-button-subtitle {\n  color: rgb(150,150,150);\n  font-size: 12pt;\n}\n.divider {\n    margin: 10 0 0 0;\n    padding: 10;\n}\n.small-button {\n    font-size: 14pt;\n}\n.button-footer-text {\n    margin: 10 0 0 0;\n}\n.about-music-button {\n    margin: 10 0 15 0;\n}\n.refund-blurb {\n    margin: 30 0 0 0;\n    color: rgb(150,150,150);\n    itml-text-max-lines: 0;\n}\n.apple-music-already-subscribed {\n    margin: 20 0 10 0;\n}\n\n.footer-text {\n    itml-text-max-lines: 0;\n    color: rgba(0,0,0,.6);\n    text-align: center;\n}\n"},useData:!0})},{"hbsfy/runtime":338}],35:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='    <title class="page-title">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.AlreadySubscriber_title",{name:"loc",hash:{},data:i}))+'</title>\n    <subtitle class="page-subtitle">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.AlreadySubscriber_description",{name:"loc",hash:{},data:i}))+'</subtitle>\n    <img src="resource://beatsToAppleMusic" class="top" width="128" height="40"/>\n    <button class="migration-continue-button top">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Footer.AlreadyaSubscriber.Continue",{name:"loc",hash:{},data:i}))+"</button>\n";return a=e.unless.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.isATT:a,{name:"unless",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'    <text class="bottom footer-text">'+o(l(null!=(a=null!=t?t.strings:t)?a.migrationFooterText:a,t))+"</text>\n"},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'	    <text class="refund-blurb top">'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.refundBlurb:a,t))+"</text>\n"},4:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='    <title class="page-title">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.LandingPage.Title",{name:"loc",hash:{},data:i}))+'</title>\n    <subtitle class="page-subtitle">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.Landingpage.Description",{name:"loc",hash:{},data:i}))+'</subtitle>\n    <button class="learn-more-link small-button tint-color">'+o(l(null!=(a=null!=t?t.strings:t)?a.learnMore:a,t))+'</button>\n    <button class="migration-continue-button top" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"button",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+='><span class="buy-button-title">'+o(l(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.title:a,t))+' </span><br /><span class="migration-button-subtitle">'+o(l(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.description:a,t))+"</span></button>\n",a=e.unless.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.isATT:a,{name:"unless",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'    <text class="bottom footer-text">'+o(l(null!=(a=null!=t?t.strings:t)?a.migrationFooterText:a,t))+"</text>\n"},6:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'    <button class="small-button tint-color apple-music-already-subscribed bottom" >'+o(r(null!=(a=null!=t?t.strings:t)?a.alreadySubscribed:a,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(l+=a),a=e["if"].call(t,null!=(a=null!=t?t.model:t)?a.subscribed:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(4,i),data:i}),null!=a&&(l+=a),l+='<divider class="divider bottom" />\n',a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.alreadySubscribed:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'<button class="small-button tint-color about-music-button bottom" data-content-kind="learn_more_page" about-type="about_music" push-type="sheet" type-key="MusicAndPrivacy">'+o(r(null!=(a=null!=t?t.strings:t)?a.aboutMusicAndPrivacy:a,t))+"</button>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],36:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelSheetButton" type="link" class="align-left cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":338}],37:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../../util"),o=t("./template.hbs"),l=r.pubSub,s=t("../bubble"),c=t("./model"),u=function(t,e){t=t||{},t.events=t.events||[],t.template=o,s.call(this,t,e),this.onSelect["more-artists"]=this.handleMoreArtistsButton.bind(this);var n=function(){this.getNextArtistBatchAfterRender===!0&&(this.getNextArtistBatchAfterRender=!1,this.model.getNextArtistDataBatch())};this.addEventListener("render",n.bind(this)),n.call(this),this.model=new c,this.model.addEventListener("dataReady",function(){this.render(),this.dispatchEvent(new a("updateNav"))}.bind(this)),this.model.addEventListener("artistDataPosted",this.handleArtistDataPosted.bind(this)),this.model.initData(t.data),this.model.getFirstArtistBatch()};r.inherit(u,s),u.prototype.handleMoreArtistsButton=function(){this.model.removeUnselectedArtistsFromData(),this.getNextArtistBatchAfterRender=!0,this.render()},u.prototype.handleArtistDataPosted=function(){var t=this.el.ownerDocument.getElementsByTagName("physicalCirclesTemplate").item(0);t.getFeature("CirclesContainer").performFinishAnimation(this.onboardingFinished.bind(this))},u.prototype.onboardingFinished=function(){l.publish("tasteProfileUpdated",{}),this.dispatchEvent(new a("handleOnboardingDone"))},e.exports=u},{"../../../../util":304,"../bubble":42,"./model":39,"./template.hbs":40,itml:355}],38:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),o=i.controller.DocumentController,l=t("./element"),s=function(t,e){t=t||{},t.name="OnboardingArtist",t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new l({data:t.data}),t.controllers.push(n)),this.controller=n;var i=function(){this.navigationBarController&&(this.navigationBarController.disabledSubmitState=this.controller.model.getNeedsMoreSelections(),this.navigationBarController.render())};this.controller.addEventListener("updateNav",i.bind(this)),o.call(this,t,e);var a=function(){this.el.addEventListener("change",this.controller.handleBubbleAction.bind(this.controller))};this.addEventListener("render",a.bind(this)),a.call(this),this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="transparent-bar",this.navigationBarController.render(),this.addEventDelegates(n,["handleOnboardingDone"]),i.call(this);var r=function(){var t=this.el.getElementById("doneButton");t&&t.addEventListener("select",this.handleDoneButton.bind(this))};this.navigationBarController.addEventListener("render",r.bind(this)),r.call(this)};a.inherit(s,o),s.prototype.documentType="physicalCirclesTemplate",s.prototype.titleTemplate=r,s.prototype.handleDoneButton=function(){this.controller.model.set()},e.exports=s},{"../../../../util":304,"./element":37,"./title.hbs":41,itml:355}],39:[function(t,e,n){function i(t){t=t||{},o.call(this,t)}var a=t("itml"),r=a.event.Event,o=t("../../../base").model,l=t("../../../../util"),s=l.loc,c=20;i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.pageProfile="lockup",i.prototype.set=function(){var t=this.formatArtistDataToPost(),e=this.data.genrePostData,n="artists="+encodeURIComponent(JSON.stringify(t))+"&labels="+encodeURIComponent(JSON.stringify(e));if(l.urls.updateTastePreference()){var i=l.urls.updateTastePreference(),a={url:i,method:"POST",params:n,success:this.onSetSuccess.bind(this),failure:this.onSetFailed.bind(this)};l.xhr(a)}else l.log.warn("FAIL: ","bag error")},i.prototype.formatArtistDataToPost=function(){var t=[],e=this.data.contentMap,n=0;for(var i in e)e.hasOwnProperty(i)&&e[i].artist&&0!==e[i].artist.userPreference&&(t[n++]=e[i].artist);return t},i.prototype.onSetSuccess=function(){this.dispatchEvent(new r("artistDataPosted"))},i.prototype.onSetFailed=function(t){403===t?l.account.auth({success:this.set.bind(this)}):(modal.popDocument(),l.log.warn("FAIL: ",t))},i.prototype.getFirstArtistBatch=function(t){var e=t&&t.resetArtists===!0,n=this.data.artists?this.data.artists.length:0,i=0,a=n>c?c:n-1;this.metrics={pageData:this.data.metrics},this.parseAndSetPageData(i,a,e)},i.prototype.initData=function(t){this.data=t&&t.artistData||{},this.cacheContent(this.data),this.data.genrePostData=t&&t.genrePostData||{},this.setArtistContentMap(this.data.artists),this.data.orderedArtists=[],this.data.selectedArtists=[],this.data.deletedArtists=[]},i.prototype.setArtistContentMap=function(t){if(this.data.contentMap={},t)for(var e,n,i=0;i<t.length;i++)e=t[i],n=e.id,this.data.contentMap[n]={artist:e}},i.prototype.parseAndSetPageData=function(t,e,n){var i,a,r,o,s=this.data.artists,c=this.getStorePlatformData(this.data),u=[];for(n&&(this.data.orderedArtists=[],this.data.selectedArtists=[],this.data.deletedArtists=[]),i=t;e>i;i++){if(o=s[i],r=o.id,this.data.orderedArtists.push(this.data.contentMap[r]),a=c[r]){var h=l.artwork.getArtworkForContent({content:a,artworkMap:this.artworkMap});h&&(a.image=h.image),this.data.contentMap[r].storeData=a}else this.data.contentMap[r].storeData={adamId:r},u.push(r);n?o.userPreference=0:o.userPreference>0?this.data.selectedArtists.push(o):o.userPreference<0&&this.data.deletedArtists.push(o)}0===t&&(this.data.tuneYourTaste=this.data.selectedArtists.length>0),this.setContentDerivedData(t),this.startIndex=t,this.endIndex=e,u.length>0?this.fetchContent({profile:this.pageProfile,contentIds:u,onSuccess:this.onDataReady.bind(this,this.startIndex,this.endIndex),onFailure:this.onDataFailed.bind(this)}):this.onDataReady(this.startIndex,this.endIndex)},i.prototype.removeUnselectedArtistsFromData=function(){for(var t=[],e=this.getSelectedArtists(),n=0;n<e.length;n++){var i=e[n].id;t[n]=this.data.contentMap[i]}this.data.orderedArtists=t},i.prototype.getNextArtistDataBatch=function(){var t=this.data.artistsDisplayIndexStart,e=this.data.artistsDisplayIndexEnd;t=e+1,e=t+(c-this.getSelectedArtists().length),e>this.data.artists.length&&(e=this.data.artists.length),this.parseAndSetPageData(t,e)},i.prototype.onDataFailed=function(t){l.log.warn("content fetch from store platform failed: ",t),this.dispatchEvent(new r("dataReady"))},i.prototype.onDataReady=function(t,e,n){if(n){var i=this.data.contentMap;for(var a in i)if(i.hasOwnProperty(a)&&i[a].storeData&&i[a].storeData.adamId){var o=n[i[a].storeData.adamId];if(o){var s=l.artwork.getArtworkForContent({content:o,artworkMap:this.artworkMap});s&&(o.image=s.image),i[a].storeData=o}}}if("undefined"!=typeof t){this.data.artistsDisplayIndexStart=t,this.data.artistsDisplayIndexEnd=e;var c=this.data.artists?this.data.artists.length:0;this.data.noMoreArtistsToShow=e+1>=c?!0:!1}this.dispatchEvent(new r("dataReady"))},i.prototype.setContentDerivedData=function(t){var e=this.data.selectedArtists.length,n=this.data.deletedArtists.length;if(e>2)this.data.progressValue="1.0";else{var i=.5+.5*e/3;this.data.progressValue=i}var a=t&&t>0,r=e>0,o=n>0;this.data.noUpdates=!(a||r||o),this.data.needsMoreSelections=2>=e;var l=n>0&&n===this.data.orderedArtists.length;this.data.subtitle=s.loc(l?"FUSE.Onboarding.AllDeleted.Subheader":"FUSE.Onboarding.Artists.Subheader"),this.data.title=l?s.loc("FUSE.Onboarding.AllDeleted.Header"):this.data.tuneYourTaste?s.loc("FUSE.Onboarding.Artists.Header.ChooseYourFavorites"):this.getPageTitle(e)},i.prototype.getSelectedArtists=function(){return this.data&&this.data.selectedArtists||null},i.prototype.getDeletedArtists=function(){return this.data&&this.data.deletedArtists||null},i.prototype.getNeedsMoreSelections=function(){return this.data&&this.data.needsMoreSelections||!1},i.prototype.getPageTitle=function(t){var e=[s.loc("FUSE.Onboarding.Artists.Header.GotIt"),s.loc("FUSE.Onboarding.Artists.Header.Choose1"),s.loc("FUSE.Onboarding.Artists.Header.Choose2"),s.loc("FUSE.Onboarding.Artists.Header.Choose3")],n=3-t;return 0>n&&(n=0),e[n]},i.prototype.updateData=function(t,e){var n=this.data.contentMap[t].artist,i=this.getSelectedArtists(),a=this.getDeletedArtists();if(1===e)i.push(n);else if(0===e||-1===e){var r=i.indexOf(n);r>-1&&i.splice(r,1)}-1===e&&a.push(n),n.userPreference=e,this.setContentDerivedData()},i.prototype.resetData=function(){this.getFirstArtistBatch({resetArtists:!0});for(var t in this.data.contentMap)this.data.contentMap.hasOwnProperty(t)&&(this.data.contentMap[t].artist.userPreference=0);this.data.progressValue=.5,this.data.noUpdates=!0,this.data.needsMoreSelections=!0,this.data.title=this.getPageTitle(0)},i.prototype.artworkMap={profile:{xs:[150,150],s:[150,150],m:[150,150],l:[150,150],xl:[150,150]}},e.exports=i},{"../../../../util":304,"../../../base":84,itml:355}],40:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.storeData:t)?a.name:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='        <circle class="bubble onboarding-image-treatment" data-content-id="'+o(r(null!=(a=null!=t?t.artist:t)?a.id:a,t))+'" size="'+o(r(null!=(a=null!=t?t.artist:t)?a.userPreference:a,t))+'" x="'+o(r(null!=(a=null!=t?t.artist:t)?a.x:a,t))+'" y="'+o(r(null!=(a=null!=t?t.artist:t)?a.y:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"circle",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'><title id="title">'+o(r(null!=(a=null!=t?t.storeData:t)?a.name:a,t))+'</title><img src="'+o(r(null!=(a=null!=(a=null!=t?t.storeData:t)?a.image:a)?a.url:a,t))+'"/></circle>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+='<title id="pageTitle">'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.title:a,t))+"</title>\n<subtitle>"+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.subtitle:a,t))+"</subtitle>\n\n<section ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"section",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.orderedArtists:a,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'</section>\n\n<palette id="palette">\n    <button id="resetButton" class="reset-button" disabled="'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.noUpdates:a,t))+'">'+o(r(null!=(a=null!=t?t.strings:t)?a.resetButton:a,t))+'</button>\n    <progressIndicator id="progress" value="'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.progressValue:a,t))+'">\n        <title>'+o(r(null!=(a=null!=t?t.strings:t)?a.youLabel:a,t))+'</title>\n    </progressIndicator>\n    <button id="moreArtists" class="more-artists" disabled="'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.noMoreArtistsToShow:a,t))+'">'+o(r(null!=(a=null!=t?t.strings:t)?a.moreArtists:a,t))+"</button>\n</palette>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],41:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'<button id="doneButton" type="done" disabled="'+l((a=null!=(a=e.disabledSubmitState||(null!=t?t.disabledSubmitState:t))?a:o,typeof a===r?a.call(t,{name:"disabledSubmitState",hash:{},data:i}):a))+'" class="align-right done-button">'+l((e.loc||t&&t.loc||o).call(t,"FUSE.DoneButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":338}],42:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=i.event.Event,l=t("../../base").style,s=t("./style.hbs"),c=i.controller.MultiElementController,u=t("../../common").traits.EventMap,h=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new l({styleTemplate:s})),t.events=t.events||[],t.events.push("select"),this.template=t.template,this.strings={youLabel:r.loc("FUSE.Onboarding.You.Label"),resetButton:r.loc("FUSE.Onboarding.Reset.Button"),moreArtists:r.loc("FUSE.Onboarding.Artists.MoreArtistsButton")},c.call(this,t,e),u.call(this,t),a.extend(this.onSelect,{bubble:this.handleBubbleAction.bind(this),"reset-button":this.handleResetButton.bind(this)})};a.inherit(h,c),a.inherit(h,u,!0),h.prototype.handleBubbleAction=function(t){var e=t.removed||t.target,n=e.getAttribute("data-content-id"),i=e.getAttribute("size"),a=t.removed?-1:this.calculateNewBubbleSize(i);this.updatePageDataAndRefresh(n,a)},h.prototype.handleResetButton=function(){var t=this.el.ownerDocument.getElementsByTagName("physicalCirclesTemplate").item(0);t.getFeature("CirclesContainer").performResetAnimation(this.updatePageDataAndRefresh.bind(this))},h.prototype.handleNextButton=function(){this.model.set()},h.prototype.updatePageDataAndRefresh=function(t,e){"undefined"!=typeof t?this.model.updateData(t,e):this.model.resetData(),this.updateNavButtons(),this.render()},h.prototype.handleOnboardingDone=function(){this.dispatchEvent(new o("handleOnboardingDone"))},h.prototype.updateNavButtons=function(){this.dispatchEvent(new o("updateNav"))},h.prototype.calculateNewBubbleSize=function(t){var e=0;return e=t?(parseInt(t)+1)%3:1},e.exports=h},{"../../../util":304,"../../base":84,"../../common":92,"./style.hbs":48,itml:355}],43:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.event.Event,o=t("./template.hbs"),l=t("./model"),s=t("../bubble"),c=t("../artist"),u=function(t,e){t=t||{},t.template=o,s.call(this,t,e),this.model=new l,this.model.addEventListener("dataReady",function(){this.render(),this.dispatchEvent(new r("updateNav"))}.bind(this)),this.model.addEventListener("artistDataReady",this.handleGenreDataReady.bind(this)),this.model.addEventListener("dataPostInProgress",this.handleDataPostInProgress.bind(this)),this.model.addEventListener("dataPostFailed",this.handleDataPostFailed.bind(this)),this.model.get()};a.inherit(u,s),u.prototype.handleNextButton=function(){this.model.set()},u.prototype.handleDataPostInProgress=function(){this.dispatchEvent(new r("updateNav",{detail:{disableNavButtons:!0}}))},u.prototype.handleDataPostFailed=function(){this.dispatchEvent(new r("updateNav",{detail:{disableNavButtons:!1}}))},u.prototype.handleGenreDataReady=function(){var t=this.el.ownerDocument.getElementsByTagName("physicalCirclesTemplate").item(0);t.getFeature("CirclesContainer").performFinishAnimation(this.navigateToArtistPage.bind(this))},u.prototype.navigateToArtistPage=function(){var t={genrePostData:this.model.getGenrePostData(),artistData:this.model.getArtistPageData()},e=new c({data:t});e.addEventListener("handleOnboardingDone",this.handleOnboardingDone.bind(this)),a.metrics.track(e,{tabIdentifier:"onboarding_artist",entityType:TabBar.selectedTab.identifier});var n=this.el.ownerDocument.navigationDocument;n.pushDocument(e.el),this.dispatchEvent(new r("updateNav",{detail:{disableNavButtons:!1}}))},e.exports=u},{"../../../../util":304,"../artist":38,"../bubble":42,"./model":45,"./template.hbs":46,itml:355}],44:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),o=i.controller.DocumentController,l=t("./element"),s=function(t,e){t=t||{},t.name="OnboardingGenre",t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new l,t.controllers.push(n)),this.controller=n;var i=function(t){this.navigationBarController&&(this.navigationBarController.disabledSubmitState=t&&t.detail&&t.detail.disableNavButtons||this.controller.model.getNeedsMoreSelections()?!0:!1,this.navigationBarController.render())};this.controller.addEventListener("updateNav",i.bind(this)),o.call(this,t,e);var a=function(){this.el.addEventListener("change",this.controller.handleBubbleAction.bind(this.controller))};this.addEventListener("render",a.bind(this)),a.call(this),this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="transparent-bar",this.navigationBarController.render(),this.addEventDelegates(n,["handleOnboardingDone"]),i.call(this);var r=function(){var t=this.el.getElementById("nextButton");t&&t.addEventListener("select",this.handleNextButton.bind(this))};this.navigationBarController.addEventListener("render",r.bind(this)),r.call(this)};a.inherit(s,o),s.prototype.documentType="physicalCirclesTemplate",s.prototype.titleTemplate=r,s.prototype.handleNextButton=function(){this.controller.handleNextButton()},e.exports=s},{"../../../../util":304,"./element":43,"./title.hbs":47,itml:355}],45:[function(t,e,n){function i(t){t=t||{},o.call(this,t)}var a=t("itml"),r=a.event.Event,o=t("../../../base").model,l=t("../../../../util"),s=l.loc;i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.get=function(){var t={url:l.urls.tastePreferenceLabels(),method:"GET",success:this.onGetDataSuccess.bind(this),failure:this.onGetDataFailed.bind(this)};l.xhr(t)},i.prototype.onGetDataSuccess=function(t,e){var n=JSON.parse(t);this.data=this.parsePageData(n),this.metrics={pageData:n.metrics,xhrMetrics:e},this.dispatchEvent(new r("dataReady"))},i.prototype.onGetDataFailed=function(t){403===t?l.account.auth({success:this.get.bind(this)}):(this.dispatchEvent(new r("dataReady")),l.log.warn("FAIL: ",t))},i.prototype.parsePageData=function(t){var e={noUpdates:!0,progressValue:"0",genres:{},orderedGenres:[],selectedGenres:[],deletedGenres:[]};if(t.labels)for(var n=0;n<t.labels.length;n++){var i=t.labels[n];i.id||(i.id=n),i.userPreference?i.userPreference>0?e.selectedGenres.push(i):i.userPreference<0&&e.deletedGenres.push(i):i.userPreference=0,e.genres[i.id]=i,e.orderedGenres.push(e.genres[i.id])}return this.setContentDerivedData(e),e},i.prototype.resetData=function(){this.data.selectedGenres=[],this.data.deletedGenres=[];for(var t in this.data.genres)this.data.genres.hasOwnProperty(t)&&(this.data.genres[t].userPreference=0);this.data.progressValue=0,this.data.noUpdates=!0,this.data.needsMoreSelections=!0},i.prototype.set=function(){this.data.genrePostData=this.formatGenreDataToPost();

var t={url:l.urls.tastePreferenceArtists(),method:"POST",params:"labels="+encodeURIComponent(JSON.stringify(this.data.genrePostData)),success:this.onSetSuccess.bind(this),failure:this.onSetFailed.bind(this)};l.xhr(t),this.dispatchEvent(new r("dataPostInProgress"))},i.prototype.formatGenreDataToPost=function(){for(var t,e=this.getSelectedGenres(),n=this.getDeletedGenres(),i=[],a=0;a<e.length;a++)t=e[a],i[a]=t;for(var r=0;r<n.length;r++)t=n[r],i[a++]=t;return i},i.prototype.onSetSuccess=function(t){this.data.artistData=JSON.parse(t),this.dispatchEvent(new r("artistDataReady"))},i.prototype.onSetFailed=function(t){this.dispatchEvent(new r("dataPostFailed")),403===t?(l.log.warn("403 onboarding genre"),l.account.auth({success:this.set.bind(this)})):l.log.warn("FAIL: ",t)},i.prototype.getSelectedGenres=function(){return this.data&&this.data.selectedGenres||null},i.prototype.getDeletedGenres=function(){return this.data&&this.data.deletedGenres||null},i.prototype.getArtistPageData=function(){return this.data&&this.data.artistData||null},i.prototype.getGenrePostData=function(){return this.data&&this.data.genrePostData||null},i.prototype.getNeedsMoreSelections=function(){return this.data&&this.data.needsMoreSelections||!1},i.prototype.updateData=function(t,e){var n=this.data.genres,i=n[t],a=this.getSelectedGenres(),r=this.getDeletedGenres();if(1===e)a.push(i);else if(0===e||-1===e){var o=a.indexOf(i);o>-1&&a.splice(o,1)}-1===e&&r.push(i),i.userPreference=e,this.setContentDerivedData(this.data)},i.prototype.setContentDerivedData=function(t){var e=t.selectedGenres.length>0,n=t.deletedGenres.length>0;t.progressValue=e?"0.5":"0",t.noUpdates=!(e||n),t.needsMoreSelections=t.selectedGenres.length<=0,n&&t.deletedGenres.length===t.orderedGenres.length?(t.title=s.loc("FUSE.Onboarding.AllDeleted.Header"),t.subtitle=s.loc("FUSE.Onboarding.AllDeleted.Subheader")):(t.title=s.loc("FUSE.Onboarding.Labels.Header"),t.subtitle=s.loc("FUSE.Onboarding.Labels.Subheader"))},e.exports=i},{"../../../../util":304,"../../../base":84,itml:355}],46:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='        <circle class="bubble" data-content-id="'+o(r(null!=t?t.id:t,t))+'" size="'+o(r(null!=t?t.userPreference:t,t))+'" x="'+o(r(null!=t?t.x:t,t))+'" y="'+o(r(null!=t?t.y:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"circle",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n            <title>"+o(r(null!=t?t.name:t,t))+"</title>\n",a=e["if"].call(t,null!=t?t.imageUri:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"        </circle>\n"},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                <img src="'+r(a(null!=t?t.imageUri:t,t))+'" width="116" height="116"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+="<title>"+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.title:a,t))+"</title>\n<subtitle>"+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.subtitle:a,t))+"</subtitle>\n<section ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"section",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.orderedGenres:a,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'</section>\n\n<palette id="palette">\n    <button id="resetButton" class="reset-button" disabled="'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.noUpdates:a,t))+'">'+o(r(null!=(a=null!=t?t.strings:t)?a.resetButton:a,t))+'</button>\n    <progressIndicator id="progress" value="'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.progressValue:a,t))+'">\n        <title>'+o(r(null!=(a=null!=t?t.strings:t)?a.youLabel:a,t))+"</title>\n    </progressIndicator>\n</palette>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],47:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'<button id="nextButton" type="done" disabled="'+l((a=null!=(a=e.disabledSubmitState||(null!=t?t.disabledSubmitState:t))?a:o,typeof a===r?a.call(t,{name:"disabledSubmitState",hash:{},data:i}):a))+'" class="align-right next-button">'+l((e.loc||t&&t.loc||o).call(t,"FUSE.NextButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":338}],48:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".onboarding-image-treatment {\n    itml-img-treatment: onboarding-saturated;\n}"},useData:!0})},{"hbsfy/runtime":338}],49:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),o=r.loc,l=t("./title.hbs"),s=i.controller.DocumentController,c=t("./element"),u=t("../../common/traits/tab_component"),h=r.pubSub,d=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[],t.name=o.loc("FUSE.Account"),this.controller=new c,t.controllers.push(this.controller),s.call(this,t,e),u.call(this),h.subscribe("serviceChange",this.handleServiceChanged.bind(this)),this.setNavigationBarUI(),this.addEventListener("appear",this.controller.handleAppear.bind(this.controller)),this.addEventDelegates(this.controller,["handleOnboardingDone"]),this.addEventDelegates(this.controller,["closeSettings"]),this.addEventDelegates(this.controller,["prepareForTabPush"]),this.addEventDelegates(this.controller,["checkLocalManifestVersion"])};r.inherit(d,s),r.inherit(d,u,!0),d.prototype.documentType="settingsTemplate",d.prototype.titleTemplate=l,d.prototype.setNavigationBarUI=function(){this.navigationBarController.buttonName=o.loc(r.account.getDSID()?"FUSE.DoneButton":"FUSE.CancelButton"),this.navigationBarController.render();var t=this.el.getElementById("doneButton");t&&t.addEventListener("select",this.handleDoneButton.bind(this))},d.prototype.handleServiceChanged=function(){this.setNavigationBarUI()},d.prototype.handleDoneButton=function(){this.dispatchEvent(new a("closeSettings"))},e.exports=d},{"../../../util":304,"../../common/traits/tab_component":112,"./element":50,"./title.hbs":59,itml:355}],50:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),o=r.loc,l=r.account,s=i.controller.MultiElementController,c=t("../../common").traits.EventMap,u=t("../../common").traits.TabComponent,h=t("../../common").traits.DataProvider,d=t("../../base").style,p=t("./style.hbs"),m=t("./template.hbs"),f=r.pubSub,g=t("../onboarding/genre"),b=t("../subscribe"),v=t("./profile"),y=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new d({styleTemplate:p})),t.events=t.events||[],t.events.push("select"),this.strings={subscribeLabel:o.loc("FUSE.Settings.Subscribe.Label"),subscribeFooter:o.loc("FUSE.Settings.Subscribe.Footer"),tuneYourTasteLabel:o.loc("FUSE.Settings.TuneYourTaste.Label"),followingLabel:o.loc("FUSE.Settings.Following.Label"),findArtistsToFollowLabel:o.loc("FUSE.Settings.FindArtistsToFollow.Label"),managedAccountHeader:o.loc("FUSE.Settings.ManagedAccounts.Header"),signOutLabel:o.loc("FUSE.Settings.SignOut.Label"),accountSummaryLabel:o.loc("FUSE.ViewAppleId"),appleIdLabel:o.loc("FUSE.SignIn.AppleId.Label"),passwordLabel:o.loc("FUSE.SignIn.Password.Label"),appleIdPlaceholder:o.loc("FUSE.SignIn.AppleIdPlaceholder"),requiredPlaceholder:o.loc("FUSE.SignIn.RequiredPlaceholder"),signIn:o.loc("FUSE.SignInButton"),forgotAppleId:o.loc("FUSE.SignIn.ForgotAppleId")},this.setTemplateData(),this.setNetworkDependentTemplateData(),s.call(this,t,e),c.call(this,t),u.call(this),f.subscribe("serviceChange",this.handleServiceChanged.bind(this)),f.subscribe("networkChange",this.handleNetworkChange.bind(this)),r.extend(this.onSelect,{"tune-taste-action":this.handleTuneYourTaste.bind(this),"subscribe-action":this.handleSubscribeAction.bind(this),"following-action":this.handleFollowingAction.bind(this),"follow-recommendations-action":this.handleFollowRecommendationsAction.bind(this),"profile-action":this.handleProfileAction.bind(this),"managed-accounts-action":this.handleManagedAccountsAction.bind(this),"family-button":this.handleFamilyAction.bind(this),"sign-out-button":this.handleSignOutAction.bind(this),"account-summary-button":this.handleAccountSummaryAction.bind(this),"network-error-action":this.showGenericNetworkWarningDialog.bind(this),"forgot-apple-id-button":this.handleForgotAppleId.bind(this)}),this.model=new h({offlineWarningEnabled:!1}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.getConnectModelData()};r.inherit(y,s),r.inherit(y,c,!0),r.inherit(y,u,!0),y.prototype.template=m,y.prototype.setTemplateData=function(){this.DSID=l.getDSID();var t=l.isAppleMusicEnabledForStorefront(),e=l.isConnectEnabledForStorefront(),n=!1;t&&(n=l.isEligibleForAppleMusic()),this.showTuneTasteRow=n&&UserInterfaceStatusController.canShowSubscriptionContent(),this.showSubscriptionUpsellRow=t&&!n,this.showFamilySettingsRow=t,this.showProfileEditingRow=e,this.showFollowersRow=e,this.showManagedArtistsRow=e},y.prototype.getConnectModelData=function(){this.DSID&&l.isConnectEnabledForStorefront()&&(this.getFollowingCount(),this.getProfilePermissions())},y.prototype.setNetworkDependentTemplateData=function(){this.setIsOffline(),"undefined"==typeof this.accountActionClassName&&(this.accountActionClassName={}),this.accountActionClassName.tuneTasteClassAction=this.getRowActionClassName("tune-taste-action"),this.accountActionClassName.subscribeAction=this.getRowActionClassName("subscribe-action"),this.accountActionClassName.profileAction=this.getRowActionClassName("profile-action"),this.accountActionClassName.familyAction=this.getRowActionClassName("family-button"),this.accountActionClassName.accountSummaryAction=this.getRowActionClassName("account-summary-button"),this.accountActionClassName.followingAction=this.getRowActionClassName("following-action"),this.accountActionClassName.followRecommendationsAction=this.getRowActionClassName("follow-recommendations-action")},y.prototype.setIsOffline=function(){this.offline=r.network.isOffline()},y.prototype.getIsOffline=function(){return this.setIsOffline(),this.offline},y.prototype.getRowActionClassName=function(t){return this.getIsOffline()?"network-error-action":t},y.prototype.getFollowingCount=function(){var t=r.urls.build("followingCount",{user:itms.accountInfo.DSID});this.model.fetchData({method:"GET",url:t,success:this.followersCountDataSuccess.bind(this),failure:this.followersCountDataFailure.bind(this)}),this.loadingFollowers=!0},y.prototype.followersCountDataSuccess=function(t){this.loadingFollowers=!1;var e=t;if(e){var n=e.count;(!this.followersData||this.followersData&&n!==this.followersData.count)&&(this.followersData={count:n,isFollowingArtists:n>0},this.render())}},y.prototype.followersCountDataFailure=function(t,e,n){this.loadingFollowers=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.followersData={isFollowingArtists:!1},this.render()},y.prototype.handleAppear=function(){!this.loadingFollowers&&this.DSID&&this.updateFollowOnAppear&&(this.updateFollowOnAppear=!1,this.getFollowingCount("appear")),this.setTemplateData(),this.render()},y.prototype.getProfilePermissions=function(){if(r.network.isOnline()){var t=r.urls.build("profilePermissions",{user:itms.accountInfo.DSID});this.model.fetchData({url:t,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})}},y.prototype.createView=function(t){this.data=t;var e,n,i=[],a=t.permissions;for(e=0;e<a.length;e++){n=a[e];var r=n.entityId,o=this.model.lookupContent(r,this.processContent.bind(this));i.push(o)}return i},y.prototype.handleFailedFetch=function(t,e){this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},y.prototype.processContent=function(t){var e=r.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:{type:"product"}}),n=t;return n[t.kind]=!0,e&&(n.image=e.image,n.hero=e.hero),n},y.prototype.handleDataReady=function(t){this.loading=!1,r.keypath(t,"detail.view")&&(this.viewModel={},this.viewModel.managedArtists=t.detail.view),this.render()},y.prototype.handleTuneYourTaste=function(t){var e=new g;r.metrics.track(e,{pageContext:"AccountSettings"});var n=t.target.ownerDocument.navigationDocument;e.addEventListener("handleOnboardingDone",this.handleOnboardingDone.bind(this)),n.pushDocument(e.el)},y.prototype.handleOnboardingDone=function(){f.publish("setSelectedTab","for_you"),this.dispatchEvent(new a("closeSettings"))},y.prototype.handleSubscribeAction=function(t){var e=new b({showCancelButton:!1});this.addEventDelegates(e,["tabPush","checkLocalManifestVersion","handleAskToBuy"]);var n=t.target.ownerDocument.navigationDocument;e.addEventListener("handleSubscribeDone",this.handleSubscriptionSuccess.bind(this)),n.pushDocument(e.el,{}),e.initManifestVersionCheck()},y.prototype.handleSubscriptionSuccess=function(){this.dispatchEvent(new a("closeSettings"))},y.prototype.handleFollowingAction=function(){var t=this.el.ownerDocument.navigationDocument,e={data:{viewProfileEnabled:!1},dataType:"connect_following",navigationDocument:t};this.dispatchEvent(new a("tabPush",{detail:e})),this.updateFollowOnAppear=!0},y.prototype.handleFollowRecommendationsAction=function(t){var e=t.target.ownerDocument.navigationDocument,n={data:{viewProfileEnabled:!1},dataType:"connect_recommendations",navigationDocument:e};this.dispatchEvent(new a("tabPush",{detail:n})),this.updateFollowOnAppear=!0},y.prototype.handleProfileAction=function(t){var e=new v,n=t.target.ownerDocument.navigationDocument;n.pushDocument(e.el)},y.prototype.handleManagedAccountsAction=function(t){var e=t.target.getAttribute("data-content-id"),n=this.model.lookup(e);if(n){var i=r.tabs.getTab("connect")||TabBar.selectedTab,o={data:n,dataType:"profile_page",navigationDocument:i.navigationDocument},l={switchToTab:!0,tab:i};this.dispatchEvent(new a("prepareForTabPush",{detail:l})),this.dispatchEvent(new a("closeSettings")),this.dispatchEvent(new a("tabPush",{detail:o}))}},y.prototype.handleFamilyAction=function(t){var e=t.state;"none"===e?openURL("prefs:root=CASTLE&aaaction=setupFamily"):("empty"===e||"complete"===e)&&openURL("prefs:root=CASTLE")},y.prototype.handleSignOutAction=function(){itms.signOut()},y.prototype.handleAccountSummaryAction=function(){var t=r.urls.modifyAccount();t&&(t=t.replace("https","music"),openURL(t))},y.prototype.handleForgotAppleId=function(){openURL(o.loc("FUSE.ForgotAppleId.Url"))},y.prototype.handleServiceChanged=function(){this.setTemplateData(),this.getConnectModelData(),this.render()},y.prototype.handleNetworkChange=function(){this.setNetworkDependentTemplateData(),this.render()},y.prototype.artworkMap={product:{xs:[32,32],s:[32,32],m:[32,32],l:[32,32],xl:[32,32]}},y.prototype.showGenericNetworkWarningDialog=function(){var t={data:{type:"error",title:o.loc("FUSE.Error.YoureOffline"),subtitle:o.loc("FUSE.Error.YoureOffline.Generic"),buttons:[{title:o.loc("OK")}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};f.publish("showModal",{detail:t})},e.exports=y},{"../../../util":304,"../../base":84,"../../common":92,"../onboarding/genre":44,"../subscribe":66,"./profile":54,"./style.hbs":57,"./template.hbs":58,itml:355}],51:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.controller.DocumentController,o=t("../../../connect/recommendations/element"),l=t("../../../common").traits.TabComponent,s=t("../../../connect/following/template.hbs"),c=a.loc,u=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("template"),this.controller=new o({api:"follows",params:{user:itms.accountInfo.DSID,limit:200},pullToRefreshEnabled:!1,data:{viewProfileEnabled:!1},hasAutoFollowToggle:!0,batchLoad:!0,template:s,toggled:!0,followText:c.loc("FUSE.Settings.Following.Follow"),followingText:c.loc("FUSE.Settings.Following.Unfollow")}),t.name=c.loc("FUSE.Following.Title"),r.call(this,t,e),l.call(this)};a.inherit(u,r),a.inherit(u,l,!0),u.prototype.documentType="settingsTemplate",e.exports=u},{"../../../../util":304,"../../../common":92,"../../../connect/following/template.hbs":128,"../../../connect/recommendations/element":155,itml:355}],52:[function(t,e,n){var i=t("./document"),a=t("../../../util"),r=a.pubSub,o=function(t,e){this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);r.subscribe("appRefresh",this.closeSettings.bind(this)),this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.handleNeedsContent.bind(this))};o.prototype.handleNeedsContent=function(){this.controller=new i,this.controller.addEventListener("closeSettings",this.closeSettings.bind(this)),this.controller.addEventListener("tabPush",this.eventHandlers.tabPush),this.controller.addEventListener("prepareForTabPush",this.eventHandlers.prepareForTabPush),this.controller.addEventListener("checkLocalManifestVersion",this.eventHandlers.checkLocalManifestVersion),this.nativeViewController.navigationDocument.pushDocument(this.controller.el,{animated:!1})},o.prototype.closeSettings=function(){this.nativeViewController.close()},e.exports=o},{"../../../util":304,"./document":49}],53:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.controller.MultiElementController,o=t("../../../common").traits.EventMap,l=t("../../../common").traits.TabComponent,s=t("../../../base").style,c=t("./style.hbs"),u=t("./template.hbs"),h=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new s({styleTemplate:c})),t.events=t.events||[],t.events.push("select"),r.call(this,t,e),o.call(this,t),l.call(this),this.render()};a.inherit(h,r),a.inherit(h,o,!0),a.inherit(h,l,!0),h.prototype.template=u,e.exports=h},{"../../../../util":304,"../../../base":84,"../../../common":92,"./style.hbs":55,"./template.hbs":56,itml:355}],54:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,o=i.controller.DocumentController,l=t("../../../common").traits.TabComponent,s=t("./element"),c=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new s,t.controllers.push(n)),t.name=r.loc("FUSE.Account"),o.call(this,t,e),l.call(this)};a.inherit(c,o),a.inherit(c,l,!0),c.prototype.documentType="settingsTemplate",e.exports=c},{"../../../../util":304,"../../../common":92,"./element":53,itml:355}],55:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return""},useData:!0})},{"hbsfy/runtime":338}],56:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<group>\n    <header>\n        <label class="">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Settings.EditNameWarning.U13",{name:"loc",hash:{},data:i}))+"</label>\n    </header>\n	<settingsEditProfile />\n</group>\n"},useData:!0})},{"hbsfy/runtime":338}],57:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".label-sub-title {\n  color: rgb(178,178,178);\n}\n.tune-taste-action-disabled {\n  background-color: rgba(0,0,0,0);\n}"},useData:!0})},{"hbsfy/runtime":338}],58:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='    <group>\n        <settingsProfile class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.profileAction:a,t))+'" data-content-kind="user_detail_page">\n            <decorationImage/>\n        </settingsProfile>\n    </group>\n\n    <group>\n';return a=e["if"].call(t,null!=t?t.showTuneTasteRow:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n",a=e["if"].call(t,null!=t?t.showFollowersRow:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="    </group>\n\n",a=e["if"].call(t,null!=t?t.showSubscriptionUpsellRow:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n",a=e["if"].call(t,null!=t?t.showFamilySettingsRow:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n",a=e["if"].call(t,null!=t?t.showManagedArtistsRow:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'\n    <group>\n        <lockup class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.accountSummaryAction:a,t))+'">\n            <label class="group-button">'+o(r(null!=(a=null!=t?t.strings:t)?a.accountSummaryLabel:a,t))+'</label>\n        </lockup>\n        <lockup class="sign-out-button">\n            <label class="group-button">'+o(r(null!=(a=null!=t?t.strings:t)?a.signOutLabel:a,t))+"</label>\n        </lockup>\n    </group>\n"},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'            <lockup class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.tuneTasteClassAction:a,t))+'" data-content-kind="onboarding_page">\n                <label class="group-label">'+o(r(null!=(a=null!=t?t.strings:t)?a.tuneYourTasteLabel:a,t))+"</label>\n                <decorationImage />\n            </lockup>\n"},4:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.followersData:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(10,i),data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.followersData:t)?a.isFollowingArtists:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                    <lockup class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.followingAction:a,t))+'" data-content-kind="settings_following_page" type="tabular">\n                        <label class="group-label align-left">'+o(r(null!=(a=null!=t?t.strings:t)?a.followingLabel:a,t))+'</label>\n                        <label class="group-label align-right label-sub-title">'+o(r(null!=(a=null!=t?t.followersData:t)?a.count:a,t))+"</label>\n                        <decorationImage/>\n                    </lockup>\n"},8:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                    <lockup class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.followRecommendationsAction:a,t))+'" data-content-kind="follow-recommendations_page">\n                        <label class="group-label">'+o(r(null!=(a=null!=t?t.strings:t)?a.findArtistsToFollowLabel:a,t))+"</label>\n                        <decorationImage/>\n                    </lockup>\n"},10:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.offline:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},11:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                    <lockup class="network-error-action">\n                        <label class="group-label align-left">'+o(r(null!=(a=null!=t?t.strings:t)?a.followingLabel:a,t))+"</label>\n                        <decorationImage/>\n                    </lockup>\n"},13:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <group>\n            <lockup class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.subscribeAction:a,t))+'"><label class="group-button">'+o(r(null!=(a=null!=t?t.strings:t)?a.subscribeLabel:a,t))+'</label></lockup>\n            <footer class="footer"><label class="group-footer">'+o(r(null!=(a=null!=t?t.strings:t)?a.subscribeFooter:a,t))+"</label></footer>\n        </group>\n"},15:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <group>\n            <settingsFamily class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.familyAction:a,t))+'"/>\n        </group>\n'},17:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.managedArtists:a,{name:"if",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},18:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='            <group>\n                <header>\n                    <label class="group-label">'+o(r(null!=(a=null!=t?t.strings:t)?a.managedAccountHeader:a,t))+"</label>\n                </header>\n";return a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.managedArtists:a,{name:"each",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"            </group>\n"},19:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='                    <lockup class="managed-accounts-action" data-content-id="'+o(r(null!=t?t.id:t,t))+'">\n';return a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'                        <label class="group-label">'+o(r(null!=t?t.name:t,t))+"</label>\n                        <decorationImage />\n                    </lockup>\n"},20:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                            <img width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" src="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+'" />\n'},22:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'    <group type="signin">\n        <group>\n            <settingsField>\n                <label>'+o(r(null!=(a=null!=t?t.strings:t)?a.appleIdLabel:a,t))+'</label>\n                <input type="email" placeholdertext="'+o(r(null!=(a=null!=t?t.strings:t)?a.appleIdPlaceholder:a,t))+'" />\n            </settingsField>\n            <settingsField>\n                <label>'+o(r(null!=(a=null!=t?t.strings:t)?a.passwordLabel:a,t))+'</label>\n                <input type="password" secure="true" placeholdertext="'+o(r(null!=(a=null!=t?t.strings:t)?a.requiredPlaceholder:a,t))+'" />\n            </settingsField>\n        </group>\n        <group>\n            <settingsField class="tint-color">\n                <input class="tint-color" type="submit" value="'+o(r(null!=(a=null!=t?t.strings:t)?a.signIn:a,t))+'" />\n            </settingsField>\n            <footer class="tint-color">\n                <button class="forgot-apple-id-button tint-color">'+o(r(null!=(a=null!=t?t.strings:t)?a.forgotAppleId:a,t))+"</button>\n            </footer>\n        </group>\n    </group>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.DSID:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(22,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],59:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"<title>"+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+'</title>\n<button action="close" id="doneButton" type="done" class="align-right done-button">'+l((a=null!=(a=e.buttonName||(null!=t?t.buttonName:t))?a:o,typeof a===r?a.call(t,{name:"buttonName",hash:{},data:i}):a))+"</button>\n"},useData:!0})},{"hbsfy/runtime":338}],60:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=t("./template.hbs"),l=t("../../common").traits.EventMap,s=t("../../base").style,c=t("./style.hbs"),u=t("../subscribe/style.hbs"),h=t("../../common").traits.TabComponent,d=i.event.Event,p=i.controller.MultiElementController,m=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.classes.push("signin-template"),t.events=t.events||[],t.data=t.data||{},t.events.push("select");var n,i=t.data.inJSModal===!0&&a.screen.getScreenDimensions().width>414;n=i?100:(a.screen.getScreenDimensions().width-330)/2;var o={textFieldMargin:n};t.styles.push(new s({styleTemplate:c,tintInfo:o})),t.styles.push(new s({styleTemplate:u})),this.showCreateAppleId=t.data.showCreateAppleId!==!1,this.showAboutMusicAndPrivacy=t.data.showAboutMusicAndPrivacy,this.strings={header:t.data.header||r.loc("FUSE.SignIn.Header"),subheader:t.data.subheader,appleIdLabel:r.loc("FUSE.SignIn.AppleId.Label"),passwordLabel:r.loc("FUSE.SignIn.Password.Label"),appleIdPlaceholder:r.loc("FUSE.SignIn.AppleIdPlaceholder"),requiredPlaceholder:r.loc("FUSE.SignIn.RequiredPlaceholder"),forgotAppleId:r.loc("FUSE.ForgotAppleId"),createAppleId:r.loc("FUSE.CreateAppleId"),subscriptionDisclosure:t.data.showDiscosureForSignIn,aboutMusicAndPrivacy:r.loc("FUSE.Footer.aboutAppleMusic")},p.call(this,t,e),l.call(this,t),a.extend(this.onSelect,{"forgot-apple-id-button":this.handleForgotAppleId.bind(this),"create-apple-id-button":this.handleCreateAppleId.bind(this),"about-music-button":this.pushLearnMore}),this.addEventDelegates(this.el.ownerDocument,["tabPush"])};a.inherit(m,p),a.inherit(m,l,!0),a.inherit(m,h,!0),m.prototype.template=o,m.prototype.handleForgotAppleId=function(){openURL(r.loc("FUSE.ForgotAppleId.Url"))},m.prototype.handleCreateAppleId=function(){var t=a.urls.signup();t&&(t=t.replace("https","music"),openURL(t)),this.dispatchEvent(new d("createAppleId"))},e.exports=m},{"../../../util":304,"../../base":84,"../../common":92,"../subscribe/style.hbs":68,"./style.hbs":62,"./template.hbs":63,itml:355}],61:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),o=t("./element"),l=i.controller.DocumentController,s=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.data=t.data||{},t.classes.push("template"),t.event&&t.event.detail&&t.event.detail.navigationDocument===modal&&(t.data.inJSModal=!0),this.callback=t.data.callback,this.controller=new o({data:t.data}),t.controllers.push(this.controller),l.call(this,t,e),this.navigationBarController.showCancelButton=t.data.showCancelButton!==!1,this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="transparent-bar",this.navigationBarController.render();var n=this.el.getElementsByTagName("signInTemplate").item(0);n&&n.addEventListener("change",this.handleChange.bind(this));var i=this.el.getElementById("cancel");i&&i.addEventListener("select",this.cancel.bind(this,t.data.cancelCallback))};a.inherit(s,l),s.prototype.documentType="signInTemplate",s.prototype.titleTemplate=r,s.prototype.handleChange=function(t){"success"===t.result&&(a.account.closeAccountModal.call(this),this.callback&&this.callback())},s.prototype.cancel=function(t){a.account.closeAccountModal.call(this),t&&t.call()},e.exports=s},{"../../../util":304,"./element":60,"./title.hbs":64,itml:355}],62:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return".page-header {\n	itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 27pt;\n    text-align: center;\n    max-width: 300pt;\n    margin: 40 0 15 0;\n}\n.page-subheader {\n	itml-text-max-lines: 0;\n    font-weight: light;\n    color: rgba(0,0,0,0.6);\n    text-align: center;\n    max-width: 300pt;\n    margin: 0 0 15 0;\n}\n.signin-control {\n    margin: 0 "+l((a=null!=(a=e.textFieldMargin||(null!=t?t.textFieldMargin:t))?a:o,typeof a===r?a.call(t,{name:"textFieldMargin",hash:{},data:i}):a))+" 15 "+l((a=null!=(a=e.textFieldMargin||(null!=t?t.textFieldMargin:t))?a:o,typeof a===r?a.call(t,{name:"textFieldMargin",hash:{},data:i}):a))+";\n}\n.create-apple-id-button {\n    margin: 25 0 0 0;\n}\n.bottom-spacer {\n    margin: 0 0 55 0;\n}\n"},useData:!0})},{"hbsfy/runtime":338}],63:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({
1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'<text class="page-subheader subhead top">'+o(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+"</text>\n"},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'    <text class="bottom caption2 disclosure-text">'+o(r(null!=(a=null!=t?t.strings:t)?a.subscriptionDisclosure:a,t))+"</text>\n"},5:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'  <button class="tint-color footer-link caption2 create-apple-id-button bottom">'+o(r(null!=(a=null!=t?t.strings:t)?a.createAppleId:a,t))+"</button>\n"},7:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'    <button class="small-button tint-color about-music-button bottom" data-content-kind="learn_more_page" about-type="about_music" push-type="sheet" type-key="MusicAndPrivacy">'+o(r(null!=(a=null!=t?t.strings:t)?a.aboutMusicAndPrivacy:a,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(l+=a),l+='<text class="page-header top">'+o(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+"</text>\n",a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.subheader:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='<signInControl class="signin-control middle">\n  <label class="caption1-emphasized">'+o(r(null!=(a=null!=t?t.strings:t)?a.appleIdLabel:a,t))+'</label><input type="email" placeholdertext="'+o(r(null!=(a=null!=t?t.strings:t)?a.appleIdPlaceholder:a,t))+'"></input>\n  <label class="caption1-emphasized">'+o(r(null!=(a=null!=t?t.strings:t)?a.passwordLabel:a,t))+'</label><input type="text" placeholdertext="'+o(r(null!=(a=null!=t?t.strings:t)?a.requiredPlaceholder:a,t))+'" secure="true"></input>\n</signInControl>\n',a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.subscriptionDisclosure:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='<button class="tint-color footer-link caption2 forgot-apple-id-button bottom">'+o(r(null!=(a=null!=t?t.strings:t)?a.forgotAppleId:a,t))+"</button>\n",a=e["if"].call(t,null!=t?t.showCreateAppleId:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(l+=a),a=e["if"].call(t,null!=t?t.showAboutMusicAndPrivacy:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'<text class="bottom-spacer bottom"></text>\n'},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],64:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancel" type="link" class="align-right">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.showCancelButton:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n\n"},useData:!0})},{"hbsfy/runtime":338}],65:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=i.event.Event,l=i.controller.MultiElementController,s=t("../../common").traits.EventMap,c=t("../../common").traits.TabComponent,u=t("../../base").style,h=t("./style.hbs"),d=t("./model"),p=t("./template.hbs"),m=a.pubSub,f=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new u({styleTemplate:h})),t.events=t.events||[],t.events.push("select"),this.data=t.data,l.call(this,t,e),s.call(this,t),c.call(this),m.subscribe("buyConfirmed",this.handleBuyConfirmed.bind(this)),m.subscribe("buyFailed",this.handleBuyFailed.bind(this))};a.inherit(f,l),a.inherit(f,s,!0),a.inherit(f,c,!0),f.prototype.template=p,f.prototype.initManifestVersionCheck=function(){this.updating=!0,this.render();var t={callback:this.initSubscribeData.bind(this)},e=new o("checkLocalManifestVersion",{detail:t});this.dispatchEvent(e)},f.prototype.initSubscribeData=function(){this.updating=!1,a.network.isOffline()?(this.errorData={errorMessage:r.loc("FUSE.Error.YoureOffline.Reconnect"),errorTitle:r.loc("FUSE.Error.YoureOffline")},this.render()):(UserInterfaceStatusController.setHasUserAcknowledgedWelcomeScreen(!0),a.extend(this.onSelect,{"open-family-url":this.handleFamilyLink.bind(this),"subscribe-buy-button":this.buySubscription.bind(this),"learn-more-link":this.handleLearnMoreLink.bind(this),"about-music-button":this.pushLearnMore}),this.strings={subscriptionHeader:r.loc("FUSE.Subscription.Header"),subscriptionSubheader:r.loc("FUSE.Subscription.Subheader"),learnMore:r.loc("FUSE.Subscription.LearnMoreButton"),learnMoreUrl:r.loc("FUSE.Subscription.LearnMore.Url"),familySharingLinkName:r.loc("FUSE.Subscription.FamilySharing.FamilySharingLink.Name"),familySharingLinkUrl:r.loc("FUSE.Subscription.FamilySharing.FamilySharingLink.Url"),subscriptionDisclosure:r.loc("FUSE.Subscription.Disclosure"),aboutMusicAndPrivacy:r.loc("FUSE.Footer.aboutAppleMusic")},this.model=new d,this.currentDoc=this.el.ownerDocument,this.addEventDelegates(this.currentDoc,["tabPush","handleAskToBuy"]),this.data&&this.data.offers?this.model.setData(this.data):(this.model.addEventListener("dataReady",function(){this.loading=!1,this.render()}.bind(this)),this.loading=!0,this.model.get()),this.render())},f.prototype.handleFamilyLink=function(){openURL(this.strings.familySharingLinkUrl)},f.prototype.handleLearnMoreLink=function(){openURL(this.strings.learnMoreUrl)},f.prototype.disableActionButtons=function(t){var e,n=this.el.ownerDocument.getElementsByTagName("button"),i=0,a=n.length;for(i=0;a>i;i++)e=n.item(i),e.setAttribute("disabled",t)},f.prototype.buySubscription=function(t){var e,n=this.model.data.offersById,i=t.target.getAttribute("data-content-index");if(i&&n)if(e=n[i]&&n[i].buyParams){var r={offers:[{buyParams:e+"&clientBuyId="+a.metrics.buyId(this)}]};itms.buy(r),this.disableActionButtons(!0)}else a.log.warn("Buy Failed: Missing buyParams data for selected offer.");else a.log.warn("Buy Failed: Missing contentId or offers data.")},f.prototype.handleBuyConfirmed=function(){itms.isCloudLibraryEnabled()||itms.setCloudLibraryEnabled(!0,!0,function(){}),a.account.isAppleMusicEnabled()||a.account.enableAppleMusic(!0),this.dispatchEvent(new o("handleSubscribeDone")),this.disableActionButtons(!1)},f.prototype.handleBuyFailed=function(t){var e=t.buyInfo;1===e.error&&(e.document=this.el.ownerDocument,e.controller=this,this.handleAskToBuy(e)),a.account.isEligibleForAppleMusic()&&this.dispatchEvent(new o("handleSubscribeDone")),this.disableActionButtons(!1)},f.prototype.metricsPageData={pageId:"Subscribe",pageType:"Picker"},e.exports=f},{"../../../util":304,"../../base":84,"../../common":92,"./model":67,"./style.hbs":68,"./template.hbs":69,itml:355}],66:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),o=a.pubSub,l=t("./element"),s=t("../../common").traits.TabComponent,c=i.controller.DocumentController,u=function(t,e){t=t||{},t.name="Subscribe",t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new l(t),t.controllers.push(n)),c.call(this,t,e),s.call(this),this.navigationBarController.showCancelButton=t.showCancelButton!==!1,this.navigationBarController.render(),this.controller=n,this.el.addEventListener("unload",function(){o.unsubscribe("buyConfirmed"),o.unsubscribe("buyFailed")}),this.addEventDelegates(this.controller,["handleSubscribeDone","checkLocalManifestVersion"]);var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.cancelSubscribe.bind(this))};this.addEventListener("render",i.bind(this)),i.call(this)};a.inherit(u,c),a.inherit(u,s,!0),u.prototype.documentType="panelTemplate",u.prototype.titleTemplate=r,u.prototype.metricsPageData={pageId:"Subscribe",pageType:"Picker"},u.prototype.cancelSubscribe=function(){a.account.closeAccountModal.call(this)},u.prototype.initManifestVersionCheck=function(){this.controller.initManifestVersionCheck()},e.exports=u},{"../../../util":304,"../../common":92,"./element":65,"./title.hbs":70,itml:355}],67:[function(t,e,n){function i(t){t=t||{},o.call(this,t)}var a=t("itml"),r=a.event.Event,o=t("../../base").model,l=t("../../../util");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.setData=function(t){this.data=this.parsePageData(t)},i.prototype.get=function(){var t={url:l.urls.getSubscriptionOffersSrv(),method:"GET",success:this.onDataSuccess.bind(this),failure:this.onDataFailed.bind(this)};l.xhr(t)},i.prototype.onDataSuccess=function(t){this.data=this.parsePageData(JSON.parse(t)),this.dispatchEvent(new r("dataReady"))},i.prototype.onDataFailed=function(t){l.log.warn("FAIL: ",t)},i.prototype.parsePageData=function(t){for(var e={monthlyOffers:[],yearlyOffers:[],offersById:{}},n=function(t,e){return t.price-e.price},i=t.offers&&t.offers.slice(0).sort(n)||[],a=0,r=0,o=0;o<i.length;o++){var l=i[o];l.dataIndex=o,l.isFamily?l.isYearly?e.yearlyOffers[r++]=l:e.monthlyOffers[a++]=l:l.isYearly?e.yearlyOffers[r++]=l:e.monthlyOffers[a++]=l,e.offersById[o]=l}return e.monthlyOffers.length&&(e.monthlyOffers[0].selected=!0),e},e.exports=i},{"../../../util":304,"../../base":84,itml:355}],68:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* subscribe */\n.page-title {\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 28pt;\n    text-align: center;\n}\n.title-footnote {\n    itml-text-max-lines: 0;\n    text-align: center;\n    color: rgba(0, 0, 0, 0.6);\n    margin: 0 0 0 0;\n}\n.learn-more-link {\n    margin: 3 0 10 0;\n}\n.open-family-url {\n    margin: 13 0 15 0;\n    itml-text-max-lines: 0;\n    text-align: center;\n}\n.subscribe-buy-button {\n    itml-text-max-lines: 0;\n    text-align: center;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: rgb(0,0,0);\n    border-radius: circle-caps;\n    padding: 15;\n    margin: 0;\n}\n.subscribe-button-spacer {\n    margin: 40 0 0 0;\n}\n.buy-button-title {\n  font-weight: bold;\n}\n.buy-button-subtitle {\n  color: rgba(0,0,0,0.6);\n}\n.disclosure-text {\n    color: rgba(0,0,0,0.6);\n    margin: 0 0 18 0;\n    itml-text-max-lines: 0;\n    text-align: center;\n}\n.about-music-button {\n    itml-text-max-lines: 0;\n    margin: 20 0 15 0;\n}\n.error-title-text {\n    margin: 0 0 10 0;\n    font-size: 28pt;\n    font-weight: light;\n    max-width: 290pt;\n    text-align: center;\n}\n.error-message-text {\n    color: rgba(0,0,0,0.6);\n    margin: 25 0 50 0;\n    max-width: 290pt;\n    text-align: center;\n}\n@media all and (max-width: 767pt) {\n    .max-width {\n        max-width: 88%;\n    }\n    .subscribe-buy-button {\n        itml-item-width: 100%;\n    }\n    .page-title {\n        margin: 25 0 15 0;\n    }\n}\n@media all and (width: 320pt) {\n    .max-width {\n        max-width: 88%;\n    }\n    .subscribe-buy-button {\n        itml-item-width: 100%;\n    }\n    .page-title {\n        margin: 18 0 15 0;\n    }\n    .subscribe-button-spacer {\n        margin: 15 0 0 0;\n    }\n    .disclosure-text {\n        margin: 0 0 8 0;\n    }\n}\n@media all and (width: 768pt) {\n    .max-width {\n        max-width: 240pt;\n    }\n    .subscribe-buy-button {\n        padding: 10 88 10 88;\n    }\n    .page-title {\n        margin: 80 0 20 0;\n    }\n}\n@media all and (width: 1024pt) {\n    .max-width {\n        max-width: 240pt;\n    }\n    .subscribe-buy-button {\n        padding: 10 88 10 88;\n    }\n    .page-title {\n        margin: 60 0 20 0;\n    }\n}"},useData:!0})},{"hbsfy/runtime":338}],69:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="	\n";return a=e["if"].call(t,null!=(a=null!=t?t.errorData:t)?a.errorTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'	    <title maxLines="0" class="error-title-text middle">'+o(r(null!=(a=null!=t?t.errorData:t)?a.errorTitle:a,t))+"</title>\n"},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'	    <subtitle maxLines="0" class="error-message-text subhead middle">'+o(r(null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,t))+"</subtitle>\n"},6:function(t,e,n,i){var a,r="\n";return a=e["if"].call(t,null!=t?t.updating:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(r+=a),r+"\n"},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'		<activityIndicator class="middle">\n		    <title>'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Updating",{name:"loc",hash:{},data:i}))+"</title>\n		</activityIndicator>\n"},9:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='		<title class="page-title max-width top">'+o(r(null!=(a=null!=t?t.strings:t)?a.subscriptionHeader:a,t))+'</title>\n		<subtitle class="title-footnote footnote max-width top">'+o(r(null!=(a=null!=t?t.strings:t)?a.subscriptionSubheader:a,t))+'</subtitle>\n		<button class="learn-more-link footnote top tint-color max-width">'+o(r(null!=(a=null!=t?t.strings:t)?a.learnMore:a,t))+"</button>\n\n";return a=e.each.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.monthlyOffers:a,{name:"each",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='        <button class="open-family-url caption1 max-width middle">'+o(r(null!=(a=null!=t?t.strings:t)?a.familySharingLinkName:a,t))+'</button>\n\n        <text class="caption2 disclosure-text max-width bottom">',a=r(null!=(a=null!=t?t.strings:t)?a.subscriptionDisclosure:a,t),null!=a&&(l+=a),l+'</text>\n\n		<divider class="divider bottom" />\n		<button class="caption2 tint-color about-music-button max-width bottom" data-content-kind="learn_more_page" type-key="MusicAndPrivacy" push-type="sheet">'+o(r(null!=(a=null!=t?t.strings:t)?a.aboutMusicAndPrivacy:a,t))+"</button>\n"},10:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='		  <button class="';return a=e.unless.call(t,i&&i.first,{name:"unless",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' subscribe-buy-button subhead-emphasized middle" data-content-id="'+o(r(null!=t?t.id:t,t))+'" data-content-index="',a=r(null!=t?t.dataIndex:t,t),null!=a&&(s+=a),s+='" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"button",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'><span class="buy-button-title">'+o(r(null!=t?t.title:t,t))+' </span><br /><span class="buy-button-subtitle caption1">'+o(r(null!=t?t.priceForDisplay:t,t))+"</span></button>\n"},11:function(t,e,n,i){return"subscribe-button-spacer"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.errorData:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(6,i),data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":338}],70:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelSheetButton" type="link" class="align-right cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.showCancelButton:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},useData:!0})},{"hbsfy/runtime":338}],71:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),o=i.controller.DocumentController,l=t("./element"),s=t("../../common").traits.TabComponent,c=t("itml").event.Event,u=function(t,e){a.log.warn("WelcomeDocumentController -- document.js"),itms.log("WelcomeDocumentController -- document.js"),t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new l(t),t.controllers.push(n)),o.call(this,t,e),s.call(this),this.controller=n,t.data&&(this.inIntroMode="intro"===t.data.mode,this.inUpsellMode="upsell"===t.data.mode,this.inJSModal="js"===t.data.sheetType),(this.inIntroMode||this.inUpsellMode&&this.inJSModal)&&(this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="hidden",this.navigationBarController.render());var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.cancelWelcomePage.bind(this))};this.addEventListener("render",i.bind(this)),i.call(this),this.addEventDelegates(this.controller,["closeIntroPage","replaceNativeModal","checkLocalManifestVersion"])};a.inherit(u,o),a.inherit(u,s,!0),a.inherit(u,c,!0),u.prototype.documentType="panelTemplate",u.prototype.titleTemplate=r,u.prototype.metricsPageData={pageId:"Welcome",pageType:"Picker"},u.prototype.cancelWelcomePage=function(){this.inJSModal&&(this.inUpsellMode?a.account.closePlayUpsell():modal.popDocument())},e.exports=u},{"../../../util":304,"../../common":92,"./element":72,"./title.hbs":80,itml:355}],72:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=i.controller.MultiElementController,l=t("../../common").traits.EventMap,s=t("../../common").traits.TabComponent,c=t("../../base").style,u=t("./style.hbs"),h=t("./template.hbs"),d=a.pubSub,p=t("./model"),m=t("../../account/subscribe"),f=i.event.Event,g=t("../../account/carrier_bundling/account_linking"),b=t("../../account/carrier_bundling/sms_verification"),v=t("../../account/carrier_bundling/carrier_verification"),y=function(t,e){a.log.warn("WelcomeDocumentController -- element.js"),itms.log("WelcomeDocumentController -- document.js"),t=t||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],t.events.push("select"),t.data&&(this.inIntroMode="intro"===t.data.mode,this.inUpsellMode="upsell"===t.data.mode,this.inJSModal="js"===t.data.sheetType,this.inNativeModal="native"===t.data.sheetType,this.upsellIdentifier=t.data.upsellIdentifier,this.eligibilityData=t.eligibilityData),this.welcomePageIsInModal=this.inNativeModal||this.inJSModal,this.initTemplateData(),o.call(this,t,e),l.call(this,t),s.call(this),d.subscribe("serviceChange",this.handleServiceChange.bind(this)),d.subscribe("locUpate",this.handleLocUpdate.bind(this)),a.extend(this.onSelect,{"continue-button":this.openSubscriptionSheet.bind(this),"beats-subscriber-button":this.checkBeatsApp,"already-subscribed":this.handleAlreadySubscribed.bind(this),"not-now-button":this.handleNotNow.bind(this),"hide-apple-music":this.classicModeConfirmationDialog.bind(this),"error-ok-button":this.handleErrorOkButton.bind(this)}),this.model=new p,this.model.addEventListener("dataReady",function(){this.errorData=this.model.data.userPresentableError?{errorTitle:this.model.data.userPresentableErrorTitle,errorMessage:this.model.data.userPresentableError}:null,this.render()}.bind(this)),this.model.addEventListener("dataFailed",function(t){this.loading=!1,this.errorData=t.detail?{errorTitle:t.detail.errorTitle,errorMessage:t.detail.errorMessage}:null,this.render()}.bind(this)),this.model.get()};a.inherit(y,o),a.inherit(y,l,!0),a.inherit(y,s,!0),y.prototype.template=h,y.prototype.handleLocUpdate=function(){this.initTemplateData(),this.render()},y.prototype.initTemplateData=function(){if(this.bgImageName=a.image.getBackgroundImageResource("WelcomeBg"),this.logoImageName=a.image.getAppleMusicLogoImageResource(),this.strings={},this.inIntroMode)this.strings.welcomeDescriptionHeader=r.loc("FUSE.Welcome.Description.Header"),this.strings.welcomeDescription=r.loc("FUSE.Welcome.Description");else if("undefined"!=typeof this.upsellIdentifier){var t="FUSE.Upsell."+this.upsellIdentifier+".Description.Header",e="FUSE.Upsell."+this.upsellIdentifier+".Description",n=r.loc(t),i=r.loc(e);this.strings.welcomeDescriptionHeader=t===n?null:n,this.strings.welcomeDescription=e===i?null:i}this.musicMode={},this.inIntroMode?(this.musicMode.linkName=r.loc("FUSE.Welcome.NotNow.Button"),this.musicMode.linkIdentifier="not-now-button",this.musicMode.buttonStyle="not-now-circled-outline"):"ForYou"===this.upsellIdentifier?(this.musicMode.linkName=r.loc("FUSE.Upsell.HideAppleMusic.Button"),this.musicMode.linkIdentifier="hide-apple-music",this.musicMode.buttonStyle="not-now-borderless"):(this.musicMode.linkName=r.loc("FUSE.NotNow.Uppercase"),this.musicMode.linkIdentifier="not-now-button",this.musicMode.buttonStyle="not-now-borderless");var o=[],l=itms.eligibilityForService({service:"AppleMusic"});itms.accountInfo.DSID&&"needsAuthentication"!==l.accountStatus?itms.accountInfo.DSID&&"iPhone"===Device.model&&a.account.isOnCarrierBundlingNetwork()&&o.push({linkName:r.locWithMarkupTokens("FUSE.Footer.AlreadyaSubscriber.Carrier",{carrier:Telephony.providerName}),linkIdentifier:"already-subscribed"}):o.push({linkName:r.loc("FUSE.Footer.AlreadyaSubscriber"),linkIdentifier:"already-subscribed"}),itms.findApps(["com.beatsmusic.BeatsMusic"],function(t){if(t)for(var e in t)"com.beatsmusic.BeatsMusic"===e&&(this.beatsVersion=parseInt(t[e].version),this.footerLinks||(this.footerLinks=[]),this.footerLinks.push({linkName:r.loc("FUSE.Welcome.BeatsSubscriber.Button"),linkIdentifier:"beats-subscriber-button"}),this.render())}.bind(this)),o.length>0&&(this.footerLinks=o)},y.prototype.handleServiceChange=function(){a.account.isEligibleForAppleMusic()&&this.closeWelcomeModal()},y.prototype.handleServiceEligibility=function(t){a.log.warn("WELCOME handleServiceEligibility"),t=t||{};var e,n=t.eligible,i=t.data,o=this.el.ownerDocument,l=o.navigationDocument;if(d.unsubscribe("eligibilityCheckComplete"),1===n)if(i&&i.isFinal&&"unlinked"===i.carrierBundle){var s;s="true"===localStorage.getItem("Music.hasUserOpenedSubscriptionOffers")?r.locWithMarkupTokens("FUSE.CarrierBundling.AlreadySubscribed.Title",{carrierName:Telephony.providerName}):r.locWithMarkupTokens("FUSE.CarrierBundling.CarrierActivation.Title",{carrierName:Telephony.providerName}),e=new g({data:{header:s}})}else this.closeWelcomeModal();else i&&"needsVerification"===i.carrierBundle&&modal.documents.length&&modal.documents[0].navigationDocument===l&&(e=new b({data:i}));e&&modal.documents.length?l&&modal.documents[0].navigationDocument===l&&l.replaceDocument(e.el,o,{animated:!1}):e&&modal.pushDocument(e.el)},y.prototype.openSubscriptionSheet=function(t){localStorage.setItem("Music.hasUserOpenedSubscriptionOffers","true");var e=new m({data:this.model.data,showCancelButton:!this.welcomePageIsInModal});this.addEventDelegates(e,["tabPush","handleAskToBuy","checkLocalManifestVersion"]),e.addEventListener("handleSubscribeDone",this.handleSubscriptionSuccess.bind(this)),this.getNavigationObject(t).pushDocument(e.el,{}),e.initManifestVersionCheck(),a.metrics.track(e,{tabIdentifier:TabBar.selectedTab.identifier,entityType:"Main"})},y.prototype.handleSubscriptionSuccess=function(){this.welcomePageIsInModal?this.closeWelcomeModal():modal.popDocument()},y.prototype.handleAskToBuy=function(t){var e=this.el.ownerDocument,n={buyInfo:t,document:e},i=new f("handleAskToBuy",{detail:n});this.dispatchEvent(i)},y.prototype.getNavigationObject=function(t){return this.welcomePageIsInModal?t.target.ownerDocument.navigationDocument:modal},y.prototype.handleSignInSuccess=function(){a.account.isEligibleForAppleMusic()&&d.publish("serviceChange",{})},y.prototype.handleAlreadySubscribed=function(t){var e,n={callback:this.handleSignInSuccess.bind(this),showCreateAppleId:!1};if(a.account.isOnCarrierBundlingNetwork()){n.showCancelButton=!0,n.inJSModal=!0,a.account.setAlreadySubscribedCheckInProgress(!0),n.alreadySubscribed=!0;var i=new v({data:n});a.account.replaceAccountModal.call(this,{newDoc:i,currentDoc:t.target.ownerDocument})}else{n.showCancelButton=!this.welcomePageIsInModal,n.inJSModal=this.inJSModal,e="signin";var r={data:n,dataType:e,navigationDocument:this.getNavigationObject(t)};this.dispatchEvent(new f("tabPush",{detail:r}))}},y.prototype.openBeatsApp=function(){openURL("beatsmusic://")},y.prototype.closeWelcomeModal=function(){this.inNativeModal?this.dispatchEvent(new f("closeIntroPage")):this.inUpsellMode&&this.inJSModal?a.account.closePlayUpsell():this.inJSModal&&modal.popDocument()},y.prototype.handleNotNow=function(){this.closeWelcomeModal(),this.inNativeModal&&this.userAcknowledgedWelcomeScreen()},y.prototype.updateBeatsApp=function(){openURL(a.urls.beatsAppStoreLink)},y.prototype.checkBeatsApp=function(){if(this.beatsVersion>=512)this.openBeatsApp();else{var t={data:{type:"error",title:r.loc("FUSE.Migration.UpdateRequired"),buttons:[{title:r.loc("OK"),className:"update-beats",callback:this.updateBeatsApp.bind(this)}]},dataType:"dialog",navigationDocument:modal};d.publish("showModal",{detail:t})}},y.prototype.hideAppleMusic=function(){a.account.enableAppleMusic(!1)},y.prototype.handleErrorOkButton=function(){this.inNativeModal&&this.userAcknowledgedWelcomeScreen(),this.closeWelcomeModal()},y.prototype.userAcknowledgedWelcomeScreen=function(){UserInterfaceStatusController.setHasUserAcknowledgedWelcomeScreen(!0)},y.prototype.classicModeConfirmationDialog=function(){var t={data:{title:r.loc("FUSE.Dialog.HideAppleMusic.Message"),subtitle:r.loc("FUSE.Dialog.HideAppleMusic.Explanation"),buttons:[{title:r.loc("FUSE.CancelButton"),className:"cancel-button"},{title:r.loc("Yes"),className:"ok-button",callback:this.hideAppleMusic}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};d.publish("showModal",{detail:t})},e.exports=y},{"../../../util":304,"../../account/carrier_bundling/account_linking":3,"../../account/carrier_bundling/carrier_verification":8,"../../account/carrier_bundling/sms_verification":18,"../../account/subscribe":66,"../../base":84,"../../common":92,"./model":77,"./style.hbs":78,"./template.hbs":79,itml:355}],73:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,o=i.controller.MultiElementController,l=t("../../../common").traits.EventMap,s=t("../../../base").style,c=t("../style.hbs"),u=t("./template.hbs"),h=a.pubSub,d=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new s({styleTemplate:c})),t.events=t.events||[],t.events.push("select"),this.initTemplateData(),o.call(this,t,e),l.call(this,t),a.extend(this.onSelect,{"continue-button":this.handleContinueButton.bind(this),"not-now-family-button":this.handleNotNowButton.bind(this),"about-privacy":this.handleAboutMusicAndPrivacy.bind(this)})};a.inherit(d,o),a.inherit(d,l,!0),d.prototype.template=u,d.prototype.initTemplateData=function(){this.bgImageName=a.image.getBackgroundImageResource("WelcomeBg"),this.logoImageName=a.image.getAppleMusicLogoImageResource(),this.strings={familyWelcomeDescription:r.loc("FUSE.FamilyWelcome.Description"),familyWelcomeDescriptionHeader:r.loc("FUSE.FamilyWelcome.Description.Header"),continueFamilyButton:r.loc("FUSE.FamilyWelcome.Confirm.Button"),aboutMusicAndPrivacy:r.loc("FUSE.Footer.aboutAppleMusic"),notNowButton:r.loc("FUSE.NotNow.Uppercase")}},d.prototype.handleAboutMusicAndPrivacy=function(){openURL(r.loc("FUSE.Footer.aboutAppleMusic.Url"))},d.prototype.handleContinueButton=function(){itms.isCloudLibraryEnabled()||itms.setCloudLibraryEnabled(!0,!0,function(){}),this.userAcknowledgedFamilyWelcome()},d.prototype.handleNotNowButton=function(){this.userAcknowledgedFamilyWelcome()},d.prototype.userAcknowledgedFamilyWelcome=function(){a.account.showTermsIfRequired({successCallback:this.userAcknoledgedTerms.bind(this)})},d.prototype.userAcknoledgedTerms=function(){a.account.setShownFamilyWelcomePage(!0),h.publish("serviceChange",{})},e.exports=d},{"../../../../util":304,"../../../base":84,"../../../common":92,"../style.hbs":78,"./template.hbs":75,itml:355}],74:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.controller.DocumentController,o=t("./element"),l=t("itml").event.Event,s=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new o(t),t.controllers.push(n)),r.call(this,t,e),this.controller=n};a.inherit(s,r),a.inherit(s,l,!0),s.prototype.documentType="panelTemplate",s.prototype.metricsPageData={pageId:"Welcome",pageType:"Picker"},e.exports=s},{"../../../../util":304,"./element":73,itml:355}],75:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c=this.lambda,u='<background>\n    <img class="welcome-bg" src="'+s((r=null!=(r=e.bgImageName||(null!=t?t.bgImageName:t))?r:l,typeof r===o?r.call(t,{name:"bgImageName",hash:{},data:i}):r))+'" />\n</background>\n<img class="logo-header top" src="'+s((r=null!=(r=e.logoImageName||(null!=t?t.logoImageName:t))?r:l,typeof r===o?r.call(t,{name:"logoImageName",hash:{},data:i}):r))+'" />\n<text class="description-header-text multi-centered max-width callout-emphasized bottom">'+s(c(null!=(a=null!=t?t.strings:t)?a.familyWelcomeDescriptionHeader:a,t))+'</text>\n<text class="description-text multi-centered callout max-width bottom">'+s(c(null!=(a=null!=t?t.strings:t)?a.familyWelcomeDescription:a,t))+'</text>\n<button class="continue-button caption2-emphasized bottom">'+s(c(null!=(a=null!=t?t.strings:t)?a.continueFamilyButton:a,t))+'</button>\n<button class="not-now-family-button caption2-emphasized bottom">'+s(c(null!=(a=null!=t?t.strings:t)?a.notNowButton:a,t))+'</button>\n<text class="spacer-b-25 bottom"></text>\n<divider class="divider bottom" />\n<button class="about-privacy caption2 tint-color link-spacer bottom" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"button",{name:"data-metrics",hash:{},data:i}),null!=a&&(u+=a),u+">"+s(c(null!=(a=null!=t?t.strings:t)?a.aboutMusicAndPrivacy:a,t))+'</button>\n<text class="spacer-b-5 bottom"></text>'},useData:!0})},{"hbsfy/runtime":338}],76:[function(t,e,n){var i=t("./document"),a=t("../../../util"),r=a.pubSub,o=function(t,e){a.log.warn("WelcomeController -- index.js"),this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);r.subscribe("appRefresh",this.closeIntroPage.bind(this)),this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.handleNeedsContent.bind(this)),r.subscribe("serviceChange",this.handleServiceChange.bind(this)),r.subscribe("replaceNativeModal",this.replaceNativeModal.bind(this))};o.prototype.handleServiceChange=function(){var t=a.account.getCachedSubscriptionStatus();t&&t.subscribed===!0&&this.closeIntroPage()},o.prototype.handleNeedsContent=function(){a.log.warn("handleNeedsContent event received in WelcomeDocumentController index.js"),itms.log("handleNeedsContent event received in WelcomeDocumentController index.js"),a.account.setIsIntroSheetOpen.call(this,!0),this.controller=new i({data:{mode:"intro",sheetType:"native"}}),this.controller.addEventListener("closeIntroPage",this.closeIntroPage.bind(this)),this.controller.addEventListener("tabPush",this.eventHandlers.tabPush),this.controller.addEventListener("replaceNativeModal",this.replaceNativeModal.bind(this)),this.controller.addEventListener("checkLocalManifestVersion",this.eventHandlers.checkLocalManifestVersion),a.log.warn("setWelcomeDocument on nativeViewController in WelcomeDocumentController index.js"),itms.log("setWelcomeDocument on nativeViewController in WelcomeDocumentController index.js"),this.nativeViewController.setWelcomeDocument(this.controller.el)},o.prototype.replaceNativeModal=function(t){var e=t.detail.newDoc;e.dontUseNativeModal?(this.closeIntroPage(),setTimeout(function(){this.controller.addEventDelegates(e,["tabPush","handleAskToBuy"]),modal.pushDocument(e.el)}.bind(this),1200)):(e.addEventListener("closeIntroPage",this.closeIntroPage.bind(this)),e.addEventListener("tabPush",this.eventHandlers.tabPush),e.addEventListener("replaceNativeModal",this.replaceNativeModal.bind(this)),
this.controller.el.replace(e.el),e.el=this.controller.el,this.controller=e)},o.prototype.closeIntroPage=function(){a.account.setIsIntroSheetOpen(!1),this.nativeViewController.close()},e.exports=o},{"../../../util":304,"./document":71}],77:[function(t,e,n){function i(t){t=t||{},o.call(this,t),c.subscribe("networkChange",this.handleNetworkChange.bind(this))}var a=t("itml"),r=a.event.Event,o=t("../../base").model,l=t("../../../util"),s=l.loc,c=l.pubSub;i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.get=function(){var t=l.urls.getSubscriptionOffersSrv(),e={url:t,method:"GET",success:this.onDataSuccess.bind(this),failure:this.onDataFailed.bind(this)};l.xhr(e)},i.prototype.onDataSuccess=function(t){this.data=JSON.parse(t),this.dispatchEvent(new r("dataReady"))},i.prototype.onDataFailed=function(t){this.data={},418===t||0===t&&l.network.isOffline()?(this.data.offline=!0,this.dispatchEvent(new r("dataFailed",{detail:{errorMessage:s.loc("FUSE.Error.YoureOffline.Reconnect"),errorTitle:s.loc("FUSE.Error.YoureOffline")}}))):this.dispatchEvent(new r("dataFailed",{detail:{errorTitle:s.loc("FUSE.Error.GenericDataError")}}))},i.prototype.handleNetworkChange=function(){l.network.isOnline()?this.get():this.dispatchEvent(new r("dataFailed",{detail:{errorMessage:s.loc("FUSE.Error.YoureOffline.Reconnect"),errorTitle:s.loc("FUSE.Error.YoureOffline")}}))},e.exports=i},{"../../../util":304,"../../base":84,itml:355}],78:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".error-title-text {\n    margin: 0 0 10 0;\n    font-size: 28pt;\n    font-weight: light;\n    max-width: 290pt;\n    text-align: center;\n}\n.error-message-text {\n    color: rgba(0,0,0,0.6);\n    margin: 25 0 50 0;\n    max-width: 290pt;\n    text-align: center;\n}\n.error-ok-button {\n    border-width: 1pt;\n    border-color: tint-color;\n    border-radius: circle-caps;\n    padding: 10 100 10 100;\n}\n/* welcome */\n.welcome-bg {\n    itml-img-fill: 1;\n}\n.description-header-text {\n    margin: 15 0 15 0;\n}\n.description-text {\n    color: rgba(0, 0, 0, 0.7);\n    margin: 0;\n}\n.footer-text {\n    max-width: 88%;\n    margin: 30 0 20 0;\n}\n.multi-centered {\n    itml-text-max-lines: 0;\n    text-align: center;\n}\n.continue-button {\n    background-color: tint-color;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: rgb(255,255,255);\n    padding: 10 35 10 35;\n    margin: 35 0 0 0;\n    border-radius: circle-caps;\n}\n.not-now-circled-outline {\n    padding: 10 25 10 25;\n    border-width: 1pt;\n    border-color: tint-color;\n    border-radius: circle-caps;\n    color: tint-color;\n}\n.not-now-family-button {\n    margin: 25 0 0 0;\n}\n.link-spacer {\n    margin: 20 0 0 0;\n}\n.spacer-b-5 {\n    margin: 0 0 5 0;\n}\n.spacer-b-25 {\n    margin: 0 0 25 0;\n}\n.no-links-spacer {\n    margin: 0 0 40 0;\n}\n.divider {\n    margin: 0;\n}\n@media all and (max-width: 767pt) {\n    .description-header-text {\n        max-width: 75%;\n    }\n    .description-text {\n        max-width: 88%;\n    }\n    .logo-header {\n        margin: 40 0 0 0;\n    }\n    .not-now-circled-outline {\n        margin: 15 0 40 0;\n    }\n    .not-now-borderless {\n        margin: 25 0 50 0;\n    }\n    .button-loading-indicator {\n        margin: 77 0 81 0;\n    }\n}\n@media all and (max-width: 320pt) {\n    .description-header-text {\n        max-width: 75%;\n    }\n    .description-text {\n        max-width: 88%;\n    }\n    .footer-text {\n        margin: 15 0 15 0;\n    }\n    .logo-header {\n        margin: 15 0 0 0;\n    }\n    .not-now-circled-outline {\n        margin: 15 0 20 0;\n    }\n    .not-now-borderless {\n        margin: 25 0 30 0;\n    }\n    .button-loading-indicator {\n        margin: 77 0 61 0;\n    }\n    .continue-button {\n        margin: 20 0 0 0;\n    }\n    .link-spacer {\n        margin: 10 0 0 0;\n    }\n}\n@media all and (width: 768pt) {\n    .max-width {\n        max-width: 300pt;\n    }\n    .logo-header {\n        margin: 90 0 0 0;\n    }\n    .not-now-circled-outline {\n        margin: 15 0 150 0;\n    }\n    .not-now-borderless {\n        margin: 25 0 150 0;\n    }\n    .button-loading-indicator {\n        margin: 77 0 191 0;\n    }\n}\n\n@media all and (width: 1024pt) {\n    .max-width {\n        max-width: 300pt;\n    }\n    .logo-header {\n        margin: 50 0 0 0;\n    }\n    .not-now-circled-outline {\n        margin: 15 0 55 0;\n    }\n    .not-now-borderless {\n        margin: 25 0 55 0;\n    }\n    .button-loading-indicator {\n        margin: 77 0 96 0;\n    }\n}"},useData:!0})},{"hbsfy/runtime":338}],79:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='    <img class="logo-header top" src="'+s((r=null!=(r=e.logoImageName||(null!=t?t.logoImageName:t))?r:l,typeof r===o?r.call(t,{name:"logoImageName",hash:{},data:i}):r))+'" />\n';return a=e["if"].call(t,null!=(a=null!=t?t.errorData:t)?a.errorTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(c+=a),a=e["if"].call(t,null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(c+=a),a=e["if"].call(t,null!=t?t.inIntroMode:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'    <text class="spacer-b-25 bottom"></text>\n'},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <title maxLines="0" class="error-title-text middle">'+o(r(null!=(a=null!=t?t.errorData:t)?a.errorTitle:a,t))+"</title>\n"},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <subtitle maxLines="0" class="error-message-text subhead middle">'+o(r(null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,t))+"</subtitle>\n"},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <button class="caption2-emphasized error-ok-button middle">'+r((e.loc||t&&t.loc||a).call(t,"OK",{name:"loc",hash:{},data:i}))+"</button>\n"},8:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='    <img class="logo-header top" src="'+s((r=null!=(r=e.logoImageName||(null!=t?t.logoImageName:t))?r:l,typeof r===o?r.call(t,{name:"logoImageName",hash:{},data:i}):r))+'" />\n';return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.welcomeDescriptionHeader:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(c+=a),a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.welcomeDescription:a,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="        \n",a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.buttonText:a,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(18,i),data:i}),null!=a&&(c+=a),c+="\n",a=e["if"].call(t,null!=t?t.footerLinks:t,{name:"if",hash:{},fn:this.program(20,i),inverse:this.program(23,i),data:i}),null!=a&&(c+=a),c},9:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <text class="description-header-text multi-centered max-width callout-emphasized bottom">'+o(r(null!=(a=null!=t?t.strings:t)?a.welcomeDescriptionHeader:a,t))+"</text>\n"},11:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <text class="description-text multi-centered callout max-width bottom">'+o(r(null!=(a=null!=t?t.strings:t)?a.welcomeDescription:a,t))+"</text>\n"},13:function(t,e,n,i){var a,r=e.helperMissing,o=this.lambda,l=this.escapeExpression,s='        <button class="continue-button caption2-emphasized bottom" ';return a=(e["click-metrics"]||t&&t["click-metrics"]||r).call(t,{name:"click-metrics",hash:{id:"ContinueButton"},data:i}),null!=a&&(s+=a),s+=">"+l(o(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.buttonText:a,t))+"</button>\n",a=e["if"].call(t,null!=t?t.musicMode:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.program(16,i),data:i}),null!=a&&(s+=a),s},14:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'            <button class="'+o(r(null!=(a=null!=t?t.musicMode:t)?a.linkIdentifier:a,t))+" "+o(r(null!=(a=null!=t?t.musicMode:t)?a.buttonStyle:a,t))+' caption2-emphasized bottom">'+o(r(null!=(a=null!=t?t.musicMode:t)?a.linkName:a,t))+"</button>\n"},16:function(t,e,n,i){return'            <text class="spacer-b-25 bottom"></text>\n'},18:function(t,e,n,i){return'        <activityIndicator class="button-loading-indicator bottom" />\n'},20:function(t,e,n,i){var a,r='        <divider class="divider bottom" />\n';return a=e.each.call(t,null!=t?t.footerLinks:t,{name:"each",hash:{},fn:this.program(21,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'        <text class="spacer-b-5 bottom"></text>\n'},21:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <button class="'+o(r(null!=t?t.linkIdentifier:t,t))+' caption2 tint-color link-spacer bottom" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"button",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+">"+o(r(null!=t?t.linkName:t,t))+"</button>\n"},23:function(t,e,n,i){return'        <text class="no-links-spacer bottom"></text>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='<background>\n    <img class="welcome-bg" src="'+s((r=null!=(r=e.bgImageName||(null!=t?t.bgImageName:t))?r:l,typeof r===o?r.call(t,{name:"bgImageName",hash:{},data:i}):r))+'" />\n</background>\n';return a=e["if"].call(t,null!=t?t.errorData:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(8,i),data:i}),null!=a&&(c+=a),c},useData:!0})},{"hbsfy/runtime":338}],80:[function(t,e,n){e.exports=t(70)},{"hbsfy/runtime":338}],81:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return".template {\n    background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n.title,\n.lockup-title,\n.list-title {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";   \n}\n\n.title-disabled,\n.lockup-title-disabled,\n.list-title-disabled {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,.3,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.subtitle,\n.lockup-subtitle,\n.lockup-subtitle-2,\n.lockup-subtitle-3,\n.lockup-line-1,\n.lockup-line-2,\n.lockup-line-3 {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,"0.4",{name:"hexToRgb",hash:{},data:i}))+";\n}\n.grid,\n.track-list,\n.track-list-ordered,\n.divider {\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,"0.2",{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.action-color {\n    itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor2:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.explict-badge {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n    itml-img-treatment: tint;\n}\n.explict-badge-disabled {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,.4,{name:"hexToRgb",hash:{},data:i}))+";\n    itml-img-treatment: tint;\n}\n"},3:function(t,e,n,i){return".title-disabled,\n.lockup-title-disabled,\n.list-title-disabled {\n    color: rgba(0,0,0,0.4);\n}\n.lockup-subtitle {\n    color: rgb(142,142,147);\n}\n.explict-badge {\n    color: rgb(255, 44, 85);\n    itml-img-treatment: tint;\n}\n.explict-badge-disabled {\n    color: rgba(255, 44, 85, 0.4);\n    itml-img-treatment: tint;\n}\n"},5:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n"},7:function(t,e,n,i){return"        color: rgba(0, 0, 0, 0.8);\n"},9:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n"},11:function(t,e,n,i){return"        itml-img-mask-color: rgb(0, 0, 0);\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="/* uber styles */\n";return a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="/* common styles */\n.divider-full {\n    itml-divider-type: full;\n}\n\n.light-art {\n    itml-img-treatment: product;\n    itml-img-fill: 1;\n}\n.dark-art {\n    itml-img-treatment: product;\n    itml-img-fill: 1;\n    border-color: rgba(255,255,255,0.15);\n}\n.radio-art {\n    itml-img-treatment: product;\n}\n\n.artist-art {\n    itml-img-treatment: artist-circle;\n    border-color: rgba(0,0,0,0.2);\n    border-width: 1px;\n}\n\n.curator-avatar {\n    itml-img-treatment: artist-circle;\n}\n\n.cover-button {\n    background-color: blurred;\n}\n\n.brick {\n    itml-img-treatment: brick;\n    border-color: rgba(0, 0, 0, 0.2);\n    padding: 16.0, 16.0, 8.0, 16.0;\n}\n\n.more-link {\n    color: tint-color;\n}\n\n.tint-color {\n    color: tint-color;\n}\n\n.product-divider {\n    itml-divider-type: full;\n    margin: 0;\n    itml-padding: 0pt 0pt 0pt 0pt;\n}\n\n.bottom-right {\n    itml-position: bottom-right;\n    itml-align: right;\n}\n\n.top {\n    itml-position: top;\n}\n\n.middle {\n    itml-position: center;\n}\n\n.bottom {\n    itml-position: bottom;\n}\n\n.center {\n    text-align: center;\n}\n\n.align-center {\n    itml-align: center;\n}\n\n.align-right {\n    itml-align: right;\n}\n\n.align-left {\n    itml-align: left;\n}\n\n.align-right {\n    itml-align: right;\n}\n\n.position-center {\n    itml-position: center;\n}\n\n.position-right {\n    itml-position: right;\n}\n\n.one-line {\n    itml-text-max-lines: 1;\n}\n\n.two-line {\n    itml-text-max-lines: 2;\n}\n\n.full-width {\n    itml-item-width: 100%;\n}\n\n.white {\n    color: rgb(255,255,255);\n}\n\n.black {\n    color: rgb(0,0,0);\n}\n\n.headline {\n    itml-text-style: headline;\n}\n\n.body {\n    itml-text-style: body;\n}\n\n.callout {\n    itml-text-style: callout;\n}\n\n.callout-emphasized {\n    itml-text-style: callout;\n    font-weight: bold;\n}\n\n.subhead {\n    itml-text-style: subhead;\n}\n\n.subhead-emphasized {\n    itml-text-style: subhead;\n    font-weight: bold;\n}\n\n.footnote {\n    itml-text-style: footnote;\n}\n\n.caption1 {\n    itml-text-style: caption1;\n}\n\n.caption1-emphasized {\n    itml-text-style: caption1;\n    font-weight: bold;\n}\n\n.caption2 {\n    itml-text-style: caption2;\n}\n\n.caption2-emphasized {\n    itml-text-style: caption2;\n    font-weight: bold;\n}\n\n.hidden {\n    visibility: hidden;\n}\n\n.shelf-lockup {\n    itml-padding: 0 0pt 16pt 0pt;\n    text-align: center;\n}\n\n.grid-section-header {\n    text-align: left;\n    itml-align: left;\n    background-color: rgb(255, 255, 255);\n    padding: 16.0, 16.0, 8.0, 16.0;\n    border-width: 0, 0, 0.5, 0;\n    border-color: rgba(0, 0, 0, 0.2);\n    itml-item-border-margin: 0, 0, 0, 16;\n}\n\n.grid-section-title {\n    color: rgb(102,102,102);\n    font-size: 13pt;\n}\n\n.grid-section-title {\n    color: rgb(102,102,102);\n    font-size: 13pt;\n}\n\n.hidden-bar {\n    background-color: rgba(0,0,0,0);\n    visibility: hidden;\n}\n\n.transparent-bar {\n    background-color: rgba(0,0,0,0);\n}\n\n.edge-grid-portrait {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 7pt 0pt 0pt;\n    itml-align: center;   \n}\n\n.edge-grid-landscape{\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 7pt 0pt 0pt;\n    itml-align: center;   \n}\n\n.edge-2col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 2;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 5pt 0pt 5pt;\n    itml-align: center;\n}\n\n.edge-3col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 3;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    text-align: center;\n}\n\n.edge-4col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 4;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    text-align: center;\n}\n\n/* ipad 5col portrait */\n.edge-5col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 5;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 0pt 0pt 4pt;\n    itml-align: left;\n}\n\n/* ipad 6col grid landscape */\n.edge-6col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 6;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 0pt 0pt 4pt;\n    itml-align: left;\n}\n\n.show-more-grid {\n    padding: 8pt 0 8pt 0;\n    border-color: rgba(0,0,0,0);\n    itml-item-width: 100%;\n    column-count: 1;\n    text-align: center;\n}\n\n.border-button {\n    border-width: 1pt;\n    border-color: tint-color;\n    color: tint-color;\n}\n\n.text-shadow {\n    text-shadow: 0pt 1pt 2pt rgb(0,0,0);\n}\n\n.group-label {\n    color: rgb(0, 0, 0);\n    font-size: 16pt;\n}\n\n.group-label-disabled {\n    color: rgb(142, 142, 147);\n    font-size: 16pt;\n}\n\n.group-button {\n    color: tint-color;\n    font-size: 18pt;\n}\n\n.group-footer {\n    itml-padding: 4pt 0pt 20pt 20pt;\n    color: rgb(131, 131, 134);\n    itml-text-max-lines: 0;\n}\n\n.bold {\n    font-weight: bold;\n}\n\n.album-grid {\n    itml-position: bottom;\n    itml-padding: 0 0 0 0;\n    itml-item-width: 100%;\n    column-count: 2;\n    border-width: 1pt;\n    background-color: rgb(255,255,255);\n}\n\n.lockup-title {\n    /* TODO should be able to use itml-font-style only */\n    /* itml-font-style: caption2; */\n    font-size: 11pt;\n    font-weight: regular;\n}\n\n.lockup-title-margin {\n    margin:0pt 3pt 0pt 3pt;\n}\n\n.lockup-subtitle {\n    /* TODO should be able to use itml-font-style only */\n    /* itml-font-style: caption2; */\n    font-size:11pt;\n    font-weight:regular;\n}\n\n.list-title {\n    font-size: 15pt;\n    font-weight: regular;\n}\n\n.recommended-text {\n    font-size:14pt;\n    font-weight:regular;\n}\n\n.spacer {\n    border-color: rgba(0,0,0,0);\n    font-size: 24pt;\n}\n\n.gradient {\n    itml-img-treatment:radial-gradient;\n    itml-img-fill:1;\n    padding: 0pt, 0pt, 6pt, 0pt;\n}\n\n.inset {\n    itml-divider-type:inset;\n}\n\n.borderless {\n    itml-position:bottom;\n    itml-divider-type:borderless;\n    itml-item-height: 15pt;\n    border-color: rgba(0,0,0,0.0);\n    color:rgba(0,0,0,0.0);\n}\n\n.selector {\n    font-size: 17pt;\n    font-weight: medium;\n    color: tint-color;\n    itml-align: center;\n}\n\n.edge-header {\n    padding: 15pt 0pt 0pt 15pt;\n    itml-align: left;\n}\n\n.edge-title {\n    font-weight: medium;\n    itml-align: left;\n    padding: 0 0 0 0;\n    font-size: 11pt;\n    letter-spacing: 3;\n    itml-item-width: 100%;\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(r+=a),r+="}\n\n.edge-chevron {\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(r+=a),r+"}\n\n.selector-chevron {\n    margin: 2pt 0pt 0pt 3pt;\n    itml-align: center;\n}\n\n.playlist-hero-title {\n    font-weight: medium;\n    font-size: 13pt;\n    letter-spacing: 3;\n    padding: 0 0 16pt 0;\n}\n\n.hero-description {\n    itml-font-style: caption1;\n}\n\n.four-up-subtitle {\n    font-size: 9pt;\n    font-weight: medium;\n}\n\n.four-up-grid {\n    column-count: 2;\n    padding: 0pt;\n}\n\n.shelf-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    padding: 7pt 0 0 0;\n}\n\n.banner-text {\n    itml-text-max-lines: 0;\n    itml-position: top;\n    text-align: center;\n    color: rgb(150,150,150);\n    font-size:14pt;\n    margin: 15 0 0 0;\n}\n\n.banner-link {\n    font-size:14pt;\n    color: tint-color;\n}\n\n.signin-button {\n    font-size: 13pt;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: tint-color;\n    padding: 10 35 10 35;\n    border-radius: circle-caps;\n}\n\n.img-fill {\n    itml-img-fill: 1;\n}\n\n.playlist-title {\n    color: rgb(255, 255, 255);\n    font-size: 30pt;\n    font-weight: ultra-light;\n    itml-text-max-lines: 1;\n}\n\n.playlist-subtitle {\n    itml-font-style: caption2;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 13pt;\n    itml-text-max-lines: 2;\n}\n\n.playlist-description {\n    itml-font-style: caption2;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 12pt;\n    itml-text-max-lines: 2;\n}\n\n.playlist-card {\n    padding: 0pt 0pt 0pt 0pt;\n}\n\n.playlist-row {\n    padding: 20pt 20pt 20pt;\n}\n\n.playlist-column {\n    padding: 0 20pt 0 20pt;\n}\n\n.subtitle-1 {\n    color: rgba(255, 255, 255, 0.6);\n    font-size: 11pt;\n}\n\n.subtitle-2 {\n    color: rgba(255, 255, 255, 0.3);\n    font-size: 10pt;\n}\n\n.margin-helper {\n    itml-divider-type:borderless;\n}\n\n.lockup-disabled {\n    background-color: rgba(0,0,0,0);\n}\n\n@media all and (width: 768pt) {\n    .shelf-grid {\n        column-count: 5;\n    }\n}\n\n@media all and (width: 1024pt) {\n    .shelf-grid {\n        column-count: 6;\n    }\n}\n"},useData:!0})},{"hbsfy/runtime":338}],82:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../util"),o=t("./style"),l=i.controller.MultiElementController,s=t("../common").traits.EventMap,c=t("../common").traits.TabComponent,u=function(t,e){t=t||{},t.styles=t.styles||[],t.events=t.events||[],t.styleTemplate=t.styleTemplate,t.events.push("select"),t.events.push("holdselect"),t.styles.push(new o(t)),this.loading=!0,this.documentDimensions=Settings.Screen,l.call(this,t,e),s.call(this,t),c.call(this),this.isOnline=r.network.isOnline()};r.inherit(u,l),r.inherit(u,s,!0),r.inherit(u,c,!0),u.prototype.artworkMap={},u.prototype.handleAppear=function(){},u.prototype.handleNeedsMore=function(){},u.prototype.handleRotation=function(){},u.prototype.updateView=function(){this.dispatchEvent(new a("updateScreenSize"))},u.prototype.updateScreenSize=function(t){this.documentDimensions=t},u.prototype.getDocumentDimensions=function(){return this.updateView(),this.documentDimensions},u.prototype.processContent=function(t,e){e=e||{},e.documentDimensions=this.documentDimensions;var n=r.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:e}),i=r.lockup.setArtworks(t,n,this.artworkMap,e.type);return i.line1=r.lockup.line1(t),i.isExplicit=r.lockup.isExplicit(t),i},u.prototype.handleNetworkChange=function(){this.isOnline=r.network.isOnline(),this.handleAppear()},e.exports=u},{"../../util":304,"../common":92,"./style":86,itml:355}],83:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=function(t,e){this.dimensions={width:0,height:0},this.setDocumentDimensions(Settings.Screen),t.dimensions=this.dimensions,r.call(this,t,e),this.el.onViewAttributesChange=this.handleViewAttributesChange.bind(this),this.addEventListener("appear",this.handleOnAppear.bind(this),!1);var n=0;for(n=0;n<this.controllers.length;n++)this.controllers[n].addEventListener("updateScreenSize",this.handleUpdateScreenSize.bind(this),!1),this.controllers[n].documentDimensions=this.dimensions};a.inherit(o,r),o.prototype.handleUpdateScreenSize=function(){this.callDelegatesOnChildren("updateScreenSize",this.getDocumentDimensions())},o.prototype.handleViewAttributesChange=function(t){this.setDocumentDimensions({width:t.width,height:t.height}),this.handleRotation(),this.callDelegatesOnChildren("updateScreenSize",this.getDocumentDimensions()),this.callDelegatesOnChildren("handleRotation",t)},o.prototype.handleOnAppear=function(t){this.callDelegatesOnChildren("handleAppear",t)},o.prototype.callDelegatesOnChildren=function(t,e){if(this.controllers&&this.controllers.length){var n=0;for(n=0;n<this.controllers.length;n++)this.controllers[n][t]&&"function"==typeof this.controllers[n][t]&&this.controllers[n][t](e)}},o.prototype.handleRotation=function(){},o.prototype.setDocumentDimensions=function(t){t&&t.width&&t.height&&(this.dimensions.width=t.width,this.dimensions.height=t.height)},o.prototype.getDocumentDimensions=function(){return this.dimensions||this.setDocumentDimensions(Settings.Screen),this.dimensions},e.exports=o},{"../../util":304,itml:355}],84:[function(t,e,n){var i={document:t("./document"),model:t("./model"),controller:t("./controller"),style:t("./style")};e.exports=i},{"./controller":82,"./document":83,"./model":85,"./style":86}],85:[function(t,e,n){function i(t){t=t||{},r.call(this,t),l.call(this,t)}var a=t("itml"),r=a.model.BaseModel,o=t("../../util"),l=t("store-platform"),s=o.screen;o.inherit(i,r,!0),o.inherit(i,l,!0),i.prototype.constructor=i,i.prototype.pageProfile="lockup",i.prototype._pageCache={},i.prototype.fetchContent=function(t){this.fetch(t)},i.prototype.cacheContent=function(t){var e=this.getStorePlatformData(t);Object.keys(e).length?this.cacheData(t.storePlatformData[this.pageProfile],this.pageProfile):o.log.warn("No [results] in storePlatformData profile: ",this.pageProfile,t)},i.prototype.getStorePlatformData=function(t){return o.keypath(t,"storePlatformData."+this.pageProfile+".results")||{}},i.prototype.setDataForSection=function(t,e){return this._pageCache=this._pageCache||{},this._pageCache[e]=t,e},i.prototype.gridMaxItems=function(){var t=s.sizeForScreenDimension(),e={xs:6,s:6,m:6,l:5,xl:6};return e[t]},i.prototype.getDataForSectionId=function(t){return this._pageCache&&this._pageCache[t]?this._pageCache[t]:void 0},i.prototype.lookupContent=function(t){return this.lookup(t)},e.exports=i},{"../../util":304,itml:355,"store-platform":400}],86:[function(t,e,n){function i(t){t=t||{};var e=t.tintInfo,n=t.styleTemplate,i=a;if(i||(a=l(),i=a),e){var r=new s.color(e.bgColor);e.isDark=r.isDark(),i=l(e)}n&&(i+=n(e)),o.call(this,{style:i})}var a,r=t("itml"),o=r.model.Style,l=t("./baseStyle.hbs"),s=t("../../util");s.inherit(i,o),e.exports=i},{"../../util":304,"./baseStyle.hbs":81,itml:355}],87:[function(t,e,n){function i(t){t=t||{},o.call(this),l.call(this),this.tab=t.tab,this.name=t.name,this.navigationDocument=this.tab.navigationDocument,this.addEventListener("replaceDocument",this.replaceDocument.bind(this)),this.controller||(this.controller=this.getDocumentController()),this.controller&&(this.setDocumentTraits(),this.addEventDelegates(this.controller,this.eventDelegates),this.pushDocument(this.controller))}var a=t("itml"),r=t("../../util"),o=a.controller.BaseController,l=a.event.EventDelegate,s=t("../loading");r.inherit(i,o),i.prototype.getDocumentController=function(){},i.prototype.eventDelegates=["tabPush","replaceDocument","handleAskToBuy","checkLocalManifestVersion"],i.prototype.pushDocument=function(t){t=t||this.controller,t&&this.navigationDocument.pushDocument(t.el)},i.prototype.replaceDocument=function(t){var e=t.detail.document||this.getDocumentController();e&&(this.controller.addEventDelegates(e,this.eventDelegates),this.navigationDocument.replaceDocument(e.el,this.controller.el,{animated:!1}),this.controller=e,this.setDocumentTraits())},i.prototype.setDocumentTraits=function(){this.controller.el.documentElement.setAttribute("impressionsViewableThreshold",1e3),r.metrics.track(this.controller,{tabIdentifier:this.tab.identifier,entityType:"Main"})},i.prototype.getLoadingController=function(){return new s({name:this.name})},i.prototype.handleDeepLink=function(t){this.controller.handleDeepLink&&this.controller.handleDeepLink.call(this.controller,t)},e.exports=i},{"../../util":304,"../loading":202,itml:355}],88:[function(t,e,n){var i=t("../../util"),a=t("../loading"),r=t("../product/document"),o=t("../profile/document"),l=t("../account/signin"),s=t("../radio/recents"),c=t("../room"),u=t("../more"),h=t("../music_video"),d=t("../grouping"),p=t("../radio/live_station"),m=t("../learn_more"),f=t("../connect/detail"),g=t("../connect/create"),b=t("../connect/following"),v=t("../connect/recommendations"),y=t("../account/onboarding/genre"),w=t("../account/settings/following"),k=t("../account/settings/profile"),x=t("../common/dialog"),C=t("../account/subscribe"),A=t("../account/welcome/document"),S=t("../account/welcome/family"),D=t("../account/carrier_bundling/carrier_verification"),M=t("../account/carrier_bundling/sms_verification"),E=t("../account/carrier_bundling/account_linking"),T=t("../top_charts"),F=t("../sharing"),P=t("../for_you/document"),I=t("../radio/document"),L=t("../common/menu"),R=t("../common/reportconcern"),U=t("../common/traits/data_provider"),_={getControllerDocument:function(t){t=t||{};var e,n,i,r=t.detail||{},o=this.getDataType(r),l=r.data||{};if(o&&""!==o){n=this.getDocumentForType(o),i={data:l,dataType:o,stations:r.stations,event:t};for(var s in i)i[s]||delete i[s];e=new n(i)}else e=new a({data:l});return this.controller=e,e},onPageResponse:function(t){var e,n=t.detail.callerDocument,a=t.detail.response;this.model||(this.model=new U);try{e=JSON.parse(a.responseText)}catch(r){this.model.handleParseError(a.responseText,null,this.handleRetry.bind(this,t))}if(e){var o=i.keypath(e,"pageData.componentName"),l=i.keypath(e,"pageData.pageTitle");if(!o){var s=n.getElementsByTagName("loadingTemplate").item(0).getAttribute("loadUrl");o=this.getDataType({url:s})}var c=this.getDocumentForType(o),u=new c({name:l,dataType:o,data:e});u?(this.controller.addEventDelegates(u,["tabPush","handleAskToBuy"]),n.navigationDocument.replaceDocument(u.el,n,{animated:!1})):i.log.error("no document for type: ",o,e)}},getDocumentForType:function(t){var e={recents:s,signin:l,album_page:r,product_page:r,playlist_page:r,artist_page:o,brand_page:o,itunes_brand_page:o,profile_page:o,room_page:c,more_page:u,music_video_page:h,grouping_page:d,radio_live_station:p,learn_more_page:m,connect_detail:f,connect_create_post:g,connect_following:b,connect_recommendations:v,onboarding_page:y,settings_following_page:w,user_detail_page:k,dialog:x,subscribe:C,welcome_page:A,welcome_family_page:S,carrier_verification:D,sms_verification:M,account_linking:E,top_charts_page:T,sharing:F,for_you_page:P,menu:L,activity_page:o,radio_page:I,report_concern:R},n={product_page:["album","song","playlist","video","music-video","uploadedVideo"],music_video_page:["musicVideo"],artist_page:["artist","iTunesBrand","brand","activity"],room_page:["room_page","multi_room_page","banner_room_page"],radio_page:["station"],connect_detail:["viewPost"]},i=e[t];if(!i)for(var a in n)n[a].indexOf(t)>-1&&(i=e[a]);return i},handleRetry:function(t,e){this.model||(this.model=new U),e&&this.model.fetchData({url:e,success:function(e){t.response=JSON.stringify(e),this.onPageResponse(t)}.bind(this)})},getDataType:function(t){var e=t.dataType||t.entityType;if(!e&&t.url){var n=t.url.match(/album|playlist|artist|brand|curator|music-video|viewPost|activity|station|post/g);e=n?n[0]:null}return e}};e.exports=_},{"../../util":304,"../account/carrier_bundling/account_linking":3,"../account/carrier_bundling/carrier_verification":8,"../account/carrier_bundling/sms_verification":18,"../account/onboarding/genre":44,"../account/settings/following":51,"../account/settings/profile":54,"../account/signin":61,"../account/subscribe":66,"../account/welcome/document":71,"../account/welcome/family":74,"../common/dialog":90,"../common/menu":94,"../common/reportconcern":103,
"../common/traits/data_provider":108,"../connect/create":118,"../connect/detail":121,"../connect/following":126,"../connect/recommendations":156,"../for_you/document":169,"../grouping":178,"../learn_more":197,"../loading":202,"../more":205,"../music_video":208,"../product/document":217,"../profile/document":232,"../radio/document":244,"../radio/live_station":247,"../radio/recents":256,"../room":260,"../sharing":280,"../top_charts":285}],89:[function(t,e,n){var i=t("itml"),a=t("./template.hbs"),r=i.controller.MultiElementController,o=t("../../../util"),l=o.loc,s=t("../traits").EventMap,c=t("../traits").TabComponent,u=function(t){t=t||{},t.data=t.data||{},t.events=t.events||[],t.events.push("select"),r.call(this,t),s.call(this,t),c.call(this,t),o.extend(this.onSelect,{"ok-button":this.handleOk,"subscribe-button":this.handleSubscribe,"reload-button":this.handleReload}),this.type=t.type,this.data=t.data||{};var e=this.data.buttons||[];if(e.length)for(var n=0;n<e.length;n++){var i=e[n];i.className&&i.callback&&(this.onSelect[i.className]=i.callback)}this.viewModel=this.createViewModel(),this.render()};o.inherit(u,r),o.inherit(u,s,!0),o.inherit(u,c,!0),u.prototype.template=a,u.prototype.createViewModel=function(){var t={};switch(this.type){default:t.title=this.data.title||"Error",t.subtitle=this.data.subtitle,t.buttons=this.data.buttons||this.createDefaultButtons()}return t},u.prototype.createDefaultButtons=function(){var t=[];return t.push({title:l.loc("OK"),className:"ok-button"}),t},u.prototype.handleSubscribe=function(t){setTimeout(function(){var e={dataType:"subscribe",modalType:"sheet"};this.pushModal(t,e)}.bind(this),800)},u.prototype.handleOk=function(){modal.popDocument()},u.prototype.handleReload=function(){for(var t=0;t<TabBar.tabs.length;t++)TabBar.tabs[t].navigationDocument.popToRootDocument(),TabBar.tabs[t].navigationDocument.popDocument();o["native"].application.reload()},e.exports=u},{"../../../util":304,"../traits":110,"./template.hbs":91,itml:355}],90:[function(t,e,n){var i=t("itml"),a=i.controller.DocumentController,r=t("./controller"),o=t("../../../util"),l=function(t,e){t=t||{},t.suppressNavigationController=!0,t.watchedAttributes=t.watchedAttributes||[],t.watchedAttributes.push("type"),t.data=t.data||{},t.type=t.data.type||"error",t.controllers=t.controllers||[],t.controllers.length||(this.controller=new r({type:t.type,data:t.data}),t.controllers.push(this.controller)),a.call(this,t,e)};o.inherit(l,a),l.prototype.documentType="dialogTemplate",e.exports=l},{"../../../util":304,"./controller":89,itml:355}],91:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return"<title>"+o(r(null!=(a=null!=t?t.viewModel:t)?a.title:a,t))+"</title>"},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return"<description>"+o(r(null!=(a=null!=t?t.viewModel:t)?a.subtitle:a,t))+"</description>"},5:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'    <button class="'+r(a(null!=t?t.className:t,t))+'">'+r(a(null!=t?t.title:t,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e.unless.call(t,null!=(a=null!=t?t.data:t)?a.hideTitle:a,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.subtitle:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n\n",a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.buttons:a,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":338}],92:[function(t,e,n){e.exports={traits:t("./traits"),valueStore:t("./value_store")}},{"./traits":110,"./value_store":113}],93:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.MultiElementController,o=function(t,e){t=t||{},this.buttons=t.buttons,r.call(this,t,e)};a.inherit(o,r),o.prototype.template=t("./template.hbs"),e.exports=o},{"../../../util":304,"./template.hbs":95,itml:355}],94:[function(t,e,n){var i=t("itml"),a=i.controller.DocumentController,r=t("./element.js"),o=t("../../../util"),l=function(t,e){t=t||{},t.buttons=t.buttons||[],t.controllers=t.controllers||[],t.suppressNavigationController=!0,t.data.buttons&&(t.buttons=t.data.buttons),0===t.controllers.length&&t.controllers.push(new r({buttons:t.buttons})),a.call(this,t,e)};o.inherit(l,a),l.prototype.documentType="productActionsTemplate",e.exports=l},{"../../../util":304,"./element.js":93,itml:355}],95:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"    <button>"+r(a(null!=t?t.key:t,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e.each.call(t,null!=t?t.buttons:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":338}],96:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"    ","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],97:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="	<contentUnavailable>\n\n		";return a=e["if"].call(t,null!=t?t.errorTitle:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.needsAuth:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n	</contentUnavailable>\n"},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'<title maxLines="0">'+r(a(null!=t?t.errorTitle:t,t))+"</title>"},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'<description maxLines="0">'+r(a(null!=t?t.errorMessage:t,t))+"</description>"},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'		    <button class="sign-in-button full-width">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.SignInButton",{name:"loc",hash:{},data:i}))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e.unless.call(t,null!=t?t.viewModel:t,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":338}],98:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},3:function(t,e,n,i){return'disabled="true"'},5:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <title class="'+s((r=null!=(r=e.titleClass||(null!=t?t.titleClass:t))?r:l,typeof r===o?r.call(t,{name:"titleClass",hash:{},data:i}):r))+" list-title";return a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='">'+s((r=null!=(r=e.title||(null!=t?t.title:t))?r:l,typeof r===o?r.call(t,{name:"title",hash:{},data:i}):r))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'" src="resource://explicit"/></title>\n'},6:function(t,e,n,i){return"-disabled"},8:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <title class="'+l((a=null!=(a=e.titleClass||(null!=t?t.titleClass:t))?a:o,typeof a===r?a.call(t,{name:"titleClass",hash:{},data:i}):a))+' list-title">'+l((a=null!=(a=e.title||(null!=t?t.title:t))?a:o,typeof a===r?a.call(t,{name:"title",hash:{},data:i}):a))+"</title>\n"},10:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <subtitle class="lockup-line-1">'+r((e.replaceHtmlEntities||t&&t.replaceHtmlEntities||a).call(t,null!=t?t.line1:t,{name:"replaceHtmlEntities",hash:{},data:i}))+"</subtitle>\n"},12:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <subtitle class="lockup-line-2">'+r((e.replaceHtmlEntities||t&&t.replaceHtmlEntities||a).call(t,null!=t?t.line2:t,{name:"replaceHtmlEntities",hash:{},data:i}))+"</subtitle>\n"},14:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <subtitle class="lockup-line-3">'+r((e.replaceHtmlEntities||t&&t.replaceHtmlEntities||a).call(t,null!=t?t.line3:t,{name:"replaceHtmlEntities",hash:{},data:i}))+"</subtitle>\n"},16:function(t,e,n,i){var a,r="";return a=e["if"].call(t,(a=i&&i.root)&&a.pickerMode,{name:"if",hash:{},fn:this.program(17,i),inverse:this.program(19,i),data:i}),null!=a&&(r+=a),r},17:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <button type="image" class="add-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'">\n                <img src="resource://MediaPickerAddControl"/>\n            </button>\n'},19:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <button type="image" class="action-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'">\n                <img class="action-color" src="resource://UniversalActionControl"/>\n            </button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='<lockup class="'+o(r(null!=t?t.kind:t,t))+' action-lockup" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-id="'+o(r(null!=t?t.id:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n    "+o((e.productArtwork||t&&t.productArtwork||l).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n    \n",a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(8,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line2:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line3:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</lockup>"},useData:!0})},{"hbsfy/runtime":338}],99:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<activityIndicator id="loading">\n    <title>'+r((e.loc||t&&t.loc||a).call(t,"Fuse.Loading",{name:"loc",hash:{},data:i}))+"</title>\n</activityIndicator>"},useData:!0})},{"hbsfy/runtime":338}],100:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='    <row class="playlist-row" style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';">\n';return a=e["if"].call(t,null!=t?t.isOdd:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='        <column class="playlist-column" span="1">\n            <card class="playlist-card" data-content-id="'+o(l(null!=t?t.id:t,t))+'" style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';">\n                <lockup>\n                    <img src="" width="0" height="210" />\n                    <title style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="4" class="playlist-hero-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.name:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n",a=e["if"].call(t,null!=t?t.description:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="                </lockup>\n                <lockup>\n",a=e["if"].call(t,null!=t?t.artistName:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                    <button class="play-button cover-button" data-content-id="'+o(l(null!=t?t.id:t,t))+"\" type='play'>\n                        <title>"+o((e.loc||t&&t.loc||r).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n                    </button>\n                </lockup>\n            </card>\n        </column>\n",a=e["if"].call(t,null!=t?t.isEven:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </row>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='            <column class="playlist-column" span="2">\n                <card class="playlist-card" style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" data-content-id="'+o(l(null!=t?t.id:t,t))+'" data-content-kind="'+o(l(null!=t?t.kind:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+">\n                    "+o((e.heroArtwork||t&&t.heroArtwork||r).call(t,t,null!=t?t.fromHeroCover:t,{name:"heroArtwork",hash:{},data:i}))+"\n                </card>\n            </column>\n"},4:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l="                        ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+='\n                        <description style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="4" class="hero-description subtitle-1">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.description:t,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+"</description>\n"},6:function(t,e,n,i){var a,r=e.helperMissing,o="                        ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+="\n",a=e["if"].call(t,null!=t?t.artistName:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(o+=a),o},7:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                            <subtitle style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="1" class="subtitle-2">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.artistName:t,{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},9:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                            <subtitle style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="1" class="subtitle-2">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,"Playlist by Apple Music",{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},11:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='    <card style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" class="playlist-card ';return a=e["if"].call(t,null!=t?t.showBorder:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=" ",a=e["if"].call(t,null!=t?t.isActionLockup:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" ',a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-id="'+o(l(null!=t?t.id:t,t))+'" data-content-kind="'+o(l(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n        "+o((e.heroArtwork||t&&t.heroArtwork||r).call(t,t,null!=t?t.fromHeroCover:t,{name:"heroArtwork",hash:{},data:i}))+'\n        <lockup class="hero-lockup">\n            <title style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="2" class="playlist-hero-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.name:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n",a=e["if"].call(t,null!=t?t.description:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="            ",a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.artistName:t,{name:"if",hash:{},fn:this.program(20,i),inverse:this.program(22,i),data:i}),null!=a&&(s+=a),s+'            <button class="play-button cover-button" data-content-id="'+o(l(null!=t?t.id:t,t))+"\" type='play'>\n                <title>"+o((e.loc||t&&t.loc||r).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n            </button>\n        </lockup>\n    </card>\n"},12:function(t,e,n,i){return"show-border"},14:function(t,e,n,i){return" action-lockup "},16:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},18:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l="                ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+='\n                <subtitle style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="2" class="hero-description subtitle-1">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.description:t,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+"</subtitle>\n"},20:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                <subtitle style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="1" class="subtitle-2">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.artistName:t,{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},22:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                <subtitle style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="1" class="subtitle-2">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,"Playlist by Apple Music",{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.columns:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(11,i),data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":338}],101:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},3:function(t,e,n,i){return'disabled="true"'},5:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},7:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.artist:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(10,i),data:i}),null!=a&&(r+=a),r},8:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"            "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},10:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"            "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+"\n"},12:function(t,e,n,i){var a,r,o=e.helperMissing,l="function",s=this.escapeExpression,c='        <title maxLines="2" class="lockup-title';return a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='">'+s((r=null!=(r=e.title||(null!=t?t.title:t))?r:o,typeof r===l?r.call(t,{name:"title",hash:{},data:i}):r))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'" src="resource://explicit"/></title>\n'},13:function(t,e,n,i){return"-disabled"},15:function(t,e,n,i){var a,r,o=e.helperMissing,l="function",s=this.escapeExpression,c='        <title maxLines="2" class="lockup-title';return a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'">'+s((r=null!=(r=e.title||(null!=t?t.title:t))?r:o,typeof r===l?r.call(t,{name:"title",hash:{},data:i}):r))+"</title>\n"},17:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <subtitle class="lockup-subtitle">'+l((a=null!=(a=e.line1||(null!=t?t.line1:t))?a:o,typeof a===r?a.call(t,{name:"line1",hash:{},data:i}):a))+"</subtitle>\n"},19:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <subtitle class="lockup-subtitle-2">'+l((a=null!=(a=e.line2||(null!=t?t.line2:t))?a:o,typeof a===r?a.call(t,{name:"line2",hash:{},data:i}):a))+"</subtitle>\n"},21:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <subtitle class="lockup-subtitle-3">'+l((a=null!=(a=e.line3||(null!=t?t.line3:t))?a:o,typeof a===r?a.call(t,{name:"line3",hash:{},data:i}):a))+"</subtitle>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='<lockup type="shelf" class="action-lockup shelf-lockup" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-id="'+o(r(null!=t?t.id:t,t))+'" data-content-kind="'+o(r(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n",a=e["if"].call(t,null!=t?t.song:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.program(15,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line2:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line3:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</lockup>"},useData:!0})},{"hbsfy/runtime":338}],102:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=t("./template.hbs"),l=t("../../common").traits.EventMap,s=t("../../base").style,c=t("./style.hbs"),u=i.controller.MultiElementController,h=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.classes.push("reportconcern-template"),t.events=t.events||[],t.data=t.data||{},t.events.push("select"),t.styles.push(new s({styleTemplate:c})),this.strings={description:r.loc(t.data["description-loc-key"]),title:r.loc("FUSE.ReportConcern.Action")},u.call(this,t,e),l.call(this,t),a.extend(this.onSelect,{})};a.inherit(h,u),a.inherit(h,l,!0),h.prototype.template=o,e.exports=h},{"../../../util":304,"../../base":84,"../../common":92,"./style.hbs":104,"./template.hbs":105,itml:355}],103:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),o=t("./element"),l=i.controller.DocumentController,s=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.data=t.data||{},t.classes.push("template"),t.classes.push("report-a-concern"),this.cancelButton=t.data.cancel||!0,this.callback=t.data.callback,this.controller=new o({data:t.data}),t.controllers.push(this.controller),l.call(this,t,e),this.navigationBarController.showCancelButton=t.data.isModal,this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="transparent-bar",this.navigationBarController.render();var n=this.el.getElementsByTagName("reportAConcernTemplate").item(0);n&&(t.data&&t.data["concern-type"]&&n.setAttribute("concern-type",t.data["concern-type"]),n.addEventListener("change",this.handleChange.bind(this)),n.addEventListener("submit",t.data["submit-callback"].bind(this)));var i=this.el.getElementById("cancel");i&&i.addEventListener("select",this.cancel.bind(this,t.data.cancelCallback))};a.inherit(s,l),s.prototype.documentType="reportAConcernTemplate",s.prototype.titleTemplate=r,s.prototype.handleChange=function(t){"success"===t.result&&(modal.documents.length>0&&modal.popDocument(),this.callback&&this.callback())},s.prototype.cancel=function(t){modal.popDocument(),t&&t.call()},e.exports=s},{"../../../util":304,"./element":102,"./title.hbs":106,itml:355}],104:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".cancel-button {\ncolor: rgb(255, 45, 85);\nitml-align: left;\n}\n.done-button {\ncolor: rgb(255, 45, 85);\nitml-align: right;\n}\n\n.report-a-concern {\nbackground-color: rgb(239, 239, 244);\ncolor: rgb(0, 0, 0);\nfont-size: 18pt;\n}\n.report-a-concern-desc {\ncolor: rgb(96, 96, 96);\nfont-size: 15pt;\nmaxLines: 0;\n}\n.report-a-concern-title {\ncolor: rgb(96, 96, 96);\nfont-size: 15pt;\nmaxLines: 0;\n}"},useData:!0})},{"hbsfy/runtime":338}],105:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'<description class="report-a-concern-desc">'+o(r(null!=(a=null!=t?t.strings:t)?a.description:a,t))+'</description>\n<title class="report-a-concern-title">'+o(r(null!=(a=null!=t?t.strings:t)?a.title:a,t))+"</title>\n"},useData:!0})},{"hbsfy/runtime":338}],106:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button class="cancel-button" action="cancel">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>\n<title>"+r((e.loc||t&&t.loc||a).call(t,"FUSE.ReportConcern.Title",{name:"loc",hash:{},data:i}))+'</title>\n<button class="done-button" type="done">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.DoneButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":338}],107:[function(t,e,n){var i=function(){Object.defineProperty(this,"controllerCache",{value:{},configurable:!1,enumerable:!1,writable:!0})};i.prototype.setCachedControllerForKey=function(t,e){this.controllerCache[t]=e},i.prototype.bustCacheForKey=function(t){this.controllerCache[t]=void 0},i.prototype.getCachedControllerForKey=function(t){return this.controllerCache[t]},i.prototype.resetControllerCache=function(){this.controllerCache={}},e.exports=i},{}],108:[function(t,e,n){function i(t){t=t||{},t.pageProfile&&(this.pageProfile=t.pageProfile),this.offlineWarningEnabled=t.offlineWarningEnabled!==!1,this._pageCache={},t.requireSubscription=!0,this.suppressDialogs=t.suppressDialogs||!1,l.call(this,t),h.call(this,t),t.data&&(this.data=t.data,this.data.storePlatformData&&this.cacheContent(this.data.storePlatformData)),this.retryRequests=[],u.subscribe("networkChange",this.handleNetworkChange.bind(this))}var a=t("itml"),r=a.utils.keypath,o=a.event.Event,l=a.model.BaseModel,s=t("../../../util"),c=s.loc,u=s.pubSub,h=t("store-platform");s.inherit(i,l,!0),s.inherit(i,h,!0),i.prototype.constructor=i,i.prototype.pageProfile="lockup",i.prototype.fetchData=function(t){this.timeNow=Date.now(),this.config=t||this.config,this.config.url?(this.data&&s.log.warn("fetchData: preloaded page data provided with a url and data.  loading url."),s.xhr({method:this.config.method||"GET",url:this.config.url,success:this.xhrSuccess(this.config).bind(this),failure:this.xhrFailed(this.config).bind(this)})):this.data?this.dataSuccess(this.data,this.config):(s.log.warn("fetchData: no data or url"),s.xhr({method:this.config.method||"GET",url:null,success:this.xhrSuccess(this.config).bind(this),failure:this.xhrFailed(this.config).bind(this)}))},i.prototype.retry=function(){r(this,"config.retries")>0?(this.fetchData(),this.config.retries--):this.config.failure.call(this,{error:"too many failed attempts"})},i.prototype.xhrFailed=function(t){var e=function(e,n){if(e&&403===e)s.account.auth({success:this.retry.bind(this),failure:t.failure.bind(this)});else if(e&&418===e)t.retries=0,this.retryRequests.push(function(){this.fetchData(t)}.bind(this)),t.failure.call(this,e,c.loc("FUSE.Error.YoureOffline.Reconnect"),c.loc("FUSE.Error.YoureOffline"));else if(t&&t.retries>0){var i=t.waitTime||1e3;setTimeout(function(){this.retry()}.bind(this),i)}else t&&t.failure.call(this,e,n)};return e},i.prototype.xhrSuccess=function(t){var e=function(e,n){var i;try{i=JSON.parse(e)}catch(a){var r=this;this.handleParseError(e,function(){t.failure.call(r,200,c.loc("FUSE.Error.AnErrorOccurred"))})}i&&(this.metrics={pageData:i.metrics,xhrMetrics:n},this.dataSuccess(i,t))}.bind(this);return e},i.prototype.handleParseError=function(t,e,n){var i=this;e=e||function(){},"string"==typeof t&&-1===t.indexOf("plist")&&e();var a=new DOMParser,r=a.parseFromString(t,"text/xml");if("plist"!==r.documentElement.nodeName)return null;var o=s.doc.parsePlistXML(r.documentElement);if(1===o.length&&(o=o[0]),o.dialog&&!this.suppressDialogs){var l=o.dialog,c=[];if(l.cancelButtonString&&c.push({title:l.cancelButtonString,className:"cancel-button",callback:e}),l.okButtonString){var h={title:l.okButtonString,className:"ok-button",callback:e};l.okButtonAction&&l.okButtonAction.url&&(h.callback=function(){i.config?(i.config.url=l.okButtonAction.url,i.retries=1,i.retry()):n&&n.call(i,l.okButtonAction.url)}),c.push(h)}var d={data:{type:"error",title:s.keypath(l,"message"),subtitle:s.keypath(l,"explanation"),buttons:c},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};u.publish("showModal",{detail:d})}},i.prototype.dataSuccess=function(t,e){t.storePlatformData&&this.cacheContent(t.storePlatformData),this.contentIds=[],this.colorFetches=[],this.viewModel=e.success.call(this,t,e),this.contentIds.length>0?this.fetchContent({profile:this.pageProfile,contentIds:this.contentIds,onSuccess:this.handleFetchSuccess.bind(this),onFailure:this.handleFetchFailed.bind(this)
}):this.handleFetchSuccess()},i.prototype.handleFetchFailed=function(t){s.log.warn("content fetch from store platform failed: ",t),this.dispatchEvent(new o("dataFailed"))},i.prototype.handleFetchSuccess=function(t){if(this.viewModel){if(t){var e=this,n=function(t){if(t=t instanceof Array?t:t.content||t.children)for(var i=t.length;i--;){var a=t[i].id,r=t[i].content||t[i].children;if(r)n(r);else if(a){var o=t[i].profile||e.pageProfile,l=e.lookup(a,o);t[i].empty&&(l?t[i]="function"==typeof t[i].cb?t[i].cb(l,t[i].params):l:t.splice(i,1))}}};n(this.viewModel)}this.dispatchEvent(new o("dataReady",{detail:{view:this.viewModel}}))}},i.prototype.fetchContent=function(t){this.fetch(t)},i.prototype.lookupContent=function(t,e){var n,i,a,r=t.profile||this.pageProfile;return"object"==typeof t?(i=t.id,a=t.params,n=this.lookup(i,r)):(i=t,n=this.lookup(i,r)),n?(e&&(n=e(n,a)),n):(this.contentIds.push(i),{empty:!0,id:i,cb:e,params:a,profile:r})},i.prototype.cacheContent=function(t){var e=Object.keys(t);if(e.length)for(var n=0;n<e.length;n++){var i=e[n];this.cacheData(t[i],i)}else s.log.warn("No [results] in storePlatformData profile: ",this.pageProfile,t)},i.prototype.setData=function(t,e){this._pageCache[t]=e},i.prototype.getData=function(t){return this._pageCache[t]},i.prototype.handleNetworkChange=function(){if(localStorage.setItem("Music.hasWarnedAboutConnection","0"),s.network.isOnline()&&this.retryRequests.length>0)for(var t=0;t<this.retryRequests.length;t++){var e=this.retryRequests[t];e.call(this)}},e.exports=i},{"../../../util":304,itml:355,"store-platform":400}],109:[function(t,e,n){function i(t,e){e.addEventListener(t,this.handleEvent.bind(this))}var a=t("itml"),r=a.event.Event,o=t("../../../util"),l=o.audio,s=o.loc,c=function(t){t=t||{};var e,n=t.events||[];e=this.elementArray?function(){n.forEach(function(t){this.elementArray.forEach(function(e){e.addEventListener&&i.call(this,t,e)},this)},this)}:function(){n.forEach(function(t){i.call(this,t,this.el)},this)},this.addEventListener("render",e.bind(this)),e.call(this),this.onSelect={"action-button":this.showActionMenu,"action-lockup":this.handleLockup},o.enablers.longPress()&&(this.onHoldSelect={"action-lockup":this.showActionMenu}),this.onChange={}};c.prototype.handleEvent=function(t){var e,n=t.target.getAttribute("class").split(" ");"select"===t.type?e=this.onSelect:"holdselect"===t.type?e=this.onHoldSelect:"change"===t.type&&(e=this.onChange),e&&n.forEach(function(n){var i=e[n];"function"==typeof i&&i.call(this,t)}.bind(this))},c.prototype.handleLockup=function(t){var e=t.target,n=e.getAttribute("data-content-id"),i=this.model.lookup(n);if(i){var a=i.kind||"product_page",r=a.match(/song|uploadedAudio|uploadedVideo|radioStation/i);r?this.playMedia(t):this.pushProduct(t)}},c.prototype.showActionMenu=function(t){var e=t.target.getAttribute("data-content-id"),n=this.model.lookup(e);if(n){var i=n.releaseDate||"",a=i.substring(0,i.indexOf("-")),l=[];if(n.artwork&&n.artwork.url){var c=o.artwork.getArtworkForContent({content:n});l.push(c.image)}var u={artwork:l,kind:n.kind,metadata:n};switch(n.kind){case"song":var h=n.offers[0].assets.length>0?n.offers[0].assets[0].duration:null;u.artistName=n.artistName,u.collectionName=n.collectionName,u.artistStoreID=""+n.artistId,u.collectionStoreID=n.collectionId,u.trackNumber=n.trackNumber,u.trackName=n.name,u.trackStoreID=""+n.id,u.trackDuration=h;break;default:u.albumStoreID=""+n.id,u.albumName=n.name,u.albumYear=a,u.albumGenre=n.genres&&n.genres[0]&&n.genres[0].name,u.albumItemsCount=n.trackCount,u.albumArtistName=n.artistName,u.albumArtistStoreID=""+n.artistId}var d={options:{productData:u,sourceElement:t.target},navigationDocument:modal,dataType:"menu"},p=this.el.ownerDocument.getElementsByTagName("stackTemplate");p.length>0&&"fu-page"===p.item(0).getAttribute("class")&&(d.data={buttons:[{key:s.loc("FUSE.ForYou.RecommendLess")}]}),this.dispatchEvent(new r("tabPush",{detail:d}))}},c.prototype.authAndPlay=function(t,e,n){var i={header:s.loc("FUSE.SignIn.Header"),callback:this._playMedia.bind(this,t,e,n,!0),showCancelButton:!0},a={data:i,dataType:"signin",navigationDocument:modal};this.dispatchEvent(new r("tabPush",{detail:a}))},c.prototype._playMedia=function(t,e,n,i){if(t&&t.length>0){for(var a=!1,r={recoId:e,items:[],selectedFilter:this.selectedFilter,controllerName:this.controllerName},s=0;s<t.length;s++){var c=t[s],u=this.model.lookup(c),h={};if(u){if(0===s){var d=u.kind||"product_page",p=d.match(/station/i);if(p&&!itms.accountInfo.DSID){if(!i){this.authAndPlay(t,e,n),a=!0;break}o.log.error("_playMedia: requires an auth, but we already tried for id",c)}}h={playbackId:c,productData:u},s===n&&(r.selectedTrackIndex=r.items.length),r.items.push(h)}else h={playbackId:c},o.log.error("_playMedia: playback media missing data for id",c)}!a&&r.items.length>0&&l.play(r)}else o.log.error("_playMedia: playback media missing data for ids")},c.prototype.playMediaID=function(t){this._playMedia([t])},c.prototype._findFirstLockup=function(t){for(var e=t;;){var n=e.previousSibling;if(!n||"lockup"!==n.nodeName)break;e=n}return e},c.prototype.playMedia=function(t){var e;if(t&&t.target){var n=[],i=0;e=t.target.getAttribute("data-content-id");var a=this.model.lookup(e);if(a){var r=a&&a.kind&&-1!==a.kind.indexOf("radio"),l=a&&a.kind&&-1!==a.kind.indexOf("album"),s=a&&a.kind&&-1!==a.kind.indexOf("playlist");if(!r&&!l&&!s){for(var c=t.target,u=e;c&&"lockup"!==c.nodeName;)c=c.parentNode;if(c&&(u=c.getAttribute("data-content-id"),u&&(c=this._findFirstLockup(c))),c||(c=t.target,u=e),c&&"lockup"===c.nodeName&&u)for(;c&&"lockup"===c.nodeName;){var h=c.getAttribute("data-content-id");h&&(h===u&&(i=n.length),n.push(h)),c=c.nextSibling}}}0===n.length&&e&&n.push(e),n&&n.length>0?this._playMedia(n,t.target.recoID,i,!1):o.log.error("playMediaEvent: missing event data-content-id")}else o.log.error("playMediaEvent: missing event target")},e.exports=c},{"../../../util":304,itml:355}],110:[function(t,e,n){var i=t("itml"),a={ControllerCache:t("./controller_cache"),DataProvider:t("./data_provider"),TabComponent:t("./tab_component"),EventMap:t("./event_map"),ReportConcern:t("./report_concern")};e.exports=i.utils.extend(a,i.traits)},{"./controller_cache":107,"./data_provider":108,"./event_map":109,"./report_concern":111,"./tab_component":112,itml:355}],111:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.event.Event,o=function(){};o.prototype._isAUCType=function(t){return"uploadedAudio"===t||"uploadedVideo"===t},o.prototype._sendReport=function(t){function e(t,e){var n=JSON.parse(e)||{};if("error"!==n.status&&t){var i={data:{type:"error",title:a.loc.loc("FUSE.ReportConcern.Success.Title"),subtitle:a.loc.loc("FUSE.ReportConcern.Success.Dialog"),buttons:[{title:a.loc.loc("OK"),className:"confirm-button"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};setTimeout(function(){a.pubSub.publish("showModal",{detail:i})},500)}else{a.log.error("Report A Concern FAILURE: "+e);var r={data:{type:"error",title:a.loc.loc("FUSE.ReportConcern.Failure.Title"),subtitle:a.loc.loc("FUSE.ReportConcern.Failure.Dialog"),buttons:[{title:a.loc.loc("OK"),className:"confirm-button"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};setTimeout(function(){a.pubSub.publish("showModal",{detail:r})},500)}}if(a.urls.reportConcern()){var n=a.urls.build("reportConcern",t);a.xhr({method:"POST",url:n,failure:e.bind(this,!1),success:e.bind(this,!0)})}},o.prototype._showReportAConcernSheet=function(t,e,n,i,a){var o={data:{"concern-type":e,"concern-key":n,"description-loc-key":i,"submit-callback":function(){return function(t){"cancelButton"!==t.buttonIdentifier&&(a.concernTypeId=t.result,a.concernItemType=n,this._sendReport(a))}}().bind(this)},dataType:"report_concern",navigationDocument:modal};this.dispatchEvent(new r("tabPush",{detail:o}))},o.prototype.reportPostSheetCallback=function(t){var e=t.target.getAttribute("data-connect-id"),n=t.target.getAttribute("data-target-id"),i=t.target.getAttribute("data-target-type"),a={activity:e};this._isAUCType(i)&&(a.concernItemId=n,a.concernItemAUCType=i),this._showReportAConcernSheet(t,"artist-post","ARTIST_POST","FUSE.ReportConcern.ArtistPost.Description",a)},o.prototype.reportCommentSheetCallback=function(t){var e=t.target.getAttribute("data-comment-id"),n={concernItemId:e};this._showReportAConcernSheet(t,"user-comment","USER_COMMENT","FUSE.ReportConcern.UserComment.Description",n)},o.prototype.reportArtistCommentSheetCallback=function(t){var e=t.target.getAttribute("data-comment-id"),n={concernItemId:e};this._showReportAConcernSheet(t,"artist-comment","ARTIST_COMMENT","FUSE.ReportConcern.ArtistComment.Description",n)},o.prototype.reportSharedPlaylistSheetCallback=function(t){var e=t.target.getAttribute("data-playlist-id"),n={concernItemId:e};this._showReportAConcernSheet(t,"shared-playlist","PUBLIC_PLAYLIST","FUSE.ReportConcern.SharedPlaylist.Description",n)},e.exports=o},{"../../../util":304,itml:355}],112:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=["tabPush","handleAskToBuy"],o=t("../../../util").pubSub,l=function(){this.controllers&&(this.addEventListener("addController",function(t){var e=t.detail.controller;this.addEventDelegates(e,r)}.bind(this)),this.addEventListener("removeController",function(t){var e=t.detail.controller;this.removeEventDelegates(e,r)}.bind(this)),this.controllers.forEach(function(t){this.addEventDelegates(t,r)},this))};l.prototype.pushProduct=function(t){var e=t.target,n=e.getAttribute("data-content-id"),i=this.model.lookup(n);if(i){var r=i.kind||"album_page",o={data:i,dataType:r,navigationDocument:e.ownerDocument.navigationDocument};this.dispatchEvent(new a("tabPush",{detail:o}))}},l.prototype.pushUrl=function(t){var e=t.target,n=e.getAttribute("data-link-url"),i=e.getAttribute("data-container-id"),r=e.getAttribute("data-link-title"),o=e.getAttribute("data-content-kind"),l=e.artworkData,s={data:{artworkData:l,id:i,url:decodeURIComponent(n),title:r},dataType:o,navigationDocument:e.ownerDocument.navigationDocument};this.dispatchEvent(new a("tabPush",{detail:s}))},l.prototype.openUrl=function(t){var e=t.target,n=e.getAttribute("data-link-url");n&&openURL(n)},l.prototype.pushMorePage=function(t){var e,n=t.target,i=n.getAttribute("data-section-id");if(e=this.model.getData?this.model.getData(i):this.model.getDataForSectionId(i)){var r={data:e,dataType:"more_page",navigationDocument:n.ownerDocument.navigationDocument};this.dispatchEvent(new a("tabPush",{detail:r}))}},l.prototype.pushModal=function(t,e){if(e){var n={data:e,dataType:e.dataType,navigationDocument:modal,options:{type:e.modalType}};o.publish("showModal",{detail:n})}},l.prototype.pushLearnMore=function(t){var e=t.target,n=e.getAttribute("type-key"),i=null,r=e.getAttribute("push-type");i="sheet"===r?modal:e.ownerDocument.navigationDocument;var o={data:{typeKey:n},dataType:"learn_more_page",navigationDocument:i};this.dispatchEvent(new a("tabPush",{detail:o}))},l.prototype.handleAskToBuy=function(t){var e={buyInfo:t,document:this.el.ownerDocument},n=new a("handleAskToBuy",{detail:e});this.dispatchEvent(n)},l.prototype.tabDelegatedEvents=r,e.exports=l},{"../../../util":304,itml:355}],113:[function(t,e,n){e.exports={}},{}],114:[function(t,e,n){var i=t("../../../util"),a=t("../../base/document"),r=t("../../common").traits.TabComponent,o=i.loc,l=t("../helpers.js"),s=t("./signIn"),c=t("../recommendations/element"),u=t("../partials/nav_title.hbs"),h=t("./template.hbs"),d=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=t.name||o.loc("FUSE.NavBar.Connect");var n,u=t.data||{},d=i.screen.getCurrentOrientation();n="landscape"===d?i.screen.getScreenDimensions().width:i.screen.getScreenDimensions().height,u.bgImageName="resource://ConnectBg-"+n+"h.jpg",u.screenSize=i.screen.sizeForScreenDimension(),this.isSignedIn()?(this.controller=new c({data:u,template:h}),this.setupPostPermissions()):(u.signedOut=!0,this.controller=new s({data:u,template:h})),t.controllers.push(this.controller),a.call(this,t,e),r.call(this),l.call(this)};i.inherit(d,a),i.inherit(d,r,!0),i.inherit(d,l,!0),d.prototype.documentType="stackTemplate",d.prototype.titleTemplate=u,e.exports=d},{"../../../util":304,"../../base/document":83,"../../common":92,"../helpers.js":129,"../partials/nav_title.hbs":141,"../recommendations/element":155,"./signIn":115,"./template.hbs":116}],115:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),o=r.loc,l=t("../../base").style,s=t("../../common").traits.EventMap,c=i.controller.MultiElementController,u=t("../../common").traits.TabComponent,h=t("../style.hbs"),d=function(t,e){t=t||{},t.styles=t.styles||[],t.styleTemplate=h,t.styles.push(new l(t)),t.events=t.events||[],t.events.push("select"),this.data=t.data,c.call(this,t,e),s.call(this,t),u.call(this,t),r.extend(this.onSelect,{"signin-button":this.signIn}),this.render()};r.inherit(d,c),r.inherit(d,s,!0),r.inherit(d,u,!0),d.prototype.signIn=function(){var t={button:o.loc("FUSE.SignInButton"),header:o.loc("FUSE.Connect.SignIn.Header"),subheader:o.loc("FUSE.Connect.SignIn.SubHeader"),showCancelButton:!0},e={data:t,dataType:"signin",navigationDocument:modal};this.dispatchEvent(new a("tabPush",{detail:e}))},e.exports=d},{"../../../util":304,"../../base":84,"../../common":92,"../style.hbs":159,itml:355}],116:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='    <section id="coldstart-statusbar-section"></section>\n\n    <card>\n        <background>\n            <img src="'+o(r(null!=(a=null!=t?t.data:t)?a.bgImageName:a,t))+'" />\n        </background>\n        ';return a=(e.margin||t&&t.margin||l).call(t,"10pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+='\n\n        <title class="coldstart-title">'+o((e.loc||t&&t.loc||l).call(t,"FUSE.Connect.ColdStart.Title",{name:"loc",hash:{},data:i}))+'</title>\n\n        <divider class="coldstart-spacer-'+o(r(null!=(a=null!=t?t.data:t)?a.screenSize:a,t))+'"/>\n\n',a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.signedOut:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(s+=a),s+"    </card>\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'            <subtitle class="coldstart-subtitle">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.ColdStart.SubTitle",{name:"loc",hash:{},data:i}))+'</subtitle>\n\n            <list class="coldstart-button-list">\n                <button class="signin-button">\n                    <text>'+r((e.loc||t&&t.loc||a).call(t,"FUSE.SignInButton",{name:"loc",hash:{params:'{"toUpperCase": true}'},data:i}))+"</text>\n                </button>\n            </list>\n"},4:function(t,e,n,i){var a,r="\n";return a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.hasFollows:a,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(r+=a),r+"\n"},5:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'                <subtitle maxLines="2" class="coldstart-subtitle">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.LowSignal.SubTitleLine1",{name:"loc",hash:{},data:i}))+'</subtitle>\n                <button big-hit="true" maxLines="2" class="coldstart-subtitle-link view-following">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.LowSignal.SeeWhoYouAreFollowing",{name:"loc",hash:{},data:i}))+"</button>\n"},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'                <subtitle class="coldstart-subtitle">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.ColdStart.SubTitle",{name:"loc",hash:{},data:i}))+"</subtitle>\n"},9:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},11:function(t,e,n,i){var a,r="    <grid>\n";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"    </grid>\n"},12:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.recommendation,"            ","recommendation",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.data:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(9,i),data:i}),null!=a&&(r+=a),r+="\n\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],117:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),o=i.controller.MultiElementController,l=function(t,e){t=t||{},t.data=t.data||{},t.data.id&&(this.data=t.data),o.call(this,t,e)};a.inherit(l,o),l.prototype.template=r,e.exports=l},{"../../../util":304,"./template.hbs":119,itml:355}],118:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),o=t("./element"),l=i.controller.DocumentController,s=function(t,e){if(t=t||{},t.classes=t.classes||[],t.controllers=t.controllers||[],t.classes.push("template"),!t.controllers.length){var n=new o({data:t.data,template:r});t.controllers.push(n)}l.call(this,t,e)};a.inherit(s,l),s.prototype.documentType="socialPostTemplate",e.exports=s},{"../../../util":304,"./element":117,"./template.hbs":119,itml:355}],119:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='    <lockup data-content-id="'+o(r(null!=(a=null!=t?t.data:t)?a.id:a,t))+'" data-content-type="'+o(r(null!=(a=null!=t?t.data:t)?a.type:a,t))+'">\n        ';return a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.image:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n        ",a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.title:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n        ",a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.subtitle:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"\n    </lockup>\n"},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'<img style="itml-img-treatment: artist-circle;" src="'+o(r(null!=(a=null!=t?t.data:t)?a.image:a,t))+'"></img>'},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return"<title>"+o(r(null!=(a=null!=t?t.data:t)?a.title:a,t))+"</title>"},6:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"<subtitle>"+o((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.data:t)?a.subtitle:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</subtitle>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.data:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":338}],120:[function(t,e,n){var i=t("../../../util"),a=i.loc,r=i.pubSub,o=t("./template.hbs"),l=t("../../base").style,s=t("../../base/controller"),c=t("../../common").traits.DataProvider,u=t("../helpers.js"),h=t("../../common").traits.ReportConcern,d=t("../style.hbs"),p=t("../partials/comment.hbs"),m=t("../partials/comment_count.hbs"),f=t("../partials/divider.hbs"),g=function(t,e){t=t||{},t.data=t.data||{},t.styleTemplate=d,t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styles.push(new l(t)),t.events=t.events||[],t.events.push("change"),this.postViewModel=[],this.commentsViewModel=[],this.postDetail=!0,this.isLargeScreen=!!i.screen.sizeForScreenDimension().match(/l|xl/g),this.post=t.data.post,this.url=t.data.url,this.id=t.data.id,this.likesData=t.data.likes||{},this.viewPost=i.urls.post()+this.id,this.controllerName="connect-detail",this.model=new c,this.model.addEventListener("dataReady",this.commentsDataReady.bind(this)),s.call(this,t,e),u.call(this,t),i.extend(this.onSelect,{"open-url":this.openURL,"more-comments":this.loadMoreComments,"view-mention":this.viewProfile,"view-profile":this.viewProfile,"view-product":this.pushProduct,"delete-comment":this.deleteComment,"share-button":this.share,"like-button":this.like,"delete-post":this.deletePost,"report-concern":this.reportPostSheetCallback,"report-comment":this.reportCommentSheetCallback,"play-media":this.playMedia,"play-button":this.playMedia}),this.url?this.fetchPost():this.id?(this.url=this.viewPost,this.fetchPost()):this.post&&(this.setPostData(this.post),this.getComments(),this.post._originalHeroImage.url||(this.noHeroUber=!0)),i.account.getProfile({success:this.handleProfile.bind(this),failure:this.handleProfile.bind(this)}),this.handleRenderAttempt()};i.inherit(g,s),i.inherit(g,u,!0),i.inherit(g,h,!0),g.prototype.template=o,g.prototype.handleProfile=function(t){this.userProfile=t||{}},g.prototype.loadMoreComments=function(){this.getComments("next")},g.prototype.getComments=function(t){var e=this.remainingCount||this.totalComments,n=i.serverConstants.defaultCommentFetchCount(),a=e&&e-n===1?n+1:n,r={activity:this.post.id,limit:a},o=i.urls.comments();if(o){if("next"===t&&!this.offsetId||"next"===t&&this.lastOffSet===this.offsetId)return void(this.loading=!1);"next"===t&&this.offsetId&&(r.offsetId=this.offsetId,this.lastOffSet=this.offsetId),this.model.fetchData({method:"GET",url:o+i.query.build(r),success:this.commentsSuccess.bind(this),failure:this.commentsFailure.bind(this),eventType:t,retries:1})}else this.commentsDataReady()},g.prototype.commentsSuccess=function(t,e){var n=this.createViewForComments(t);return this.commentsViewModel="next"===e.eventType?i.prune(this.commentsViewModel.concat(n),function(t){return t.id}):n,this.remainingCount=this.totalComments-this.commentsViewModel.length,this.remainingCountText=a.loc("FUSE.Connect.Detail.RemainingComments",{count:this.remainingCount}),t.comments&&0===t.comments.length&&(this.remainingCount=0),this.showCount=this.remainingCount>0,this._renderCommentsChange(n),this.commentsViewModel},g.prototype.commentsFailure=function(t,e){i.log.warn("comments Request Failure: ",t),this.errorMessage=e||t.error||t.serviceError,this.commentsDataReady()},g.prototype.createViewForComments=function(t){for(var e,n=[],i=t.comments||[],a=0;a<i.length;++a)e=this.processCommentNode(i[a]),n.push(e);return n},g.prototype.processCommentNode=function(t){var e=t.ownerEntityId,n=t.admin&&t.admin.entityId,a=itms.accountInfo.DSID;return e&&e===a&&(t.isOwner=!0,t.hasDeletePower=!0),n&&n===a&&(t.hasDeletePower=!0),t.dateCreated&&(t.timeSincePost=i.loc.date.timeSince(t.dateCreated)),this.model.setData(t.id,t),t.reportCommentEnabled=i.enablers.reportAConcern,t=this.setCommentAttribution(t)},g.prototype.setCommentAttribution=function(t){var e=t.isAttributed&&t.admin,n=t.owner&&t.owner.name,i={admin:!1,name:"<b>"+n+"</b>",fullName:"<b>"+n+"</b>",handle:t.owner.handle};return e&&(i.admin=!0,i.name="<b>"+e.name+"</b>",i.handle=e.handle,i.fromBand=a.loc("FUSE.Connect.Feed.FromBand",{band:"<b>"+n+"</b>"}),i.fullName=a.loc("FUSE.Connect.Feed.AdminFromBand",{admin:e.name,band:"<b>"+n+"</b>"})),t.author=i,t},g.prototype.commentsDataReady=function(t){var e=i.keypath(t,"detail.view")||[],n=e.length&&e[e.length-1];this.offsetId=n&&n.id},g.prototype._renderCommentsChange=function(t){var e,n=this.el.ownerDocument.createDocumentFragment(),a=this.el.ownerDocument.getElementById("comment-section"),r=this.el.ownerDocument.getElementById("more-comments-section"),o=this.el.ownerDocument.getElementById("comments-loading-indicator");o&&o.parentNode.removeChild(o);for(var l=0;l<t.length;l++)t[l].post=this.postViewModel[0],e=i.parser.parse(p(t[l]),this.el.ownerDocument),e&&n.appendChild(e);a.appendChild(n);var s=this.el.ownerDocument.getElementById("more-comments");s&&s.parentNode.removeChild(s);var c=this.el.ownerDocument.getElementById("more-divider");if(c&&c.parentNode.removeChild(c),this.showCount){var u=i.parser.parse(f({className:"more-divider",post:this.post}),this.el.ownerDocument);r.parentNode.insertBefore(u,r);var h=i.parser.parse(m({remainingCountText:this.remainingCountText}),this.el.ownerDocument);r.appendChild(h)}},g.prototype.fetchPost=function(){this.postModel=new c,this.postModel.addEventListener("dataReady",this.postDataReady.bind(this)),this.url&&this.postModel.fetchData({method:"GET",url:this.url,success:this.postSuccess.bind(this),failure:this.postFailure.bind(this),retries:1})},g.prototype.postSuccess=function(t){var e=this.createViewForPosts(t);return e},g.prototype.postFailure=function(t,e){i.log.warn("Fetching post failed: ",t),this.errorMessage=e||t.error||t.serviceError,this.renderView()},g.prototype.ownerProfileSuccess=function(t){var e=t||{};this.insertOwnerProfile(e,this.postViewModel),this.ownerIds=[],this.postDataReady()},g.prototype.postDataReady=function(t){var e=i.keypath(t,"detail.view");e.length&&(e[0].content&&(e=e[0].content),this.postViewModel=e,this.post=e[0],this.getComments()),this.ownerIds.length?this.postModel.fetchContent({contentIds:this.ownerIds,profile:this.postModel.pageProfile,onSuccess:this.ownerProfileSuccess.bind(this),onFailure:this.ownerProfileSuccess.bind(this)}):(this.setPostData(this.postViewModel),this.handleRenderAttempt())},g.prototype.setPostData=function(t){var e=t instanceof Array?t:[t],n=e[0];n&&(this.post=n,this.postViewModel=e,this.totalComments=parseInt(n.commentCount,10)||0,this.hasComments=this.totalComments>0,this.hasOwnerProfile=!0,this.postActions=null,i.enablers.reportAConcern&&(this.postActions={id:n.id,targetId:n.targetId,targetType:n.targetType,admin:!1,text:a.loc("FUSE.Connect.Detail.ReportConcern"),className:"report-concern"}),this.handlePermissions(n),this.model.setData(n.id,n))},g.prototype.handleRenderAttempt=function(){this.postViewModel&&this.hasOwnerProfile&&this.renderView()},g.prototype.renderView=function(){this.loading=!1,this.render()},g.prototype.handlePermissions=function(t){for(var e=i.account.profilePermissions(),n=i.keypath(t,"owner.entityId"),r=0;r<e.length;r++){var o=e[r].entityId,l=e[r].dsId;if(n===o||n===l){this.postActions={id:t.id,admin:!0,text:a.loc("FUSE.Connect.Detail.DeletePost"),className:"delete-post"};break}}},g.prototype.comment=function(t){i.account.showTermsIfRequired({successCallback:this.submitComment.bind(this,t)})},g.prototype.submitComment=function(t){function e(t){if(t.post=c,u=i.parser.parse(p(t),this.el.ownerDocument),d){var e=d.firstChild;e?d.insertBefore(u,e):d.appendChild(u),getActiveDocument().scrollToTop()}}function n(t,n){var i=JSON.parse(n)||{};if("error"!==i.status&&t){if(i.comment){var a=this.processCommentNode(i.comment);0===parseInt(a.dateCreated,10)&&(a.dateCreated=Date.now()),u||e.call(this,a);var r=u.getElementsByTagName("button")||[];this.commentsViewModel.push(a),u.setAttribute("id",a.id);for(var o=0;o<r.length;o++){var l=r.item(o);l.setAttribute("data-comment-id",a.id)}}}else d&&u&&d.removeChild(u)}var a=i.keypath(t,"target.tagName"),r=i.keypath(t,"comment")||"",o=i.keypath(t,"commenter")||this.userProfile.entityId,l=i.keypath(t,"isAttributed"),s=i.keypath(t,"authorType")||"user",c=this.postViewModel[0];if("commentTemplate"===a&&""!==r.trim()){var u,h={isAttributed:l,commentText:r,target:{id:c.id,type:"activity"},owner:{id:o,type:s}},d=this.el.ownerDocument.getElementById("comment-section");i.xhr({method:"POST",data:h,headers:{"Content-Type":"application/json; charset=utf-8"},url:i.urls.comment(),failure:n.bind(this,!1),success:n.bind(this,!0)})}},g.prototype.deleteComment=function(t){var e=t.target.getAttribute("data-comment-id"),n={data:{title:a.loc("FUSE.Connect.Detail.DeleteCommentDialogTitle"),subtitle:a.loc("FUSE.Connect.Detail.DeleteCommentDialogMessage"),buttons:[{title:a.loc("FUSE.CancelButton"),className:"cancel-button"},{title:a.loc("FUSE.DeleteButton"),className:"delete-button",callback:this.handleDeleteCommentConfirm.bind(this,e)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};r.publish("showModal",{detail:n})},g.prototype.handleDeleteCommentConfirm=function(t){var e=i.urls.build("deleteComment",{commentId:t}),n=this.el.ownerDocument,a=n.getElementById(t);e&&(a.parentNode.removeChild(a),i.xhr({method:"POST",url:e,failure:function(t){i.log.error("deleteComment failed: ",t)},success:function(){}}))},g.prototype.deletePost=function(t){var e=i.urls.deleteSocialPost(),n=t.target.getAttribute("data-connect-id");if(e&&n){var o={data:{title:a.loc("FUSE.Connect.Detail.DeletePostDialogTitle"),subtitle:a.loc("FUSE.Connect.Detail.DeletePostDialogMessage"),buttons:[{title:a.loc("FUSE.CancelButton"),className:"cancel-button"},{title:a.loc("FUSE.DeleteButton"),className:"delete-button",callback:this.handleDeletePostConfirm.bind(this,e,n)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};r.publish("showModal",{detail:o})}},g.prototype.handleDeletePostConfirm=function(t,e){var n={activity:e.replace("sa.","")};i.xhr({method:"POST",url:t+i.query.build(n),success:function(){r.publish("postDeleted",{id:e}),getActiveDocument().navigationDocument.popDocument()},failure:function(t){i.log.error("Connect Post Delete Failure: ",t)}})},g.prototype.handleRotation=function(){this.loading=!1,this.render();var t=this.el.ownerDocument.getElementById("comments-loading-indicator");t&&t.parentNode.removeChild(t)},e.exports=g},{"../../../util":304,"../../base":84,"../../base/controller":82,"../../common":92,"../helpers.js":129,"../partials/comment.hbs":135,"../partials/comment_count.hbs":136,"../partials/divider.hbs":137,"../style.hbs":159,"./template.hbs":122}],121:[function(t,e,n){var i=t("../../../util"),a=t("./element"),r=t("../../common").traits.TabComponent,o=t("../../base/document"),l=t("../helpers.js"),s=t("../partials/nav_title.hbs"),c=i.loc,u=function(t,e){t=t||{},t.data=t.data||{},t.controllers=t.controllers||[],t.watchedAttributes=["postButtonText","postPlaceholderText","scrollNewCommentToView","showKeyboard","commentAsText","myselfText","asText"],t.scrollNewCommentToView="false",t.postButtonText=c.loc("FUSE.Connect.Detail.Post"),t.postPlaceholderText=c.loc("FUSE.Connect.Detail.Comment"),t.commentAsText=c.loc("FUSE.Connect.Detail.CommentAs"),t.myselfText=c.loc("FUSE.Connect.Detail.Myself"),t.asText=c.loc("FUSE.Connect.Detail.As"),t.showKeyboard=t.data.showKeyboard,t.controllers.length||(this.controller=new a({data:t.data}),t.controllers.push(this.controller)),o.call(this,t,e),r.call(this),l.call(this),this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="transparent-bar",this.navigationBarController.render(),this.controller&&this.el.addEventListener("change",this.controller.comment.bind(this.controller)),this.setupPostPermissions()};i.inherit(u,o),i.inherit(u,r,!0),i.inherit(u,l,!0),u.prototype.documentType="commentTemplate",u.prototype.titleTemplate=s,e.exports=u},{"../../../util":304,"../../base/document":83,"../../common":92,"../helpers.js":129,"../partials/nav_title.hbs":141,"./element":120}],122:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,(a=(a=(a=i&&i.root)&&a.post)&&a.heroImage)&&a.bgColor,{name:"hexToRgb",hash:{},data:i}))+"; color:"+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,(a=(a=(a=i&&i.root)&&a.post)&&a.heroImage)&&a.isDark,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"        ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},5:function(t,e,n,i,a){var r,o="\n";return r=e.unless.call(t,null!=t?t.postViewModel:t,{name:"unless",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+="\n",r=e["if"].call(t,null!=t?t.postViewModel:t,{name:"if",hash:{},fn:this.program(8,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"\n"},6:function(t,e,n,i){return"            <spacer />\n"},8:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,(r=i&&i.root)&&r.isLargeScreen,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),r=e.each.call(t,null!=t?t.postViewModel:t,{
name:"each",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+="\n",r=e["if"].call(t,(r=i&&i.root)&&r.isLargeScreen,{name:"if",hash:{},fn:this.program(22,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+="\n",r=e["if"].call(t,null!=t?t.hasComments:t,{name:"if",hash:{},fn:this.program(24,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+="\n",r=e["if"].call(t,(r=i&&i.root)&&r.isLargeScreen,{name:"if",hash:{},fn:this.program(26,i,a),inverse:this.program(28,i,a),data:i}),null!=r&&(o+=r),o+="\n",r=e.each.call(t,null!=t?t.commentsViewModel:t,{name:"each",hash:{},fn:this.program(30,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='            </grid>\n\n            <section id="more-comments-section"/>\n\n',r=e["if"].call(t,null!=t?t.postActions:t,{name:"if",hash:{},fn:this.program(32,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"\n"},9:function(t,e,n,i){return'            <grid style="column-count:0;itml-item-width:420;border-color:rgba(255,255,255,0)">\n'},11:function(t,e,n,i,a){var r,o,l="function",s=e.helperMissing,c=this.escapeExpression,u='                <card\n                    data-connect-id="'+c((o=null!=(o=e.id||(null!=t?t.id:t))?o:s,typeof o===l?o.call(t,{name:"id",hash:{},data:i}):o))+'"\n                    class="view-detail ';return r=e["if"].call(t,null!=a[1]?a[1].noHeroUber:a[1],{name:"if",hash:{},fn:this.program(12,i,a),inverse:this.noop,data:i}),null!=r&&(u+=r),u+='"\n                    ',r=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(14,i,a),inverse:this.noop,data:i}),null!=r&&(u+=r),u+="\n                    ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=r&&(u+=r),u+=">\n\n",r=e["if"].call(t,null!=(r=null!=t?t.heroImage:t)?r.url:r,{name:"if",hash:{},fn:this.program(16,i,a),inverse:this.program(18,i,a),data:i}),null!=r&&(u+=r),u+='                </card>\n                <card\n                    data-connect-id="'+c((o=null!=(o=e.id||(null!=t?t.id:t))?o:s,typeof o===l?o.call(t,{name:"id",hash:{},data:i}):o))+'"\n                    class="view-detail connect-bottom ',r=e["if"].call(t,i&&i.last,{name:"if",hash:{},fn:this.program(20,i,a),inverse:this.noop,data:i}),null!=r&&(u+=r),u+='"\n                    ',r=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(14,i,a),inverse:this.noop,data:i}),null!=r&&(u+=r),u+="\n                    ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=r&&(u+=r),u+=">\n\n",r=this.invokePartial(n.post,"                    ","post",t,void 0,e,n,i),null!=r&&(u+=r),u+"                </card>\n"},12:function(t,e,n,i){return"connect-top"},14:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"'},16:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.background,"                        ","background",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.author,"                        ","author",t,void 0,e,n,i),null!=a&&(r+=a),r},18:function(t,e,n,i){var a,r=e.helperMissing,o="                        ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+="\n",a=this.invokePartial(n.author,"                        ","author",t,void 0,e,n,i),null!=a&&(o+=a),o+="                        ",a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+"\n"},20:function(t,e,n,i){return"connect-last"},22:function(t,e,n,i){return"            </grid>\n"},24:function(t,e,n,i){return'                <activityIndicator id="comments-loading-indicator" class="bottom-loader"></activityIndicator>\n'},26:function(t,e,n,i){return'            <grid class="comments-grid large-screen-grid" id="comment-section">\n'},28:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'            <grid class="comments-grid" id="comment-section" style="border-color:'+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.isDark:a,.25,{name:"getHighContrastColor",hash:{},data:i}))+';">\n'},30:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.comment,"                    ","comment",t,void 0,e,n,i),null!=a&&(r+=a),r},32:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='                <divider style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; border-color: "+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.isDark:a,.25,{name:"getHighContrastColor",hash:{},data:i}))+';"/>\n';return a=this.invokePartial(n.postActions,"                ","postActions",t,void 0,e,n,i),null!=a&&(l+=a),l},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="<stackTemplate ";return r=e["if"].call(t,(r=(r=i&&i.root)&&r.post)&&r.heroImage,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+=">\n",r=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.program(5,i,a),data:i}),null!=r&&(o+=r),o+"\n</stackTemplate>\n"},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],123:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.pubSub,o=i.event.Event,l=t("./template.hbs"),s=t("../../base").style,c=t("../../common").traits.EventMap,u=i.controller.MultiElementController,h=t("../../common").traits.TabComponent,d=t("../../common").traits.DataProvider,p=t("../helpers.js"),m=t("../style.hbs"),f=function(t,e){t=t||{},t.styleTemplate=m,t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styles.push(new s(t)),t.events=t.events||[],t.events.push("select"),t.events.push("change"),this.loading=!0,u.call(this,t,e),c.call(this,t),h.call(this,t),p.call(this),this.tintInfo=t.tintInfo,this.viewModel=[],this.data=t.data,this.connectIds=[],this.params=t.params,this.api=t.api||"activityFeed",this.isProfilePage="activities"===this.api,this.isLargeScreen=!!a.screen.sizeForScreenDimension().match(/l|xl/g),this.isDefinitelyLast=!1,this.ownerIds=[],this.likesData={},this.requestCount=0,this.isOnline=""!==itms.networkConnectionType,this.model=new d({data:this.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.addEventListener("dataFailed",this.handleDataReady.bind(this)),this.lastAppearSuccess=Date.now(),this.doRefresh=!1,this.doMore=!1,this.showWelcomePanel=this.shouldShowWelcomePanel(),this.appearTTL=48e4,a.extend(this.onChange,{refresh:this.handleRefresh}),a.extend(this.onSelect,{"open-url":this.openURL,"view-mention":this.viewProfile,"view-profile":this.viewProfile,"view-product":this.pushProduct,"share-button":this.shareFromFeed,"comment-button":this.viewDetailPage,"like-button":this.like,"view-detail":this.viewDetailPage,"play-media":this.playMedia,"play-button":this.playMedia,"close-start-panel":this.closeStartPanel,"view-following":this.viewFollowing,"view-recommendations":this.viewRecommendations,"more-activities":this.handleNeedsMore}),r.subscribe("networkChange",this.handleNetworkChange.bind(this)),r.subscribe("postDeleted",this.handlePostDeleted.bind(this)),this.data?(this.model.dataSuccess(this.data,{success:this.activitiesSuccess.bind(this),failure:this.activitiesSuccess.bind(this)}),this.model.data&&delete this.model.data):this.getActivities()};a.inherit(f,u),a.inherit(f,c,!0),a.inherit(f,h,!0),a.inherit(f,p,!0),f.prototype.shouldShowWelcomePanel=function(){return"true"!==localStorage.getItem("Music.hasDismissedConnectFeedWelcomPanel")},f.prototype.template=l,f.prototype.handleRefresh=function(t){var e=a.keypath(t,"target.tagName");"pullToRefresh"===e&&(this.requestInFlight?this.doRefresh=!0:this.getActivities("refresh"))},f.prototype.handleNeedsMore=function(t){var e=t.target.tagName,n=!1;this.isProfilePage?"button"===e&&(n=!0):this.isLargeScreen?"grid"===e&&(n=!0):"stackTemplate"===e&&(n=!0),this.model&&n&&(this.requestInFlight?this.doMore=!0:(this.isProfilePage&&(this.spinner=a.parser.parse("<activityIndicator/>",t.target.ownerDocument),t.target.parentNode.insertBefore(this.spinner,t.target),t.target.removeChild(t.target.firstChild)),this.getActivities("next")))},f.prototype.handleNetworkChange=function(){this.isOnline=""!==itms.networkConnectionType,this.isOnline&&this.handleAppear(),this.render()},f.prototype.handlePostDeleted=function(){this.getActivities("appear")},f.prototype.handleAppear=function(t){var e=a.keypath(t,"target.tagName");!this.requestInFlight&&"stackTemplate"===e&&Date.now()-this.lastAppearSuccess>this.appearTTL&&this.getActivities("appear")},f.prototype.shareFromFeed=function(t){this.isProfilePage||(t.includeTargetDueToRdar21529443=!0),this.share(t)},f.prototype.getLastOffsetId=function(t){var e=null;if(t.activities&&t.activities.length>0){var n=t.activities.length-1,i=t.activities[n].id;i&&(e=i)}return e},f.prototype.getFirstOffsetId=function(t){var e=null;if(t.activities&&t.activities.length>0){var n=t.activities[0].id;n&&(e=n)}return e},f.prototype.getActivities=function(t){var e=this.params||{},n=a.urls[this.api](),i=!1;("next"!==t||this.lastId)&&(this.requestInFlight=!0,i=!0,"next"===t&&this.lastId&&(e.offsetId=this.lastId),"refresh"===t&&this.firstId&&(e.refreshOffsetId=this.firstId),this.limit=10,e.limit=this.limit,this.model.fetchData({retries:1,method:"GET",eventType:t,url:n+a.query.build(e),success:this.activitiesSuccess.bind(this),failure:this.activitiesFailure.bind(this)}))},f.prototype.activitiesSuccess=function(t,e){var n=null;if(this.resetLoading(),this.errorTitle=null,this.errorMessage=null,t.recommendedEntities)return[];"appear"===e.eventType&&(this.lastAppearSuccess=Date.now());var i=this.createViewForPosts(t);this.isDefinitelyLast=this.isProfilePage&&i.length>0&&i[0].content.length<this.limit;var r=this.getFirstOffsetId(t);return this.viewModel&&this.viewModel.length?"refresh"===e.eventType||"appear"===e.eventType?(this.firstId&&this.firstId!==r&&this.dispatchEvent(new o("resetScrollState")),this.likesData={},this.firstId=r,this.viewModel=i,this.lastId=this.getLastOffsetId(t),this.viewModel.lastId=this.lastId,n=this.viewModel):"next"===e.eventType?(this.isProfilePage&&i.length>0?this.viewModel[0].content=this.viewModel[0].content.concat(i[0].content):this.viewModel=this.viewModel.concat(i),this.lastId=this.getLastOffsetId(t),this.viewModel.lastId=this.lastId,n=this.viewModel):n=this.viewModel:(this.likesData={},this.firstId=r,this.viewModel=i,this.lastId=this.getLastOffsetId(t),this.viewModel.lastId=this.lastId,this.dispatchEvent(new o("resetScrollState")),n=this.viewModel),this.isProfilePage&&(this.getLikesData(),this.spinner&&this.spinner.parentNode.removeChild(this.spinner)),t.likesData&&(this.likesData=a.extend(this.likesData,t.likesData)),n},f.prototype.activitiesFailure=function(t,e,n){this.resetLoading(),a.log.error(this.api+" Request Failure: ",t),this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.renderView()},f.prototype.getLikesData=function(){if(this.connectIds&&0!==this.connectIds.length){var t={activities:this.connectIds.join(",")},e=a.urls.build("likesData",t);a.xhr({method:"GET",url:e,success:this.likesDataSuccess.bind(this),failure:this.likesDataFailure.bind(this)})}},f.prototype.likesDataSuccess=function(t){var e=JSON.parse(t);e.likesData&&(this.likesData=a.extend(this.likesData,e.likesData)),this.connectIds=[],this.handleRender()},f.prototype.likesDataFailure=function(t){a.log.warn("likesData Request Failure: ",t),this.connectIds=[],this.handleRender()},f.prototype.handleAdditionalFetch=function(t){t=t||{},this.insertOwnerProfile(t,this.viewModel),this.ownerIds=[],this.handleDataReady()},f.prototype.handleDataReady=function(t){a.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.ownerIds.length?this.model.fetchContent({contentIds:this.ownerIds,profile:this.model.pageProfile,onSuccess:this.handleAdditionalFetch.bind(this),onFailure:this.handleAdditionalFetch.bind(this)}):(this.hasConnectFeed=!0,this.handleRender())},f.prototype.handleRender=function(){(this.isProfilePage&&this.hasConnectFeed||!this.isProfilePage)&&(this.hasConnectFeed=!1,this.renderView())},f.prototype.closeStartPanel=function(){var t=this.el.ownerDocument.getElementById("feed-start-panel");t&&t.parentNode.removeChild(t),localStorage.setItem("Music.hasDismissedConnectFeedWelcomPanel","true"),this.showWelcomePanel=!1},f.prototype.renderView=function(){this.render()},f.prototype.resetLoading=function(){this.loading=!1,this.requestInFlight=!1,this.doRefresh?(this.doRefresh=!1,this.getActivities("refresh")):this.doMore&&(this.doMore=!1,this.getActivities("next"))},f.prototype.viewFollowing=function(){var t={dataType:"connect_following",navigationDocument:modal,isModal:!0};this.dispatchEvent(new o("tabPush",{detail:t}))},f.prototype.viewDetailPage=function(t){this.lastAppearSuccess=Date.now(),this.viewDetail(t)},f.prototype.viewRecommendations=function(){var t={dataType:"connect_recommendations",navigationDocument:modal,isModal:!0};this.dispatchEvent(new o("tabPush",{detail:t}))},f.prototype.handleRotation=function(){this.setProperArtwork(),this.renderView()},f.prototype.setProperArtwork=function(){for(var t,e=this.viewModel[0].content,n=0;n<e.length;n++)e[n].heroImage&&e[n].heroImage.url&&e[n]._originalHeroImage&&(t=this.getArtwork({kind:"postHero",artwork:e[n]._originalHeroImage}).image,t&&(e[n].heroImage=t))},e.exports=f},{"../../../util":304,"../../base":84,"../../common":92,"../helpers.js":129,"../style.hbs":159,"./template.hbs":125,itml:355}],124:[function(t,e,n){var i=t("../../../util"),a=t("./element"),r=t("../../base/document"),o=t("../../common").traits.TabComponent,l=t("../../common").traits.DataProvider,s=i.loc,c=t("../partials/nav_title.hbs"),u=t("../helpers.js"),h=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=t.name||s.loc("FUSE.NavBar.Connect"),t.classes=t.classes||[],t.controllers.length||(this.controller=new a({data:t.data}),t.controllers.push(this.controller)),r.call(this,t,e),o.call(this),u.call(this),this.model=new l,this.controller&&(this.addEventListener("appear",this.controller.handleAppear.bind(this.controller)),this.el.addEventListener("needsmore",this.controller.handleNeedsMore.bind(this.controller)),this.controller.addEventListener("resetScrollState",this.resetScrollState.bind(this))),this.setupPostPermissions()};i.inherit(h,r),i.inherit(h,o,!0),i.inherit(h,u,!0),h.prototype.documentType="stackTemplate",h.prototype.titleTemplate=c,h.prototype.resetScrollState=function(){this.el.scrollToTop(),itms.resetStateForActiveDocument()},e.exports=h},{"../../../util":304,"../../base/document":83,"../../common":92,"../helpers.js":129,"../partials/nav_title.hbs":141,"./element":123}],125:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){return'        <pullToRefresh class="refresh"/>\n'},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"    ","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},8:function(t,e,n,i){var a,r="";return a=e.unless.call(t,(a=i&&i.root)&&a.isProfilePage,{name:"unless",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},9:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='        <section>\n            <card id="feed-start-panel" type="billboard" class="feed-start-card">\n                <list class="feed-start-close-button">\n                    <button big-hit="true" class="close-start-panel" type="imagetext"><img style="itml-img-mask-color:rgb(150,150,150);" src="resource://UniversalSmallClose" width="8" height="8"/></button>\n                </list>\n                <title class="feed-start-title">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Connect.LowSignal.TitleLine1",{name:"loc",hash:{},data:i}))+"<br/>"+o((e.loc||t&&t.loc||r).call(t,"FUSE.Connect.LowSignal.TitleLine2",{name:"loc",hash:{},data:i}))+"</title>\n                ";return a=(e.margin||t&&t.margin||r).call(t,"1pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+='\n                <button type="thin" maxLines="2" class="feed-start-recommendations-button view-recommendations">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Settings.Following.MoreArtists",{name:"loc",hash:{params:'{"toUpperCase": true}'},data:i}))+"</button>\n                ",a=(e.margin||t&&t.margin||r).call(t,"1pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+='\n                <subtitle maxLines="2" class="feed-start-subtitle">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Connect.LowSignal.SubTitleLine1",{name:"loc",hash:{},data:i}))+'</subtitle>\n                <button maxLines="2" class="feed-start-following-button view-following">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Connect.LowSignal.SeeWhoYouAreFollowing",{name:"loc",hash:{},data:i}))+"</button>\n                ",a=(e.margin||t&&t.margin||r).call(t,"1pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+'\n            </card>\n            <divider class="divider-full feed-start-divider"/>\n        </section>\n'},11:function(t,e,n,i){var a,r="";return a=e["if"].call(t,(a=i&&i.root)&&a.isLargeScreen,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.lastId:t,{name:"if",hash:{},fn:this.program(41,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,(a=i&&i.root)&&a.isLargeScreen,{name:"if",hash:{},fn:this.program(48,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},12:function(t,e,n,i){return'    <grid class="large-screen-grid">\n'},14:function(t,e,n,i){var a,r="";return a=e.unless.call(t,(a=i&&i.root)&&a.isProfilePage,{name:"unless",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},15:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='        <card\n            data-connect-id="'+o(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'"\n            class="view-detail connect-top"\n            ';return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.heroImage:a,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n            ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n\n",a=e["if"].call(t,null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.heroImage:a)?a.url:a,{name:"if",hash:{},fn:this.program(18,i),inverse:this.program(20,i),data:i}),null!=a&&(s+=a),s+"        </card>\n"},16:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="padding: 0 0 0 0;background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.heroImage:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"'},18:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.background,"                ","background",null!=(a=null!=t?t.content:t)?a[0]:a,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.author,"                ","author",null!=(a=null!=t?t.content:t)?a[0]:a,void 0,e,n,i),null!=a&&(r+=a),r},20:function(t,e,n,i){var a,r=e.helperMissing,o="                ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+="\n",a=this.invokePartial(n.author,"                ","author",null!=(a=null!=t?t.content:t)?a[0]:a,void 0,e,n,i),null!=a&&(o+=a),o+="                ",a=(e.margin||t&&t.margin||r).call(t,"0pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+"\n"},22:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='            <card\n                data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n                class="view-detail connect-bottom ';return a=e["if"].call(t,i&&i.last,{name:"if",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='"\n                ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(25,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n                ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=">\n\n",a=e.unless.call(t,i&&i.first,{name:"unless",hash:{},fn:this.program(27,i),inverse:this.program(29,i),data:i}),null!=a&&(c+=a),a=this.invokePartial(n.post,"                ","post",t,void 0,e,n,i),null!=a&&(c+=a),c+="            </card>\n\n",a=e["if"].call(t,(a=i&&i.root)&&a.isProfilePage,{name:"if",hash:{},fn:this.program(32,i),inverse:this.program(39,i),data:i}),null!=a&&(c+=a),c},23:function(t,e,n,i){return"connect-last"},25:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"'},27:function(t,e,n,i){var a,r=e.helperMissing,o="                    ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+="\n",a=this.invokePartial(n.author,"                    ","author",t,void 0,e,n,i),null!=a&&(o+=a),o},29:function(t,e,n,i){var a,r="";return a=e["if"].call(t,(a=i&&i.root)&&a.isProfilePage,{name:"if",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},30:function(t,e,n,i){var a,r=e.helperMissing,o="                        ";return a=(e.margin||t&&t.margin||r).call(t,"16pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+="\n",a=this.invokePartial(n.author,"                        ","author",t,void 0,e,n,i),null!=a&&(o+=a),o},32:function(t,e,n,i){var a,r="";return a=e.unless.call(t,i&&i.last,{name:"unless",hash:{},fn:this.program(33,i),inverse:this.program(36,i),data:i}),null!=a&&(r+=a),r},33:function(t,e,n,i){var a,r='                    <divider class="post-divider" ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(34,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"/>\n"},34:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; border-color:"+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.3,{name:"getHighContrastColor",hash:{},data:i}))+';"'},36:function(t,e,n,i){var a,r="";return a=e.unless.call(t,(a=i&&i.root)&&a.isDefinitelyLast,{name:"unless",hash:{},fn:this.program(37,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},37:function(t,e,n,i){var a,r='                        <divider class="post-divider" ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(34,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"/>\n"},39:function(t,e,n,i){var a,r="";return a=e.unless.call(t,i&&i.last,{name:"unless",hash:{},fn:this.program(33,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},41:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isOnline:t,{name:"if",hash:{},fn:this.program(42,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},42:function(t,e,n,i){var a,r="";return a=e["if"].call(t,(a=i&&i.root)&&a.isProfilePage,{name:"if",hash:{},fn:this.program(43,i),inverse:this.program(46,i),data:i}),null!=a&&(r+=a),r},43:function(t,e,n,i){var a,r="";return a=e.unless.call(t,null!=t?t.isDefinitelyLast:t,{name:"unless",hash:{},fn:this.program(44,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},44:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'                    <button id="more-activities" class="more-activities">'+r((e.loc||t&&t.loc||a).call(t,"More",{name:"loc",hash:{},data:i}))+"</button>\n"},46:function(t,e,n,i){return'                <activityIndicator class="bottom-loader"></activityIndicator>\n'},48:function(t,e,n,i){return"    </grid>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e.unless.call(t,(a=i&&i.root)&&a.isProfilePage,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.showWelcomePanel:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"<spacer />\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],126:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=i.event.Event,l=t("../../base/document"),s=t("../../common").traits.TabComponent,c=t("../../common").traits.DataProvider,u=t("../recommendations/element"),h=t("../helpers.js"),d=t("./template.hbs"),p=function(e,n){e=e||{},e.controllers=e.controllers||[],e.classes=e.classes||[],e.name=r.loc("FUSE.Following.Title");var i=a.keypath(e,"event.detail.isModal");this.model=new c,this.controller=new u({api:"follows",params:{user:itms.accountInfo.DSID,limit:200},data:e.data,pullToRefreshEnabled:!1,hasAutoFollowToggle:!0,batchLoad:!0,template:d,toggled:!0,followText:r.loc("FUSE.Settings.Following.Follow"),followingText:r.loc("FUSE.Settings.Following.Unfollow")}),e.controllers.push(this.controller),i&&(this.titleTemplate=t("./nav_title.hbs")),l.call(this,e,n),s.call(this,e,n),h.call(this);var o=function(){var t=this.el.getElementById("doneButton");t&&t.addEventListener("select",this.handleDoneButton.bind(this))};i&&(this.navigationBarController.addEventListener("render",o.bind(this)),o.call(this)),this.el.addEventListener("change",this.handleChange.bind(this))};a.inherit(p,l),a.inherit(p,s,!0),a.inherit(p,h,!0),p.prototype.documentType="settingsTemplate",p.prototype.handleDoneButton=function(){this.controller.model.set()},p.prototype.handleDoneButton=function(){modal.popDocument()},p.prototype.viewRecommended=function(t){var e=t.target.ownerDocument.navigationDocument,n={dataType:"connect_recommendations",navigationDocument:e};this.dispatchEvent(new o("tabPush",{detail:n}))},p.prototype.handleChange=function(t){function e(t,e){var n=JSON.parse(e);(n&&"error"===n.status||!t)&&a.log.warn("follow request error: ",e),this.controller.fetchRecommendations()}if(t.target&&"auto-follow-toggle"===t.target.getAttribute("id")){var n=!!t.selected,i=a.urls.enableAutoFollow(),r={enable:n.toString()};a.xhr({method:"POST",url:i+a.query.build(r),failure:e.bind(this,!1),success:e.bind(this,!0)})}},e.exports=p},{"../../../util":304,"../../base/document":83,"../../common":92,"../helpers.js":129,"../recommendations/element":155,"./nav_title.hbs":127,"./template.hbs":128,itml:355}],127:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"<title>"+r((e.loc||t&&t.loc||a).call(t,"FUSE.Following.Title",{name:"loc",hash:{},data:i}))+'</title>\n<button id="doneButton" class="hide-sheet align-right" type="done">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.DoneButton",{name:"loc",hash:{},data:i}))+"</button>"},useData:!0})},{"hbsfy/runtime":338}],128:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    <activityIndicator>\n        <title>"+r((e.loc||t&&t.loc||a).call(t,"Fuse.Loading",{name:"loc",hash:{},data:i}))+"</title>\n    </activityIndicator>\n"},3:function(t,e,n,i){var a,r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c="function",u="";return a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='    <group>\n        <settingsField class="'+l(o(null!=(a=null!=t?t.accountActionClassName:t)?a.accountSummaryAction:a,t))+'">\n            <label class="group-label">'+l((e.loc||t&&t.loc||s).call(t,"FUSE.Settings.Following.AutoFollowArtists.Label",{name:"loc",hash:{},data:i}))+'</label>\n            <input type="checkbox" id="auto-follow-toggle" selected="'+l((r=null!=(r=e.autoFollowEnabled||(null!=t?t.autoFollowEnabled:t))?r:s,typeof r===c?r.call(t,{name:"autoFollowEnabled",hash:{},data:i}):r))+'" />\n        </settingsField>\n        <footer>\n            <label>'+l((e.loc||t&&t.loc||s).call(t,"FUSE.Settings.Following.AutoFollowArtists.Message",{name:"loc",hash:{},data:i}))+"</label>\n        </footer>\n    </group>\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(9,i),data:i}),null!=a&&(u+=a),u},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'        <title class="multi-line">'+r(a(null!=t?t.errorMessage:t,t))+"</title>\n"},6:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='        <group>\n            <lockup class="view-recommended">\n                <title class="recommended-text one-lines">\n                    <text>'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Settings.Following.MoreArtists",{name:"loc",hash:{},data:i}))+"</text>\n                </title>\n                <decorationImage />\n            </lockup>\n";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"        </group>\n"},7:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.recommendation,"                ","recommendation",t,void 0,e,n,i),null!=a&&(r+=a),r},9:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <group>\n            <lockup class="view-recommended">\n                <title class="recommended-text one-lines">\n                    <text>'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Settings.Following.MoreArtists",{name:"loc",hash:{},data:i}))+"</text>\n                </title>\n                <decorationImage />\n            </lockup>\n        </group>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a?a:""},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],129:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../util"),o=r.loc,l=t("./partials"),s=function(){l()};s.prototype.isSignedIn=function(){return void 0!==itms.accountInfo.DSID},s.prototype.setupPostPermissions=function(){r.account.getSubscriptionStatus({service:"AppleMusic"},function(){this.navigationBarController.hasPostPermission=r.account.hasPostPermission(),this.navigationBarController.render(),r.account.hasAdminPermission()&&r.account.getProfilePermissions({success:this.handlePermissions.bind(this),failure:this.handlePermissions.bind(this)});var t=this.el.getElementById("post");t&&t.addEventListener("select",this.createPost.bind(this))}.bind(this))},s.prototype.handlePermissions=function(t){this.permissions=t||[]},s.prototype.showSignIn=function(){var t={dataType:"signin",navigationDocument:modal};this.dispatchEvent(new a("tabPush",{detail:t}))},s.prototype.like=function(t){function e(t,e){var n=JSON.parse(e);(n&&"error"===n.status||!t)&&(this.likesData[l]=!i)}var n=t.target,i=!t.toggled,a=r.urls.like(),o=r.urls.unlike(),l=n.getAttribute("data-connect-id"),s=i?a:o,c={
activity:l};this.likesData[l]=i,r.xhr({method:"POST",url:s+r.query.build(c),failure:e.bind(this,!1),success:e.bind(this,!0)})},s.prototype.share=function(t){var e=this.isSignedIn();e?r.account.hasPostPermission()?this.sharePost(t,"artist"):this.sharePost(t,"user"):this.showSignIn()},s.prototype.showAdminActionMenu=function(t){var e=t.target.getAttribute("data-connect-id"),n=this.model.getData(e);if(n){var i={data:{type:"actionSheet",hideTitle:!0,buttons:[{title:o.loc("FUSE.Connect.ActionMenu.Share"),className:"share-post",callback:this.sharePost.bind(this,t,"artist")},{title:o.loc("FUSE.Connect.ActionMenu.Post"),className:"create-post",callback:this.createPost.bind(this,t)},{title:o.loc("FUSE.CancelButton"),className:"cancel-post",callback:this.cancelPost.bind(this)}]},dataType:"dialog",navigationDocument:modal};this.dispatchEvent(new a("tabPush",{detail:i}))}},s.prototype.cancelPost=function(){modal.popDocument()},s.prototype.sharePost=function(t){function e(e){if(e){var n={data:{content:e,shareType:"connect-post"},options:{},dataType:"sharing",navigationDocument:modal};i&&(n.options.sourceElement=t.target),this.dispatchEvent(new a("tabPush",{detail:n}))}}var n=t.target.getAttribute("data-connect-id"),i=t.includeTargetDueToRdar21529443,r=this.model.getData(n);e.call(this,r)},s.prototype.createPost=function(t){r.account.showTermsIfRequired({successCallback:this.pushToPostPage.bind(this,t)})},s.prototype.pushToPostPage=function(){var t={dataType:"connect_create_post",navigationDocument:modal};this.dispatchEvent(new a("tabPush",{detail:t}))},s.prototype.getPostDataFromPost=function(t){var e=t.message,n=t.owner&&t.owner.name,i=t.isAttributed&&t.admin,a=r.keypath(t,"author.image.url"),l=o.loc("FUSE.Connect.CreatePost.PostByArtist",{artist:n});i&&(l=o.loc("FUSE.Connect.CreatePost.PostByAdminFromBand",{admin:i.name,band:n}));var s={id:t.id,image:a,title:l,type:"viewPost",subtitle:e};return s},s.prototype.insertOwnerProfile=function(t,e){for(var n,i,a,o,l=e||this.viewModel||[],s=t||{},c=0;c<l.length;c++)n=l[c],o=r.keypath(n,"ownerProfile.empty"),o&&(i=n.owner&&n.owner.entityId,a=s[i],a?(a=this.getArtwork(a,"social"),n.ownerProfile=a.uber||a.hero):delete n.ownerProfile,this.model.setData(n.id,n))},s.prototype.viewDetail=function(t){var e=t.target.ownerDocument.navigationDocument,n=t.target.getAttribute("data-connect-id"),i=t.target.getAttribute("data-show-keyboard"),r="true"===i,o=this.model.getData(n);if(o){var l={data:{post:o,likes:this.likesData,showKeyboard:r},dataType:"connect_detail",navigationDocument:e};this.dispatchEvent(new a("tabPush",{detail:l}))}},s.prototype.openURL=function(t){var e=t.target.getAttribute("data-url");e&&openURL(e)},s.prototype.viewProfile=function(t){function e(e){this.model.lookup(e)&&this.pushProduct(t)}var n=t.target.getAttribute("data-content-id"),i=this.model.lookup(n);i?this.pushProduct(t):this.model.fetchContent({contentIds:[n],profile:this.model.pageProfile,onSuccess:e.bind(this,n),onFailure:e.bind(this,n)})},s.prototype.createViewForPosts=function(t){function e(t){var e=!0;return t.target&&!t.targetId&&(e=!1),"activity"===t.targetType&&(e=!1),e}var n,i,a=[],o=t.activities||[];if(this.connectIds=[],t.activity&&o.push(t.activity),o.length){for(var l=[],s=o.length,c=0;s>c;c++){var u=o[c]||{};if(e.call(this,u)){var h=this.lookupPost(u);(r.enablers.allowsExplicit()||!h.isExplicit)&&(n=h.ownerEntityId,i&&n!==i&&(a.push({content:l}),l=[]),l.push(h),i=n,this.connectIds.push(h.id))}else r.log.error("Connect: invalid postData for activity with id: "+u.id)}l.length&&a.push({content:l})}return a},s.prototype.lookupPost=function(t){var e,n=t.target&&t.target.id;return e=n?this.model.lookupContent(n,this.processPost.bind(this,t)):this.processPost(t)},s.prototype.processPost=function(t,e){t.message=t.message.replace(/(?:\r\r|\r|\n)/g,"\r"),t.message=t.message.trim();var n,i=t;this.ownerIds=[];var a,l,s=t.ownerEntityType,c=t.owner,u=c&&c.name,h=c&&c.entityId,d=this.model.lookup(h),p=t.isAttributed&&t.admin,m=t.dateCreated;m&&(i.timeSincePost=r.loc.date.timeSince(m));var f="artist"===s,g=s.match(/^(iTunesBrand|brand|activityCurator)$/);if(!u&&d&&d.name&&(u=d.name),i.author={id:h,name:"<b>"+u+"</b>",admin:!1,fullName:"<b>"+u+"</b>"},p&&(i.author.admin=!0,i.author.name="<b>"+p.name+"</b>",i.author.fromBand=o.loc("FUSE.Connect.Feed.FromBand",{band:"<b>"+u+"</b>"}),i.author.fullName=o.loc("FUSE.Connect.Feed.AdminFromBand",{admin:p.name,band:"<b>"+u+"</b>"}),p.profileImage&&p.profileImage.url&&(i.author.avatar=this.getArtwork({kind:"avatar",artwork:p.profileImage}).image)),f?l=d&&d.editorialArtwork&&d.editorialArtwork.bannerUber:g&&(l=d&&d.editorialArtwork&&d.editorialArtwork.subscriptionCover),!l&&d.artwork&&(l=r.deepClone(d.artwork),l.url=null),l&&(i._originalHeroImage=l,l=this.getArtwork({kind:"postHero",artwork:l}).image),d||this.ownerIds.push(h),l&&l.bgColor&&l.isDark){var b=new r.color(l.bgColor);l.bgColor=b.darken(.006)}if(!l)if(this.isProfilePage)l=this.tintInfo;else{var v=new r.color("f4f4f4");l={bgColor:v,bgColorComplement:v.darken(.1)}}if(i.heroImage=l,i.postType=i.targetType||"default","default"===i.postType&&i.artwork&&i.artwork.url&&(i.photo=this.getArtwork({artwork:i.artwork},"photo")),e){switch(n=this.getArtwork(e),a=n.artistName||n.curatorName||n.brandName||o.loc("FUSE.AppleMusic"),r.lockup.isExplicit(e)&&(e.showExplicitBadge=!0,i.isExplicit=!0),n.kind){case"uploadedAudio":"SoundBite"===n.aucType?(i.postType="soundbite",n.name=o.loc("FUSE.Connect.Feed.SoundbiteBadge")):i.badge=n.aucType?n.aucType:o.loc("FUSE.Connect.Feed.FromTheArtistBadge");break;case"uploadedVideo":i.badge=o.loc("FUSE.Connect.Feed.FromTheArtistBadge");break;case"playlist":n.playlistBy=o.loc("FUSE.Connect.Feed.PlayListBy",{creator:a});break;case"album":n.albumBy=o.loc("FUSE.Connect.Feed.AlbumBy",{creator:a});break;case"default":}i.content=[n]}return i[i.postType]=!0,parseInt(i.commentCount,10)>0&&(i.hasComments=!0),this.model.setData(i.id,i),i},s.prototype.getArtwork=function(t,e){t=t||{};var n={content:t},i=t;e&&(n.params={type:e}),this.artworkMap&&(n.artworkMap=this.artworkMap),this.artworkKeys&&(n.artworkKeys=this.artworkKeys);var a=r.artwork.getArtworkForContent(n);return i=r.lockup.setArtworks(t,a,this.artworkMap,e)},s.prototype.artworkKeys={aucVideo:["video","uploadedVideo","musicVideo"]},s.prototype.artworkMap={track:{xs:[60,60],s:[60,60],m:[60,60],l:[60,60],xl:[60,60]},avatar:{xs:[40,40],s:[40,40],m:[40,40],l:[40,40],xl:[40,40]},product:{xs:[88,88],s:[125,125],m:[125,125],l:[125,125],xl:[144,144]},heroChild:{xs:[88,88],s:[125,125],m:[125,125],l:[125,125],xl:[125,125]},productChild:{xs:[163,163],s:[200,200],m:[206,206],l:[256,256],xl:[256,256]},profile:{xs:[88,88],s:[115,115],m:[125,125],l:[144,144],xl:[150,150]},photo:{crop:"bb",xs:[288,512],s:[343,609],m:[382,679],l:[420,565],xl:[420,565]},postHero:{crop:"h",xs:[320,240],s:[375,240],m:[414,240],l:[768,288],xl:[1024,288]},aucVideo:{crop:"h",xs:[320,193],s:[375,200],m:[414,240],l:[420,224],xl:[420,224]},follower:{xs:[55,55],s:[55,55],m:[65,65],l:[65,65],xl:[65,65]}},e.exports=s},{"../../util":304,"./partials":138,itml:355}],130:[function(t,e,n){var i=t("../base/tab"),a=t("../common").traits.DataProvider,r=t("../../util"),o=r.loc,l=r.pubSub,s=t("./helpers.js"),c=t("./coldstart"),u=t("./feed"),h=function(t){t=t||{},this.model=new a,this.retries=2,this.retryTTL=3600,this.name=t.name||o.loc("FUSE.NavBar.Connect"),this.controller=this.getLoadingController(),i.call(this,t),s.call(this,t),l.subscribe("refreshConnectTab",this.init.bind(this)),l.subscribe("serviceChange",this.init.bind(this)),this.init()};r.inherit(h,i),r.inherit(h,s,!0),h.prototype.init=function(t){var e;this.isSignedIn()?(t&&(e=this.getLoadingController(),this.replaceDocument({detail:{document:e}})),this.getActivites()):(localStorage.removeItem("Music.hasDismissedConnectFeedWelcomPanel"),e=this.getColdstartController(),this.replaceDocument({detail:{document:e}}))},h.prototype.getColdstartController=function(t){return new c({name:this.name,data:t})},h.prototype.getConnectFeedController=function(t){return new u({name:this.name,data:t})},h.prototype.getActivites=function(){this.model.fetchData({url:r.urls.build("activityFeed",{limit:10}),success:this.getActivitiesSuccess.bind(this),failure:this.getActivitiesFailure.bind(this),retries:this.retries})},h.prototype.getActivitiesSuccess=function(t){this.errorTitle=null,this.errorMessage=null;var e,n=t||{};return n.activities?(e=this.getConnectFeedController(n),this.replaceDocument({detail:{document:e}})):this.getFollowingCount(),[]},h.prototype.getActivitiesFailure=function(t,e,n){r.log.error("Connect Activity Request Failure: ",t),this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.controller.render()},h.prototype.getFollowingCount=function(){this.model.fetchData({url:r.urls.build("followingCount",{user:itms.accountInfo.DSID}),success:this.getFollowingCountSuccess.bind(this),failure:this.getFollowingCountFailure.bind(this),retries:1})},h.prototype.getFollowingCountSuccess=function(t){var e=t.count||0,n=parseInt(e,10)>0?!0:!1,i=this.getColdstartController({hasFollows:n});return this.replaceDocument({detail:{document:i}}),[]},h.prototype.getFollowingCountFailure=function(t,e,n){r.log.error("Connect Follows Request Failure: ",t),this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.controller.render()},e.exports=h},{"../../util":304,"../base/tab":87,"../common":92,"./coldstart":114,"./feed":124,"./helpers.js":129}],131:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <img\n            disabled="true"\n            class="curator-avatar"\n            width="'+o(r(null!=(a=null!=(a=null!=t?t.author:t)?a.avatar:a)?a.width:a,t))+'"\n            height="'+o(r(null!=(a=null!=(a=null!=t?t.author:t)?a.avatar:a)?a.height:a,t))+'"\n            srcset="'+o(r(null!=(a=null!=(a=null!=t?t.author:t)?a.avatar:a)?a.url:a,t))+" "+o(r(null!=(a=null!=(a=null!=t?t.author:t)?a.avatar:a)?a.dpr:a,t))+'" />\n'},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='        <title\n            class="author-text owner-name"\n            data-content-id="'+o(r(null!=(a=null!=t?t.author:t)?a.id:a,t))+'"\n            data-preview-id="'+o(r(null!=(a=null!=t?t.author:t)?a.id:a,t))+'"\n            ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='\n            maxLines="',a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.admin:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(s+=a),s+='"\n            >',a=(e.escapeText||t&&t.escapeText||l).call(t,null!=(a=null!=t?t.author:t)?a.name:a,{name:"escapeText",hash:{},data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.admin:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</title>\n"},4:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';"'},6:function(t,e,n,i){return"2"},8:function(t,e,n,i){return"1"},10:function(t,e,n,i){var a,r=e.helperMissing,o="<br/>";return a=(e.colorAuthorName||t&&t.colorAuthorName||r).call(t,null!=(a=null!=t?t.author:t)?a.fromBand:a,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"colorAuthorName",hash:{},data:i}),null!=a&&(o+=a),o},12:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <button><text\n            class="author-text time-since-post"\n            ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n            >",a=e["if"].call(t,null!=t?t.viewCount:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+s((r=null!=(r=e.timeSincePost||(null!=t?t.timeSincePost:t))?r:l,typeof r===o?r.call(t,{name:"timeSincePost",hash:{},data:i}):r))+"</text></button>\n"},13:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.4,{name:"getHighContrastColor",hash:{},data:i}))+';"'},15:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return l((a=null!=(a=e.viewCount||(null!=t?t.viewCount:t))?a:o,typeof a===r?a.call(t,{name:"viewCount",hash:{},data:i}):a))+" "+l((e.loc||t&&t.loc||o).call(t,"FUSE.Connect.Feed.PostViews",{name:"loc",hash:{},data:i}))+" &#8226; "},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='<lockup\n    selectable="true"\n    class="view-profile author-lockup"\n    data-content-id="'+o(r(null!=(a=null!=t?t.author:t)?a.id:a,t))+'"\n    data-preview-id="'+o(r(null!=(a=null!=t?t.author:t)?a.id:a,t))+'"\n    ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n\n",a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.avatar:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.author:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.timeSincePost:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</lockup>\n\n"},useData:!0})},{"hbsfy/runtime":338}],132:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda;return'<background>\n    <img\n        class="gradient"\n        style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n        srcset="'+o(l(null!=(a=null!=t?t.heroImage:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.heroImage:t)?a.dpr:a,t))+'"\n        width="'+o(l(null!=(a=null!=t?t.heroImage:t)?a.width:a,t))+'"\n        height="'+o(l(null!=(a=null!=t?t.heroImage:t)?a.height:a,t))+'"/>\n</background>'},useData:!0})},{"hbsfy/runtime":338}],133:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; background-color: "+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='<badge\n    class="badge"\n    text="'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.badge:t,{name:"toUpperCase",hash:{},data:i}))+'"\n    ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+">\n</badge>\n"},useData:!0})},{"hbsfy/runtime":338}],134:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<filterBar class="follow-bar" pin="1">\n    <text class="align-left" maxLines="0">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.ColdStart.Status",{name:"loc",hash:{},data:i}))+'</text>\n    <button bit-hit="true" class="done-following align-right tint-color"><b>'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.ColdStart.DoneButton",{name:"loc",hash:{},data:i}))+"</b></button>\n</filterBar>"},useData:!0})},{"hbsfy/runtime":338}],135:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,(a=(a=(a=i&&i.root)&&a.post)&&a.heroImage)&&a.isDark,{name:"getHighContrastColor",hash:{},data:i}))+';"'},3:function(t,e,n,i){var a,r=e.helperMissing,o=" ";return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.author:t)?a.fromBand:a,{name:"escapeText",hash:{},data:i}),null!=a&&(o+=a),o},5:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda;return'<span style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,(a=(a=(a=i&&i.root)&&a.post)&&a.heroImage)&&a.isDark,.3,{name:"getHighContrastColor",hash:{},data:i}))+'"> @'+o(l(null!=(a=null!=t?t.author:t)?a.handle:a,t))+"</span>"},7:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,(a=(a=(a=i&&i.root)&&a.post)&&a.heroImage)&&a.isDark,.7,{name:"getHighContrastColor",hash:{},data:i}))+';"'},9:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,o=e.helperMissing;return'        <actions>\n            <button\n                data-comment-id="'+r(a(null!=t?t.id:t,t))+'"\n                class="delete-comment"\n                >'+r((e.loc||t&&t.loc||o).call(t,"FUSE.Connect.Detail.DeleteSwipe",{name:"loc",hash:{},data:i}))+"</button>\n        </actions>\n"},11:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.reportCommentEnabled:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},12:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,o=e.helperMissing;return'        <actions>\n            <button\n                data-comment-id="'+r(a(null!=t?t.id:t,t))+'"\n                class="report-comment"\n                >'+r((e.loc||t&&t.loc||o).call(t,"FUSE.Connect.Detail.ReportSwipe",{name:"loc",hash:{},data:i}))+"</button>\n        </actions>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='<lockup id="'+o(r(null!=t?t.id:t,t))+'" class="comment-lockup">\n    <spacer/>\n    <spacer/>\n    ';return a=(e.margin||t&&t.margin||l).call(t,"2pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+='\n    <title\n        data-content-id="'+o(r(null!=(a=null!=t?t.owner:t)?a.entityId:a,t))+'"\n        class="comment-title view-profile"\n        maxLines="2"\n        ',a=e["if"].call(t,(a=(a=i&&i.root)&&a.post)&&a.heroImage,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n        >",a=(e.escapeText||t&&t.escapeText||l).call(t,null!=(a=null!=t?t.author:t)?a.name:a,{name:"escapeText",hash:{},data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.admin:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.handle:a,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="</title>\n    ",a=(e.margin||t&&t.margin||l).call(t,"3pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+='\n    <text\n        maxLines="20"\n        class="comment-text"\n        ',a=e["if"].call(t,(a=(a=i&&i.root)&&a.post)&&a.heroImage,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n        >"+o(r(null!=t?t.message:t,t))+'</text>\n\n    <spacer />\n    <label\n        class="comment-time"\n        ',a=e["if"].call(t,(a=(a=i&&i.root)&&a.post)&&a.heroImage,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n        >"+o(r(null!=t?t.timeSincePost:t,t))+"</label>\n\n",a=e["if"].call(t,null!=t?t.hasDeletePower:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(s+=a),s+="    ",a=(e.margin||t&&t.margin||l).call(t,"2pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+"\n</lockup>\n\n"},useData:!0})},{"hbsfy/runtime":338}],136:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'<lockup id="more-comments" class="more-comments">\n    <header>\n        <title class="comment-count">\n            <text id="count">'+l((a=null!=(a=e.remainingCountText||(null!=t?t.remainingCountText:t))?a:o,typeof a===r?a.call(t,{name:"remainingCountText",hash:{},data:i}):a))+"</text>\n        </title>\n    </header>\n</lockup>"},useData:!0})},{"hbsfy/runtime":338}],137:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression;return'<divider id="'+s((r=null!=(r=e.className||(null!=t?t.className:t))?r:l,typeof r===o?r.call(t,{name:"className",hash:{},data:i}):r))+'" style="background-color:'+s((e.hexToRgb||t&&t.hexToRgb||l).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; border-color: "+s((e.getHighContrastColor||t&&t.getHighContrastColor||l).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.isDark:a,"0.3",{name:"getHighContrastColor",hash:{},data:i}))+';"/>'},useData:!0})},{"hbsfy/runtime":338}],138:[function(t,e,n){var i=t("itml").utils.Handlebars,a={background:t("./background.hbs"),coldstartStatus:t("./coldstart_status.hbs"),comment:t("./comment.hbs"),post:t("./post.hbs"),author:t("./author.hbs"),badge:t("./badge.hbs"),message:t("./message.hbs"),social:t("./social.hbs"),track:t("./track.hbs"),playlist:t("./playlist.hbs"),product:t("./product.hbs"),profile:t("./profile.hbs"),video:t("./video.hbs"),photo:t("./photo.hbs"),postActions:t("./post_actions.hbs"),soundbite:t("./soundbite.hbs"),uploadedAudio:t("./uploaded_audio.hbs"),uploadedVideo:t("./uploaded_video.hbs"),commentCount:t("./comment_count.hbs"),editorialLockup:t("./lockup-editorial.hbs"),recommendation:t("./recommendation.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./author.hbs":131,"./background.hbs":132,"./badge.hbs":133,"./coldstart_status.hbs":134,"./comment.hbs":135,"./comment_count.hbs":136,"./lockup-editorial.hbs":139,"./message.hbs":140,"./photo.hbs":142,"./playlist.hbs":143,"./post.hbs":144,"./post_actions.hbs":145,"./product.hbs":146,"./profile.hbs":147,"./recommendation.hbs":148,"./social.hbs":149,"./soundbite.hbs":150,"./track.hbs":151,"./uploaded_audio.hbs":152,"./uploaded_video.hbs":153,"./video.hbs":154,itml:355}],139:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return"view-profile"},3:function(t,e,n,i){return"action-lockup"},5:function(t,e,n,i){return"align-center"},7:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},9:function(t,e,n,i){return'selectable="true"'},11:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.background:t)?a.bgColorComplement:a,{name:"hexToRgb",hash:{},data:i}))+';"'},13:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'data-connect-id="'+l((a=null!=(a=e.connectId||(null!=t?t.connectId:t))?a:o,typeof a===r?a.call(t,{name:"connectId",hash:{},data:i}):a))+'"'},15:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,"","curator-avatar",{name:"productArtwork",hash:{},data:i}))+"\n"},17:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.track:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.program(20,i),data:i}),null!=a&&(r+=a),r},18:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"            "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},20:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"            "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+"\n"},22:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <title\n            class="editorial-title"\n            ';return a=e["if"].call(t,null!=t?t.titleMaxLines:t,{name:"if",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n            ",a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(25,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n            >"+s((r=null!=(r=e.title||(null!=t?t.title:t))?r:l,typeof r===o?r.call(t,{name:"title",hash:{},data:i}):r)),a=e["if"].call(t,null!=t?t.showExplicitBadge:t,{name:"if",hash:{},fn:this.program(27,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"</title>\n"},23:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'maxLines="'+l((a=null!=(a=e.titleMaxLines||(null!=t?t.titleMaxLines:t))?a:o,typeof a===r?a.call(t,{name:"titleMaxLines",hash:{},data:i}):a))+'"'},25:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';"'},27:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'<badge style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" class="explicit-badge" src="resource://explicit"/>'},29:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"\n            >"+s((r=null!=(r=e.line1||(null!=t?t.line1:t))?r:l,typeof r===o?r.call(t,{name:"line1",hash:{},data:i}):r))+"</subtitle>\n"},30:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},32:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"\n            >"+s((r=null!=(r=e.line2||(null!=t?t.line2:t))?r:l,typeof r===o?r.call(t,{name:"line2",hash:{},data:i}):r))+"</subtitle>\n"},34:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"\n            >"+s((r=null!=(r=e.line3||(null!=t?t.line3:t))?r:l,typeof r===o?r.call(t,{name:"line3",hash:{},data:i}):r))+"</subtitle>\n"},36:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"\n            >"+o((e.getYearFromDate||t&&t.getYearFromDate||r).call(t,null!=t?t.date:t,{name:"getYearFromDate",hash:{},data:i}))+"</subtitle>\n"},38:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"\n            >"+o((e.first||t&&t.first||r).call(t,null!=t?t.list:t,{name:"first",hash:{},data:i}))+"</subtitle>\n"},40:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='        <badge class="badge"\n            text="'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.badge:t,{name:"toUpperCase",hash:{},data:i}))+'"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(41,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+">\n        </badge>\n"},41:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; background-color: "+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,.9,{name:"getHighContrastColor",hash:{},data:i}))+';"'},43:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='        <button\n            type="image"\n            selectable="true"\n            big-hit="true"\n            data-content-id="'+o(r(null!=t?t.id:t,t))+'"\n            class="editorial-button action-button">\n            <img\n                class="editorial-button-image"\n                ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(44,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'\n                src="resource://UniversalActionControl">\n            </img>\n        </button>\n'},44:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="itml-img-mask-color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},46:function(t,e,n,i,a){var r,o='        <button\n            type="image"\n            big-hit="true"\n            class="editorial-button view-profile">\n            <img\n                class="editorial-button-image"\n                ';return r=e["if"].call(t,null!=t?t.background:t,{name:"if",hash:{},fn:this.program(47,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+'\n                src="resource://chevronRight">\n            </img>\n        </button>\n'},47:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="itml-img-mask-color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[1]?a[1].background:a[1])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c='<lockup\n    type="editorial"\n    class="editorial-lockup ';return r=e["if"].call(t,null!=t?t.profile:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.program(3,i,a),data:i}),null!=r&&(c+=r),c+=" ",r=e["if"].call(t,null!=t?t.product:t,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='"\n    data-content-id="'+l(o(null!=t?t.id:t,t))+'"\n    ',r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n    ",r=e["if"].call(t,null!=t?t.selectable:t,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n    ",r=e["if"].call(t,null!=(r=null!=t?t.background:t)?r.bgColorComplement:r,{name:"if",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n    ",r=e["if"].call(t,null!=t?t.connectId:t,{name:"if",hash:{},fn:this.program(13,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n    ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+=">\n\n",r=e["if"].call(t,null!=t?t.profile:t,{name:"if",hash:{},fn:this.program(15,i,a),inverse:this.program(17,i,a),data:i}),null!=r&&(c+=r),
c+="\n\n",r=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(22,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(29,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.line2:t,{name:"if",hash:{},fn:this.program(32,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.line3:t,{name:"if",hash:{},fn:this.program(34,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.date:t,{name:"if",hash:{},fn:this.program(36,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.list:t,{name:"if",hash:{},fn:this.program(38,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.badge:t,{name:"if",hash:{},fn:this.program(40,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.track:t,{name:"if",hash:{},fn:this.program(43,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.profile:t,{name:"if",hash:{},fn:this.program(46,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"\n</lockup>"},useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],140:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o='<description\n    maxLines="0"\n    class="message-text"\n    ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="\n    >",a=(e.formatMentionsAndUrls||t&&t.formatMentionsAndUrls||r).call(t,null!=t?t.message:t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,{name:"formatMentionsAndUrls",hash:{},data:i}),null!=a&&(o+=a),o+="</description>\n",a=(e.margin||t&&t.margin||r).call(t,"5pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o},useData:!0})},{"hbsfy/runtime":338}],141:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'    <button type="imageText" id="post" class="post-button align-right"><img class="social-icon" src="resource://post" width="13" height="19" /></button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c="<title>"+s((r=null!=(r=e.name||(null!=t?t.name:t))?r:l,typeof r===o?r.call(t,{name:"name",hash:{},data:i}):r))+"</title>\n";return a=e["if"].call(t,null!=t?t.hasPostPermission:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c},useData:!0})},{"hbsfy/runtime":338}],142:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c=this.lambda,u='<lockup\n    type="editorial"\n    selectable="true"\n    data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n    class="view-detail"\n    ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(u+=a),u+'>\n\n    <img\n        class="view-detail align-center"\n        data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        width="'+s(c(null!=(a=null!=(a=null!=t?t.photo:t)?a.image:a)?a.width:a,t))+'"\n        height="'+s(c(null!=(a=null!=(a=null!=t?t.photo:t)?a.image:a)?a.height:a,t))+'"\n        srcset="'+s(c(null!=(a=null!=(a=null!=t?t.photo:t)?a.image:a)?a.url:a,t))+" "+s(c(null!=(a=null!=(a=null!=t?t.photo:t)?a.image:a)?a.dpr:a,t))+'">\n    </img>\n</lockup>\n'},useData:!0})},{"hbsfy/runtime":338}],143:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c='    <lockup\n        class="action-lockup"\n        selectable="true"\n        data-content-id="'+l(o(null!=(r=null!=a[1]?a[1].target:a[1])?r.id:r,t))+'"\n        data-preview-id="'+l(o(null!=(r=null!=a[1]?a[1].target:a[1])?r.id:r,t))+'">\n        '+l((e.heroArtwork||t&&t.heroArtwork||s).call(t,t,!1,(r=i&&i.root)&&r.artworkMap,{name:"heroArtwork",hash:{},data:i}))+'\n    </lockup>\n    <lockup\n        type="caption"\n        selectable="true"\n        class="action-lockup"\n        data-content-id="'+l(o(null!=(r=null!=a[1]?a[1].target:a[1])?r.id:r,t))+'"\n        data-preview-id="'+l(o(null!=(r=null!=a[1]?a[1].target:a[1])?r.id:r,t))+'"\n        ';return r=e["if"].call(t,null!=(r=null!=a[1]?a[1].heroImage:a[1])?r.bgColorComplement:r,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n        ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+='>\n        <title\n            class="caption-title playlist-title lockup-subtitle"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n            >"+l((e.toUpperCase||t&&t.toUpperCase||s).call(t,null!=t?t.name:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n        ",r=(e.margin||t&&t.margin||s).call(t,"2pt",{name:"margin",hash:{},data:i}),null!=r&&(c+=r),c+='\n        <subtitle\n            maxLines="1"\n            class="caption-subtitle playlist-subtitle lockup-subtitle"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"\n            >"+l((e.toUpperCase||t&&t.toUpperCase||s).call(t,null!=t?t.playlistBy:t,{name:"toUpperCase",hash:{},data:i}))+'</subtitle>\n\n        <button\n            type="play"\n            class="play-button cover-button editorial-button"\n            data-content-id="'+l(o(null!=t?t.id:t,t))+'">\n            <title>'+l((e.loc||t&&t.loc||s).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n        </button>\n    </lockup>\n"},2:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.bgColorComplement:r,{name:"hexToRgb",hash:{},data:i}))+';"'},4:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,{name:"getHighContrastColor",hash:{},data:i}))+';"'},6:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],144:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a;return a=this.invokePartial(n.message,"","message",t,void 0,e,n,i),null!=a?a:""},3:function(t,e,n,i){var a;return a=this.invokePartial(n.photo,"","photo",t,void 0,e,n,i),null!=a?a:""},5:function(t,e,n,i){var a;return a=this.invokePartial(n.track,"","track",t,void 0,e,n,i),null!=a?a:""},7:function(t,e,n,i){var a;return a=this.invokePartial(n.product,"","product",t,void 0,e,n,i),null!=a?a:""},9:function(t,e,n,i){var a;return a=this.invokePartial(n.playlist,"","playlist",t,void 0,e,n,i),null!=a?a:""},11:function(t,e,n,i){var a;return a=this.invokePartial(n.profile,"","profile",t,void 0,e,n,i),null!=a?a:""},13:function(t,e,n,i){var a;return a=this.invokePartial(n.video,"","video",t,void 0,e,n,i),null!=a?a:""},15:function(t,e,n,i){var a;return a=this.invokePartial(n.uploadedVideo,"","uploadedVideo",t,void 0,e,n,i),null!=a?a:""},17:function(t,e,n,i){var a;return a=this.invokePartial(n.uploadedAudio,"","uploadedAudio",t,void 0,e,n,i),null!=a?a:""},19:function(t,e,n,i){var a;return a=this.invokePartial(n.soundbite,"","soundbite",t,void 0,e,n,i),null!=a?a:""},21:function(t,e,n,i){var a,r=e.helperMissing,o="    ";return a=(e.margin||t&&t.margin||r).call(t,"2",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+"\n"},23:function(t,e,n,i){var a,r=e.helperMissing,o="    ";return a=(e.margin||t&&t.margin||r).call(t,"20pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.message:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.photo:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.track:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.song:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.album:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.radio:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.playlist:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.brand:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.curator:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.artist:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.genre:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.video:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.musicVideo:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.uploadedVideo:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.uploadedAudio:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.soundbite:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=this.invokePartial(n.social,"","social",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.playlist:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.program(23,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],145:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='<button big-hit="true"\n        data-connect-id="'+o(r(null!=(a=null!=t?t.postActions:t)?a.id:a,t))+'"\n        data-target-id="'+o(r(null!=(a=null!=t?t.postActions:t)?a.targetId:a,t))+'"\n        data-target-type="'+o(r(null!=(a=null!=t?t.postActions:t)?a.targetType:a,t))+'"\n    ';return a=e["if"].call(t,null!=(a=null!=t?t.post:t)?a.heroImage:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'\n    class="message-text '+o(r(null!=(a=null!=t?t.postActions:t)?a.className:a,t))+' post-action-text">'+o(r(null!=(a=null!=t?t.postActions:t)?a.text:a,t))+"</button>"},useData:!0})},{"hbsfy/runtime":338}],146:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=t?t.playlist:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.program(4,i,a),data:i}),null!=r&&(o+=r),o},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        "+r((e.heroArtwork||t&&t.heroArtwork||a).call(t,t,{name:"heroArtwork",hash:{},data:i}))+"\n"},4:function(t,e,n,i,a){var r,o="";return r=this.invokePartial(n.editorialLockup,"        ","editorialLockup",t,{product:"true",date:null!=t?t.releaseDate:t,line1:null!=t?t.albumBy:t,titleMaxLines:2,title:null!=t?t.name:t,connectId:null!=a[1]?a[1].id:a[1],background:null!=a[2]?a[2].heroImage:a[2],selectable:"true"},e,n,i),null!=r&&(o+=r),o},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],147:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o="";return r=this.invokePartial(n.editorialLockup,"    ","editorialLockup",t,{profile:"true",list:null!=t?t.genreNames:t,title:null!=t?t.name:t,connectId:null!=a[1]?a[1].id:a[1],background:null!=a[1]?a[1].heroImage:a[1],selectable:"true"},e,n,i),null!=r&&(o+=r),o+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],148:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return" lockup-disabled"},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <img\n            class="view-profile curator-avatar"\n            data-content-id="'+o(r(null!=t?t.entityId:t,t))+'"\n            width="'+o(r(null!=(a=null!=t?t.avatarImage:t)?a.width:a,t))+'"\n            height="'+o(r(null!=(a=null!=t?t.avatarImage:t)?a.height:a,t))+'"\n            srcset="'+o(r(null!=(a=null!=t?t.avatarImage:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.avatarImage:t)?a.dpr:a,t))+'">\n        </img>\n'},5:function(t,e,n,i){return'toggled="true"'},7:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return o(r((a=i&&i.root)&&a.followingText,t))},9:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return o(r((a=i&&i.root)&&a.followText,t))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='<lockup\n    class="view-profile recommended-lockup ';return a=e["if"].call(t,(a=i&&i.root)&&a.lockupPressStateDisabled,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='"\n    data-content-id="'+o(r(null!=t?t.entityId:t,t))+'">\n\n',a=e["if"].call(t,null!=t?t.avatarImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='\n    <title maxLines="0" class="recommended-text view-profile" data-content-id="'+o(r(null!=t?t.entityId:t,t))+'">\n        <text>'+o(r(null!=t?t.name:t,t))+'</text>\n    </title>\n\n    <button\n        type="thin"\n        sub-type="toggle"\n        class="follow-button"\n        toggled-text="'+o(r((a=i&&i.root)&&a.followingText,t))+'"\n        non-toggled-text="'+o(r((a=i&&i.root)&&a.followText,t))+'"\n        ',a=e["if"].call(t,(a=i&&i.root)&&a.toggled,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='\n        toggle-id="'+o(r(null!=t?t.entityId:t,t))+'"\n        data-entity-id="'+o(r(null!=t?t.entityId:t,t))+'"\n        data-entity-type="'+o(r(null!=t?t.entityType:t,t))+'">\n        <title>',a=e["if"].call(t,(a=i&&i.root)&&a.toggled,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(l+=a),l+"</title>\n    </button>\n</lockup>\n"},useData:!0})},{"hbsfy/runtime":338}],149:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="itml-img-mask-color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},3:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},5:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return" "+r((e.numberWithCommas||t&&t.numberWithCommas||a).call(t,null!=t?t.commentCount:t,{name:"numberWithCommas",hash:{},data:i}))+" "},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return" "+r((e.numberWithCommas||t&&t.numberWithCommas||a).call(t,null!=t?t.shareCount:t,{name:"numberWithCommas",hash:{},data:i}))+" "},9:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c=this.lambda,u='        <button\n            type="imagetext"\n            data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n            data-target-id="'+s(c(null!=(a=null!=t?t.target:t)?a.id:a,t))+'"\n            class="share-button social-button">\n            <text\n                class="social-text"\n                ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+"\n                >"+s((r=null!=(r=e.playCount||(null!=t?t.playCount:t))?r:l,typeof r===o?r.call(t,{name:"playCount",hash:{},data:i}):r))+"</text>\n        </button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o=this.escapeExpression,l="function",s=e.helperMissing,c=this.lambda,u='<list class="social-list">\n    <button\n        type="imagetext"\n        sub-type="toggle"\n        big-hit="true"\n        auto-increment-count="true"\n        toggled="'+o(e.lookup.call(t,(a=i&&i.root)&&a.likesData,null!=t?t.id:t,{name:"lookup",hash:{},data:i}))+'"\n        toggle-id="'+o((r=null!=(r=e.id||(null!=t?t.id:t))?r:s,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        data-connect-id="'+o((r=null!=(r=e.id||(null!=t?t.id:t))?r:s,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        class="like-button social-button">\n        <img\n            class="social-icon"\n            width="17" height="15"\n            ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='\n            src="resource://LoveHateControlNeutral">\n        </img>\n        <img\n            class="social-icon"\n            width="17" height="15"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='\n            src="resource://LoveHateControlLoved">\n        </img>\n        <text\n            class="social-text"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+="\n            >"+o((r=null!=(r=e.likeCount||(null!=t?t.likeCount:t))?r:s,typeof r===l?r.call(t,{name:"likeCount",hash:{},data:i}):r))+'</text>\n    </button>\n\n    <button\n        type="imagetext"\n        selectable="true"\n        big-hit="true"\n        data-connect-id="'+o((r=null!=(r=e.id||(null!=t?t.id:t))?r:s,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        data-show-keyboard="false"\n        class="comment-button social-button">\n        <img\n            class="social-icon"\n            width="19" height="17"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='\n            src="resource://comment">\n        </img>\n        <text\n            class="social-text"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+="\n            >",a=e["if"].call(t,null!=t?t.commentCount:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='</text>\n    </button>\n\n    <button\n        type="imagetext"\n        selectable="true"\n        big-hit="true"\n        data-connect-id="'+o((r=null!=(r=e.id||(null!=t?t.id:t))?r:s,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        data-target-id="'+o(c(null!=(a=null!=t?t.target:t)?a.id:a,t))+'"\n        class="share-button social-button">\n        <img\n            class="social-icon"\n            width="13" height="19"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='\n            src="resource://socialShare">\n        </img>\n        <text\n            class="social-text"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+="\n            >",a=e["if"].call(t,null!=t?t.shareCount:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+="</text>\n    </button>\n\n",a=e["if"].call(t,null!=t?t.playCount:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+"</list>\n"},useData:!0})},{"hbsfy/runtime":338}],150:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o,l=this.lambda,s=this.escapeExpression,c=e.helperMissing,u="function",h='    <lockup\n        type="editorial"\n        data-content-id="'+s(l(null!=(r=null!=a[1]?a[1].target:a[1])?r.id:r,t))+'"\n        ';return r=e["if"].call(t,null!=(r=null!=a[1]?a[1].heroImage:a[1])?r.bgColorComplement:r,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+="\n        ",r=(e["data-metrics"]||t&&t["data-metrics"]||c).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(h+=r),h+='>\n\n        <title\n            class="soundbite-title"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+="\n            >"+s((e.toUpperCase||t&&t.toUpperCase||c).call(t,null!=t?t.name:t,{name:"toUpperCase",hash:{},data:i})),r=e["if"].call(t,null!=t?t.showExplicitBadge:t,{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+'</title>\n        <button\n            type="play"\n            class="play-button cover-button editorial-button"\n            data-content-id="'+s((o=null!=(o=e.id||(null!=t?t.id:t))?o:c,typeof o===u?o.call(t,{name:"id",hash:{},data:i}):o))+'">\n            <title>'+s((e.loc||t&&t.loc||c).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n        </button>\n    </lockup>\n"},2:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.bgColorComplement:r,{name:"hexToRgb",hash:{},data:i}))+';"'},4:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,{name:"getHighContrastColor",hash:{},data:i}))+';"'},6:function(t,e,n,i,a){var r,o="<badge ";return r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+' class="explicit-badge" src="resource://explicit"/>'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o},useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],151:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o="";return r=this.invokePartial(n.editorialLockup,"    ","editorialLockup",t,{track:"true",line1:null!=t?t.artistName:t,title:null!=t?t.name:t,connectId:null!=a[1]?a[1].id:a[1],background:null!=a[1]?a[1].heroImage:a[1],selectable:"true"},e,n,i),null!=r&&(o+=r),o+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],152:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o="";return r=this.invokePartial(n.editorialLockup,"    ","editorialLockup",t,{badge:null!=a[1]?a[1].badge:a[1],track:"true",line2:null!=a[1]?a[1].ownerName:a[1],line1:null!=t?t.description:t,title:null!=t?t.name:t,connectId:null!=a[1]?a[1].id:a[1],background:null!=a[1]?a[1].heroImage:a[1],selectable:"true"},e,n,i),null!=r&&(o+=r),o},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],153:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o,l=this.lambda,s=this.escapeExpression,c=e.helperMissing,u="function",h='    <lockup\n        type="shelf"\n        selectable="true"\n        class="play-media"\n        ';return r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+='\n        data-content-id="'+s(l(null!=t?t.id:t,t))+'"\n        data-connect-id="'+s(l(null!=a[1]?a[1].id:a[1],t))+'"\n        ',r=(e["data-metrics"]||t&&t["data-metrics"]||c).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(h+=r),h+=">\n\n",r=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+='    </lockup>\n\n    <title maxLines="2"\n        class="align-center"\n        ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+="\n        >"+s((o=null!=(o=e.name||(null!=t?t.name:t))?o:c,typeof o===u?o.call(t,{name:"name",hash:{},data:i}):o))+" ",r=e["if"].call(t,null!=t?t.showExplicitBadge:t,{name:"if",hash:{},fn:this.program(8,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+"</title>\n\n"},2:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="background-color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.1,{name:"getHighContrastColor",hash:{},data:i}))+';"'},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return'            <img\n                width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'">\n                    <button\n                        type="play"\n                        class="play-media cover-button"\n                        data-content-id="'+o(r(null!=t?t.id:t,t))+'">\n                        <title>'+o((e.loc||t&&t.loc||l).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n                    </button>\n            </img>\n"},6:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},8:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'<badge style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" class="explicit-badge" src="resource://explicit"/>'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],154:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c='    <lockup\n        selectable="true"\n        class="action-lockup"\n        ';return r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n        data-content-id="'+l(o(null!=t?t.id:t,t))+'"\n        ',r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n        ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+=">\n\n",r=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='    </lockup>\n\n\n    <lockup\n        type="caption"\n        selectable="true"\n        data-content-id="'+l(o(null!=t?t.id:t,t))+'"\n        class="action-lockup caption-lockup"\n        ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(8,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='>\n\n        <title\n            class="video-title"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(10,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n            >"+l(o(null!=t?t.name:t,t)),r=e["if"].call(t,null!=t?t.showExplicitBadge:t,{name:"if",hash:{},fn:this.program(12,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='</title>\n\n        <subtitle\n            maxLines="1"\n            class="caption-subtitle video-subtitle"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(14,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"\n            >"+l(o(null!=t?t.artistName:t,t))+'</subtitle>\n\n        <button\n            type="play"\n            class="play-media cover-button caption-play-button"\n            data-content-id="'+l(o(null!=t?t.id:t,t))+'">\n            <title>'+l((e.loc||t&&t.loc||s).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n        </button>\n    </lockup>\n\n\n"},2:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="background-color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.1,{name:"getHighContrastColor",hash:{},data:i}))+';"'},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},6:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'            <img\n                disabled="true"\n                width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'">\n            </img>\n'},8:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.bgColorComplement:r,{name:"hexToRgb",hash:{},data:i}))+';"'},10:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,{
name:"getHighContrastColor",hash:{},data:i}))+';"'},12:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'<badge style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,{name:"getHighContrastColor",hash:{},data:i}))+';" class="explicit-badge" src="resource://explicit"/>'},14:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],155:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=a.pubSub,l=i.event.Event,s=t("./template.hbs"),c=t("../partials/coldstart_status.hbs"),u=t("../../base").style,h=t("../../common").traits.EventMap,d=i.controller.MultiElementController,p=t("../../common").traits.TabComponent,m=t("../../common").traits.DataProvider,f=t("../helpers.js"),g=t("../style.hbs"),s=t("./template.hbs"),b=function(t,e){t=t||{},t.styles=t.styles||[],t.styleTemplate=g,t.styles.push(new u(t)),t.events=t.events||[],t.events.push("select"),d.call(this,t,e),h.call(this,t),p.call(this,t),f.call(this,t),this.coldstartStatusBarVisible=!1,this.data=t.data,this.params=t.params,this.api=t.api||"recommendedEntities",this.pullToRefreshEnabled="false"!==t.pullToRefreshEnabled,this.followText=t.followText||r.loc("FUSE.Connect.Coldstart.Follow"),this.followingText=t.followingText||r.loc("FUSE.Connect.Coldstart.Following"),this.toggled=t.toggled,this.viewProfileEnabled=this.data&&this.data.viewProfileEnabled!==!1,this.lockupPressStateDisabled=!this.viewProfileEnabled,this.model=new m,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),a.extend(this.onSelect,{"follow-button":this.follow,"done-following":this.doneFollowing,"view-following":this.viewFollowing,"view-recommended":this.viewRecommended.bind(this)}),this.viewProfileEnabled!==!1&&(this.onSelect["view-profile"]=this.viewProfile),this.loading=!0,t.hasAutoFollowToggle?this.getUserProfile():this.fetchRecommendations()};a.inherit(b,d),a.inherit(b,h,!0),a.inherit(b,p,!0),a.inherit(b,f,!0),b.prototype.template=s,b.prototype.getUserProfile=function(){var t={user:itms.accountInfo.DSID},e=a.urls.userProfile();a.xhr({method:"GET",url:e+a.query.build(t),failure:this.handleUserProfile.bind(this),success:this.handleUserProfile.bind(this)})},b.prototype.handleUserProfile=function(t){var e=JSON.parse(t);e&&e.profile&&e.profile.autoFollowEnabled&&(this.autoFollowEnabled=!!e.profile.autoFollowEnabled),this.fetchRecommendations()},b.prototype.fetchRecommendations=function(){var t=this.params||{},e=a.urls[this.api]();this.model.fetchData({url:e+a.query.build(t),success:this.fetchRecommendationsSuccess.bind(this),failure:this.fetchRecommendationsFailure.bind(this),retries:1})},b.prototype.fetchRecommendationsSuccess=function(t){this.viewModel=[];for(var e,n=t.recommendedEntities||t.follows||[],i=0;i<n.length;i++)e=this.lookupNode(n[i]),this.viewModel.push(e);return this.viewModel},b.prototype.fetchRecommendationsFailure=function(t,e){this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},b.prototype.lookupNode=function(t){var e=t.entityId||t.targetEntityId,n=this.model.lookupContent(e,this.processNode.bind(this,t));return n},b.prototype.processNode=function(t,e){var n=a.deepClone(e),i=t.entityType||t.targetEntityType,r=n.artwork||n.latestAlbumArtwork;return r&&(n.avatarImage=this.getArtwork({kind:"follower",artwork:r}).image),n.entityId=t.entityId||t.targetEntityId,n.entityType=t.entityType||t.targetEntityType,n[i]=!0,n},b.prototype.userProfileReady=function(t){this.userProfile=t,this.handleDataReady()},b.prototype.handleDataReady=function(t){a.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.loading=!1,this.render()},b.prototype.follow=function(t){function e(t,e){this.insertColdstartStatusBar();var n=JSON.parse(e);(n&&"error"===n.status||!t)&&a.log.warn("follow request error: ",e)}var n={},i=t.target,r=!t.toggled,o=a.urls.follow(),l=a.urls.unfollow(),s=i.getAttribute("data-entity-id"),c=i.getAttribute("data-entity-type"),u=r?o:l;n[c]=s,a.xhr({method:"POST",url:u+a.query.build(n),failure:e.bind(this,!1),success:e.bind(this,!0)})},b.prototype.insertColdstartStatusBar=function(){if(!this.coldstartStatusBarVisible){var t=this.el.ownerDocument.getElementById("coldstart-statusbar-section"),e=a.parser.parse(c(),this.el.ownerDocument);t&&e&&(t.appendChild(e),this.coldstartStatusBarVisible=!0)}},b.prototype.doneFollowing=function(){o.publish("refreshConnectTab",!0)},b.prototype.viewFollowing=function(){var t={dataType:"connect_following",navigationDocument:modal,isModal:!0};this.dispatchEvent(new l("tabPush",{detail:t}))},b.prototype.viewProfile=function(t){function e(e){this.model.lookup(e)&&this.pushProduct(t)}var n=t.target.getAttribute("data-content-id"),i=this.model.lookup(n);i?this.pushProduct(t):this.model.fetchContent({contentIds:[n],profile:this.model.pageProfile,onSuccess:e.bind(this,n),onFailure:e.bind(this,n)})},b.prototype.viewRecommended=function(t){var e=t.target.ownerDocument.navigationDocument,n={data:{viewProfileEnabled:this.viewProfileEnabled},dataType:"connect_recommendations",navigationDocument:e};this.dispatchEvent(new l("tabPush",{detail:n}))},e.exports=b},{"../../../util":304,"../../base":84,"../../common":92,"../helpers.js":129,"../partials/coldstart_status.hbs":134,"../style.hbs":159,"./template.hbs":158,itml:355}],156:[function(t,e,n){var i=t("../../../util"),a=i.loc,r=t("../../base/document"),o=t("./element"),l=t("../../common").traits.TabComponent,s=function(e,n){e=e||{},e.controllers=e.controllers||[],e.name=a.loc("FUSE.Connect.Recommended");var s=i.keypath(e,"event.detail.isModal");if(e.controllers.length||(this.controller=new o(e),e.controllers.push(this.controller)),s&&(this.titleTemplate=t("./nav_title.hbs")),r.call(this,e,n),l.call(this),s){var c=function(){var t=this.el.getElementById("doneButton");t&&t.addEventListener("select",this.handleDoneButton.bind(this))};this.navigationBarController.addEventListener("render",c.bind(this)),c.call(this)}};i.inherit(s,r),i.inherit(s,l,!0),s.prototype.documentType="settingsTemplate",s.prototype.handleDoneButton=function(){modal.popDocument()},e.exports=s},{"../../../util":304,"../../base/document":83,"../../common":92,"./element":155,"./nav_title.hbs":157}],157:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"<title>"+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.Recommended",{name:"loc",hash:{},data:i}))+'</title>\n<button id="doneButton" class="hide-sheet align-right" type="done">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.DoneButton",{name:"loc",hash:{},data:i}))+"</button>"},useData:!0})},{"hbsfy/runtime":338}],158:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'    <pullToRefresh class="refresh"/>\n'},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(9,i),data:i}),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r='       <group style="padding: 0 0 0 0;">\n';return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"        </group>\n"},7:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.recommendation,"                ","recommendation",t,void 0,e,n,i),null!=a&&(r+=a),r},9:function(t,e,n,i){return"       <spacer/>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.pullToRefreshEnabled:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],159:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n"},3:function(t,e,n,i){return"        color: rgb(0,0,0);\n"},5:function(t,e,n,i){return"        background-color:rgba(255,255,255,0.15);\n"},7:function(t,e,n,i){return"        background-color:rgba(0,0,0,0.2);\n"},9:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,"0.6",{name:"hexToRgb",hash:{},data:i}))+"\n"},11:function(t,e,n,i){return"        color: rgb(0,0,0);\n        background-color:rbga(0,0,0,0.6);\n"},13:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+"\n"},15:function(t,e,n,i){return"        itml-img-mask-color:rgba(0,0,0);\n"},17:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,"0.4",{name:"hexToRgb",hash:{},data:i}))+"\n        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n"},19:function(t,e,n,i){return"        background-color: rgba(0, 0, 0, 0.4);\n        color: white;\n"},21:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,"0.4",{name:"hexToRgb",hash:{},data:i}))+"\n"},23:function(t,e,n,i){return"        background-color: rgba(0, 0, 0, 0.4);\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=".coldstart-spacer-xs {\n    itml-divider-type:borderless;\n    itml-item-height: 180pt;\n}\n\n.coldstart-spacer-s {\n    itml-divider-type:borderless;\n    itml-item-height: 230pt;\n}\n\n.coldstart-spacer-m {\n    itml-divider-type:borderless;\n    itml-item-height: 280pt;\n}\n\n.coldstart-spacer-l {\n    itml-divider-type:borderless;\n    itml-item-height: 420pt;\n}\n\n.coldstart-spacer-xl {\n    itml-divider-type:borderless;\n    itml-item-height: 420pt;\n}\n\n.coldstart-title {\n    color: rgba(0,0,0,.8);\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 28pt;\n    text-align: center;\n    max-width: 300pt;\n}\n\n.coldstart-subtitle {\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 20pt;\n    text-align: center;\n    color: rgba(0,0,0,.6);\n}\n\n.coldstart-button-list {\n    padding: 20pt 0 0 0;\n}\n\n.coldstart-subtitle-link {\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 16pt;\n    text-align: center;\n}\n\n.signin-button {\n    font-weight: medium;\n}\n\n.no-followers-title {\n   font-size: 20pt;\n   text-align: center;\n   itml-text-max-lines: 0;\n}\n\n.recommended-lockup {\n    padding: 10pt 0pt 10pt 0pt;\n}\n\n.recommended-text {\n    font-size: 16pt;\n}\n\n.feed-start-card {\n    padding: 0 0 20pt 0;\n}\n\n.feed-start-close-button {\n    itml-position: top-left;\n    padding: 16pt 0 0 4pt;\n    margin: 0 0 0 0;\n}\n\n.feed-start-title {\n    color: rgba(0,0,0,.9);\n    padding: 0 0 0 0;\n    itml-text-max-lines: 0;\n    font-size: 28pt;\n    font-weight: thin;\n    text-align: center;\n    max-width: 300pt;\n}\n\n.feed-start-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 15pt;\n    font-weight: light;\n    text-align: center;\n    color: rgb(142,142,147);\n}\n\n.feed-start-recommendations-button {\n    font-size: 13pt;\n    font-weight: bold;\n    color: tint-color;\n    border-color: tint-color;\n    border-width: 1pt;\n    border-radius: 19t;\n    padding: 10pt 32pt 10pt 32pt;\n}\n\n.feed-start-following-button {\n    font-size: 14pt;\n    font-weight: light;\n    color: tint-color;\n}\n\n.feed-start-divider {\n    padding: 0 0 0 0; margin: 0 0 0 0;\n    color:rgb(255,0,0);\n}\n\n.author-lockup {\n    margin: -5.0 0 0 0;\n}\n.author-text {\n    font-weight: normal;\n";return a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="}\n\n\n.bottom-loader {\n    max-height: 30;\n    padding: 0 0 12pt 0;\n}\n\n.large-screen-grid {\n    column-count:0;\n    itml-item-width:420;\n    border-color:rgba(255,255,255,0);\n}\n\n.connect-top {\n    padding: 50 0 0 0;\n}\n.connect-bottom {\n    padding:0 0 0 0;\n}\n.connect-last {\n    padding:0 0 1pt 0;\n}\n.social-list {\n    padding: 5pt 0 0 0;\n}\n.social-lockup {\n    itml-align: center;\n}\n.social-button {\n    itml-align:center;\n}\n.social-icon {\n    itml-img-mask-color:rgb(0,0,0);\n}\n.social-text {\n",a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="}\n.like-button {\n    padding: 0 68 0 0;\n}\n.comment-button {\n    padding: 0 0 0 0;\n}\n.share-button {\n    padding: 0 0 0 68;\n}\n\n.message-text {\n    text-align: left;\n    font-size:16pt;\n",a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="}\n.editorial-lockup {\n    itml-lockup-type: editorial;\n",a=e["if"].call(t,null!=t?t.isDark:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(r+=a),r+="}\n\n.align-center {\n    itml-position: center;\n}\n\n.editorial-title {\n",a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="    background-color: rbga(0,0,0,0);\n}\n.editorial-subtitle {\n",a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(r+=a),r+="}\n.editorial-button {\n    padding: 0 15pt 0 0;\n    itml-position:center;\n}\n.editorial-button-image {\n    padding: 10pt 10pt 10pt 10pt;\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(15,i),data:i}),null!=a&&(r+=a),r+="}\n.caption-lockup {\n    itml-lockup-type: caption;\n    background-color:rgb(192,192,192);\n}\n\n.caption-title {\n    letter-spacing: 3;\n    font-size: 13pt;\n    font-weight: medium;\n    color: rgb(0,0,0);\n    text-align: center;\n}\n\n.caption-subtitle {\n    color:rgba(0,0,0,0.7);\n    font-size: 10pt;\n}\n\n.caption-button {\n    padding:0 15pt 0 0;\n    itml-position:center;\n}\n\n.caption-play-button {\n    padding: 0 15pt 0 0;\n    itml-position: top-right;\n}\n\n.playlist-title {\n    itml-text-max-lines: 2;\n}\n\n.playlist-subtitle {\n    itml-font-style: caption2;\n    font-size: 10pt;\n    itml-text-max-lines: 2;\n}\n\n.soundbite-title {\n    font-size: 12pt;\n    font-weight: medium;\n    letter-spacing: 3;\n}\n\n.badge {\n    font-size: 11pt;\n\n    font-weight: medium;\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.program(19,i),data:i}),null!=a&&(r+=a),r+="    itml-badge-treatment: rounded;\n    itml-position: top-right;\n    padding: 0 10pt 0 0;\n}\n\n.explicit-badge {\n    font-size: 11pt;\n    font-weight: medium;\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.program(23,i),data:i}),null!=a&&(r+=a),r+"    itml-badge-treatment: rounded;\n    itml-position: top-right;\n    padding: 0 0 0 0;\n}\n\n.follow-button {\n    font-size: 12pt;\n    color: tint-color;\n    border-color: rgba(0, 0, 0, 0.2);\n    border-width: 1pt;\n    border-radius: 13t;\n    padding: 5pt 12pt 5pt 12pt;\n}\n\n.post-action-text {\n    text-align: center;\n}\n\n.top-right {\n    itml-position: top-right;\n}\n\n.comments-grid {\n    column-count: 0;\n}\n\n.comment-title {\n    itml-text-align:left;\n    font-size: 14pt\n\n}\n\n.comment-text {\n    font-size: 14pt;\n    itml-text-align:left;\n\n}\n\n.comment-time {\n    itml-align: top;\n    itml-position: top-right;\n}\n\n.comment-lockup {\n    background-color: rgba(0,0,0,0);\n}\n.comment-count {\n    itml-text-align:center;\n    text-align: center;\n    itml-align: center;\n    color:tint-color;\n}\n\n.follow-bar {\n    background-color: rgba(255,255,255,0.0);\n    padding: 0 0 0 0;\n}\n\n.done-following {\n    font-weight: bold;\n}\n\n.report-comment {\n    background-color:rgb(243,163,63);\n}\n.gradient {\n    itml-img-treatment:radial-gradient;\n    padding: 0pt, 0pt, 0pt, 0pt;\n    itml-img-fill:1;\n}\n.owner-name {\n    font-weight: normal;\n    font-size: 16pt;\n}\n.attribution-text {\n    font-weight:regular;\n}\n.view-recommended {\n    padding: 15pt 0pt 15pt 0;\n}\n.top-spacer {\n    margin: 0 0 15 0;\n}\n.bottom-spacer {\n    margin: 0 0 75pt 0;\n}\n.post-divder {\n    padding: 0 0 0 0;\n}\n.lockup-disabled {\n    background-color: rgba(0,0,0,0);\n}\n"},useData:!0})},{"hbsfy/runtime":338}],160:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../sharing"),o=t("../../util"),l=t("../common/traits/data_provider"),s=o.loc,c=function(t,e){this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("select",this.handleSelect.bind(this)),this.model=new l};c.prototype.handleSelect=function(t){var e=t.buttonIdentifier;e.indexOf("share")>-1?this.handleShare(t):e.indexOf(s.loc("FUSE.ForYou.RecommendLess"))>-1?this.handleRecommendLess(t):"header"===e&&this.handleSelectHeader(t)},c.prototype.handleSelectHeader=function(t){var e=o.keypath(t,"entityValueProvider"),n=e.valuesForEntityProperties(["kind","id"]);if("album"===n.kind){var i=n.id;if(i&&"0"!==i){var r,l=this.model.lookup(i);if(r=l?l.url:o.urls.build("album",{id:i})){var s={data:{url:r},navigationDocument:this.nativeViewController.navigationDocument};this.eventHandlers.tabPush(new a("tabPush",{detail:s}))}else o.log.error("ContextualActionsController:: no url for id",i)}}else o.log.error("ContextualActionsController: Unsupported kind: "+n.kind)},c.prototype.handleShare=function(t){this.shareController=new r({data:{event:t}}),o.keypath(this.shareController,"controller.loading")?this.shareController.addEventListener("shareDataReady",function(){this.nativeViewController.presentShareDocument(this.shareController.el,{animated:!0})}.bind(this)):this.nativeViewController.presentShareDocument(this.shareController.el,{animated:!0})},c.prototype.handleRecommendLess=function(t){var e=o.keypath(t,"entityValueProvider"),n=e.valueForEntityProperty("albumStoreID"),i=new l,a=o.urls.setRecommendationPref(-1)+"&id="+n;n&&i.fetchData({url:a,success:function(){}})},c.prototype.handleShareSubmit=function(){},e.exports=c},{"../../util":304,"../common/traits/data_provider":108,"../sharing":280,itml:355}],161:[function(t,e,n){var i=t("../../util"),a=t("./template.hbs"),r=t("../base").controller,o=function(t,e){t=t||{},this.errorMessage=t.errorMessage,this.errorTitle=t.errorTitle,r.call(this,t,e)};i.inherit(o,r),o.prototype.template=a,e.exports=o},{"../../util":304,"../base":84,"./template.hbs":163}],162:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=t("./controller"),l=function(t,e){t=t||{},t.controllers=t.controllers||[],t.watchedAttributes=t.watchedAttributes||[],t.data=t.data||{};var n,i=t.data.url;0===t.controllers.length&&(n=new o(t),t.controllers.push(n)),i&&(t.watchedAttributes.push("loadUrl"),t.loadUrl=i),r.call(this,t,e),this.navigationBarController.watchedAttributes.push("hidesShadow"),this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController.hidesShadow="1",this.navigationBarController["class"]="hidden-bar",this.navigationBarController.render()};a.inherit(l,r),l.prototype.documentType="stackTemplate",l.prototype.replaceDocument=function(t){this.tabController.navigationDocument.replaceDocument(t,this.el,{animated:!1})},e.exports=l},{"../../util":304,"./controller":161,itml:355}],163:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"	","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],164:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=t("../base").style,o=t("./style.hbs"),l=t("../common").traits.EventMap,s=i.controller.MultiElementController,c=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new r({styleTemplate:o})),t.events=t.events||[],t.events.push("select"),this.filters=t.filters,this.selectedFilter=t.selectedFilter,this.selectCallback=t.selectCallback,s.call(this,t,e),l.call(this,t),a.extend(this.onSelect,{"filter-lockup":this.selectFilter.bind(this)})};a.inherit(c,s),a.inherit(c,l,!0),c.prototype.template=t("./template.hbs"),c.prototype.selectFilter=function(t){this.selectCallback(t)},e.exports=c},{"../../util":304,"../base":84,"../common":92,"./style.hbs":166,"./template.hbs":167,itml:355}],165:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=t("./element.js"),o=t("./title.hbs"),l=a.loc,s=i.controller.DocumentController,c=function(t,e){t=t||{},t.filters=t.filters||[],t.controllers=t.controllers||[],t.selectedFilter=t.selectedFilter||"",t.name=l.loc("FUSE.TopCharts.Genres"),0===t.controllers.length&&t.controllers.push(new r({filters:t.filters,selectedFilter:t.selectedFilter,selectCallback:t.selectCallback})),s.call(this,t,e),this.cancelCallback=t.cancelCallback,this.el.getElementById("cancel").addEventListener("select",this.cancel.bind(this))};a.inherit(c,s),c.prototype.documentType="stackTemplate",c.prototype.titleTemplate=o,c.prototype.cancel=function(){this.cancelCallback()},e.exports=c},{"../../util":304,"./element.js":164,"./title.hbs":168,itml:355}],166:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".filter-lockup {\n    itml-padding: 15pt 15pt 15pt 0;\n    itml-align: left;\n}\n.filter-title {\n    font-size: 17pt;\n    color: rgb(51,51,51);\n}\n.filter-selected {\n    color: rgb(255,0,0);\n}"},useData:!0})},{"hbsfy/runtime":338}],167:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o=e.helperMissing,l="        ";return r=(e.selectorLockupItem||t&&t.selectorLockupItem||o).call(t,t,null!=a[1]?a[1].selectedFilter:a[1],{name:"selectorLockupItem",hash:{},data:i}),null!=r&&(l+=r),l+'\n        <divider class="filter-divider"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="<grid>\n";return r=e.each.call(t,null!=t?t.filters:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"</grid>"},useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],168:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"<title>"+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+'</title>\n<button type="cancel" id="cancel" class="align-right filter-selected">Cancel</button>\n'},useData:!0})},{"hbsfy/runtime":338}],169:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=t("./element"),l=t("../common").traits.TabComponent,s=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=a.loc.loc("FUSE.NavBar.ForYou"),t.classes=t.classes||[],t.classes.push("fu-page"),this.controller=new o,t.controllers.push(this.controller),r.call(this,t,e),l.call(this),this.addEventDelegates(this.controller,["replaceDocument"]),this.addEventListener("appear",this.controller.handleAppear.bind(this.controller)),this.el.addEventListener("needsmore",this.controller.handleNeedsMore.bind(this.controller)),this.controller.addEventListener("resetScrollState",this.resetScrollState.bind(this))};a.inherit(s,r),a.inherit(s,l,!0),s.prototype.documentType="stackTemplate",s.prototype.resetScrollState=function(){this.el.scrollToTop(),itms.resetStateForActiveDocument()},e.exports=s},{"../../util":304,"../common":92,"./element":170,itml:355}],170:[function(t,e,n){var i=t("itml"),a=i.utils.keypath,r=i.event.Event,o=t("../../util"),l=o.loc,s=o.pubSub,c=t("./template.hbs"),u=t("../common").traits.DataProvider,h=t("../account/onboarding/genre"),d=t("./partials"),p=i.controller.MultiElementController,m=t("../common").traits.EventMap,f=t("../common").traits.TabComponent,g=t("../base").style,b=t("./style.hbs"),v=function(t,e){t=t||{},t.styles=t.styles||[],t.entityProviders=t.entityProviders||[],t.classes=t.classes||[],t.classes.push("shelfGrid"),t.styles.push(new g({styleTemplate:b})),this.controllerName="for-you",d(),t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),t.events.push("change"),this.loading=!0,p.call(this,t,e),m.call(this,t),f.call(this),this.retries=2,this.retryTTL=3600,this.appearTTL=6e4,this.lastAppearSuccess=Date.now(),this.doRefresh=!1,this.doMore=!1,this.isOnline=""!==itms.networkConnectionType,o.extend(this.onSelect,{"more-link":this.pushUrl,"playlist-card":this.pushProduct,"play-button":this.playFromRecommendation,"sign-in-button":this.signIn}),o.extend(this.onHoldSelect,{"playlist-card":this.showActionMenu}),o.extend(this.onChange,{refresh:this.handleRefresh}),this.model=new u,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get(),s.subscribe("tasteProfileUpdated",this.handleTasteProfileUpdated.bind(this)),s.subscribe("networkChange",this.handleNetworkChange.bind(this))};o.inherit(v,p),o.inherit(v,m,!0),o.inherit(v,f,!0),v.prototype.template=c,v.prototype.artworkMap={hero:{xs:[320,193],s:[375,226],m:[414,240],l:[320,193],xl:[578,289]},cover:{crop:"sr",xs:[320,193],s:[375,226],m:[414,240],l:[485,250],xl:[656,250]},grid:{xs:[163,163],s:[200,200],m:[206,206],l:[256,256],xl:[256,256]},product:{xs:[154,154],s:[163,163],m:[196,196],l:[127,127],xl:[127,127]}},v.prototype.get=function(t){var e=this.params||{};("next"!==t||this.lastId)&&(this.requestInFlight=!0,"next"===t&&this.lastId&&(e.offsetId=this.lastId),"refresh"===t&&this.firstId&&(e.refreshOffsetId=this.firstId),this.model.fetchData({url:o.urls.build("justForYou",e),success:this.handleSuccessfulFetch.bind(this),failure:this.handleFailedFetch.bind(this),retries:this.retries,eventType:t}),t&&"tasteupdate"!==t||this.render())},v.prototype.resetLoading=function(){this.loading=!1,this.requestInFlight=!1,this.doRefresh?(this.doRefresh=!1,this.get("refresh")):this.doMore&&(this.doMore=!1,this.get("next"))},v.prototype.handleSuccessfulFetch=function(t,e){if(t.status&&"error"===t.status||t.error)return t.serviceErrorCode&&453===t.serviceErrorCode?(this.resetLoading(),this.showOnBoarding()):this.retries>0?(this.retries--,setTimeout(function(){this.model.retry()}.bind(this),this.retryTTL)):this.handleFailedFetch(t),null;if(this.resetLoading(),t.ttl&&(this.retryTTL=t.ttl),t.labels)return this.showOnBoarding(),null;if("appear"===e.eventType&&(this.lastAppearSuccess=Date.now()),this.viewModel&&"tasteupdate"!==e.eventType){var n=this.createView(t);return"refresh"!==e.eventType&&"appear"!==e.eventType||!a(t,"recommendations")||t.recommendations[0].id===this.firstId?"next"===e.eventType?(this.viewModel=this.viewModel.concat(n),this.lastId=this.getLastId(t),this.viewModel.lastId=this.lastId,this.viewModel):this.viewModel:(this.firstId=t.recommendations[0].id,this.viewModel=n,this.lastId=this.getLastId(t),this.viewModel.lastId=this.lastId,this.dispatchEvent(new r("resetScrollState")),this.viewModel)}return t.recommendations?(this.firstId=t.recommendations[0].id,this.viewModel=this.createView(t),this.lastId=this.getLastId(t),this.viewModel.lastId=this.lastId,this.dispatchEvent(new r("resetScrollState")),this.viewModel):null},v.prototype.showOnBoarding=function(){var t=new h;t.addEventListener("handleOnboardingDone",this.handleOnboardingDone.bind(this)),this.dispatchEvent(new r("replaceDocument",{detail:{document:t}}))},v.prototype.getLastId=function(t){if(t.recommendations){var e=t.recommendations.length-1;if(t.recommendations[e].hasMore)return t.recommendations[e].id}return null},v.prototype.handleOnboardingDone=function(){var t=this.el.ownerDocument.navigationDocument;t.clear();var e={dataType:"for_you_page",navigationDocument:t};this.dispatchEvent(new r("tabPush",{detail:e}))},v.prototype.createView=function(t){this.errorTitle=null,this.errorMessage=null;var e=[],n=t.unavailableContent||{};if(t.recommendations&&t.recommendations.length>0&&(e="object"==typeof t.recommendations[0].content?this.parseRecommendationsSet(t.recommendations,n):this.parseRecommendations(t.recommendations,n)),t.nfa){var i=this.parseNewFromYourArtists(t.nfa.content);e.push({newFromYourArtists:!0,title:l.loc("FUSE.ForYou.NFYA.SwooshTitle"),content:i,numColumns:2})}return e},v.prototype.parseRecommendationsSet=function(t,e){for(var n=[],i={},a=0;a<t.length;a++)i.content=this.parseRecommendations(t[a].content,e),i.recoId=t[a].id,n.push(i);return n},v.prototype.parseRecommendations=function(t,e){for(var n,i,a=t.length,r=[],l=[],s=o.screen.sizeForScreenDimension(),c="l"===s||"xl"===s?!0:!1,u=0;a>u;u++){var h=t[u],d=t[u+1],p=h.contentType.type;if(i={id:h.id,params:{type:"grid"}},"Album"!==p){n=this.model.lookupContent(i,this.processContent.bind(this)),r.length>0&&(r.length%2>0&&r.pop(),r.length>3&&l.push({albumGrid:!0,grid:!0,content:r}),r=[]);var m=d&&"Album"!==o.keypath(d,"contentType.type");n.playlist=!0,n.isEven=u%2===0,n.isOdd=u%2!==0,n.columns=c,n.showBorder=m,l.push(n)}else e[i.id]||(n=this.model.lookupContent(i,this.processContent.bind(this)),r.push(n)),u===parseInt(a-1)&&(r.length%2>0&&r.pop(),r.length>3&&l.push({albumGrid:!0,grid:!0,content:r,numColumns:r.length}),r=[])}return l},v.prototype.parseNewFromYourArtists=function(t){var e=o.screen.sizeForScreenDimension(),n={xs:4,s:4,m:4,l:5,xl:6},i=n[e];t.length>i&&(t=t.slice(0,i));for(var a,r,l=t.length,s=[],c=0;l>c;c++){var u=t[c];r={id:u.id,params:{type:"product"}},a=this.model.lookupContent(r,this.processContent.bind(this)),s.push(a)}return s},v.prototype.handleFailedFetch=function(t,e,n){this.resetLoading(),this.errorTitle=n,t=t||{},"object"==typeof e&&0===Object.keys(e).length&&(e=void 0),this.errorMessage=e||t.error||t.serviceError||l.loc("FUSE.Error.AnErrorOccurred"),this.handleDataReady()},v.prototype.handleDataReady=function(t){a(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},v.prototype.handleRefresh=function(){this.requestInFlight?this.doRefresh=!0:this.get("refresh")},v.prototype.handleTasteProfileUpdated=function(){this.get("tasteupdate")},v.prototype.handleNetworkChange=function(){this.isOnline=""!==itms.networkConnectionType,this.isOnline&&this.handleAppear(),this.render()},v.prototype.handleAppear=function(){!this.requestInFlight&&Date.now()-this.lastAppearSuccess>this.appearTTL&&this.get("appear")},v.prototype.processContent=function(t,e){var n=o.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:e}),i=o.lockup.setArtworks(t,n,this.artworkMap);return i.isExplicit=o.lockup.isExplicit(t),i[t.kind]=!0,i.playlist&&(i=o.lockup.playlistProcessCard(i)),i},v.prototype.handleNeedsMore=function(t){this.model&&"stackTemplate"===t.target.tagName&&(this.requestInFlight?this.doMore=!0:this.get("next"));

},v.prototype.playFromRecommendation=function(t){for(var e,n=t.target;n.parentNode&&(!n.getAttribute||!(e=n.getAttribute("data-reco-id")));)n=n.parentNode;t.recoId=e,this.playMedia(t)},e.exports=v},{"../../util":304,"../account/onboarding/genre":44,"../base":84,"../common":92,"./partials":173,"./style.hbs":175,"./template.hbs":176,itml:355}],171:[function(t,e,n){var i=t("itml").event.Event,a=t("../../util"),r=a.pubSub,o=t("./document"),l=t("../account/welcome/document"),s=t("../loading"),c=t("../base/tab"),u=t("../account/carrier_bundling/unlinked_for_you"),h=t("../account/migration/getting_favorites"),d=t("../account/welcome/family"),p=function(t){t=t||{},this.loading=!0,c.call(this,t),r.subscribe("serviceChange",this.checkCurrentAccountStatus.bind(this)),r.subscribe("importingFavorites",this.showGettingFavorites.bind(this)),r.subscribe("migrationComplete",this.migrationComplete.bind(this));var e=a.account.isEligibleForAppleMusic();e===!1?this.checkCurrentAccountStatus():this.handleServiceEligibility(1,itms.eligibilityForService())};a.inherit(p,c),p.prototype.checkCurrentAccountStatus=function(){a.log.warn("For You checkCurrentAccountStatus"),a.account.getSubscriptionStatus({partialResults:!0},this.handleServiceEligibility.bind(this))},p.prototype.showGettingFavorites=function(t){a.log.warn("showGettingFavorites"),t=t||{},this.handleServiceEligibility(1,{migrating:!0})},p.prototype.migrationComplete=function(){this._migrating=!1,a.account.setIsMigrationInProgress(!1)},p.prototype.handleServiceEligibility=function(t,e){if(e=e||{},a.log.warn("For You handleServiceEligibility ",t,e),e.isFinal===!0&&this.partialResults)return void(this.partialResults=!1);e.isFinal===!1&&(this.partialResults=!0);var n=this.getDocumentController(t,e);this.dispatchEvent(new i("replaceDocument",{detail:{document:n}}))},p.prototype.getDocumentController=function(t,e){var n;return e=e||{},this.loading?(n=new s,this.loading=!1):1===t&&a.account.shouldShowFamilyWelcomePage(e)?n=new d({name:TabBar.selectedTab.title}):1===t&&e&&(e.isFinal&&"unlinked"===e.carrierBundle||"eligible"===e.carrierBundle&&!itms.DSID)?(a.log.warn("Unlinked carrier bundle or Eligible number with no DSID"),n=new u({name:TabBar.selectedTab.title,data:e})):e&&e.migrating||a.account.isMigrationInProgress()?(this._migrating=!0,n=new h({name:TabBar.selectedTab.title})):1!==t||this._migrating?this._migrating||(n=new l({name:TabBar.selectedTab.title,data:{mode:"upsell",upsellIdentifier:"ForYou"},eligibilityData:{eligible:t,data:e}})):n=new o({name:TabBar.selectedTab.title}),a.log.warn("For You Controller: ",n),n},e.exports=p},{"../../util":304,"../account/carrier_bundling/unlinked_for_you":24,"../account/migration/getting_favorites":29,"../account/welcome/document":71,"../account/welcome/family":74,"../base/tab":87,"../loading":202,"./document":169,itml:355}],172:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="        <lockup ";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' type="caption" ',a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' class="nfya-lockup action-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" data-content-kind="'+o(r(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">>\n            "+o((e.productArtwork||t&&t.productArtwork||l).call(t,t,"play","no-light-art",{name:"productArtwork",hash:{},data:i}))+"\n",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(8,i),inverse:this.program(16,i),data:i}),null!=a&&(s+=a),s+"        </lockup>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return' style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" '},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},6:function(t,e,n,i){return'disabled="true"'},8:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="            <title \n";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                 maxLines="1" class="title">',a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.program(14,i),data:i}),null!=a&&(s+=a),s+="</title>\n            <subtitle \n",a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                 class="subtitle-1">'+o(r(null!=t?t.artistName:t,t))+"</subtitle>\n            <subtitle \n",a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'                 class="subtitle-2">'+o((e.getGenreName||t&&t.getGenreName||l).call(t,null!=t?t.genres:t,{name:"getGenreName",hash:{},data:i}))+o((e.getYearFromDate||t&&t.getYearFromDate||l).call(t,null!=t?t.releaseDate:t,{name:"getYearFromDate",hash:{},data:i}))+"</subtitle>\n"},9:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,.3,{name:"getHighContrastColor",hash:{},data:i}))+';"\n'},11:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=o(r(null!=t?t.name:t,t))+" <badge ";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'class="explict-badge" src="resource://explicit"/>\n                 '},12:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return' style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,.3,{name:"getHighContrastColor",hash:{},data:i}))+';" '},14:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))},16:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="            <title \n";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                 maxLines="1" class="title">',a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.program(14,i),data:i}),null!=a&&(s+=a),s+="</title>\n            <subtitle \n",a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                 class="subtitle-1">'+o(r(null!=t?t.artistName:t,t))+"</subtitle>\n            <subtitle \n",a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'                 class="subtitle-2">'+o((e.getGenreName||t&&t.getGenreName||l).call(t,null!=t?t.genres:t,{name:"getGenreName",hash:{},data:i}))+o((e.getYearFromDate||t&&t.getYearFromDate||l).call(t,null!=t?t.releaseDate:t,{name:"getYearFromDate",hash:{},data:i}))+"</subtitle>\n"},17:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';"\n'},19:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=o(r(null!=t?t.name:t,t))+" <badge ";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'class="explict-badge" src="resource://explicit"/>\n                 '},20:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return' style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" '},22:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='<grid class="album-grid grid-cols-'+s((r=null!=(r=e.numColumns||(null!=t?t.numColumns:t))?r:l,typeof r===o?r.call(t,{name:"numColumns",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"</grid>"},useData:!0})},{"hbsfy/runtime":338}],173:[function(t,e,n){var i=t("itml").utils.Handlebars,a={albumGrid:t("./albumGrid.hbs"),newFromYourArtists:t("./newFromYourArtists.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./albumGrid.hbs":172,"./newFromYourArtists.hbs":174,itml:355}],174:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <lockup type="shelf" class="action-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n                "+o((e.productArtwork||t&&t.productArtwork||l).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+'\n                <title class="" maxLines="1">\n                    <text>',a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=a&&(s+=a),s+='</text>\n                </title>\n                <subtitle class="nfya-subtitle-1">'+o(r(null!=t?t.artistName:t,t))+'</subtitle>\n                <subtitle class="nfya-subtitle-2">'+o((e.getYearFromDate||t&&t.getYearFromDate||l).call(t,null!=t?t.releaseDate:t,{name:"getYearFromDate",hash:{},data:i}))+"</subtitle>\n                ",a=(e.margin||t&&t.margin||l).call(t,"10pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+"\n            </lockup>\n"},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/>'},6:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='<section>\n    <header class="nfya-header">\n        <title class="nfya-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n    </header>\n    <grid class="nfya-grid" style="column-count: '+o(l(null!=t?t.numColumns:t,t))+';" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </grid>\n</section>"},useData:!0})},{"hbsfy/runtime":338}],175:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* common styles */\n.no-light-art {\n    itml-img-treatment: none;\n}\n\n/*for you*/\n.action-lockup {\n    itml-position: bottom;\n    itml-align: left;\n    itml-padding: 0 0 0 0;\n}\n\n.title {\n    color: rgba(255, 255, 255, 1.0);\n    font-size: 13pt;\n    itml-padding: 0pt 16pt 0pt 16pt;\n}\n\n.title-disabled {\n    color: rgba(255, 255, 255, 0.6);\n}\n\n.explicit-badge {\n    color: rgba(255, 255, 255, 1.0);\n}\n\n.explicit-badge-disabled {\n    color: rgba(255, 255, 255, 0.6);\n}\n\n.subtitle-1 {\n    color: rgba(255, 255, 255, 0.6);\n    font-size: 11pt;\n}\n\n.subtitle-2 {\n    color: rgba(255, 255, 255, 0.3);\n    font-size: 10pt;\n}\n\n.new-release-badge {\n    background-color: rgba(0, 0, 0, 0.4);\n    color: white;\n    itml-badge-treatment: rounded;\n    itml-position: left;\n}\n\n/*\n// TODO this is a hack. We are using background color and padding to get a border. Border color is the background\n// color of the document .fu-page. Need client support for this.\n*/\n.show-border {\n    padding: 0pt 0pt 1pt 0pt;\n}\n\n.fu-page {\n    background-color: rgb(255, 255, 255);\n}\n\n/* this is properly using a border color */\n.album-grid {\n    border-color: rgb(255, 255, 255);\n    padding: 0;\n}\n\n.tune-taste-button {\n    color: tint-color;\n    border-color: tint-color;\n    text-align: center;\n    font-size 20pt;\n}\n\n.card-border {\n    itml-divider-type: full;\n    itml-padding: 0pt;\n    margin: 0pt;\n    background-color: transparent;\n}\n\n.4up-grid {\n    border-color: rgba(255,255,255,0.2);\n    border-width: 1pt;\n}\n\n.nfya-grid {\n    padding: 0 16pt 0 16pt;\n    border-color: rgba(0,0,0,0);\n    itml-divider-type: borderless;\n}\n\n.nfya-lockup {\n    padding: 0;\n}\n\n.nfya-title {\n    letter-spacing: 3;\n    font-size: 13pt;\n    font-weight: medium;\n    color: rgb(0,0,0);\n    text-align: center;\n}\n\n.nfya-subtitle-1 {\n    color: rgba(0,0,0,0.6);\n}\n\n.nfya-subtitle-2 {\n    color: rgba(0,0,0,0.3);\n}\n\n.bottom-loader {\n    max-height: 30;\n    padding: 0 0 12pt 0;\n}\n\n.nfya-header {\n    padding: 16pt 0pt 16pt 0pt;\n}\n\n@media all and (max-width: 767pt) {\n    .grid-cols-4 {\n        column-count: 2;\n    }\n    .grid-cols-6 {\n        column-count: 2;\n    }\n    .nfya-grid {\n        column-count: 2;\n    }\n}\n\n@media all and (width: 768pt) {\n    .album-grid {\n        padding: 0 0 16pt 0;\n    }\n    .grid-cols-4 {\n        column-count: 4;\n        padding: 0 0 16pt 0;\n    }\n    .grid-cols-6 {\n        column-count: 3;\n        padding: 0 0 16pt 0;\n    }\n    .nfya-grid {\n        column-count: 5;\n    }\n    .playlist-card {\n        padding: 20pt 20pt 20pt 20pt;\n    }\n}\n\n@media all and (width: 1024pt) {\n    .album-grid {\n        padding: 0 0 16pt 0;\n    }\n    .grid-cols-4 {\n        column-count: 4;\n    }\n    .grid-cols-6 {\n        column-count: 6;\n    }\n    .nfya-grid {\n        column-count: 6;\n    }\n    .playlist-card {\n        padding: 20pt 20pt 20pt 20pt;\n    }\n}"},useData:!0})},{"hbsfy/runtime":338}],176:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.lastId:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <section data-reco-id="'+o(r(null!=t?t.recoId:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"section",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"	        </section>\n"},3:function(t,e,n,i){var a,r="		        ";return a=e["if"].call(t,null!=t?t.playlist:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		        ",a=e["if"].call(t,null!=t?t.albumGrid:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		        ",a=e["if"].call(t,null!=t?t.newFromYourArtists:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},4:function(t,e,n,i){var a,r=" ";return a=this.invokePartial(n.playlistCard,"","playlistCard",t,{fromHeroCover:!1},e,n,i),null!=a&&(r+=a),r+" "},6:function(t,e,n,i){var a,r=" ";return a=this.invokePartial(n.albumGrid,"","albumGrid",t,void 0,e,n,i),null!=a&&(r+=a),r+" "},8:function(t,e,n,i){var a,r=" ";return a=this.invokePartial(n.newFromYourArtists,"","newFromYourArtists",t,void 0,e,n,i),null!=a&&(r+=a),r+" "},10:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isOnline:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},11:function(t,e,n,i){return'            <activityIndicator class="bottom-loader"></activityIndicator>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<pullToRefresh class="refresh"/>\n';return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],177:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.pubSub,o=i.utils.keypath,l=t("./template.hbs"),s=t("./partials"),c=t("../base/controller"),u=i.event.Event,h=t("../base").style,d=t("./style.hbs"),p=t("../common").traits.DataProvider,m=t("../filter"),f=a.loc,g=function(t,e,n){var i=t.defaults[n];return e=e&&e.toLowerCase(),t[e]&&t[e][n]&&(i=t[e][n]),i},b=function(t,e){t=t||{},t.events=t.events||[],t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styleTemplate=d,t.styles.push(new h(t)),this.controllerName="grouping",this.documentDimensions={},s(),this.loading=!0,this.requestTTL=48e4,this.lastAppearSuccess=Date.now(),c.call(this,t,e),this.name="Grouping",this.blockIt=!1,this.hasPersonalizedFCs=!1,this.hasGradient=t.hasGradient,r.subscribe("serviceChange",this.checkForPersonalizedFCs.bind(this)),this.pageUrl=t.url,a.extend(this.onSelect,{"play-button":this.playMedia,link:this.pushUrl,song:this.playMedia,carousel:this.pushProduct,"more-link":this.pushUrl,"top-charts-more-link":this.goToTopCharts,copperRecentRadioMarker:this.showMoreRecents,"brick-lockup":this.pushUrl,"radio-live":this.handleRadioHero,"radio-hero-button":this.playMedia}),this.artworkMap={recentRadioStation:{crop:"bb",xs:[105,105],s:[123,123],m:[137,137],l:[152,152],xl:[168,168]},featuredProduct:{xs:[150,150],s:[163,163],m:[256,256],l:[256,256],xl:[256,256]},heroContent:{xs:[88,88],s:[90,90],m:[90,90],l:[120,120],xl:[120,120]},heroTall:{crop:"sr",xs:[320,320],s:[375,375],m:[410,410],l:[768,305],xl:[1024,305]},heroChild:{xs:[88,88],s:[125,125],m:[125,125],l:[80,80],xl:[80,80]},product:{xs:[105,105],s:[123,123],m:[137,137],l:[152,152],xl:[168,168]},trackShelf:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},brick:{crop:"sr",xs:[320,82],s:[375,97],m:[414,107],l:[353,96],xl:[312,96]},brickShelf:{crop:"sr",xs:[320,82],s:[375,97],m:[414,107],l:[254,160],xl:[340,160]},playlistTall:{crop:"sr",xs:[105,105],s:[125,125],m:[125,125],l:[200,200],xl:[200,200]}},this.typesForKey={recentRadioStation:["recentRadioStation"],featuredProduct:["featuredRadioStation"],heroContent:["heroContent"],heroTall:["heroTall"],brickShelf:["brickShelf"]},this.model=new p({data:t.data,pageProfile:"lockup"}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.addEventListener("dataFailed",this.handleDataFailed.bind(this)),this.get()};a.inherit(b,c),b.prototype.handleRadioHero=function(t){var e={dataType:"radio_live_station",navigationDocument:t.target.ownerDocument.navigationDocument};this.dispatchEvent(new u("tabPush",{detail:e}))},b.prototype.template=l,b.prototype.get=function(t){this.loading="appear"!==t,this.requestInFlight=!0,this.errorTitle=null,this.errorMessage=null,this.model.fetchData({url:this.pageUrl,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this),retries:1,type:t})},b.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.requestInFlight=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},b.prototype.goToTopCharts=function(t){var e=t.target,n=this.model.getData("top-charts-side-pack"),i="top_charts_page",a={data:n,dataType:i,navigationDocument:e.ownerDocument.navigationDocument};this.dispatchEvent(new u("tabPush",{detail:a}))},b.prototype.createView=function(t,e){function n(t,e,n){var i=t.link&&t.link.contentId||t.adamId||t.contentId;if(c[e]&&!l[i])return c[e](t);var a={id:i,params:{parentLabel:n}},r=c.model.lookupContent(a,c.processContent.bind(c));return r}function i(t,e){if(t){var r,h,d,p,m,f,g,b=t.length,v=!0,y=[];for(r=0;b>r;r++)if(h=t[r],l[h.contentId])a.log.warn(h.contentId+" is in unAvailableContentIds.");else if(d=h.content||h.children,p=h.fcKind,p&&(m=u[p]||a.log.warn("fcKindId "+p+" is not configured.",h)),"content"===h.type||"content"===o(h,"link.type")){if(h=n(h,m,e))if("playlist"===h.kind&&v){var w=!1;h.artworkTrackIds&&h.artworkTrackIds.length>0?w=!0:(h.image||h.logo||h.cover)&&(w=!0),w&&y.push(h)}else y.push(h)}else d&&(f=i(d,m)),c[m]&&(g=c[m](h,f,s,d),g&&y.push(g));return y}}this.screenSize=a.screen.sizeForScreenDimension(this.documentDimensions),this.errorTitle=null,this.errorMessage=null,this.data=t,e=e||{};var r=t.pageData.fcStructure.model.children,l=t.pageData.unAvailableContentIds||{},s=this.gridMaxItems(),c=this;this.markerRequests=[];var u={315:"copperMusicRoot",316:"copperHeroList",317:"copperHero",318:"copperHeroCover",319:"copperHeroSwipe",320:"copperHeroCustom",321:"copperHeroHLSStream",322:"copperLinkStack",323:"copperChartSet",324:"copperBrickBlock",325:"copperBrick",326:"copperSwoosh",327:"copperTrackSwoosh",328:"copperNotesSwoosh",329:"copperCuratorMarker",330:"copperHeroRadioMarker",331:"copperFeaturedRadioMarker",332:"copperRecentRadioMarker",347:"playlistBlock"},h=this.viewModel;return("rotate"===e.type||this.modelHasChanged(r))&&(h=i(r)),h},b.prototype.modelHasChanged=function(t){var e=JSON.stringify(t).substr(0,500);return this.currentFCRoot?this.currentFCRoot!==e?(this.currentFCRoot=e,!0):!1:(this.currentFCRoot=e,!0)},b.prototype.processContent=function(t,e){e=e||{};var n=e.type;e.parentLabel&&"copperTrackSwoosh"===e.parentLabel&&(n="song"!==t.kind?"list":n),"playlist"===t.kind&&"hero"===e.type&&(n="playlistTall");var i=a.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,artworkKeys:this.typesForKey,params:{type:n},screenSize:this.screenSize}),r=a.lockup.setArtworks(t,i,this.artworkMap,n,this.screenSize);return r.line1=a.lockup.line1(t),r.isExplicit=a.lockup.isExplicit(t),r.playlist&&(r=a.lockup.playlistProcessCard(r)),r},b.prototype.copperTrackSwoosh=function(t,e){var n={expanded:{xs:50,s:50,m:50,l:60,xl:60},compact:{xs:5,s:5,m:5,l:6,xl:6},defaults:{xs:5,s:5,m:5,l:6,xl:6}},i=g(n,t.displayStyle,this.screenSize),a=e.slice(0,i),r=e.length>a.length&&t.seeAllUrl?t.seeAllUrl:!1;return{trackShelf:!0,seeAllUrl:r,moreClass:"more-link",content:a,title:t.name||t.title,showGradient:this.hasGradient}},b.prototype.copperHeroSwipe=function(t,e){return{shelf:!0,content:e,title:t.title||t.name,displayType:"shelf",showGradient:this.hasGradient}},b.prototype.copperNotesSwoosh=function(t,e,n){var i=this.screenSize;n="xl"===i?3:2;var a=e.slice(0,n),r=e.length>a.length&&t.seeAllUrl?t.seeAllUrl:!1,o="xs"===i?"subtitle":"description";return{copperNotesSwoosh:!0,content:a,title:t.title||t.name,seeAllUrl:r,moreClass:"more-link",displayType:"copperNotesSwoosh",showGradient:this.hasGradient,descriptionTag:o}},b.prototype.copperHeroList=function(t,e){if("2"===t.displayStyle||"expanded"===t.displayStyle)for(var n=0,i=e.length;i>n;n++)if(e[n].content)for(var r=0,o=e[n].content.length;o>r;r++){var l=e[n].content[r],s=a.artwork.getArtworkForContent({content:l,artworkMap:this.artworkMap,artworkKeys:this.typesForKey,params:{type:"heroTall"},screenSize:this.screenSize});s&&(l=a.lockup.setArtworks(l,s,this.artworkMap,"heroTall",this.screenSize),l.hero=l.image)}return{copperHeroList:!0,content:e}},b.prototype.copperChartSet=function(t,e,n){n=5;var i;e=[];var a=[],r=[],o=0,l=0,s=1,c=!1,u=this.screenSize;for(this.moreTopChartsString=f.loc("FUSE.MoreTopCharts"),("xl"===u||"l"===u)&&(s=2,c=!0),o=0;o<t.children.length&&(a.push(t.children[o].seeAllUrl),r.push(t.children[o].name),i=t.children[o].links,!(o>=s));o++){e[o]={},e[o].content=[],e[o].title=t.children[o].name;var h=0;for(l=0;l<i.length&&n>h;l++){var d=this.model.lookupContent(i[l].contentId,this.processContent.bind(this));d.empty||(e[o].content.push(d),h++)}}c||(e=e[0]),this.model.setData("top-charts-side-pack",{topChartsSidePack:t.children,seeAllUrls:a,names:r});var p={seeAllUrl:a[0],moreClass:"more-link",content:e,showGradient:this.hasGradient,useMultiColumn:c,moreTopChartsString:f.loc("FUSE.MoreTopCharts")};return p.trackShelfOrdered=!0,p},b.prototype.getDesignBadgeContent=function(t,e){return(t.designBadge||t.designTag)&&(e.designBadge=t.designBadge||t.designTag),e},b.prototype.copperBrick=function(t){return t=this.processContent(t,{type:"brickShelf"})},b.prototype.copperBrickBlock=function(t,e,n){n=3,e=e.slice(0,n);var i=this.screenSize,a=!1;("xl"===i||"l"===i)&&(a=!0);var r={xs:"brick-list",s:"brick-list",m:"brick-list",l:"brick-grid",xl:"brick-grid"},o=e[e.length-1];if(o.image&&"brick-grid"===r[i]){var l=Math.round(this.documentDimensions.width/3);o.image.width=l}return{copperBrickBlock:!0,content:e,title:f.loc("FUSE.FindRightMusic"),showGradient:this.hasGradient,largeScreen:a}},b.prototype.playlistBlock=function(t){for(var e,n=t.content.slice(0,8),i=[],a=0;a<n.length;a++){var r={id:n[a].contentId,params:{type:"featuredRadioStation"}};i.push(this.model.lookupContent(r,this.processContent.bind(this)))}return{playlistBlock:!0,seeAllUrl:e,moreClass:"featuredContent",title:t.name,content:i,orientation:this.getOrientationString()}},b.prototype.copperFeaturedRadioMarker=function(t){this.hasPersonalizedFCs=!0;var e,n,i=this.screenSize,r="m"===i?9:8;if(itms.accountInfo.DSID){var o={copperFeaturedRadioMarker:!0,seeAllUrl:e,moreClass:"featuredContent",title:t.name,orientation:this.getOrientationString()},l=function(t){n=t.contentIds&&t.contentIds.slice(0,8)||[];for(var e=0;e<n.length;e++){var i={id:n[e].id,params:{type:"featuredRadioStation"}};n[e]=this.model.lookupContent(i,this.processContent.bind(this))}return this.handleMarkers(n,"copperFeaturedRadioMarker",r),n}.bind(this);if(this.featuredRadioData)o.content=this.featuredRadioData;else{var s=function(t){return this.featuredRadioData=l(t),this.viewModel}.bind(this),c=function(){this.model.fetchData({url:a.urls.radioFeatured(),success:s.bind(this),failure:this.handleFailedFetch.bind(this)})}.bind(this);this.markerRequests.push(c)}return o}n=this.data.pageData.unpersonalizedFeaturedStations;for(var u=0;u<n.length;u++)n[u]=this.model.lookupContent(n[u],this.processContent.bind(this));return{copperFeaturedRadioMarker:!0,seeAllUrl:e,moreClass:"featuredContent",title:t.name,content:n,orientation:this.getOrientationString()}},b.prototype.copperRecentRadioMarker=function(){this.hasPersonalizedFCs=!0;var t={xs:3,s:3,m:3,l:5,xl:6},e=this.screenSize,n=t[e],i=this.getOrientationString();if(itms.accountInfo.DSID){var a=function(){var t={recentRadio:{results:{}}},e={},i=function(i){if(i)for(var a=0;a<i.length;a++){i[a].kind="radioStation";var r=i[a].id;e[r]=i[a],i[a]=this.processContent(i[a],{type:"recentRadioStation"})}t.recentRadio.results=e,this.model.cacheContent(t),this.handleMarkers(i,"copperRecentRadioMarker",n)}.bind(this);RecentStationsManager.getRecentStations(null,function(t){i(t)}.bind(this)),RecentStationsManager.onUpdate=function(){this.requestInFlight||RecentStationsManager.getRecentStations(null,function(t){i(t)}.bind(this))}.bind(this)}.bind(this);this.markerRequests.push(a)}return{copperRecentRadioMarker:!0,title:f.loc("FUSE.Radio.Recents.SwooshTitle"),hideDivider:!0,orientation:i}},b.prototype.copperHeroCover=function(t){var e={id:t.link.contentId,params:{type:"hero"}},n=this.model.lookupContent(e,this.processContent.bind(this));return n.coverHero=!0,t.content=[],n=this.getDesignBadgeContent(t,n),t.listenNowText=f.loc("FUSE.Radio.ListenNowButton"),t.content.push(n),t},b.prototype.copperHeroCustom=function(t){return t.type="hero",t.custom=!0,t=this.processContent(t),t.hero=a.artwork.bestArtwork("hero",t.artwork),t},b.prototype.copperHero=function(t){var e={id:t.link.contentId,params:{type:"heroContent"}},n=this.model.lookupContent(e,this.processContent.bind(this));return t.content=[],n=this.getDesignBadgeContent(t,n),t.content.push(n),t},b.prototype.copperLinkStack=function(t){return this.genres=t.links,{genresStack:!0,genres:this.genres}},b.prototype.copperSwoosh=function(t,e,n){var i={expanded:{xs:6,s:6,m:6},compact:{xs:3,s:3,m:3,l:5,xl:6},defaults:{xs:3,s:3,m:3,l:5,xl:6}},a=g(i,t.displayStyle,this.screenSize),r=this.screenSize,o=t.id,l={sectionId:o,title:t.name||t.title,displayType:"shelf",showGradient:this.hasGradient,orientation:this.getOrientationString()};if(e&&e[0])switch(e[0].kind){case"curator":l.curatorSwoosh=!0;break;case"musicVideo":a="l"===r||"xl"===r?n:n-1,l.musicVideoSwoosh=!0;break;case"radioStation":l.radioSwoosh=!0;break;default:l.copperSwoosh=!0}var s=e.slice(0,a),c=e.length>s.length&&t.seeAllUrl?t.seeAllUrl:!1;return l.content=s,l.seeAllUrl=c,l.moreClass="more-link",l},b.prototype.copperCuratorMarker=function(t){for(var e,n=t.content,i=[],a=0;a<n.length;a++){var r={id:n[a].contentId,params:{type:"brick"}};i.push(this.model.lookupContent(r,this.processContent.bind(this)))}var o=this.screenSize,l={xs:"brick-list",s:"brick-list",m:"brick-list",l:"brick-grid",xl:"brick-grid"},s={xs:!0,s:!0,m:!0,l:!1,xl:!1},c=l[o],u=s[o],h="";return("xl"===o||"l"===o)&&(h="-largeScreen"),{playlistMarker:!0,seeAllUrl:e,title:t.name,content:i,brickListType:c,shouldHaveChevron:u,largeScreen:h}},b.prototype.handleDataFailed=function(){this.loading=!1,this.requestInFlight=!1,this.viewModel||this.render()},b.prototype.handleDataReady=function(t){if(this.loading=!1,a.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.markerRequests&&this.markerRequests.length>0){var e=this.markerRequests.shift();e.call(this)}else this.requestInFlight=!1,this.lastRequest=Date.now(),this.render()},b.prototype.handleMarkers=function(t,e,n){if(t){this.markerCallbacked=!0;var i=t.length>n;i&&(t=t.slice(0,n),this.model.setData(e,t));for(var a=0;a<this.viewModel.length;a++)this.viewModel[a][e]&&(this.viewModel[a].content=t,this.viewModel[a].seeAllUrl=i,this.viewModel[a].moreClass=e,this.viewModel[a].orientation=this.getOrientationString())}this.handleDataReady()},b.prototype.showMoreRecents=function(t){var e;RecentStationsManager.getRecentStationGroups(null,function(n){e={dataType:"recents",stations:n,navigationDocument:t.target.ownerDocument.navigationDocument},this.dispatchEvent(new u("tabPush",{detail:e}))}.bind(this))},b.prototype.authenticate=function(t){var e={button:f.loc("FUSE.SignIn"),reason:f.loc("FUSE.Radio.SignIn"),headline:f.loc("FUSE.Radio.SignIn"),callback:this.playRadioStation.bind(this,t)},n={data:e,dataType:"login",navigationDocument:modal};this.dispatchEvent(new u("tabPush",{detail:n}))},b.prototype.gridMaxItems=function(){var t=this.screenSize,e={xs:3,s:3,m:3,l:5,xl:6};return e[t]},b.prototype.checkForPersonalizedFCs=function(){this.hasPersonalizedFCs&&(this.hasPersonalizedFCs=!1,this.get())},b.prototype.showGenreFilter=function(){this.filterModal=new m({filters:this.genres,selectedFilter:this.selectedFilter,selectCallback:this.handleFilterSelection.bind(this),cancelCallback:this.handleFilterCancellation.bind(this)
}),modal.pushDocument(this.filterModal.el,{})},b.prototype.getOrientationString=function(){var t="",e=this.screenSize,n=a.screen.getCurrentOrientation(this.documentDimensions);return("xl"===e||"l"===e)&&(t="-"+n),t},b.prototype.handleFilterSelection=function(t){var e=t.target,n=e.getAttribute("data-link-url")||this.pageUrl,i=e.getAttribute("label"),a=i.replace("&","&amp;");this.selectedFilter=i;var r={selectedFilter:this.selectedFilter,name:a,url:n};this.pageUrl=n,this.get("filter"),this.render(),this.dispatchEvent(new u("genre-selected",{detail:r})),modal.popDocument()},b.prototype.handleFilterCancellation=function(){modal.popDocument()},b.prototype.handleRotation=function(t){this.documentDimensions=t;var e=this;this.data&&(clearTimeout(this.timer),this.timer=setTimeout(function(){e.model.dataSuccess(e.data,{success:e.createView.bind(e),type:"rotate"})},300))},b.prototype.handleAppear=function(t){!this.requestInFlight&&"stackTemplate"===t.target.tagName&&Date.now()-this.lastRequest>this.requestTTL&&this.get("appear")},e.exports=b},{"../../util":304,"../base":84,"../base/controller":82,"../common":92,"../filter":165,"./partials":186,"./style.hbs":194,"./template.hbs":195,itml:355}],178:[function(t,e,n){var i=t("../../util"),a=t("./controller"),r=t("../common").traits.TabComponent,o=t("../base/document"),l=function(t,e){t=t||{},t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new a({data:t.data,dataType:t.dataType}),t.controllers.push(n)),o.call(this,t,e),r.call(this)};i.inherit(l,o),i.inherit(l,r,!0),l.prototype.documentType="stackTemplate",e.exports=l},{"../../util":304,"../base/document":83,"../common":92,"./controller":177}],179:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return'<card class="radio-live beats1-hero" data-preview-id="'+o(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'" data-content-id="'+o(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'" data-content-kind="radioStation">\n	<background>\n		<img alt="'+o(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.name:a,t))+" "+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.itunesNotes:a)?a["short"]:a,t))+'" class="beats1-image" width="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.hero:a)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.hero:a)?a.height:a,t))+'" srcset="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.hero:a)?a.url:a,t))+" "+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.hero:a)?a.dpr:a,t))+'"/>\n	</background>\n	<list class="beats1-list">\n		<button alt="'+o(r(null!=t?t.listenNowText:t,t))+'" type="thin" class="radio-hero-button beats1-button" data-content-id="'+o(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'">'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=t?t.listenNowText:t,{name:"toUpperCase",hash:{},data:i}))+"</button>\n	</list>\n\n</card>"},useData:!0})},{"hbsfy/runtime":338}],180:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c='    <grid class="brick-border '+l(o(null!=t?t.brickListType:t,t))+'" ';return r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+=">\n",r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"    </grid>\n"},2:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.lambda,s=this.escapeExpression,c='        <lockup type="brick"\n';return r=e["if"].call(t,null!=(r=null!=t?t.link:t)?r.url:r,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.program(5,i,a),data:i}),null!=r&&(c+=r),c+="            ",r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"brick",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+='>\n\n            <img class="brick-linear-gradient brick-image'+s(l(null!=a[1]?a[1].largeScreen:a[1],t))+'"\n                width="'+s(l(null!=(r=null!=t?t.cover:t)?r.width:r,t))+'"\n                height="'+s(l(null!=(r=null!=t?t.cover:t)?r.height:r,t))+'"\n                srcset="'+s(l(null!=(r=null!=t?t.cover:t)?r.url:r,t))+" "+s(l(null!=(r=null!=t?t.cover:t)?r.dpr:r,t))+'"\n                alt="'+s(l(null!=t?t.name:t,t))+'">\n\n                <text class="brick-title-wrapper'+s(l(null!=a[1]?a[1].largeScreen:a[1],t))+' brick-title">\n                    <span class="brick-title">'+s((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.name:t,{name:"toUpperCase",hash:{},data:i}))+"</span>\n                </text>\n",r=e["if"].call(t,null!=a[1]?a[1].shouldHaveChevron:a[1],{name:"if",hash:{},fn:this.program(8,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"            </img>\n        </lockup>\n"},3:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression;return'                class="brick-lockup brick-grid-lockup'+l(o(null!=a[2]?a[2].largeScreen:a[2],t))+'" data-link-url="'+l(o(null!=(r=null!=t?t.link:t)?r.url:r,t))+'"\n'},5:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s='                class="action-lockup brick-grid-lockup'+l(o(null!=a[2]?a[2].largeScreen:a[2],t))+'" data-content-id="'+l(o(null!=t?t.id:t,t))+'" ';return r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+"\n"},6:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},8:function(t,e,n,i){return'                    <decorationImage class="brick-arrow" src="resource://arrow"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],181:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.largeScreen:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(5,i),data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=e.helperMissing,o='        <grid class="brick-list" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"        </grid>         \n"},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='                <lockup type="brick" class="brick-lockup" data-link-url="'+o(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"brick",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'>\n                    <img class="brick-linear-gradient"\n                    width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                    height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                    srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'"\n                    alt="'+o(r(null!=t?t.name:t,t))+'" style="itml-padding: 0 25 0 25">\n                        <text class="brick-title-wrapper-largeScreen" maxLines="3"><span data-link-url="'+o(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" class="brick-title">'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'<decorationImage class="brick-arrow" src="resource://arrow"/></span><br /><description data-link-url="'+o(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" class="brick-description">'+o(r(null!=t?t.Description:t,t))+"</description></text>\n                    </img>\n                </lockup>\n"},5:function(t,e,n,i){var a,r=e.helperMissing,o='        <grid class="brick-list" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"        </grid>\n"},6:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='                <lockup type="brick" style="padding: 0 0 0 8pt;" class="brick-lockup" data-link-url="'+o(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"brick",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'>\n                    <background data-link-url="'+o(r(null!=t?t.url:t,t))+'">\n                        <img class="brick-linear-gradient"\n                        width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                        height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                        srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'"\n                        alt="'+o(r(null!=t?t.name:t,t))+'" />\n                    </background>\n                    <title class="brick-title">'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=t?t.name:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                    <title data-link-url="'+o(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" class="brick-title">'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                    <description data-link-url="'+o(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" class="brick-description">'+o(r(null!=t?t.Description:t,t))+'</description>\n                    <decorationImage class="brick-arrow" src="resource://arrow"/>\n                </lockup>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":338}],182:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="edge-3col-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(o+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'    </grid>\n    <lockup class="ghost-divider"></lockup>\n'},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <lockup type="shelf" class="curator-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-kind="'+o(r(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'>\n                <img class="curator-avatar" width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+o(r(null!=t?t.name:t,t))+'" />\n                <title maxLines="2" class="lockup-title">\n                    <text>'+o(r(null!=t?t.name:t,t))+'</text>\n                </title>\n                <subtitle maxLines="1">\n                    <text>'+o((e.first||t&&t.first||l).call(t,null!=t?t.genreNames:t,{name:"first",hash:{},data:i}))+"</text>\n                </subtitle>\n            </lockup>\n"},3:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],183:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='        <button type="imagetext" class="'+o(r(null!=t?t.moreClass:t,t))+'" data-link-url="'+o(r(null!=t?t.seeAllUrl:t,t))+'" data-link-title="'+o(r(null!=t?t.title:t,t))+'">\n';return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(l+=a),l+'            <img class="edge-chevron" src="resource://ChevronTerms"/>\n        </button>\n'},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},4:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,"More",{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<header class="edge-header">\n';return a=e["if"].call(t,null!=t?t.seeAllUrl:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(6,i),data:i}),null!=a&&(r+=a),r+"</header>"},useData:!0})},{"hbsfy/runtime":338}],184:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='    <grid class="album-grid album-grid'+s((r=null!=(r=e.orientation||(null!=t?t.orientation:t))?r:l,typeof r===o?r.call(t,{name:"orientation",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(c+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'    </grid>\n    <lockup class="ghost-divider"></lockup>\n'},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="            <lockup ";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' type="caption" class="action-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='>\n                <img class="radio-art" width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+o(r(null!=t?t.name:t,t))+'">\n                    <button class="cover-button play-button" data-content-id="'+o(r(null!=t?t.id:t,t))+'" type=\'play\'/>\n                </img>\n                <title class="radio-featured-shelf-title"><text>'+o(r(null!=t?t.name:t,t))+'</text></title>\n                <subtitle class="radio-featured-shelf-subtitle"><text>',a=e["if"].call(t,null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(s+=a),s+"</text></subtitle>\n            </lockup>\n"},3:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"'},5:function(t,e,n,i){return'disabled="true"'},7:function(t,e,n,i){var a,r=e.helperMissing;return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,{name:"escapeText",hash:{},data:i}),null!=a?a:""},9:function(t,e,n,i){var a,r=e.helperMissing;return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.itunesNotes:t)?a.standard:a,{name:"escapeText",hash:{},data:i}),null!=a?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],185:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <carousel displayInterval="30" class="carousel" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"carousel",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"    </carousel>\n"},2:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.radioStation:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.beatsOne,"                ","beatsOne",t,void 0,e,n,i),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.playlist:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.playlistCard,"                    ","playlistCard",null!=(a=null!=t?t.content:t)?a[0]:a,{fromHeroCover:!0,isActionLockup:!0},e,n,i),null!=a&&(r+=a),r},8:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(39,i),data:i}),null!=a&&(r+=a),r+"                    </card>\n"},9:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='                        <card style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.hero:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n                        class="action-lockup"\n                        data-content-id="'+o(l(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'"\n                        data-preview-id="'+o(l(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'"\n                        data-content-kind="'+o(l(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.kind:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+">\n"},11:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='                        <card style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n                        class="link" data-link-url="'+o(l(null!=(a=null!=t?t.link:t)?a.url:a,t))+'"\n                        data-content-kind="'+o(l(null!=(a=null!=t?t.link:t)?a.kind:a,t))+'"\n                        data-link-title="'+o(l(null!=(a=null!=t?t.link:t)?a.label:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+">\n"},13:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},14:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s="                                <background>\n";return a=e["if"].call(t,null!=t?t.coverHero:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.program(17,i),data:i}),null!=a&&(s+=a),s+="                                </background>\n\n",a=e["if"].call(t,null!=t?t.designBadge:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                                <lockup type="list" class="hero-lockup hero-top album" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(21,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n",a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(23,i),inverse:this.program(28,i),data:i}),null!=a&&(s+=a),s+='                                        <subtitle style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor2:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-subtitle" maxLines="2">'+o(l(null!=t?t.artistName:t,t))+"</subtitle>\n                                        ",a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+='\n                                        <text style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-text" maxLines="2">',a=e["if"].call(t,null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,{name:"if",hash:{},fn:this.program(31,i),inverse:this.program(33,i),data:i}),null!=a&&(s+=a),s+='</text>\n                                        <img class="',a=e["if"].call(t,null!=(a=null!=t?t.hero:t)?a.isDark:a,{name:"if",hash:{},fn:this.program(35,i),inverse:this.program(37,i),data:i}),null!=a&&(s+=a),s+'" width="'+o(l(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" height="'+o(l(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" srcset="'+o(l(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'">\n                                            <button data-content-id="'+o(l(null!=t?t.id:t,t))+'" type=\'play\' class="play-button cover-button">\n                                            </button>\n                                        </img>\n                                </lockup>\n'},15:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                                        <img style="itml-img-fill: 1;" width="'+o(r(null!=(a=null!=t?t.hero:t)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=t?t.hero:t)?a.height:a,t))+'" srcset="'+o(r(null!=(a=null!=t?t.hero:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.hero:t)?a.dpr:a,t))+'" />\n'},17:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda;return'                                        <img class="gradient" style="itml-img-fill:1; background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n                                        width="'+o(l(null!=(a=null!=t?t.hero:t)?a.width:a,t))+'" height="'+o(l(null!=(a=null!=t?t.hero:t)?a.height:a,t))+'" srcset="'+o(l(null!=(a=null!=t?t.hero:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.hero:t)?a.dpr:a,t))+'" />\n'},19:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                                    <badge style="color: rgb(255,255,255); background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor2:a,{name:"hexToRgb",hash:{},data:i}))+';"\n                                    class="badge" text="'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.designBadge:t,{name:"toUpperCase",hash:{},data:i}))+'"/>\n'},21:function(t,e,n,i){return'disabled="true"'},23:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='                                        <title style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,.4,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-title" maxLines="2">';return a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(24,i),inverse:this.program(26,i),data:i}),null!=a&&(l+=a),l+"</title>\n"},24:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return o(r(null!=t?t.name:t,t))+' <badge style="color: '+o((e.hexToRgb||t&&t.hexToRgb||l).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,.4,{name:"hexToRgb",hash:{},data:i}))+';" class="explict-badge-disabled" src="resource://explicit"/>'},26:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))},28:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='                                        <title style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-title" maxLines="2">';return a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(29,i),inverse:this.program(26,i),data:i}),null!=a&&(l+=a),l+"</title>\n"},29:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return o(r(null!=t?t.name:t,t))+' <badge style="color: '+o((e.hexToRgb||t&&t.hexToRgb||l).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';" class="explict-badge" src="resource://explicit"/>'},31:function(t,e,n,i){var a,r=e.helperMissing;return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,{name:"escapeText",hash:{},data:i}),null!=a?a:""},33:function(t,e,n,i){var a,r=e.helperMissing;return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.itunesNotes:t)?a.standard:a,{name:"escapeText",hash:{},data:i}),null!=a?a:""},35:function(t,e,n,i){return" dark-art "},37:function(t,e,n,i){return" light-art "},39:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.custom:t,{name:"if",hash:{},fn:this.program(40,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},40:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.hero:t)?a.url:a,{name:"if",hash:{},fn:this.program(41,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},41:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='                                    <background>\n                                        <img class="gradient" alt="';return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.designTag:t,{name:"escapeText",hash:{},data:i}),null!=a&&(s+=a),s+='" style="itml-img-fill:1; background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n                                        width="'+o(l(null!=(a=null!=t?t.hero:t)?a.width:a,t))+'" height="'+o(l(null!=(a=null!=t?t.hero:t)?a.height:a,t))+'" srcset="'+o(l(null!=(a=null!=t?t.hero:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.hero:t)?a.dpr:a,t))+'" />\n                                    </background>\n                                    <list class="hero-design-tag">\n                                        <text style="text-align: center; color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-text" maxLines="2">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.designTag:t,{name:"escapeText",hash:{},data:i}),null!=a&&(s+=a),s+"</text>\n                                    </list>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],186:[function(t,e,n){var i=t("itml").utils.Handlebars,a={heroList:t("./heroList.hbs"),edgeHeader:t("./edgeHeader.hbs"),shelf:t("./shelf.hbs"),featuredShelf:t("./featuredShelf.hbs"),trackShelf:t("./trackShelf.hbs"),trackShelfOrdered:t("./trackShelfOrdered.hbs"),curatorSwoosh:t("./curatorSwoosh.hbs"),notesSwoosh:t("./notesSwoosh.hbs"),brickShelf:t("./brickShelf.hbs"),radioSwoosh:t("./radioSwoosh.hbs"),playlistList:t("./playlistList.hbs"),musicVideoSwoosh:t("./musicVideoSwoosh.hbs"),brickGrid:t("./brickGrid.hbs"),beatsOne:t("./beatsOne.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./beatsOne.hbs":179,"./brickGrid.hbs":180,"./brickShelf.hbs":181,"./curatorSwoosh.hbs":182,"./edgeHeader.hbs":183,"./featuredShelf.hbs":184,"./heroList.hbs":185,"./musicVideoSwoosh.hbs":187,"./notesSwoosh.hbs":188,"./playlistList.hbs":189,"./radioSwoosh.hbs":190,"./shelf.hbs":191,"./trackShelf.hbs":192,"./trackShelfOrdered.hbs":193,itml:355}],187:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="video-grid" ';return a=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(o+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'    </grid>\n    <lockup class="ghost-divider"></lockup>\n'},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'"'},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"            ","shelfLockup",t,{line1:null!=t?t.artistName:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],188:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o=e.helperMissing,l='<grid class="track-list notes-swoosh" ';return r=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=r&&(l+=r),l+=">\n",r=this.invokePartial(n.edgeHeader,"    ","edgeHeader",t,void 0,e,n,i),null!=r&&(l+=r),r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"</grid>\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'" '},4:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c='        <lockup type="editorial"\n';return r=e["if"].call(t,null!=(r=null!=t?t.artwork:t)?r.bgColor:r,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.program(7,i,a),data:i}),null!=r&&(c+=r),c+='\n            class="action-lockup editorial-lockup '+l(o(null!=t?t.kind:t,t))+'"\n            data-content-id="'+l(o(null!=t?t.id:t,t))+'"\n            ',r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n            data-link-url="'+l(o(null!=t?t.url:t,t))+'"\n            ',r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+="\n            ",r=(e.shouldDisable||t&&t.shouldDisable||s).call(t,t,{name:"shouldDisable",
hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=">\n\n            "+l((e.productArtwork||t&&t.productArtwork||s).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+"\n            <title ",r=e["if"].call(t,null!=(r=null!=t?t.artwork:t)?r.textColor1:r,{name:"if",hash:{},fn:this.program(13,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n            class="editorial-title">',r=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(15,i,a),inverse:this.program(17,i,a),data:i}),null!=r&&(c+=r),c+="</title>\n\n            <subtitle ",r=e["if"].call(t,null!=(r=null!=t?t.artwork:t)?r.textColor2:r,{name:"if",hash:{},fn:this.program(19,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n            class="editorial-subtitle">'+l(o(null!=t?t.artistName:t,t))+"</subtitle>\n\n            <"+l(o(null!=a[1]?a[1].descriptionTag:a[1],t)),r=e["if"].call(t,null!=(r=null!=t?t.artwork:t)?r.textColor1:r,{name:"if",hash:{},fn:this.program(21,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n            maxLines="2">',r=e["if"].call(t,null!=(r=null!=t?t.itunesNotes:t)?r["short"]:r,{name:"if",hash:{},fn:this.program(23,i,a),inverse:this.program(25,i,a),data:i}),null!=r&&(c+=r),c+"</"+l(o(null!=a[1]?a[1].descriptionTag:a[1],t))+">\n        </lockup>\n"},5:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.artwork:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n'},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'                style="background-color: '+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,"EEEEEE",{name:"hexToRgb",hash:{},data:i}))+';"\n'},9:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},11:function(t,e,n,i){return'disabled="true"'},13:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return' style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.artwork:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';"'},15:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/>'},17:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))},19:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return' style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.artwork:t)?a.textColor4:a,{name:"hexToRgb",hash:{},data:i}))+';"'},21:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return' style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.artwork:t)?a.textColor1:a,"0.80",{name:"hexToRgb",hash:{},data:i}))+';"'},23:function(t,e,n,i){var a,r=e.helperMissing;return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,{name:"escapeText",hash:{},data:i}),null!=a?a:""},25:function(t,e,n,i){var a,r=e.helperMissing;return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.itunesNotes:t)?a.standard:a,{name:"escapeText",hash:{},data:i}),null!=a?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"\n"},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],189:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <section class="content-section">\n        <grid ';return a=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=' class="track-list" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=this.invokePartial(n.edgeHeader,"            ","edgeHeader",t,void 0,e,n,i),null!=a&&(o+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"        </grid>\n    </section>\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'" '},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                ","listLockup",t,{line1:null!=t?t.featuredArtists:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],190:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="edge-3col-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(o+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'    </grid>\n    <lockup class="ghost-divider"></lockup>\n'},2:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"            ","listLockup",t,{line1:null!=(a=null!=t?t.genre:t)?a.name:a,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],191:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c='    <lockup class="ghost-divider"></lockup>\n    <grid class="edge-grid'+l(o(null!=a[1]?a[1].orientation:a[1],t))+'" data-section-id="'+l(o(null!=t?t.sectionId:t,t))+'" ';return r=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+=">\n",r=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=r&&(c+=r),r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"    </grid>\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'"'},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"            ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],192:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="track-list track-list-ipad" ';return a=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(o+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="    </grid>\n    ",a=(e.margin||t&&t.margin||r).call(t,"16pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+"\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'" '},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <lockup\n                style="track-lockup"\n                type="list"\n                class="track-lockup-ipad action-lockup"\n                data-content-id="'+o(r(null!=t?t.id:t,t))+'" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n\n",a=e["if"].call(t,null!=t?t.radioStation:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(16,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"            </lockup>\n"},5:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},7:function(t,e,n,i){return'disabled="true"'},9:function(t,e,n,i){return'                    <img src="resource://RadioButtonPlayIconWhite" />\n'},11:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                    "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},13:function(t,e,n,i){var a,r=e.helperMissing,o=this.lambda,l=this.escapeExpression,s='                    <title class="title';return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" maxLines="1">'+l(o(null!=t?t.name:t,t))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'" src="resource://explicit"/></title>\n'},14:function(t,e,n,i){return"-disabled"},16:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <title maxLines="1">'+r(a(null!=t?t.name:t,t))+"</title>\n"},18:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <subtitle class="subititle one-line">\n                        <span fallbackValue="'+r(a(null!=t?t.line1:t,t))+'"/>\n                    </subtitle>\n'},20:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <button type="image" class="action-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'"><img src="resource://UniversalActionControl"/></button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],193:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=t?t.useMultiColumn:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.program(22,i,a),data:i}),null!=r&&(o+=r),o},2:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(3,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+'        <button class="top-charts-button top-charts-more-link" type="thin" data-link-url="'+l(o(null!=t?t.seeAllUrl:t,t))+'">\n            <title>'+l(o(null!=a[1]?a[1].moreTopChartsString:a[1],t))+"</title>\n        </button>\n\n"},3:function(t,e,n,i,a){var r,o=e.helperMissing,l='            <split class="track-list-split">\n                <grid class="track-list-ordered" ';return r=e["if"].call(t,null!=a[1]?a[1].showGradient:a[1],{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=r&&(l+=r),l+='>\n                    <header class="edge-header">\n',r=e["if"].call(t,null!=a[1]?a[1].seeAllUrl:a[1],{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.program(8,i,a),data:i}),null!=r&&(l+=r),l+="                    </header>\n",r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(10,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"                </grid>\n            </split> \n"},4:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'style="'+l((a=null!=(a=e.getColorGridStyle||(null!=t?t.getColorGridStyle:t))?a:o,typeof a===r?a.call(t,{name:"getColorGridStyle",hash:{},data:i}):a))+'" '},6:function(t,e,n,i,a){var r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return'                            <button type="imagetext" class="top-charts-more-link" data-link-url="'+o(r(null!=a[1]?a[1].seeAllUrl:a[1],t))+'">\n                                <title class="edge-title" id=\'name\'>'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                                <img class="edge-chevron" src="resource://ChevronTerms"/>\n                            </button>\n'},8:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"                            <title class=\"edge-title\" id='name'>"+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.content:t)?a.title:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},10:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression,s=this.lambda,c='                        <lockup style="background-color: '+l((e.topChartsGetFirstBgColor||t&&t.topChartsGetFirstBgColor||o).call(t,null!=a[1]?a[1].content:a[1],i&&i.first,{name:"topChartsGetFirstBgColor",hash:{},data:i}))+';" type="list" class="top-charts-lockup track action-lockup" data-content-id="'+l(s(null!=t?t.id:t,t))+'" ';return r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+=" ",r=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='>\n                            <ordinal class="top-charts-ordinal">'+l((e.increment||t&&t.increment||o).call(t,i&&i.index,{name:"increment",hash:{},data:i}))+'</ordinal>\n                            <img class="light-art play-button" data-content-id="'+l(s(null!=t?t.id:t,t))+'" width="56" height="56" srcset="'+l(s(null!=(r=null!=t?t.image:t)?r.url:r,t))+" "+l(s(null!=(r=null!=t?t.image:t)?r.dpr:r,t))+'">\n                                <button show-on-demand="true" class="play-button cover-button middle" data-content-id="'+l(s(null!=t?t.id:t,t))+"\" type='play'/>\n                            </img>\n",r=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(13,i,a),inverse:this.program(16,i,a),data:i}),null!=r&&(c+=r),c+='                            <subtitle class="one-line">\n                                <span fallbackValue="'+l(s(null!=t?t.artistName:t,t))+'"/>\n',r=e["if"].call(t,null!=t?t.collectionName:t,{name:"if",hash:{},fn:this.program(18,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="                            </subtitle>\n",r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(20,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"                        </lockup>\n"},11:function(t,e,n,i){return'disabled="true"'},13:function(t,e,n,i){var a,r=e.helperMissing,o=this.lambda,l=this.escapeExpression,s='                                <title class="title';return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" maxLines="1">'+l(o(null!=t?t.name:t,t))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'" src="resource://explicit"/></title>\n'},14:function(t,e,n,i){return"-disabled"},16:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                                <title maxLines="1">'+r(a(null!=t?t.name:t,t))+"</title>\n"},18:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                                  <span fallbackValue="'+r(a(null!=t?t.collectionName:t,t))+'"/>\n'},20:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                            <button type="image" class="action-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'"><img class="top-charts-action-button" src="resource://UniversalActionControl"/></button>\n'},22:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.lambda,s=this.escapeExpression,c='        <grid class="track-list-ordered" ';return r=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(23,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+='>\n            <header class="edge-header">\n',r=e["if"].call(t,null!=t?t.seeAllUrl:t,{name:"if",hash:{},fn:this.program(25,i,a),inverse:this.program(27,i,a),data:i}),null!=r&&(c+=r),c+="            </header>\n",r=e.each.call(t,null!=(r=null!=t?t.content:t)?r.content:r,{name:"each",hash:{},fn:this.program(29,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+'            <button class="top-charts-button top-charts-more-link" type="thin" data-link-url="'+s(l(null!=t?t.seeAllUrl:t,t))+'">\n                <title>'+s(l(null!=t?t.moreTopChartsString:t,t))+"</title>\n            </button>\n        </grid>\n"},23:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="'+o((e.getColorGridStyle||t&&t.getColorGridStyle||r).call(t,null!=(a=null!=t?t.content:t)?a.content:a,{name:"getColorGridStyle",hash:{},data:i}))+'" '},25:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return'                    <button type="imagetext" class="top-charts-more-link" data-link-url="'+o(r(null!=t?t.seeAllUrl:t,t))+'">\n                        <title class="edge-title" id=\'name\'>'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=(a=null!=t?t.content:t)?a.title:a,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                        <img class="edge-chevron" src="resource://ChevronTerms"/>\n                    </button>\n'},27:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"                    <title class=\"edge-title\" id='name'>"+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.content:t)?a.title:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},29:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression,s=this.lambda,c='                <lockup style="background-color: '+l((e.topChartsGetFirstBgColor||t&&t.topChartsGetFirstBgColor||o).call(t,null!=a[1]?a[1].content:a[1],i&&i.first,{name:"topChartsGetFirstBgColor",hash:{},data:i}))+';" type="list" class="top-charts-lockup track action-lockup" ';return r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(30,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=' data-content-id="'+l(s(null!=t?t.id:t,t))+'" ',r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+=" ",r=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='>\n                    <ordinal class="top-charts-ordinal">'+l((e.increment||t&&t.increment||o).call(t,i&&i.index,{name:"increment",hash:{},data:i}))+'</ordinal>\n                    <img class="light-art play-button" data-content-id="'+l(s(null!=t?t.id:t,t))+'" width="56" height="56" srcset="'+l(s(null!=(r=null!=t?t.image:t)?r.url:r,t))+" "+l(s(null!=(r=null!=t?t.image:t)?r.dpr:r,t))+'">\n                        <button show-on-demand="true" class="play-button cover-button middle" data-content-id="'+l(s(null!=t?t.id:t,t))+"\" type='play'/>\n                    </img>\n",r=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(32,i,a),inverse:this.program(34,i,a),data:i}),null!=r&&(c+=r),c+='                    <subtitle class="one-line">\n                        <span fallbackValue="'+l(s(null!=t?t.artistName:t,t))+'"/>\n',r=e["if"].call(t,null!=t?t.collectionName:t,{name:"if",hash:{},fn:this.program(36,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="                    </subtitle>\n",r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(38,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"                </lockup>\n"},30:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},32:function(t,e,n,i){var a,r=e.helperMissing,o=this.lambda,l=this.escapeExpression,s='                        <title class="title';return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" maxLines="1">'+l(o(null!=t?t.name:t,t))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'" src="resource://explicit"/></title>\n'},34:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                        <title maxLines="1">'+r(a(null!=t?t.name:t,t))+"</title>\n"},36:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                          <span fallbackValue="'+r(a(null!=t?t.collectionName:t,t))+'"/>\n'},38:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <button type="image" class="action-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'"><img class="top-charts-action-button" src="resource://UniversalActionControl"/></button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],194:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".hero-title {\n    /* TODO should be able to use itml-font-style only */\n    /* itml-font-style: body; */\n    font-size: 17pt;\n    font-weight: light;\n    letter-spacing: 0;\n    /* TODO will need to get client support for line-height / leading */\n    /* line-height: 22pt; */\n    itml-padding: 0pt 16pt 0pt 16pt;\n    padding: -5.0 1.0 0.0 16.0;\n}\n\n.hero-subtitle {\n    itml-font-style: caption1;\n    /*\n    font-size: 12pt;\n    font-weight: regular;\n    letter-spacing: 0;\n    */\n}\n\n.hero-text {\n    itml-font-style: caption1;\n    /*\n    font-size: 12pt;\n    font-weight: regular;\n    letter-spacing: 0;\n    */\n    color: rgb(255, 255, 255);\n}\n\n.badge {\n    font-size: 11pt;\n    font-weight: medium;\n    background-color: rgba(0, 0, 0, 0.4);\n    color: white;\n    itml-badge-treatment: rounded;\n    itml-position: left;\n\n    /* TODO client needs to implement padding and letter spacing on badge */\n    padding: 8pt;\n    letter-spacing: 3;\n}\n\n.filter-divider {\n    margin: 10.0 16.0 0.0 16.0;\n}\n\n.filter-divider-text {\n    font-size: 17pt;\n    padding: 0.0 1.0 0.0 16.0;\n}\n\n.filter-divider-image {\n    padding: 1.0 16.0 0.0 2.0;\n}\n\n.carousel {\n    /* background-color: rgb(195, 195, 195); */\n    background-color: rgb(204, 204, 204);\n    padding: 0;\n}\n\n.gradient {\n    itml-img-treatment:radial-gradient;\n    itml-img-fill:1;\n    padding: 0pt, 0pt, 56pt, 0pt;\n}\n\n.simple-gradient {\n    itml-img-treatment:radial-gradient;\n    itml-img-fill:1;\n    padding: 0pt;\n}\n\n/* editorial */\n.editorial-lockup {\n    itml-margin: 0pt 15pt 15pt 15pt;\n    itml-lockup-type: editorial;\n    background-color: rgba(0, 0, 0, 0.2);\n}\n\n.brick-linear-gradient {\n    itml-img-treatment: left-to-right-linear-gradient;\n    itml-img-fill:1;\n    padding: 0pt;\n    /* this was approved by design */\n    background-color: linear-gradient(left, rgba(0,0,0,0.5), rgba(0,0,0,0));\n}\n\n.brick-title-wrapper {\n    itml-text-max-lines: 3;\n    itml-position: left;\n    text-align: left;\n}\n\n.brick-title {\n    color: rgb(255,255,255);\n    text-shadow: 0pt 0pt 5pt rgba(0,0,0,0.5);\n    font-size: 14pt;\n    font-weight: medium;\n    letter-spacing: 3;\n    background-color: rgba(0, 0, 0, 0);\n}\n\n.brick-description-wrapper {\n    itml-text-max-lines: 2;\n    itml-position: left;\n    text-align: left;\n}\n\n.brick-description {\n    color: rgb(255, 255, 255);\n    text-shadow: 0pt 0pt 5pt rgba(0,0,0,0.5);\n    font-size: 11pt;\n    font-weight: regular;\n    itml-text-max-lines: 2;\n}\n\n.brick-arrow {\n    color: rgb(255, 255, 255);\n    itml-img-treatment: tint;\n    itml-position: right;\n}\n\n.brick-border {\n    border-width: 1pt;\n}\n\n/* curators */\n.curator-avatar {\n    itml-img-treatment: artist-circle;\n}\n\n.curator-lockup {\n    itml-position: bottom;\n    itml-align: center;\n    background-color: rgba(0, 0, 0, 0);\n    itml-padding: 0 0pt 12pt 0pt;\n}\n\n/* radio shelf */\n.radio-lockup {\n    itml-position: bottom;\n    itml-align: center;\n    background-color: rgba(0, 0, 0, 0);\n    itml-padding: 0 0pt 12pt 0pt;\n}\n\n.album-lockup {\n    itml-position: bottom;\n    itml-align: center;\n    background-color: rgba(0, 0, 0, 0);\n    padding: 0;\n}\n\n.hero-lockup {\n    itml-padding: 6pt 16pt 16pt 16pt;\n    itml-align: center;\n}\n\n.hero-top {\n    itml-position: top;\n}\n\n/* radio */\n.radio-art {\n    color:tint-color;\n}\n\n.recent-grid {\n    itml-padding:0;\n}\n\n.recent-header {\n    border-width: 0pt;\n    border-color: rgba(0,0,0,0);\n    itml-padding: 7pt 0 7pt 15pt;\n}\n\n.recent-text {\n    font-size:13pt;\n    color: rgb(102,102,102);\n    itml-text-max-lines: 1;\n}\n\n.recent-lockup {\n   border-width: 0pt;\n   border-color: rgba(0,0,0,0);\n   itml-padding: 8pt 0 8pt 0;\n}\n\n.live-color {\n    color: rgb(255, 0, 0);\n}\n\n.listen-button {\n    color: rgb(255, 255, 255);\n    background-color: rgba(0,0,0,0.5);\n    border-width: 1pt;\n    border-radius: 13t;\n}\n\n.two-col {\n    column-count: 2;\n    border-width: 0 0 0 0;\n}\n\n.show-more-recents {\n    color: tint-color;\n}\n\n.album-grid {\n    color: rgb(255, 255, 255);\n}\n\n.ghost-divider {\n    itml-padding: 0 0 1pt 0;\n}\n\n.top-charts-button {\n    font-size: 12pt;\n    color: rgb(0,0,0);\n    border-color: rgba(0, 0, 0, 0.5);\n    border-width: 1pt;\n    border-radius: 13pt;\n    buttonType: thin;\n    padding: 5 10 5 10;\n    margin: 0 0 0 0;\n    background-color: transparent;\n    itml-align: center;\n}\n\n.top-charts-lockup {\n    itml-padding: 0 0pt 0 0pt;\n    itml-item-height:56;\n    itml-divider-type: full;\n}\n\n.top-charts-lockup-button {\n    itml-align: center; \n}\n\n.top-charts-ordinal {\n    color: rgb(0, 0, 0);\n    font-size: 15pt;\n    font-weight: regular;\n}\n\n.top-charts-action-button {\n    font-size: 15pt;\n    font-weight: regular;\n}\n\n.caption-title {\n    color: rgb(255, 255, 255);\n    font-size: 13pt;\n    itml-padding: 0pt 16pt 0pt 16pt;\n}\n\n.edge-header {\n    background-color: rgba(0,0,0,0);\n}\n\n.track-list-ordered, .track-list {\n    padding: 0;\n    margin: 0;\n}\n\n.track-list-split {\n    itml-item-width: .5;\n}\n\n.track-lockup {\n    itml-padding: 0 0pt 0 0pt;\n    itml-item-height:48;\n}\n\n.video-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 0pt 0pt 4pt;\n    itml-align: center;\n    column-count: 2;\n}\n\n.radio-hero-button {\n    font-size: 12pt;\n    border-color: rgba(255, 255, 255, 0.5);\n    border-width: 1pt;\n    border-radius: circle-caps;\n    padding: 2 10 2 10;\n    margin: 0 0 0 0;\n    background-color: transparent;\n    /* y u no work */\n    itml-position: center;\n    itml-align: center;\n    text-align: center;\n}\n\n.brick-lockup {\n    padding: 0 0 1 0;\n    margin: 0 0 0 0;\n}\n\n.brick-grid {\n    padding: 0 0 0 0;\n    margin: 2 0 2 0;\n    column-count: 2;\n    itml-item-width: 100%; \n}\n\n.brick-list {\n    padding: 0 0 0 0pt;\n    margin: 0 0 0 0pt;\n    column-count: 1;\n    itml-item-width: 100%;\n}\n\n.brick-title-wrapper-largeScreen {\n    itml-position: center;\n    text-align: center;\n    itml-text-max-lines: 3;\n    color: rgb(255, 255, 255);\n    text-shadow: 0pt 0pt 5pt rgba(0,0,0,0.5);\n    font-size: 11pt;\n    font-weight: regular;\n}\n\n.brick-image-largeScreen {\n    itml-img-treatment: brick;\n}\n\n.brick-grid-lockup-largeScreen {\n    padding: 32 16 0 16;\n    margin: 0 0 0 0;\n    border-radius: 13;\n}\n\n.album-grid-portrait {\n    column-count: 4;\n}\n\n.album-grid-landscape {\n    column-count: 4;\n}\n\n.edge-grid-portrait {\n    column-count: 5;\n}\n\n.edge-grid-landscape {\n    column-count: 6;\n}\n\n.edge-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 0pt 0pt 4pt;\n    itml-align: center;\n    column-count: 3;\n}\n\n.beats1-hero {\n    itml-card-type: billboard;\n    background-color: rgb(255, 255, 255);\n}\n\n.beats1-list {\n    itml-position: bottom;\n    padding: 0 0 40 0;\n}\n\n.beats1-button {\n    padding:6 10 6 10;\n    color: rgb(255, 255, 255);\n}\n\n.beats1-image {\n    background-color: rgb(0,0,0);\n}\n\n\n.beats1-image {\n    background-color: rgb(0,0,0);\n}\n\n.hero-design-tag {\n    padding: 180pt -10pt 0;\n    itml-text-max-lines: 2;\n}\n\n.radio-featured-shelf-title {\n    font-size: 15pt;\n    font-weight: light;\n    itml-text-max-lines: 2;\n}\n\n.radio-featured-shelf-subtitle {\n    itml-text-max-lines: 2;\n    color: rgba(255,255,255,0.6);\n}\n\n@media all and (min-width: 768) {\n    .video-grid {\n        column-count: 5;\n    }\n\n    .brick-list {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        itml-align: center;\n        column-count: 3;\n        padding: 0 8 0 8;\n        margin: 2 0 2 0;\n    }\n\n    .notes-swoosh {\n        itml-padding: 0pt 6pt 0pt 0pt;\n    }\n\n    .track-list-ipad {\n        itml-divider-type:none;\n    }\n\n    .track-lockup-ipad {\n        padding: 0 0 1pt 0;\n    }\n\n    .margin-helper {\n        /* TODO should be a better way to get rid of this border. Potential client bug here */\n        border-color: rgba(255,255,255,0);\n    }\n\n    .hero-design-tag {\n        padding: 234pt 0 0 0;\n    }\n\n}\n\n@media all and (width: 1024) {\n    .video-grid {\n        column-count: 6;\n    }\n\n    .brick-list {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        itml-item-width: 100%;\n        itml-align: center;\n        column-count: 3;\n        padding: 0 10 0 10;\n        margin: 2 0 2 0;\n    }\n\n    .track-list-ipad {\n        itml-divider-type:none;\n    }\n\n    .track-lockup-ipad {\n        padding: 0 0 1pt 0;\n    }\n\n    .margin-helper {\n        /* TODO should be a better way to get rid of this border. Potential client bug here */\n        border-color: rgba(255,255,255,0);\n    }\n\n    .hero-design-tag {\n        padding: 234pt 0 0 0;\n    }\n}";

},useData:!0})},{"hbsfy/runtime":338}],195:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(30,i),data:i}),null!=a&&(r+=a),r},4:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="            ";return a=e["if"].call(t,null!=t?t.copperHeroList:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperSwoosh:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperRecentRadioMarker:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperFeaturedRadioMarker:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.playlistBlock:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.trackShelf:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.trackShelfOrdered:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.curatorSwoosh:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperNotesSwoosh:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperBrickBlock:t,{name:"if",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.radioSwoosh:t,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.playlistList:t,{name:"if",hash:{},fn:this.program(24,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.musicVideoSwoosh:t,{name:"if",hash:{},fn:this.program(26,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.playlistMarker:t,{name:"if",hash:{},fn:this.program(28,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},6:function(t,e,n,i){var a;return a=this.invokePartial(n.heroList,"","heroList",t,void 0,e,n,i),null!=a?a:""},8:function(t,e,n,i){var a;return a=this.invokePartial(n.shelf,"","shelf",t,void 0,e,n,i),null!=a?a:""},10:function(t,e,n,i){var a;return a=this.invokePartial(n.featuredShelf,"","featuredShelf",t,void 0,e,n,i),null!=a?a:""},12:function(t,e,n,i){var a;return a=this.invokePartial(n.trackShelf,"","trackShelf",t,void 0,e,n,i),null!=a?a:""},14:function(t,e,n,i){var a;return a=this.invokePartial(n.trackShelfOrdered,"","trackShelfOrdered",t,void 0,e,n,i),null!=a?a:""},16:function(t,e,n,i){var a;return a=this.invokePartial(n.curatorSwoosh,"","curatorSwoosh",t,void 0,e,n,i),null!=a?a:""},18:function(t,e,n,i){var a;return a=this.invokePartial(n.notesSwoosh,"","notesSwoosh",t,void 0,e,n,i),null!=a?a:""},20:function(t,e,n,i){var a;return a=this.invokePartial(n.brickShelf,"","brickShelf",t,void 0,e,n,i),null!=a?a:""},22:function(t,e,n,i){var a;return a=this.invokePartial(n.radioSwoosh,"","radioSwoosh",t,void 0,e,n,i),null!=a?a:""},24:function(t,e,n,i){var a;return a=this.invokePartial(n.playlistList,"","playlistList",t,void 0,e,n,i),null!=a?a:""},26:function(t,e,n,i){var a;return a=this.invokePartial(n.musicVideoSwoosh,"","musicVideoSwoosh",t,void 0,e,n,i),null!=a?a:""},28:function(t,e,n,i){var a;return a=this.invokePartial(n.brickGrid,"","brickGrid",t,void 0,e,n,i),null!=a?a:""},30:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(31,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},31:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"            ","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],196:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,o=i.controller.MultiElementController,l=t("../common").traits.EventMap,s=t("../common").traits.TabComponent,c=t("../base").style,u=t("./style.hbs"),h=t("./template.hbs"),d=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],t.events.push("select"),o.call(this,t,e),l.call(this,t),s.call(this),a.extend(this.onSelect,{"open-url":this.openUrl});var n=t.data&&t.data.typeKey;n&&(this.learnMoreBlurb=r.locWithButtonSubstitution("FUSE.LearnMore."+n,{Link:null})),this.render()};a.inherit(d,o),a.inherit(d,l,!0),a.inherit(d,s,!0),d.prototype.template=h,e.exports=d},{"../../util":304,"../base":84,"../common":92,"./style.hbs":198,"./template.hbs":199,itml:355}],197:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,o=t("./title.hbs"),l=i.controller.DocumentController,s=t("../common").traits.TabComponent,c=t("./element"),u=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n=t.data&&t.data.typeKey;n&&(t.name=r.loc("FUSE.LearnMore."+n+".Title"));var i;0===t.controllers.length&&(i=new c(t),t.controllers.push(i)),l.call(this,t,e),s.call(this);var a=function(){var t=this.el.getElementById("dismissSheetButton");t&&t.addEventListener("select",this.dismissSheet.bind(this))};this.addEventListener("render",a.bind(this)),a.call(this)};a.inherit(u,l),a.inherit(u,s,!0),u.prototype.documentType="panelTemplate",u.prototype.titleTemplate=o,u.prototype.dismissSheet=function(){modal.popDocument()},e.exports=u},{"../../util":304,"../common":92,"./element":196,"./title.hbs":200,itml:355}],198:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".p-text {\n    itml-text-max-lines: 0;\n    font-size: 14pt;\n    margin: 20 0 20 0;\n}"},useData:!0})},{"hbsfy/runtime":338}],199:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s='<text class="p-text">';return r=null!=(r=e.learnMoreBlurb||(null!=t?t.learnMoreBlurb:t))?r:l,a=typeof r===o?r.call(t,{name:"learnMoreBlurb",hash:{},data:i}):r,null!=a&&(s+=a),s+"</text>\n"},useData:!0})},{"hbsfy/runtime":338}],200:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"<title>"+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+"</title>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l="";return a=e["if"].call(t,null!=t?t.name:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'\n<button id="dismissSheetButton" type="done" class="align-right done-button">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.DoneButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":338}],201:[function(t,e,n){var i=t("../../util"),a=i.loc,r=t("./template.hbs"),o=t("../base").controller,l=function(t,e){t=t||{},t.title=t.title||a.loc("Fuse.Loading"),i.network.isOnline()?this.model={data:{title:t.title}}:(this.errorMessage=a.loc("FUSE.Error.YoureOffline.Reconnect"),this.errorTitle=a.loc("FUSE.Error.YoureOffline")),o.call(this,t,e)};i.inherit(l,o),l.prototype.template=r,e.exports=l},{"../../util":304,"../base":84,"./template.hbs":203}],202:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=t("./controller"),l=function(t,e){t=t||{},t.controllers=t.controllers||[],t.watchedAttributes=t.watchedAttributes||[],t.data=t.data||{};var n,i=t.data.url;0===t.controllers.length&&(n=new o(t),t.controllers.push(n)),i&&(t.watchedAttributes.push("loadUrl"),t.loadUrl=i),a.network.isOffline()&&(this.documentType="stackTemplate"),r.call(this,t,e),this.navigationBarController.render()};a.inherit(l,r),l.prototype.documentType="loadingTemplate",l.prototype.replaceDocument=function(t){this.tabController.navigationDocument.replaceDocument(t,this.el,{animated:!1})},e.exports=l},{"../../util":304,"./controller":201,itml:355}],203:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"	","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return"	<activityIndicator>\n	    <title>"+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.title:a,t))+"</title>\n	</activityIndicator>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.model:t)?a.data:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],204:[function(t,e,n){var i=t("../../util"),a=t("./template.hbs"),r=t("../common").traits.DataProvider,o=t("../base").controller,l=function(t,e){t=t||{},this.loading=!0,this.batchSize=24,this.doMore=!1,this.theEnd=!1,this.requestInFlight=!1,o.call(this,t,e),t.data&&(this.contentIds=i.deepClone(t.data),this.loading=!1),i.extend(this.onSelect,{carousel:this.pushProduct,"play-button":this.playMedia}),this.model=new r({data:t.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.getMore(),this.render()};i.inherit(l,o,!0),l.prototype.template=a,l.prototype.artworkMap={profile:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},track:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},product:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},productChild:{xs:[27,27],s:[27,27],m:[27,27],l:[60,60],xl:[60,60]},video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84]}},l.prototype.resetLoading=function(){this.loading=!1,this.requestInFlight=!1,this.doMore&&(this.doMore=!1,this.handleNeedsMore())},l.prototype.handleFailedFetch=function(t,e,n){this.resetLoading(),this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},l.prototype.createView=function(){return this.viewModel?this.viewModel=this.viewModel.concat(this.getAnotherBatch()):this.contentIds?this.viewModel=this.getAnotherBatch():this.handleFailedFetch(404,"","MoreController: Missing Content"),this.viewModel},l.prototype.getAnotherBatch=function(){for(var t=[],e=this.contentIds.splice(0,this.batchSize),n=0;n<e.length;n++){var i={id:e[n]};t.push(this.model.lookupContent(i,this.processContent.bind(this)))}return this.theEnd=0===this.contentIds.length,t},l.prototype.handleDataReady=function(t){this.resetLoading(),i.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},l.prototype.getMore=function(){this.requestInFlight?this.doMore=!0:this.theEnd||(this.requestInFlight=!0,this.model.dataSuccess(this.contentIds,{success:this.createView.bind(this)}))},l.prototype.handleNeedsMore=function(t){this.model&&t&&"stackTemplate"===t.target.tagName&&this.getMore()},e.exports=l},{"../../util":304,"../base":84,"../common":92,"./template.hbs":206}],205:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=t("./controller"),l=t("../common").traits.TabComponent,s=function(t,e){t=t||{},t.controllers=t.controllers||[];var n=t.data;0===t.controllers.length&&(this.controller=new o({data:n}),t.controllers.push(this.controller)),r.call(this,t,e),l.call(this),this.el.addEventListener("needsmore",this.controller.handleNeedsMore.bind(this.controller))};a.inherit(s,r),a.inherit(s,l,!0),s.prototype.documentType="stackTemplate",e.exports=s},{"../../util":304,"../common":92,"./controller":204,itml:355}],206:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="paged-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"    </grid>\n"},2:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"            ","listLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],207:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../util"),o=r.loc,l=t("./template.hbs"),s=t("../common").traits.DataProvider,c=t("../base/controller"),u=t("../base").style,h=t("./style.hbs"),d=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new u({styleTemplate:h})),t.classes=t.classes||[],t.events=t.events||[],this.videoData=t.data||{},this.loading=!0,this.controllerName="music-video",this.typesForKey={video:["grid"],header:["header"]},this.artworkMap={video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[140,71],xl:[145,81]},header:{crop:"h",xs:[320,180],s:[375,210],m:[414,233],l:[768,305],xl:[1024,305]}},c.call(this,t,e),r.extend(this.onSelect,{"play-button":this.playMedia,"artist-link":this.handleArtistLink,"more-link":this.pushMorePage}),this.viewModel=this.viewModel||{},this.videoData.pageData?(this.model=new s({data:this.videoData}),this.videoData=this.model.lookup(this.videoData.pageData.id)):this.model=new s,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.productUrl=this.videoData.url;var n=this.createView(this.videoData);this.handleDataReady({detail:{view:n}}),this.model.fetchData({url:this.productUrl,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})};r.inherit(d,c),d.prototype.template=l,d.prototype.createView=function(t){return t.pageData&&(this.model.data=t),this.screenSize=r.screen.sizeForScreenDimension(this.documentDimensions),this.errorTitle=null,this.errorMessage=null,t.pageData&&(this.viewModel.content=this.processRelatedData(t)),this.viewModel.product=this.processContent(this.videoData,{type:"header"}),this.viewModel},d.prototype.processRelatedData=function(t){for(var e,n,i=[],a=["moreMusicVideosByArtist","moreMusicVideosInGenre"],r={moreMusicVideosByArtist:"FUSE.Product.MoreByArtist",moreMusicVideosInGenre:"FUSE.Product.YouMayAlsoLike"},l={moreMusicVideosByArtist:"releaseDate",moreMusicVideosInGenre:"artistName"},s=!!this.screenSize.match(/xs|s|m/g),c=function(t,e,n,i){t=t.slice(0,100);for(var a=[],r=[],o=0;o<t.length;o++){var l=t[o];if(r.push(l),e>o){var s={id:l,params:i};a.push(this.model.lookupContent(s,this.processContent.bind(this)))}}return this.model.setData(n,r),a}.bind(this),u={xs:3,s:3,m:3,l:5,xl:6},h=u[this.screenSize],d=this.model.lookup(t.pageData.id)||{},p=d.artistName,m=0;m<a.length;m++){var f=t.pageData[a[m]];if(f){f.length>h&&(e=a[m]),n={type:"grid",line2:l[a[m]]};var g=r[a[m]],b={title:o.loc(g,{artistName:p}),list:s,content:c(f,h,e,n),sectionId:e};i.push(b)}}return i},d.prototype.processContent=function(t,e){var n=r.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,artworkKeys:this.typesForKey,params:e,screenSize:this.screenSize}),i=r.lockup.setArtworks(t,n,this.artworkMap);if(i.isExplicit=r.lockup.isExplicit(i),i[t.kind]=!0,"header"===e.type){var a={genre:t.genres[0].name,year:t.releaseDate.split("-")[0],time:r.lockup.formatDuration(t,"FUSE.Time.MinutesSeconds")};i.metaData=o.loc("FUSE.MusicVideo.GenreYearTime",a)}return e.line2&&(i.line1="releaseDate"===e.line2?t[e.line2].split("-")[0]:t[e.line2]),i},d.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},d.prototype.handleDataReady=function(t){this.loading=!1,r.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},d.prototype.handleArtistLink=function(t){var e=t.target,n=e.getAttribute("data-link-url"),i=e.getAttribute("data-link-title"),r={data:{url:decodeURIComponent(n),title:i},navigationDocument:e.ownerDocument.navigationDocument};this.dispatchEvent(new a("tabPush",{detail:r}))},d.prototype.handleRotation=function(){this.model.dataSuccess(this.model.data,{success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})},e.exports=d},{"../../util":304,"../base":84,"../base/controller":82,"../common":92,"./style.hbs":209,"./template.hbs":210,itml:355}],208:[function(t,e,n){var i=t("../../util"),a=t("../base/document"),r=t("./element"),o=t("../common").traits.TabComponent,l=function(t,e){t=t||{},t.controllers=t.controllers||[];var n,i=t.data;0===t.controllers.length&&(n=new r({data:i}),t.controllers.push(n)),a.call(this,t,e),o.call(this)};i.inherit(l,a),i.inherit(l,o,!0),l.prototype.documentType="productTemplate",e.exports=l},{"../../util":304,"../base/document":83,"../common":92,"./element":207}],209:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".music-video-lockup {\n    background-color: rgba(0, 0, 0, 0);\n}\n\n.product-title {\n    font-size: 22pt;\n    itml-text-max-lines: 2;\n}\n\n.artist-link {\n    font-size: 16pt;\n}\n\n.shelf-grid {\n    itml-item-width: 100%;	\n}\n\n.shelf-lockup {\n    padding: 0 8 0 8;\n}\n\n@media all and (width: 1024) {\n    .shelf-lockup {\n        padding: 0 8 0 12;\n    }\n}\n"},useData:!0})},{"hbsfy/runtime":338}],210:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s="<section ";return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n    <card ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n        <background>\n        "+o((e.productArtwork||t&&t.productArtwork||r).call(t,null!=(a=null!=t?t.viewModel:t)?a.product:a,"play",{name:"productArtwork",hash:{},data:i}))+'\n        </background>\n    </card>\n    <lockup class="music-video-lockup" pin="alone" type="list" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+='>\n        <title class="product-title">'+o(l(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.name:a,t)),a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.isExplicit:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'</title>\n        <subtitle class="artist-link">\n            <button class="artist-link" data-link-url="'+o(l(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.artistUrl:a,t))+'" data-link-title="'+o(l(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.artistName:a,t))+'" type="link">'+o(l(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.artistName:a,t))+'</button>\n        </subtitle>\n        <subtitle class="product-metadata">'+o(l(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.metaData:a,t))+'</subtitle>\n        <button type="image" class="action-button" data-content-id="'+o(l(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.id:a,t))+'"><img src="resource://UniversalActionControl"/></button>\n    </lockup>\n</section>\n<divider type="full"/>\n'},2:function(t,e,n,i){return' <badge class="explict-badge" src="resource://explicit"/>'},4:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.content:a,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r='        <header class="edge-header">\n';return a=e["if"].call(t,null!=t?t.sectionId:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(r+=a),r+="        </header>\n",a=e["if"].call(t,null!=t?t.list:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.program(13,i),data:i}),null!=a&&(r+=a),r},6:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,o=e.helperMissing;return'                <button type="imagetext" class="more-link" data-section-id="'+r(a(null!=t?t.sectionId:t,t))+'">\n                    <title class="edge-title" id=\'name\'>'+r((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                    <img class="edge-chevron" src="resource://ChevronTerms"/>\n                </button>\n'},8:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},10:function(t,e,n,i){var a,r=e.helperMissing,o="            <grid ";return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"            </grid>\n"},11:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                ","listLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},13:function(t,e,n,i){var a,r=e.helperMissing,o='            <grid class="shelf-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"            </grid>\n"},14:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"                ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.product:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.content:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],211:[function(t,e,n){var i=t("../../util"),a=t("../base/document"),r=t("../grouping/controller"),o=t("../loading/controller"),l=t("../common").traits.TabComponent,s=t("./title.hbs"),c=i.loc,u=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=c.loc("FUSE.New.AllGenres");var n;0===t.controllers.length&&i.urls.browse()?(n=new r({url:i.urls.browse(),hasGradient:!0}),t.controllers.push(n)):(n=new o,t.controllers.push(n)),t.classes=t.classes||[],t.classes.push("template"),a.call(this,t,e);var s=this.el.getElementById("genre-selector");s&&n instanceof r&&s.addEventListener("select",n.showGenreFilter.bind(n)),n&&(this.addEventListener("appear",n.handleAppear.bind(n)),n.addEventListener("genre-selected",function(e){t.name=e.detail.name,t.url=e.detail.url,this.el.getElementById("name").innerHTML=t.name}.bind(this))),l.call(this)};i.inherit(u,a),i.inherit(u,l,!0),u.prototype.documentType="stackTemplate",u.prototype.titleTemplate=s,e.exports=u},{"../../util":304,"../base/document":83,"../common":92,"../grouping/controller":177,"../loading/controller":201,"./title.hbs":213}],212:[function(t,e,n){var i=t("./document"),a=t("../base/tab"),r=t("../../util"),o=function(t){t=t||{},a.call(this,t)};r.inherit(o,a),o.prototype.getDocumentController=function(){return new i({name:this.name})},e.exports=o},{"../../util":304,"../base/tab":87,"./document":211}],213:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'<button type="imagetext" class="selector" id="genre-selector">\n    <text id=\'name\'>'+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+'</text>\n    <img class="selector-chevron" src="resource://UniversalSortingChevron"/>\n</button>\n'},useData:!0})},{"hbsfy/runtime":338}],214:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,o=i.utils.parser,l=t("../common").traits.EventMap,s=a.pubSub,c=i.controller.MultiElementController,u=t("./template.hbs"),h=function(t,e){t=t||{},t.styles=t.styles||[],t.events=t.events||[],t.events.push("select"),this.buyParamsQueryString=e.offers&&e.offers[0]?e.offers[0].buyParams:"",this.buyParams=a.query.parse(this.buyParamsQueryString),c.call(this,t,e),l.call(this,t,e),this.viewModel={bannerId:"permissionBanner",bannerClass:"banner-text",linkClass:"banner-link",linkId:"approveLink"};var n='<button class="'+this.viewModel.linkClass+'" id="'+this.viewModel.linkId+'">'+r.loc("FUSE.AskToBuy.PermissionBannerText.bannerLinkText")+"</button>";this.strings={},this.strings.bannerText=r.loc("FUSE.AskToBuy.PermissionBannerText",{bannerLinkText:n});var i=this.template(this),s=o.parse(i,t.document);this.el=s,this.el.addEventListener("select",this.handleApproveInPerson.bind(this)),this.document=t.document,this.controller=t.controller};a.inherit(h,c),a.inherit(h,l,!0),h.prototype.template=u,h.prototype.handleApproveInPerson=function(){var t=this.buyParams.salableAdamId;itms.approveInPerson(t,function(t){var e=a.doc.findNodeWithTagName(this.document,"template"),n=e.firstChild;n.getAttribute("id")===this.viewModel.bannerId&&e.removeChild(n),"success"===t.status&&s.publish("serviceChange",{})}.bind(this))},e.exports=h},{"../../util":304,"../common":92,"./template.hbs":215,itml:355}],215:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='<subtitle id="'+o(r(null!=(a=null!=t?t.viewModel:t)?a.bannerId:a,t))+'" class="'+o(r(null!=(a=null!=t?t.viewModel:t)?a.bannerClass:a,t))+'">';return a=(e.escapeText||t&&t.escapeText||l).call(t,null!=(a=null!=t?t.strings:t)?a.bannerText:a,{name:"escapeText",hash:{},data:i}),null!=a&&(s+=a),s+"</subtitle>\n"},useData:!0})},{"hbsfy/runtime":338}],216:[function(t,e,n){var i=t("../../util"),a=t("../common/traits/data_provider"),r=t("../product/document"),o=t("../profile/document"),l=t("../music_video"),s=function(t,e){if(void 0!==t){this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.needsDocumentForPreview.bind(this))}else i.log.warn("PreviewController was passed an undefined event")};s.prototype.needsDocumentForPreview=function(t){var e=t.entityValueProvider,n=e.valueForEntityProperty("id");if(n){var i=new a,s=i.lookup(n);if(s){var c;switch(s.kind){case"artist":case"curator":case"brand":case"iTunesBrand":c=new o({data:s});break;case"musicVideo":c=new l({data:s});break;default:c=new r({data:s})}this.nativeViewController.setPreviewDocument(c.el,{})}}},e.exports=s},{"../../util":304,"../common/traits/data_provider":108,"../music_video":208,"../product/document":217,"../profile/document":232}],217:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=t("../common/traits/data_provider"),l=function(t,e){if(void 0!==t){t.watchedAttributes=t.watchedAttributes||[],t.watchedAttributes.push("type");var n,i,l=t.data||{};l.pageData?(n=l,this.model=new o({data:l}),i=this.model.lookup(l.pageData.id)):i=l,t.type="song"===i.kind?"album":i.kind,r.call(this,t,e),this.handleLockupData(i,n)}else a.log.warn("ProductDocumentController received no attributes")};a.inherit(l,r),l.prototype.documentType="productTemplate",l.prototype.handleLockupData=function(t,e){var n=t.kind,i={};if("album"===n||"song"===n){var a=t.releaseDate||"",r=a.substring(0,a.indexOf("-")),o=t.collectionId||t.id,l=t.collectionName||t.name;i={albumStoreID:""+o,albumName:l,albumYear:r,albumGenre:t.genres&&t.genres[0]&&t.genres[0].name,albumItemsCount:t.trackCount,albumArtistName:t.artistName,albumArtistStoreID:""+t.artistId}}else if("playlist"===n){var s=[];if(t.artworkTracks)for(var c=t.artworkTracks,u=t.artworkTrackIds,h=0;h<u.length;h++){var d=u[h],p=c[d];if(p){var m=p.artwork;m&&s.push([m])}}i={playlistStoreID:""+t.id,playlistName:t.name,playlistItemsCount:s.length,trackArtworks:s}}var f=e||t;i.metadata=t,i.sidePackData=f;var g=this.el.getElementsByTagName("productTemplate").item(0),b=g.getFeature("ProductNativeViewController");b.setProductEntityValueProvider(i),t.uber&&b.setUberParameters(t.uber)},e.exports=l},{"../../util":304,"../common/traits/data_provider":108,itml:355}],218:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../util"),o=r.log,l=t("./related_content"),s=t("../common/traits/data_provider"),c=t("../sharing"),u=function(t,e){if(void 0!==t){var n=t.entityValueProvider.valueForEntityProperty("sidePackData");this.tintInfo=t.tintInfo,this.eventHandlers={};for(var i in e)e.hasOwnProperty(i)&&(this.eventHandlers[i]=e[i]);this.eventData=n,this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("select",this.selectHandler.bind(this)),"itml"===t.source&&r.account.isAppleMusicEnabled()?n&&(this.pageProfile="playlist_page"===r.keypath(n,"pageData.componentName")||"playlist"===n.kind?"playlist-product":"product-dv",this.model=new s({pageProfile:this.pageProfile}),this.model.addEventListener("dataReady",this.updatePage.bind(this)),n.pageData?this.model.dataSuccess(n,{success:this.createView.bind(this),failure:this.handleFetchingDataFailure.bind(this)}):this.model.fetchData({url:n.url,success:this.createView.bind(this),failure:this.handleFetchingDataFailure.bind(this),retries:1})):this.nativeViewController.addEventListener("needscontent",this.needsRelatedContentForMyMusicProductView.bind(this)),setTimeout(function(){this.nativeViewController.setNumberOfLikes(85)}.bind(this),1500)}else o.warn("ProductController was passed an undefined event")};u.prototype.createView=function(t){this.model.setData("pageData",t.pageData);var e={id:t.pageData.id,profile:this.pageProfile},n={content:[this.model.lookupContent(e)]};return n},u.prototype.handleFetchingDataFailure=function(t,e){r.log.error("error fetching product data",t,e)},u.prototype.needsRelatedContentForMyMusicProductView=function(t){var e=t.entityValueProvider;this.tintInfo=t.tintInfo;var n,i=e.valueForEntityProperty("albumStoreID"),a=e.valueForEntityProperty("cloudStoreID");i&&"0"!==i?(n=i,this.pageProfile="product-dv"):a&&"0"!==a&&(n=a,this.pageProfile="playlist-product"),n&&r.account.isAppleMusicEnabled()&&(this.model=new s({pageProfile:this.pageProfile}),this.model.fetchContent({profile:this.pageProfile,contentIds:[n],onSuccess:this.fetchRelatedContentForMyMusicProductView.bind(this,n)}))},u.prototype.fetchRelatedContentForMyMusicProductView=function(t){this.model.addEventListener("dataReady",this.updateRelatedContent.bind(this));var e=this.model.lookup(t);e&&this.model.fetchData({url:e.url,success:this.createView.bind(this),failure:this.handleFetchingDataFailure.bind(this),retries:1})},u.prototype.selectHandler=function(t){
if("artistName"===t.buttonIdentifier)this.pushArtist();else if("shareButton"===t.buttonIdentifier){this.model||(this.model=new s);var e,n=this.model.getData("pageData");n&&(e=this.model.lookup(n.id)),this.shareController=new c({data:{event:t,content:e}}),this.nativeViewController.presentShareDocument(this.shareController.el,{animated:!0})}},u.prototype.pushArtist=function(){var t=this.model.getData("pageData");if(t&&t.hasPrimaryArtist){var e=this.viewModel.artistUrl,n=""+this.viewModel.artistId,i=t.artistName,r={navigationDocument:this.nativeViewController.navigationDocument},o=this.model.lookup(n);o?(r.data=o,r.dataType="artist_page"):r.data={id:n,url:decodeURIComponent(e),title:i},this.eventHandlers.tabPush(new a("tabPush",{detail:r}))}},u.prototype.updatePage=function(t){var e=t.detail.view;this.viewModel=e.content[0],this.updateTracklist(),this.updateRelatedContent(),this.viewModel.description&&this.updateDescription()},u.prototype.updateTracklist=function(){var t,e=[];this.viewModel&&(t=this.viewModel.children,e=this.viewModel.childrenIds),this.updateTracklistWithChildren(t,e)},u.prototype.updateTracklistWithChildren=function(t,e){if(t){for(var n,i=[],a=!1,r=Object.keys(t),o=0;o<r.length;o++){var l=t[r[o]].artistId;if(n){if(l!==n){a=!0;break}}else n=l}for(var s=0;s<e.length;s++){var c=e[s];if(t.hasOwnProperty(c)){var u=t[c],h=null;h=[u.artwork];var d=u.duration;if(!d){var p=u.offers&&u.offers[0].assets;p&&p.length>0&&(d=p[0].duration)}var m={trackName:u.name,trackNumber:u.trackNumber,trackDuration:d,artistName:u.artistName,collectionName:u.collectionName,isCompilation:a,trackKind:u.kind,artwork:h,metadata:u,isFullMetadata:!0};u.id&&(m.trackStoreID=u.id+""),u.artistId&&(m.artistStoreID=u.artistId+""),u.collectionId&&(m.collectionStoreID=u.collectionId+""),i.push(m)}}this.nativeViewController.setTracklistItems(i)}},u.prototype.updateRelatedContent=function(){var t=new l({data:this.model.getData("pageData"),tintInfo:this.tintInfo});this.nativeViewController.setRelatedContentDocument(t.el),t.addEventListener("tabPush",this.eventHandlers.tabPush.bind(this))},u.prototype.updateDescription=function(){},e.exports=u},{"../../util":304,"../common/traits/data_provider":108,"../sharing":280,"./related_content":220,itml:355}],219:[function(t,e,n){var i=t("../../../util"),a=i.loc,r=t("../../base/controller"),o=t("../../common").traits.ReportConcern,l=t("../../base").style,s=t("./style.hbs"),c=t("../../common").traits.DataProvider,u=function(t,e){t=t||{},t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styleTemplate=s,t.styles.push(new l(t)),t.events=t.events||[],this.loading=!0,this.blockIt=!1,this.controllerName="product",r.call(this,t,e),i.extend(this.onSelect,{"cover-button":this.playMedia,"more-link":this.pushMorePage,"report-concern":this.reportSharedPlaylistSheetCallback.bind(this)}),this.model=new c(t),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get()};i.inherit(u,r),i.inherit(u,o,!0),u.prototype.template=t("./template.hbs"),u.prototype.artworkMap={grid:{xs:[105,105],s:[123,123],m:[135,135],l:[72,72],xl:[72,72]},gridChild:{xs:[52,52],s:[62,62],m:[67,67],l:[36,36],xl:[36,36]},video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84]}},u.prototype.typesForKey={grid:["grid"]},u.prototype.relatedSections={artistUploadedAudio:"SF.UploadedAudio",artistUploadedVideo:"SF.UploadedVideos",featuredArtists:"FUSE.Product.FeaturedArtists",topAlbumsByArtist:"FUSE.Product.MoreByArtist",moreByThisProvider:"FUSE.Product.MoreByProvider",listenersAlsoBoughtAlbums:"FUSE.Product.YouMayAlsoLike"},u.prototype.get=function(){this.model.dataSuccess(this.model.data,{success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})},u.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},u.prototype.createView=function(t){this.screenSize=i.screen.sizeForScreenDimension(this.documentDimensions),this.errorTitle=null,this.errorMessage=null;var e=this.model.lookup(t.id)||{};this.productId=e.id,this.playlistType=e.playlistType;var n,r=e.artistName,o=e.curatorName,l=[],s="xl"===this.screenSize?4:3,c=Object.keys(this.relatedSections),u="edge-3col-grid";"l"===this.screenSize?u="related-grid-3":"xl"===this.screenSize&&(u="related-grid-4");for(var h=0;h<c.length;h++){var d=c[h];if(n=null,t[d]&&Object.keys(t[d]).length>0){var p=h<c.length-1,m=t[d];m.length>s&&(n=d,this.model.setData(d,m));var f=/artistUploadedAudio/.test(d)?"song":/artistUploadedVideo/.test(d)?"video":"grid",g=this.lookupContentIds.call(this,t[d],s,f,d),b=this.relatedSections[d],v=a.loc(b,{artistName:r,curatorName:o});if(g.length>0){var y={title:v,content:g,sectionId:n,gridClass:u,divider:p};/artistUploadedAudio|artistUploadedVideo/.test(d)?(y.auc=!0,y.headerClass="auc-header"):y.grid=!0,l.push(y)}}}return l},u.prototype.lookupContentIds=function(t,e,n,i){var a=[];e=e||t.length;for(var r=0;e>r;r++){var o={id:t[r],params:{type:n||"grid",key:i}};a.push(this.model.lookupContent(o,this.processContent.bind(this)))}return a},u.prototype.processContent=function(t,e){var n=i.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,artworkKeys:this.typesForKey,params:e}),a=i.lockup.setArtworks(t,n,this.artworkMap,e.type,this.screenSize);return!e||"moreByThisProvider"!==e.key&&"listenersAlsoBoughtAlbums"!==e.key?a.releaseDate&&(a.line1=a.releaseDate.split("-")[0]):a.line1=i.lockup.line1(a),a.isExplicit=i.lockup.isExplicit(a),a[t.kind]=!0,a},u.prototype.handleDataReady=function(t){this.loading=!1,i.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.reportAConcern=null,this.playlistType&&"user-shared"===this.playlistType&&i.enablers.reportAConcern&&(this.reportAConcern={isReportAConcern:!0,id:this.productId,targetType:"PUBLIC_PLAYLIST",admin:!1,text:a.loc("FUSE.Connect.Detail.ReportConcern"),className:"report-concern"}),this.render()},u.prototype.handleRotation=function(){var t=this;this.blockIt||(this.blockIt=!0,this.documentDimensions=Settings.Screen,this.get(),setTimeout(function(){t.blockIt=!1},300))},e.exports=u},{"../../../util":304,"../../base":84,"../../base/controller":82,"../../common":92,"./style.hbs":221,"./template.hbs":222}],220:[function(t,e,n){var i=t("../../../util"),a=t("../../base/document"),r=t("./element"),o=function(t,e){t=t||{},t.controllers=t.controllers||[];var n=new r(t);t.controllers.push(n),t.classes=t.classes||[],t.classes.push("template"),a.call(this,t,e),this.addEventDelegates(n,["tabPush"])};i.inherit(o,a),o.prototype.documentType="stackTemplate",e.exports=o},{"../../../util":304,"../../base/document":83,"./element":219}],221:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return".link-color {\n    color: tint-color;\n    itml-img-treatment: tint;\n}\n\n.related-header {\n    padding: 15pt 0pt 15pt 0pt;\n}\n\n.related-grid {\n    padding: 0pt 0pt 0pt 0pt;\n    border-width: 0;\n}\n.related-grid-3 {\n    column-count: 3;\n}\n.related-grid-4 {\n    column-count: 4;\n}\n.lockup-subtitle {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,"0.4",{name:"hexToRgb",hash:{},data:i}))+";\n}\n.auc-header {\n    padding: 15pt 0pt 0pt 0pt;\n}\n"},useData:!0})},{"hbsfy/runtime":338}],222:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='    <button big-hit="true"\n            data-playlist-id="'+o(r(null!=(a=null!=t?t.reportAConcern:t)?a.id:a,t))+'"\n            data-target-id="'+o(r(null!=(a=null!=t?t.reportAConcern:t)?a.targetId:a,t))+'"\n            data-target-type="'+o(r(null!=(a=null!=t?t.reportAConcern:t)?a.targetType:a,t))+'"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.reportAConcern:t)?a.heroImage:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'\n            class="message-text '+o(r(null!=(a=null!=t?t.reportAConcern:t)?a.className:a,t))+' post-action-text">'+o(r(null!=(a=null!=t?t.reportAConcern:t)?a.text:a,t))+"</button>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=(a=null!=t?t.reportAConcern:t)?a.heroImage:a)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},4:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.content:t)?a[0]:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='            <header class="edge-header related-header '+o(r(null!=t?t.headerClass:t,t))+'">\n';return a=e["if"].call(t,null!=t?t.sectionId:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(l+=a),l+="            </header>\n",a=e["if"].call(t,null!=t?t.auc:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(l+=a),a=e["if"].call(t,null!=t?t.grid:t,{name:"if",hash:{},fn:this.program(27,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l},7:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,o=e.helperMissing;return'                    <button type="imagetext" class="more-link" data-section-id="'+r(a(null!=t?t.sectionId:t,t))+'">\n                        <title class="edge-title" id=\'name\'>'+r((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                        <img class="edge-chevron" src="resource://ChevronTerms"/>\n                    </button>\n'},9:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                    <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},11:function(t,e,n,i){var a,r=e.helperMissing,o='                <grid class="track-list" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"                </grid>\n"},12:function(t,e,n,i){var a,r="";return a=e.unless.call(t,null!=t?t.empty:t,{name:"unless",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},13:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='                            <lockup class="'+o(r(null!=t?t.kind:t,t))+' action-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n                                "+o((e.productArtwork||t&&t.productArtwork||l).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n\n",a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.program(19,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,(a=i&&i.root)&&a.pickerMode,{name:"if",hash:{},fn:this.program(23,i),inverse:this.program(25,i),data:i}),null!=a&&(s+=a),s+"                            </lockup>\n"},14:function(t,e,n,i){return'disabled="true"'},16:function(t,e,n,i){var a,r,o=e.helperMissing,l="function",s=this.escapeExpression,c='                                    <title class="list-title';return a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='">'+s((r=null!=(r=e.name||(null!=t?t.name:t))?r:o,typeof r===l?r.call(t,{name:"name",hash:{},data:i}):r))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'" src="resource://explicit"/></title>\n'},17:function(t,e,n,i){return"-disabled"},19:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'                                    <title class="list-title">'+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+"</title>\n"},21:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'                                    <subtitle class="lockup-line-1">'+r((e.replaceHtmlEntities||t&&t.replaceHtmlEntities||a).call(t,null!=t?t.postId:t,{name:"replaceHtmlEntities",hash:{},data:i}))+"</subtitle>\n"},23:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                                    <button type="image" class="add-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'">\n                                        <img src="resource://MediaPickerAddControl"/>\n                                    </button>\n'},25:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                                    <button type="image" class="action-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'">\n                                        <img class="action-color" src="resource://UniversalActionControl"/>\n                                    </button>\n'},27:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='                <grid class="'+o(r(null!=t?t.gridClass:t,t))+' related-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(28,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"                </grid>\n"},28:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"                        ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.reportAConcern:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],223:[function(t,e,n){var i=t("../../../util"),a=t("../../base").style,r=t("../../common").traits.DataProvider,o=t("../../base/controller"),l=t("./style.hbs"),s=function(t,e){t=t||{};var n=t.entityValueProvider;t.data||(t.data={id:n.valueForEntityProperty("artistStoreID")}),t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styleTemplate=l,t.styles.push(new a(t)),t.events=t.events||[],this.loading=!0,this.blockIt=!1,this.controllerName="profile-all",o.call(this,t,e),i.extend(this.onSelect,{carousel:this.pushProduct,"play-button":this.playMedia,"more-link":this.pushMorePage}),this.screenSize=i.screen.sizeForScreenDimension(this.documentDimensions),("l"===this.screenSize||"xl"===this.screenSize)&&(this.largeScreen=!0),this.model=new r({data:t.data,pageProfile:"artist"}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get()};i.inherit(s,o),s.prototype.template=t("./template.hbs"),s.prototype.artworkMap={latest:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},shelf:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},list:{xs:[55,55],s:[55,55],m:[55,55],l:[55,55],xl:[55,55]},track:{xs:[32,32],s:[32,32],m:[32,32],l:[40,40],xl:[40,40]},video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84]}},s.prototype.get=function(){this.model.data.pageData&&this.handleFetchSuccess(this.model.data)},s.prototype.handleFetchSuccess=function(t){t&&this.model.dataSuccess(t,{success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})},s.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},s.prototype.createView=function(t){this.screenSize=i.screen.sizeForScreenDimension(Settings.Screen),this.data=t,this.errorTitle=null,this.errorMessage=null;var e,n,a,r,o,l,s,c=[],u=this.screenSize,h=!!u.match(/xs|s|m/g),d="xl"===u?4:3,p=3,m="xl"===u?4:3,f=24,g=i.keypath(t,"pageData.content"),b=i.keypath(g,"length");if(g)for(l=0;b>l;l++){s=l===b-1?f:d,o=g[l],n=null,e="list";var v=g[l];1>l&&"song"!==v.dkExternalId?e="latest":v.dkExternalId&&"song"!==v.dkExternalId&&!h?e="shelf":"song"===v.dkExternalId&&h&&(e="track"),"song"!==v.dkExternalId||h||(s=p),o.adamIds.length>s?(a=o.adamIds.slice(0,s),n=o.title,this.model.setData(n,o.adamIds)):a=o.adamIds,r=this.lookupContentIds(a,{type:e}),(Settings.Restrictions.allowArtistActivity||!o.dkExternalId.match(/uploadedAudio|uploadedVideo/))&&c.push({title:o.title,grid:!0,latest:"latest"===e,list:"list"===e,shelf:"shelf"===e,sectionId:n,content:r,numCols:h?"":"-"+m,needsVideoPadding:v.dkExternalId&&v.dkExternalId.match(/video/i)&&h})}else i.log.error("missing content for artist",t);return c},s.prototype.lookupContentIds=function(t,e){for(var n=[],i=0;i<t.length;i++){var a={id:t[i],params:e};n.push(this.model.lookupContent(a,this.processContent.bind(this)))}return n},s.prototype.processContent=function(t,e){e.type=t.kind.match(/video/i)?"video":e.type;var n=i.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:e,screenSize:this.screenSize}),a=i.lockup.setArtworks(t,n,this.artworkMap,this.screenSize);return a.kind&&("album"===a.kind?a.releaseDate&&(a.line1=a.releaseDate.split("-")[0]):"song"===a.kind&&(a.line1=a.collectionName)),a.isExplicit=i.lockup.isExplicit(a),a[t.kind]=!0,a},s.prototype.handleRotation=function(){var t=this;!this.blockIt&&this.data&&(this.blockIt=!0,this.viewModel=this.model.dataSuccess(this.data,{success:this.createView.bind(this),type:"rotate"}),setTimeout(function(){t.blockIt=!1},300))},s.prototype.handleDataReady=function(t){this.loading=!1,i.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},e.exports=s},{"../../../util":304,"../../base":84,"../../base/controller":82,"../../common":92,"./style.hbs":225,"./template.hbs":226}],224:[function(t,e,n){var i=t("../../../util"),a=t("../../base/document"),r=t("./element"),o=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name="All",this.controller=new r(t),t.controllers.push(this.controller),this.suppressNavigationController=!0,t.classes=t.classes||[],t.classes.push("template"),a.call(this,t,e),this.addEventDelegates(this.controller,["tabPush"])};i.inherit(o,a),o.prototype.documentType="stackTemplate",o.prototype.handleFetchSuccess=function(t){this.controller.handleFetchSuccess(t)},o.prototype.handleFailedFetch=function(t){this.controller.handleFailedFetch(t)},e.exports=o},{"../../../util":304,"../../base/document":83,"./element":223}],225:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".edge-header {\n	padding: 0 0 0 0;\n}\n\n.shelf-grid-3 {\n	column-count: 3;\n	border-color: rgba(0,0,0,0);\n	border-width: 0;\n	padding: 0 0 0 0;\n}\n\n.shelf-grid-4 {\n	column-count: 4;\n	border-color: rgba(0,0,0,0);\n	border-width: 0;\n	padding: 0 0 0 0;\n}\n\n.grid {\n	padding: 0 0 7pt 0;\n}\n\n.edge-header {\n	padding: 15pt 0pt 15pt 0pt;\n}\n\n.grid-zero {\n	column-count: 0;\n	padding: 0 0 0 0;\n}\n\n.latest-album {\n	font-size: 17pt;\n	itml-text-max-lines: 2;\n}\n\n.album,\n.song,\n.musicVideo {\n	padding: 3pt 0 3pt 0;\n}\n"},useData:!0})},{"hbsfy/runtime":338}],226:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.latest:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(11,i),data:i}),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r='            <header class="edge-header">\n';return a=e["if"].call(t,null!=t?t.sectionId:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=a&&(r+=a),r+"            </header>\n"},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,o=e.helperMissing;return'                    <button type="imagetext" class="more-link" data-section-id="'+r(a(null!=t?t.sectionId:t,t))+'">\n                        <title class="edge-title" id=\'name\'>'+r((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                        <img class="edge-chevron" src="resource://ChevronTerms"/>\n                    </button>\n'},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                    <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},8:function(t,e,n,i){var a,r=e.helperMissing,o='            <grid class="grid-zero" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"            </grid>\n"},9:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                ","listLockup",t,{titleClass:"latest-album",line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},11:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.shelf:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.program(15,i),data:i}),null!=a&&(r+=a),r},12:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='                <grid class="grid shelf-grid'+o(r(null!=t?t.numCols:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"                </grid>\n"},13:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"                    ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},15:function(t,e,n,i){var a,r=e.helperMissing,o='                <grid class="grid ';return a=e["if"].call(t,null!=t?t.needsVideoPadding:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"                </grid>\n"},16:function(t,e,n,i){return"video"},18:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                    ","listLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],227:[function(t,e,n){var i=t("../../../util"),a=t("../../base/controller"),r=t("../../common").traits.DataProvider,o=t("../../base").style,l=t("./style.hbs"),s=t("./template.hbs"),c=i.loc,u=function(t,e){t=t||{},t.styles=[],t.styleTemplate=l,t.styles.push(new o(t)),t.events=t.events||[],t.data=t.data||[],this.isArtist=!0,this.tintInfo=t.tintInfo,this.isFullScreen=t.isFullScreen,this.contentDataKeys={artistContemporaries:c.loc("FUSE.Bio.ArtistContemporaries")},this.artworkMap={profile:{xs:[70,70],s:[80,80],m:[88,88],l:[70,70],xl:[70,70]}},this.fullScreenArtworkMap={profile:{xs:[70,70],s:[80,80],m:[88,88],l:[120,120],xl:[140,140]}},a.call(this,t,e),this.bioTitleHeader=c.loc(this.isArtist?"FUSE.Bio.Biography":"FUSE.Bio.About"),this.bioFormedHeader=c.loc("FUSE.Bio.Formed"),this.bioOriginHeader=c.loc("FUSE.Bio.Origin"),this.bioGenreHeader=c.loc("FUSE.Bio.Genre"),this.model=new r({data:t.data,pageProfile:"lockup"}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.addEventListener("dataFailed",this.handleDataFailed.bind(this)),this.get()};i.inherit(u,a),u.prototype.get=function(){var t;if(this.model.data.pageData?(t="artist_page"===this.model.data.pageData.componentName?"artist":"lockup",this.data=this.model.lookup(this.model.data.pageData.id,t)):(t="artist"===this.model.data.kind?"artist":"lockup",this.data=this.model.lookup(this.model.data.id,t)),this.data){var e=this.data.bornOrFormed&&new Date(this.data.bornOrFormed).getFullYear();e||(e=this.data.bornOrFormed),this.bornOrFormed=e,this.bioGenreValue=this.data.genreNames&&this.data.genreNames[0],this.model.dataSuccess(this.data,{success:this.handleDataFetchSuccess.bind(this)})}},u.prototype.handleDataFetchSuccess=function(t){this.data=t;var e=i.screen.sizeForScreenDimension(Settings.Screen),n="xl"===e?4:3,a=[],r=0,o=0,l=i.screen.sizeForScreenDimension().indexOf("l")>-1;this.descriptionClassName=l?"bio-text-full":"bio-text";for(var s in this.data)if(this.contentDataKeys[s]&&this.data[s].length){for(a.push({}),o=a.length-1,a[o].content=[],a[o].title=this.contentDataKeys[s],a[o].columnCount="-"+n,r=0;r<this.data[s].length;r++)a[o].content.push(this.model.lookupContent(this.data[s][r],this.handleLookupCallback.bind(this)));a[o].content=a[o].content.slice(0,n)}return a},u.prototype.handleDataFailed=function(){i.log.warn("Failed data fetch")},u.prototype.handleDataReady=function(t){this.viewModel=t.detail.view,this.render()},u.prototype.handleLookupCallback=function(t){var e=this.isFullScreen?this.fullScreenArtworkMap:this.artworkMap,n=i.artwork.getArtworkForContent({content:t,artworkMap:e}),a=i.lockup.setArtworks(t,n,e);return a},u.prototype.handleRotation=function(){this.viewModel=this.handleDataFetchSuccess(this.data),this.render()},u.prototype.template=s,e.exports=u},{"../../../util":304,"../../base":84,"../../base/controller":82,"../../common":92,"./style.hbs":229,"./template.hbs":230}],228:[function(t,e,n){var i=t("../../../util"),a=t("../../base/document"),r=t("./element"),o=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=[],this.controller=new r(t),t.controllers.push(this.controller),a.call(this,t,e),this.addEventDelegates(this.controller,["tabPush"])};i.inherit(o,a),o.prototype.documentType="stackTemplate",o.prototype.handleFetchSuccess=function(t){this.controller.get(t)},e.exports=o},{"../../../util":304,"../../base/document":83,"./element":227}],229:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".bio-text {\n    itml-text-max-lines: 3;\n}\n\n.bio-text-full {\n	itml-text-max-lines: 0;\n}\n\n.bio-info-grid {\n	column-count: 3;\n	itml-item-width: 100%;\n	itml-align: center;\n	border-width: 0;\n	itml-lockup-type: shelf;\n}\n\n.bio-title-lockup {\n	padding: 0 13 0 13;\n	itml-img-treatment: artist-circle;\n}\n\n.bio-title {\n	text-align: left;\n	itml-position: center;\n}\n\n.bio-swoosh-grid-4 {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 7pt 0pt 0pt;\n    itml-align: center;   \n    column-count: 4;\n}\n\n.bio-swoosh-grid-3 {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 7pt 0pt 0pt;\n    itml-align: center;   \n    column-count: 3;\n}\n\n.edge-header {\n	padding: 16pt 0pt 7pt 16pt;\n}\n"},useData:!0})},{"hbsfy/runtime":338}],230:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <title class="edge-title bio-edge-title">'+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.bioTitleHeader:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},3:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'        <title class="edge-title bio-edge-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.bioTitleHeader:t,{name:"toUpperCase",hash:{},data:i}))+" "+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.data:t)?a.name:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},5:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='    <description class="'+s((r=null!=(r=e.descriptionClassName||(null!=t?t.descriptionClassName:t))?r:l,typeof r===o?r.call(t,{name:"descriptionClassName",hash:{},data:i}):r))+'">';return a=(e.escapeText||t&&t.escapeText||l).call(t,null!=(a=null!=t?t.data:t)?a.artistBio:a,{name:"escapeText",hash:{},data:i}),null!=a&&(c+=a),c+"</description>\n"},7:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='    <description class="'+s((r=null!=(r=e.descriptionClassName||(null!=t?t.descriptionClassName:t))?r:l,typeof r===o?r.call(t,{name:"descriptionClassName",hash:{},data:i}):r))+'">';return a=(e.escapeText||t&&t.escapeText||l).call(t,null!=(a=null!=(a=null!=t?t.data:t)?a.itunesNotes:a)?a.standard:a,{name:"escapeText",hash:{},data:i}),null!=a&&(c+=a),c+"</description>\n"},9:function(t,e,n,i){var a,r='    <grid class="bio-info-grid">\n';return a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.bornOrFormed:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.origin:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.bioGenreValue:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"    </grid>\n"},10:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <lockup class="bio-title-lockup">\n                <title class="bio-title">'+r(a(null!=t?t.bioFormedHeader:t,t))+"</title>\n                <subtitle>"+r(a(null!=t?t.bornOrFormed:t,t))+"</subtitle>\n            </lockup>\n"},12:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'            <lockup class="bio-title-lockup">\n                <title class="bio-title">'+o(r(null!=t?t.bioOriginHeader:t,t))+"</title>\n                <subtitle>"+o(r(null!=(a=null!=t?t.data:t)?a.origin:a,t))+"</subtitle>\n            </lockup>\n"},14:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <lockup class="bio-title-lockup">\n                <title class="bio-title">'+r(a(null!=t?t.bioGenreHeader:t,t))+"</title>\n                <subtitle>"+r(a(null!=t?t.bioGenreValue:t,t))+"</subtitle>\n            </lockup>\n"},16:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c='    <grid class="bio-swoosh-grid'+l(o(null!=t?t.columnCount:t,t))+'" style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||s).call(t,null!=(r=null!=a[1]?a[1].tintInfo:a[1])?r.bgColor:r,{name:"hexToRgb",hash:{},data:i}))+';">\n        <header class="edge-header"><title class="edge-title">'+l((e.toUpperCase||t&&t.toUpperCase||s).call(t,null!=t?t.title:t,{name:"toUpperCase",
hash:{},data:i}))+"</title></header>\n";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(17,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"    </grid>\n"},17:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <lockup type="shelf" class="action-lockup shelf-lockup" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-id="'+o(r(null!=t?t.id:t,t))+'" data-content-kind="'+o(r(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+">\n                "+o((e.productArtwork||t&&t.productArtwork||l).call(t,t,null!=t?t.kind:t,"bio-artist-img artist-art",{name:"productArtwork",hash:{},data:i}))+'\n                <title maxLines="2" class="">'+o(r(null!=t?t.name:t,t))+'</title>\n                <subtitle class="lockup-subtitle">'+o(r(null!=(a=null!=(a=null!=t?t.genres:t)?a[0]:a)?a.name:a,t))+"</subtitle>\n            </lockup>\n"},18:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},20:function(t,e,n,i){return'disabled="true"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o='<header class="edge-header">\n';return r=e["if"].call(t,null!=(r=null!=t?t.data:t)?r.hasArtistBio:r,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.program(3,i,a),data:i}),null!=r&&(o+=r),o+="</header>\n",r=e["if"].call(t,null!=(r=null!=t?t.data:t)?r.artistBio:r,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),r=e["if"].call(t,null!=(r=null!=t?t.data:t)?r.itunesNotes:r,{name:"if",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+="\n",r=e["if"].call(t,null!=(r=null!=t?t.data:t)?r.hasArtistBio:r,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+="\n",r=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(16,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o},useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],231:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("../../connect/feed/element"),o=i.controller.DocumentController,l=t("../../common").traits.TabComponent,s=t("../../common/traits/data_provider"),c=a.loc,u=function(t,e){t=t||{},t.entityValueProvider=t.entityValueProvider||{},t.controllers=t.controllers||[],t.name=c.loc("FUSE.NavBar.Connect"),this.model=new s;var n=t.entityValueProvider.valueForEntityProperty("metadata");!n&&a.keypath(t,"data.pageData.id")&&(n=this.model.lookup(t.data.pageData.id));var i=t.tintInfo,u=n&&n.id,h=n&&n.kind,d={};d[h]=u,t.controllers.length||(this.controller=new r({api:"activities",params:d,tintInfo:i}),t.controllers.push(this.controller)),t.classes=t.classes||[],t.classes.push("template"),o.call(this,t,e),l.call(this),this.controller&&(this.el.addEventListener("needsmore",this.controller.handleNeedsMore.bind(this.controller)),this.addEventDelegates(this.controller,["showRecommendations","getConnectFeed"]),a.account.getSubscriptionStatus({service:"AppleMusic"},function(){a.account.hasAdminPermission()&&a.account.getProfilePermissions({success:this.handlePermissions.bind(this),failure:this.handlePermissions.bind(this)})}.bind(this)))};a.inherit(u,o),a.inherit(u,l,!0),u.prototype.documentType="stackTemplate",u.prototype.handlePermissions=function(t){this.permissions=t||[]},e.exports=u},{"../../../util":304,"../../common":92,"../../common/traits/data_provider":108,"../../connect/feed/element":123,itml:355}],232:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,o=t("../common/traits/data_provider"),l=t("../error"),s=i.controller.DocumentController,c=function(t,e){var n,i=t.data||{},c="connect"===TabBar.selectedTab.identifier;if(i.storePlatformData){this.model=new o({data:i});var u=a.keypath(i,"pageData.id");n=this.model.lookup(u)}else n=i;var h=n.kind,d=h&&h.match(/iTunesBrand|brand|activity/g),p=h&&"activity"===h,m=n;t=t||{},t.watchedAttributes=t.watchedAttributes||[],t.watchedAttributes.push("type"),t.type=d?"curator":"artist",s.call(this,t,e);var f={artistStoreID:n.id+"",artistName:n.shortName||n.name,metadata:m,sidePackData:n},g=!1;if(i.storePlatformData&&i.pageData){var b=i.pageData.id;if(i.storePlatformData.artist){var v=a.keypath(i,"storePlatformData.artist.results");b&&v[b]&&v[b].hasArtistBio&&(g=v[b].hasArtistBio)}else if(i.storePlatformData.product){var y=a.keypath(i,"storePlatformData.product.results");b&&y[b]&&y[b].hasArtistBio&&(g=y[b].hasArtistBio)}}else(i.hasArtistBio||a.keypath(i,"itunesNotes.standard"))&&(g=!0);var w=this.el.getElementsByTagName("profileTemplate").item(0),k=w.getFeature("ProfileNativeViewController");if(n.isBlacklistedForSubscription&&n.url){var x=new l({errorTitle:"",errorMessage:r.loc("FUSE.Redirecting")});this.el.replace(x.el),openURL(n.url.replace("https","itmss"))}if(d){var C=[];t.data.groupingId&&C.push({identifier:"editors_picks",title:r.loc("FUSE.Profile.EditorsPicks")}),p||C.push({identifier:"playlists",title:r.loc("FUSE.Profile.Playlists")}),t.data.hasSocialPosts?C.push({identifier:"connect",title:r.loc("FUSE.Profile.Connect")}):k.setSocialHidden(!0),k.setAvailableContentFlags({related_content:g}),k.setVisibleSegments(C)}else{var A={all:!n.isBlacklistedForSubscription,connect:t.data.hasSocialPosts&&Settings.Restrictions.allowArtistActivity,related_content:g};k.setAvailableContentFlags(A),c&&k.setSelectedSegment("connect")}k.setProfileEntityValueProvider(f)};a.inherit(c,s),c.prototype.documentType="profileTemplate",e.exports=c},{"../../util":304,"../common/traits/data_provider":108,"../error":162,itml:355}],233:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.MultiElementController,o=t("../../common").traits.DataProvider,l=t("../../base").style,s=t("./style.hbs"),c=t("./template.hbs"),u=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new l({styleTemplate:s})),t.events=t.events||[],t.data=t.data||[],this.model=new o({data:t.data}),this.viewModel=this.model.lookup(t.data.id,"artist"),r.call(this,t,e),this.render()};a.inherit(u,r),u.prototype.template=c,e.exports=u},{"../../../util":304,"../../base":84,"../../common":92,"./style.hbs":235,"./template.hbs":236,itml:355}],234:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.DocumentController,o=t("./element"),l=t("./title.hbs"),s=t("./toolbar.hbs"),c=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new o(t),t.controllers.push(n)),r.call(this,t,e)};a.inherit(c,r),c.prototype.documentType="editorTemplate",c.prototype.titleTemplate=l,c.prototype.toolbarTemplate=s,e.exports=c},{"../../../util":304,"./element":233,"./title.hbs":237,"./toolbar.hbs":238,itml:355}],235:[function(t,e,n){e.exports=t(55)},{"hbsfy/runtime":338}],236:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"    "+r(a(t,t))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<dialogTemplate>\n  	<title>Reset Biography</title>\n   	<text>Resetting your biography will remove any changes you have made. Your default Apple Music biography will be displayed on your artist profile.</text>\n   	<button type="destructive">Reset</button>\n   	<button type="cancel">Cancel</button>\n</dialogTemplate>\n<text>\n';return a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.artistBio:a,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"</text>"},useData:!0})},{"hbsfy/runtime":338}],237:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return'<button id="cancelButton" class="align-left" action="close">Cancel</button>\n<title>Biography</title>\n<button class="align-right done-button" type="done">Done</button>'},useData:!0})},{"hbsfy/runtime":338}],238:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<button>Reset</button>"},useData:!0})},{"hbsfy/runtime":338}],239:[function(t,e,n){var i=t("../../../util"),a=t("../../grouping/controller"),r=t("../../common").traits.TabComponent,o=t("../../base/document"),l=function(t,e){t=t||{},t.controllers=t.controllers||[],t.entityValueProvider=t.entityValueProvider||{};var n,i=t.entityValueProvider.valueForEntityProperty("metadata"),l=t.tintInfo;i.url&&(n=new a({url:i.url,tintInfo:l}),t.controllers.push(n)),t.classes=t.classes||[],t.classes.push("template"),o.call(this,t,e),r.call(this)};i.inherit(l,o),i.inherit(l,r,!0),l.prototype.documentType="stackTemplate",e.exports=l},{"../../../util":304,"../../base/document":83,"../../common":92,"../../grouping/controller":177}],240:[function(t,e,n){var i=t("./all"),a=t("./editors_picks"),r=t("./playlists"),o=t("./bio"),l=t("./connect"),s=t("../sharing"),c=t("../common/traits/data_provider"),u=t("./edit"),h=t("../../util"),d=function(t,e){var n=t.entityValueProvider,i=n.valueForEntityProperty("metadata")||{};this.artistId=n.valueForEntityProperty("artistStoreID")||i.id,this.hasArtistBio=!1,this.relatedControllers=[],this.model=new c({suppressDialogs:!0}),this.shouldSetNativeFlags=!1,"native"===t.source&&h.account.isAppleMusicEnabled()&&(this.shouldSetNativeFlags=!0);var a=i&&i.url;this.eventHandlers={};for(var r in e)e.hasOwnProperty(r)&&(this.eventHandlers[r]=e[r]);this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.handleNeedsContent.bind(this)),this.nativeViewController.addEventListener("select",this.handleSelect.bind(this)),this.nativeViewController.addEventListener("change",this.handleChange.bind(this)),this.setNativeFlags(),!a&&this.artistId&&h.account.isAppleMusicEnabled()?this.model.fetchContent({profile:"url",contentIds:[this.artistId],onSuccess:this.get.bind(this)}):(this.pageUrl=a,this.get())};d.prototype.get=function(){if(!this.pageUrl){var t=this.model.lookup(this.artistId)||{};this.pageUrl=t.url}this.pageUrl&&this.model.fetchData({url:this.pageUrl,success:this.handleFetchSuccess.bind(this),failure:this.handleFailedFetch.bind(this)})},d.prototype.setNativeFlags=function(){var t=this.model.lookup(this.artistId);if(t){var e={hasSocialPosts:!1,hasArtistBio:!1,isBlacklisted:!1};e.hasSocialPosts=!!t.hasSocialPosts,e.hasArtistBio=!!t.hasArtistBio,e.isBlacklisted=!!t.isBlacklistedForSubscription;var n=t.isBlacklistedForSubscription||"activity"===t.kind||!h.account.isConnectEnabledForStorefront()||!Settings.Restrictions.allowArtistActivity;if(this.nativeViewController.setSocialHidden(n),this.shouldSetNativeFlags){var i={all:!e.isBlacklisted,connect:e.hasSocialPosts&&Settings.Restrictions.allowArtistActivity,biography:e.hasArtistBio};this.nativeViewController.setAvailableContentFlags(i)}}else this.nativeViewController.setSocialHidden(!0)},d.prototype.handleFetchSuccess=function(t){if(this.data=t,this.setNativeFlags(),this.relatedControllers.length>0)for(var e=0;e<this.relatedControllers.length;e++){var n=this.relatedControllers[e];n.handleFetchSuccess&&n.handleFetchSuccess.call(n,t)}},d.prototype.handleFailedFetch=function(t,e,n){if(this.relatedControllers.length>0)for(var i=0;i<this.relatedControllers.length;i++){var a=this.relatedControllers[i];a.handleFailedFetch&&a.handleFailedFetch.call(a,t,e,n)}},d.prototype.handleNeedsContent=function(t){var e,n={all:i,editors_picks:a,playlists:r,more_related_content:o,related_content:o,connect:l},s=t.segmentIdentifier||t.documentIdentifier,c=n[s],u={};if(c){u.entityValueProvider=t.entityValueProvider,u.tintInfo=t.tintInfo;var d=u.entityValueProvider;if(this.data=this.data||d.valueForEntityProperty("metadata"),this.data||(this.data={id:d.valueForEntityProperty("artistStoreID")}),u.data=this.data,"more_related_content"===s){var p=h.screen.sizeForScreenDimension();if("l"===p||"xl"===p)return;e=new c(u),e.addEventListener("tabPush",this.eventHandlers.tabPush),this.nativeViewController.setMoreRelatedContentDocument(e.el)}else"related_content"===s?(e=new c(u),e.addEventListener("tabPush",this.eventHandlers.tabPush),this.nativeViewController.setRelatedContentDocument(e.el)):(e=new c(u),e.addEventListener("tabPush",this.eventHandlers.tabPush),this.nativeViewController.setSegmentDocument(s,e.el))}this.relatedControllers.push(e)},d.prototype.handleSelect=function(t){var e=t.buttonIdentifier;switch(e){case"shareButton":var n=this.model.lookup(this.artistId);this.shareController=new s({data:{event:t,content:n}}),this.nativeViewController.presentShareDocument(this.shareController.el,{animated:!0});var i=this.shareController.el.getElementsByTagName("shareTemplate").item(0);i&&i.addEventListener("submit",this.handleShareSubmit.bind(this));break;case"editButton":this.editProfileController=new u({data:this.data}),this.nativeViewController.presentBiographyEditorDocument(this.editProfileController.el,{animated:!0});var a=this.editProfileController.el.getElementsByTagName("editorTemplate").item(0);a&&a.addEventListener("submit",this.handleEditProfileSubmit.bind(this))}},d.prototype.handleChange=function(t){var e=t.itemIdentifier;switch(e){case"following":}},d.prototype.handleEditProfileSubmit=function(t){var e=t.buttonIdentifier;switch(e){case"doneButton":break;case"cancelButton":}},d.prototype.handleShareSubmit=function(){},d.prototype.setFollowerCount=function(t){var e=t.entityValueProvider.valueForEntityProperty("artistStoreID"),n=h.urls.build("followerCount",{artist:e});h.xhr({method:"GET",url:n,success:function(t){try{var e=JSON.parse(t);this.nativeViewController.numberOfFollowers=e.count,this.nativeViewController.setNumberOfFollowers(this.nativeViewController.numberOfFollowers)}catch(n){h.log.error(n)}}.bind(this),failure:function(){h.log.error("failed request for follower count")}})},e.exports=d},{"../../util":304,"../common/traits/data_provider":108,"../sharing":280,"./all":224,"./bio":228,"./connect":231,"./edit":234,"./editors_picks":239,"./playlists":242}],241:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),o=t("../../common").traits.DataProvider,l=i.controller.MultiElementController,s=t("../../common").traits.EventMap,c=t("../../common").traits.TabComponent,u=t("../../base").style,h=function(t,e){t=t||{},t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styles.push(new u(t)),t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),this.loading=!0,this.batchSize=24,this.controllerName="profile-playlists",l.call(this,t,e),s.call(this,t),c.call(this),a.extend(this.onSelect,{carousel:this.pushProduct,"play-button":this.playMedia,"show-more":this.showMore}),this.model=new o({data:t.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get()};a.inherit(h,l),a.inherit(h,c,!0),a.inherit(h,s,!0),h.prototype.template=r,h.prototype.artworkMap={profile:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},track:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},product:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},productChild:{xs:[27,27],s:[27,27],m:[27,27],l:[60,60],xl:[60,60]},video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84]}},h.prototype.get=function(){this.model.data.pageData&&this.handleFetchSuccess(this.model.data)},h.prototype.handleFetchSuccess=function(t){t&&this.model.dataSuccess(t,{success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})},h.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},h.prototype.createView=function(t){if(this.viewModel)this.viewModel=this.viewModel.concat(this.getPlaylistBatch());else{var e=t.pageData.id,n=this.model.lookup(e,"product");n&&n.playlistIds?(this.playlistIds=n.playlistIds,this.viewModel=this.getPlaylistBatch()):this.handleFailedFetch(404,"","Missing Playlists for Curator")}return this.viewModel},h.prototype.getPlaylistBatch=function(){for(var t=[],e=this.playlistIds.splice(0,this.batchSize),n=0;n<e.length;n++){var i={id:e[n]};t.push(this.model.lookupContent(i,this.processContent.bind(this)))}return this.theEnd=0===this.playlistIds.length,t},h.prototype.processContent=function(t){var e=a.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap}),n=a.lockup.setArtworks(t,e,this.artworkMap);return n.line1=a.lockup.line1(t),n.isExplicit=a.lockup.isExplicit(t),n},h.prototype.handleDataReady=function(t){this.loading=!1,a.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},h.prototype.showMore=function(){this.loading||this.theEnd||(this.loading=!0,this.model.dataSuccess(this.playlistIds,{success:this.createView.bind(this)}))},e.exports=h},{"../../../util":304,"../../base":84,"../../common":92,"./template.hbs":243,itml:355}],242:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./element"),o=t("../../common").traits.TabComponent,l=i.controller.DocumentController,s=function(t,e){t=t||{},t.controllers=t.controllers||[];var n=t.data,i=t.tintInfo;n?(this.controller=new r({data:n,tintInfo:i}),t.controllers.push(this.controller)):a.log.error("no playlists associated with curator",n),t.classes=t.classes||[],t.classes.push("template"),l.call(this,t,e),o.call(this)};a.inherit(s,l),a.inherit(s,o,!0),s.prototype.documentType="stackTemplate",s.prototype.handleFetchSuccess=function(t){this.controller.handleFetchSuccess(t)},s.prototype.handleFailedFetch=function(t,e,n){this.controller.handleFailedFetch(t,e,n)},e.exports=s},{"../../../util":304,"../../common":92,"./element":241,itml:355}],243:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="paged-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="    </grid>\n\n",a=e.unless.call(t,null!=t?t.theEnd:t,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o},2:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"            ","listLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},4:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        <button id=\"showMore\" class='show-more-grid show-more' >"+r((e.loc||t&&t.loc||a).call(t,"FUSE.ShowMore",{name:"loc",hash:{},data:i}))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],244:[function(t,e,n){var i=t("../../util"),a=t("../grouping/controller"),r=t("../loading/controller"),o=t("../common").traits.EventMap,l=t("../common").traits.TabComponent,s=t("../common").traits.DataProvider,c=t("../base/document"),u=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=t.name||"Radio";var n,s=t.url;0===t.controllers.length&&i.urls.radio()?(n=new a({url:i.urls.radio()}),t.controllers.push(n)):(n=new r,t.controllers.push(n)),c.call(this,t,e),l.call(this),o.call(this),this.addEventListener("appear",n.handleAppear.bind(n)),s&&this.handleDeepLink(s)};i.inherit(u,c),i.inherit(u,l,!0),i.inherit(u,o,!0),u.prototype.documentType="stackTemplate",u.prototype.handleDeepLink=function(t){var e=t.match(/ra\.[0-9]+/g);e||(e=t.match(/st\.[0-9]+/g)),e&&(this.stationId=e[0],this.model=new s({pageProfile:"lockup"}),this.model.fetchContent({profile:"lockup",contentIds:[this.stationId],onSuccess:function(){this.playMediaID.call(this,this.stationId)}.bind(this)}))},e.exports=u},{"../../util":304,"../base/document":83,"../common":92,"../grouping/controller":177,"../loading/controller":201}],245:[function(t,e,n){var i=t("./document"),a=t("../base/tab"),r=t("../../util"),o=function(t){t=t||{},this.url=t.url,a.call(this,t),t.url&&this.removeEventListener("replaceDocument")};r.inherit(o,a),o.prototype.getDocumentController=function(){return new i({name:this.name,url:this.url})},e.exports=o},{"../../util":304,"../base/tab":87,"./document":244}],246:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=i.event.Event,l=t("./template.hbs"),s=t("./style.hbs"),c=t("./partials"),u=t("../../common").traits.DataProvider,h=t("../../base").style,d=t("../../common").traits.EventMap,p=t("../../common").traits.TabComponent,m=i.controller.MultiElementController,f=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.styles.push(new h({styleTemplate:s})),c(),this.loading=!0,m.call(this,t,e),d.call(this,t),p.call(this),this.model=new u,this.unavailableShowIds=[],a.extend(this.onSelect,{"link-button":this.handleLink,"play-media":this.playMedia,"request-button":this.handleUserRequest}),this.getCmsData()};a.inherit(f,m),a.inherit(f,d,!0),a.inherit(f,p,!0),f.prototype.template=l,f.prototype.getCmsData=function(){a.xhr({url:"https://uic.itunes.apple.com/live-stations/beats1/feed.json",method:"GET",success:this.cmsSuccess.bind(this),failure:this.cmsFailure.bind(this)})},f.prototype.cmsSuccess=function(t){this.cmsData=JSON.parse(t),this.cmsData.stationId?this.getStoreData():this.handleRender()},f.prototype.cmsFailure=function(t){a.log.error("BeatsOne: CMS Request Failure: ",t),this.renderView()},f.prototype.getStoreData=function(){var t=[];t.push(this.cmsData.stationId),this.cmsData.curatorIds instanceof Array&&t.push.apply(t,this.cmsData.curatorIds),this.model.fetchContent({profile:"lockup",contentIds:t,onSuccess:this.storeDataSuccess.bind(this),onFailure:this.storeDataFailure.bind(this)})},f.prototype.storeDataSuccess=function(){var t=this.model.lookup(this.cmsData.stationId);t?(this.stationData=t,this.createView()):(a.log.error("LiveStation: No station data found for ID: ",this.cmsData.stationId),this.handleRender())},f.prototype.storeDataFailure=function(t){a.log.error("LiveStation: Store request failed: ",t),this.renderView()},f.prototype.createView=function(){this.errorTitle=null,this.errorMessage=null,this.viewModel={},this.viewModel.stationId=this.cmsData.stationId,this.strings={},this.cmsData.details&&(this.viewModel.requestAddress=this.cmsData.details.requestAddress,this.viewModel.links=this.cmsData.details.links,this.viewModel.defaultShowImageUrl=this.cmsData.details.defaultShowImageUrl,this.strings={description:this.cmsData.details.description,liveNowTitle:this.cmsData.details.liveNowTitle,aboutTitle:this.cmsData.details.aboutTitle,upcomingShowsTitle:this.cmsData.details.upcomingShowsTitle,featuredShowsTitle:this.cmsData.details.featuredShowsTitle,listenNowActionText:r.loc("FUSE.Radio.ListenNowButton"),requestActionText:r.loc("FUSE.Radio.SendRequestButton")});var t=a.keypath(this.stationData,"editorialArtwork.subscriptionCover");t&&(this.viewModel.uber=t),this.setUpcomingShows(),this.setCurrentShow(),this.setFeaturedShows(),this.handleRender()},f.prototype.setUpcomingShows=function(){function t(t){var e;return t&&t instanceof Date&&(e=formatDate(t,"hm"),e=e.replace(" ","").replace(":00AM","AM").replace(":00PM","PM")),e}var e,n,i,a=Date.now(),r=new Date(a+432e5);this.viewModel.upcomingShows=[],this.cmsData.upcomingShows instanceof Array&&this.cmsData.upcomingShows.forEach(function(o){e=new Date(o.startTime),n=new Date(o.endTime),o.formattedStartTime=t(e),o.formattedEndTime=t(n),a<n.getTime()&&e.getTime()<r&&(o.curatorId&&(i=this.model.lookup(o.curatorId),i?o.storeData=i:this.unavailableShowIds.push(o.curatorId)),a>e.getTime()?this.viewModel.currentShow=o:this.viewModel.upcomingShows.push(o))},this)},f.prototype.setCurrentShow=function(){if(this.viewModel.currentShow){var t=a.keypath(this.viewModel,"currentShow.storeData.editorialArtwork.brandLogo");t?this.viewModel.currentShow.artwork=t:a.keypath(this.cmsData,"details.genericShowDetails.artworkUrl")&&(this.viewModel.currentShow.artwork={url:this.cmsData.details.genericShowDetails.artworkUrl})}else{var e={};this.cmsData.details.genericShowDetails&&(e.title=this.cmsData.details.genericShowDetails.title,e.description=this.cmsData.details.genericShowDetails.description,e.artwork={url:this.cmsData.details.genericShowDetails.artworkUrl}),this.viewModel.currentShow=e}},f.prototype.setFeaturedShows=function(){var t;this.viewModel.featuredShows=[],this.cmsData.featuredShows instanceof Array&&this.cmsData.featuredShows.forEach(function(e){e.curatorId&&(t=this.model.lookup(e.curatorId),t&&a.keypath(t,"editorialArtwork.brandLogo")?(e.storeData=t,e.artwork=t.editorialArtwork.brandLogo,this.viewModel.featuredShows.push(e)):this.unavailableShowIds.push(e.curatorId))},this)},f.prototype.handleLink=function(t){var e=t.target.getAttribute("data-link-url"),n=t.target.getAttribute("data-page-target");e&&("external"===n?openURL(e):this.pushUrl(t))},f.prototype.handleUserRequest=function(t){var e=t.target.getAttribute("data-request-address");e&&openURL("sms:"+e)},f.prototype.shouldUseWideLayout=function(){return["l","xl"].indexOf(a.screen.sizeForScreenDimension())>-1},f.prototype.handleRender=function(){this.loading=!1,this.unavailableShowIds.length>0&&(this.unavailableShowIds=this.unavailableShowIds.filter(function(t,e,n){return n.indexOf(t)===e}),a.log.error("LiveStation: Unavailable show Ids: ",this.unavailableShowIds)),this.viewModel&&this.viewModel.uber&&this.dispatchEvent(new o("updateDocumentStyles",{detail:{style:new h({styleTemplate:s,tintInfo:this.viewModel.uber})}})),this.renderView()},f.prototype.handleRotation=function(){this.renderView()},f.prototype.renderView=function(){this.viewModel&&(this.viewModel.wideLayout=this.shouldUseWideLayout(),this.viewModel.narrowLayout=!this.shouldUseWideLayout(),this.viewModel.screenSize=a.screen.sizeForScreenDimension(),this.setProperArtwork()),this.render()},f.prototype.setProperArtwork=function(){this.viewModel.uber&&(this.viewModel.uber.image=this.getProperArtwork("uber",this.viewModel.uber)),this.viewModel.currentShow.image=this.getProperArtwork("live",this.viewModel.currentShow.artwork),this.viewModel.featuredShows.forEach(function(t){t.image=this.getProperArtwork("featured",t.artwork)},this)},f.prototype.getProperArtwork=function(t,e){var n,i,r;return t&&e&&(r={content:{artwork:e},params:{type:t}},this.artworkMap&&(r.artworkMap=this.artworkMap),i=a.artwork.getArtworkForContent(r),i&&i.image&&(n=i.image)),n},f.prototype.artworkMap={uber:{crop:"h",xs:[320,180],s:[375,240],m:[414,240],l:[768,305],xl:[1024,305]},live:{crop:"cc",xs:[88,88],s:[104,104],m:[130,130],l:[123,123],xl:[123,123]},featured:{crop:"cc",xs:[138,138],s:[165,165],m:[184,184],l:[123,123],xl:[123,123]}},e.exports=f},{"../../../util":304,"../../base":84,"../../common":92,"./partials":251,"./style.hbs":253,"./template.hbs":254,itml:355}],247:[function(t,e,n){var i=t("../../../util"),a=t("./element"),r=t("../../common").traits.TabComponent,o=t("../../base/document"),l=function(t,e){t=t||{},t.name="Beats 1",t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("live-station-document"),t.controllers=t.controllers||[],this.controller=new a,this.controller.addEventListener("updateDocumentStyles",this.updateDocumentStyles.bind(this)),t.controllers.push(this.controller),o.call(this,t,e),r.call(this)};i.inherit(l,o),i.inherit(l,r,!0),l.prototype.dataReady=function(){},l.prototype.updateDocumentStyles=function(t){t&&t.detail&&(this.stylesController.addStyle(t.detail.style),this.render())},l.prototype.documentType="stackTemplate",e.exports=l},{"../../../util":304,"../../base/document":83,"../../common":92,"./element":246}],248:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="";return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.liveNowTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n    <grid>\n",a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=a&&(s+=a),s+='            <lockup>\n                <img width="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.height:a,t))+'" srcset="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.url:a,t))+" "+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.dpr:a,t))+'" alt="'+o(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.name:a,t))+'" />\n            </lockup>\n            <lockup>\n',a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedStartTime:a,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                <title maxLines="0" class="show-title"><text>'+o(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.title:a,t))+'</text></title>\n                <subtitle class="current-show-description" maxLines="0"><text>'+o(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.description:a,t))+'</text></subtitle>\n                <button type="thin" class="station-button play-media" data-content-id="'+o(r(null!=(a=null!=t?t.viewModel:t)?a.stationId:a,t))+'"><title>'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=(a=null!=t?t.strings:t)?a.listenNowActionText:a,{name:"toUpperCase",hash:{},data:i}))+"</title></button>\n",a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.allowRequests:a,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"            </lockup>\n        </card>\n    </grid>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'        <header class="edge-header current-show-header">\n            <title class="edge-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.strings:t)?a.liveNowTitle:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n        </header>\n"},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='        <card class="editorial-card" data-content-id="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.id:a,t))+'" data-content-kind="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.kind:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+">\n"},6:function(t,e,n,i){return'        <card class="editorial-card">\n'},8:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedEndTime:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},9:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                        <text maxLines="0" class="timestamp">'+o(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedStartTime:a,t))+" - "+o(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedEndTime:a,t))+"</text>\n"},11:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.requestAddress:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},12:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.requestActionText:a,{
name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},13:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return'                            <button type="thin" class="request-button station-button" data-request-address="'+o(r(null!=(a=null!=t?t.viewModel:t)?a.requestAddress:a,t))+'"><title>'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=(a=null!=t?t.strings:t)?a.requestActionText:a,{name:"toUpperCase",hash:{},data:i}))+"</title></button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.currentShow:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":338}],249:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.aboutTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'        <header class="edge-header about-header">\n           <title class="edge-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.strings:t)?a.aboutTitle:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n        </header>\n"},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='    <grid>\n        <card class="editorial-card">\n            <lockup>\n                <text maxLines="0">'+o(r(null!=(a=null!=t?t.strings:t)?a.description:a,t))+"</text>\n";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.links:a,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"            </lockup>\n        </card>\n    </grid>\n"},5:function(t,e,n,i){var a,r='                    <list class="link-list">\n';return a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.links:a,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"                    </list>\n"},6:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},7:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.label:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},8:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                                    <button type="link" data-link-url="'+r(a(null!=t?t.url:t,t))+'" data-page-target="'+r(a(null!=t?t.target:t,t))+'" class="link-button">\n                                        <title>'+r(a(null!=t?t.label:t,t))+'</title>\n                                        <img src="resource://arrow"/>\n                                    </button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.wideLayout:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.description:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":338}],250:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="";return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.featuredShowsTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='\n    <grid class="featured-grid featured-grid-'+o(r(null!=(a=null!=t?t.viewModel:t)?a.screenSize:a,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=" ",a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.narrowLayout:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.featuredShows:a,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </grid>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'        <header class="edge-header featured-shows-header">\n           <title class="edge-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.strings:t)?a.featuredShowsTitle:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n        </header>\n"},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'style="itml-item-width: '+o(r(null!=(a=null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.featuredShows:a)?a[1]:a)?a.image:a)?a.width:a,t))+'"'},6:function(t,e,n,i){var a,r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c="function",u="            <lockup ";return a=e.unless.call(t,null!=t?t.isActive:t,{name:"unless",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+=' class="action-lockup featured-show shelf-lockup" data-preview-id="'+l(o(null!=(a=null!=t?t.storeData:t)?a.id:a,t))+'" data-content-id="'+l(o(null!=(a=null!=t?t.storeData:t)?a.id:a,t))+'" data-content-kind="'+l(o(null!=(a=null!=t?t.storeData:t)?a.kind:a,t))+'" type="shelf" ',a=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(u+=a),u+'>\n                <img width="'+l(o(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+l(o(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+l(o(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+l(o(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+l((r=null!=(r=e.name||(null!=t?t.name:t))?r:s,typeof r===c?r.call(t,{name:"name",hash:{},data:i}):r))+'" />\n                <title maxLines="2" class="lockup-title">'+l(o(null!=(a=null!=t?t.storeData:t)?a.name:a,t))+"</title>\n            </lockup>\n"},7:function(t,e,n,i){return'disabled="true"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.featuredShows:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":338}],251:[function(t,e,n){var i=t("itml").utils.Handlebars,a={description:t("./description.hbs"),currentShow:t("./currentShow.hbs"),upcomingShows:t("./upcomingShows.hbs"),featuredShows:t("./featuredShows.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./currentShow.hbs":248,"./description.hbs":249,"./featuredShows.hbs":250,"./upcomingShows.hbs":252,itml:355}],252:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.upcomingShowsTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n    <grid class="shows-grid">\n',a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.upcomingShows:a,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"    </grid>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'        <header class="edge-header upcoming-shows-header">\n           <title class="edge-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.strings:t)?a.upcomingShowsTitle:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n        </header>\n"},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <card class="editorial-card">\n                <lockup disabled="true">\n                    <text maxLines="0" class="timestamp"><date>'+r(a(null!=t?t.formattedStartTime:t,t))+"</date> - <date>"+r(a(null!=t?t.formattedEndTime:t,t))+'</date></text>\n                    <title maxLines="2" class="show-title"><text>'+r(a(null!=t?t.title:t,t))+'</text></title>\n                    <subtitle maxLines="0">\n                        <text>'+r(a(null!=t?t.description:t,t))+"</text>\n                    </subtitle>\n                </lockup>\n            </card>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.upcomingShows:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":338}],253:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return" .live-station-document {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.9,{name:"hexToRgb",hash:{},data:i}))+";\n    background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n }\n\n .editorial-card {\n    itml-card-type: editorial;\n }\n\n.section-divider {\n    padding: 0 0 15pt 0;\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.4,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.edge-title {\n    font-size: 12pt;\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.about-header {\n    padding: 0 0 0 0;\n}\n\n.upcoming-shows-header {\n    padding: 0pt 0 3pt 0;\n}\n\n.featured-shows-header {\n    padding: 15pt 0 15pt 0;\n}\n\n.current-show-header {\n    padding: 0 0 5pt 0;\n}\n\n.current-show-description {\n    padding: 0 0 5pt 0\n}\n\n.link-list {\n    padding: 5pt 0 0 0;\n}\n\n.link-button {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.show-title {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n    font-size: 16pt;\n    padding: 5 0 0 0;\n}\n\n.timestamp {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor2:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.shows-grid {\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.4,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.featured-grid {\n    border-width: 0;\n}\n\n.featured-grid-xs {\n    column-count: 2;\n}\n\n.featured-grid-s {\n    column-count: 2;\n}\n\n.featured-grid-m {\n    column-count: 2;\n}\n\n.featured-grid-l {\n    column-count: 3;\n}\n\n.featured-grid-xl {\n    column-count: 4;\n}\n\n.featured-show {\n    padding: 0 0 15pt 0;\n}\n\n.station-button {\n    color: rgba(0,0,0,1);\n    border-color: rgba(0,0,0,1);\n    border-radius: 13pt;\n    padding: 5 10 5 10;\n}\n\n.station-button {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n"},useData:!0})},{"hbsfy/runtime":338}],254:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.wideLayout:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda;return'        <img disabled="true" class="" style="itml-img-treatment: uber;background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" width="'+o(l(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.width:a,t))+'" height="'+o(l(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.height:a,t))+'" srcset="'+o(l(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.url:a,t))+" "+o(l(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.dpr:a,t))+'" />\n'},4:function(t,e,n,i){var a,r='        <divider class="section-divider" />\n        <split>\n';return a=this.invokePartial(n.currentShow,"            ","currentShow",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.featuredShows,"            ","featuredShows",t,void 0,e,n,i),null!=a&&(r+=a),r+="        </split>\n        <split>\n",a=this.invokePartial(n.description,"            ","description",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.upcomingShows,"            ","upcomingShows",t,void 0,e,n,i),null!=a&&(r+=a),r+"        </split>\n"},6:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.description,"        ","description",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.currentShow,"        ","currentShow",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.upcomingShows,"        ","upcomingShows",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.featuredShows,"        ","featuredShows",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],255:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("../../base").style,o=t("./style.hbs"),l=t("./template.hbs"),s=i.controller.MultiElementController,c=t("../../common").traits.EventMap,u=t("../../common").traits.TabComponent,h=t("../../common").traits.DataProvider,d=function(t,e){t=t||{},t.styles=t.styles||[],t.events=t.events||[],t.events.push("select"),t.styles.push(new r({styleTemplate:o})),s.call(this,t,e),c.call(this,t),u.call(this),a.extend(this.onSelect,{"play-button":this.playMedia,"recent-lockup":this.playMedia}),this.model=new h,this.artworkMap={list:{crop:"bb",xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]}};var n=this.createView(t.stations);this.onDataReady(n)};a.inherit(d,s),a.inherit(d,c,!0),a.inherit(d,u,!0),d.prototype.template=l,d.prototype.createView=function(t){this.errorTitle=null,this.errorMessage=null;var e=a.screen.sizeForScreenDimension().match(/l/i);if(t)for(var n=function(t){for(var e=0;e<t.length;e++)t[e].kind="radioStation",t[e]=this.processContent(t[e]);return t}.bind(this),i=0;i<t.length;i++){var r=t[i];r.stations=n(r.stations),r.isLarge=e}return t},d.prototype.processContent=function(t){var e=a.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:{type:"list"}}),n=a.lockup.setArtworks(t,e,this.artworkMap,"list");return n.line1=a.lockup.line1(t),n.isExplicit=a.lockup.isExplicit(t),n},d.prototype.onDataReady=function(t){t&&(this.viewModel=t),this.loading=!1,this.render()},d.prototype.refreshComplete=function(t){var e=t.detail,n=e.result;"hasNewContent"===n&&this.render()},e.exports=d},{"../../../util":304,"../../base":84,"../../common":92,"./style.hbs":257,"./template.hbs":258,itml:355}],256:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./element"),o=t("../../common").traits.TabComponent,l=i.controller.DocumentController,s=a.loc,c=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=s.loc("FUSE.Radio.Recents.PageTitle"),0===t.controllers.length&&t.controllers.push(new r(t)),l.call(this,t,e),o.call(this)};a.inherit(c,l),a.inherit(c,o,!0),c.prototype.documentType="stackTemplate",e.exports=c},{"../../../util":304,"../../common":92,"./element":255,itml:355}],257:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".recent-grid {\n}\n.recent-grid-large {\n    border-width: 0pt;\n    column-count: 5;\n}\n.recent-header {\n    border-width: 0pt;\n    border-color: rgba(0,0,0,0);\n    itml-padding: 15pt 0 0 15pt;\n}\n.shelf-lockup {\n	padding: 10pt 0 0 0;\n}\n@media all and (min-width: 768) {\n    .recent-grid-large {\n        column-count: 5;\n    }\n}\n\n@media all and (width: 1024) {\n    .recent-grid-large {\n        column-count: 6;\n    }   \n}"},useData:!0})},{"hbsfy/runtime":338}],258:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i,a){var r,o="";return r=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"\n"},4:function(t,e,n,i,a){var r,o=e.helperMissing,l='        <grid class="recent-grid';return r=e["if"].call(t,null!=t?t.isLarge:t,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+='" ',r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=r&&(l+=r),l+=">\n\n",r=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n",r=e.each.call(t,null!=t?t.stations:t,{name:"each",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"\n        </grid> \n\n"},5:function(t,e,n,i){return"-large"},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'            <header class="recent-header">\n                <text class="edge-title">'+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</text>\n            </header>\n"},9:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=a[1]?a[1].isLarge:a[1],{name:"if",hash:{},fn:this.program(10,i,a),inverse:this.program(12,i,a),data:i}),null!=r&&(o+=r),o},10:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"                    ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},12:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                    ","listLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+="\n",r=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],259:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=t("./template.hbs"),o=t("./style.hbs"),l=t("./partials"),s=t("../common").traits.DataProvider,c=t("../base").style,u=t("../common").traits.EventMap,h=t("../common").traits.TabComponent,d=i.controller.MultiElementController,p=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),this.controllerName="room";var n=t.data,i=a.keypath(n,"pageData.uber.masterArt")||{};t.styles.push(new c({styleTemplate:o,tintInfo:i})),l(),this.loading=!0,d.call(this,t,e),u.call(this,t),h.call(this),a.extend(this.onSelect,{"more-link":this.pushUrl,"play-button":this.playMedia}),this.model=new s({data:t.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.dataSuccess(this.model.data,{success:this.createView.bind(this),failure:this.requestFailure.bind(this)})};a.inherit(p,d),a.inherit(p,u,!0),a.inherit(p,h,!0),p.prototype.template=r,p.prototype.requestFailure=function(t){a.log.error("RoomElementController: Store request failed: ",t),this.renderView()},p.prototype.createView=function(t){var e={children:[]};return t.pageData&&t.pageData.uber&&(e.uber=t.pageData.uber),t.pageData&&t.pageData.segments?(this.isMultiroom=!0,t.pageData.segments.forEach(function(t){e.children.push(this.processRoomPreData(t))},this)):t.pageData&&t.pageData.adamIds instanceof Array&&(this.isMultiroom=!1,e.children.push(this.processRoomPreData(t.pageData))),e},p.prototype.processRoomPreData=function(t){var e={content:[]},n={326:"Shelf",327:"List",328:"Grid+ShortCopy",329:"Grid"};if(t.title&&(e.title=t.title),t.fcMetadata&&t.fcMetadata.lockupStyle)e.layoutConfig=this.layouts[t.fcMetadata.lockupStyle];else{var i=t.fcKind,a=n[i]||"List";e.layoutConfig=this.layouts[a]}this.isMultiroom&&t.seeAllUrl&&(e.seeAllUrl=t.seeAllUrl);for(var r=0;r<t.adamIds.length&&(!this.isMultiroom||10!==r);r++)e.content.push(this.model.lookupContent({id:t.adamIds[r]},this.processContent.bind(this)));return e},p.prototype.processContent=function(t){return a.deepClone(t)},p.prototype.handleDataReady=function(t){this.viewModel=t.detail.view;for(var e=this.viewModel.children,n=e.length-1;n>=0;n--)e[n].content.length>0?this.processRoomPostData(e[n]):e.splice(n,1);this.loading=!1,this.renderView()},p.prototype.processRoomPostData=function(t){var e=["musicVideo","uploadedVideo"];t.firstChildKind=t.content[0].kind,e.indexOf(t.firstChildKind)>-1?(t.isVideoType=!0,t.productType="video"):(t.isAlbumType=!0,t.productType="album"),t.layoutConfig||(t.layoutConfig=this.layouts.List,this.isMultiroom&&"song"!==t.firstChildKind&&(t.layoutConfig=this.layouts.Shelf)),t[t.layoutConfig.id]=!0,t.layout=t.layoutConfig.id,t.layoutConfig.hasOwnProperty("showDescription")&&(t.showDescription=t.layoutConfig.showDescription)},p.prototype.renderView=function(){this.viewModel&&this.setProperLayout(),this.render()},p.prototype.setProperLayout=function(){function t(t,e){var n;switch(t){case"song":n="list"===e?"track":"album_"+e;break;case"playlist":n="list"===e?"list":"album_"+e;break;case"uploadedVideo":case"musicVideo":n="video_"+e;break;default:n="album_"+e}return n}var e,n,i,r,o,l,s,c=a.screen.sizeForScreenDimension();this.viewModel.uber&&(this.viewModel.uber.image=a.artwork.getArtworkForContent({content:{artwork:this.viewModel.uber.masterArt},artworkMap:this.artworkMap,params:{type:"uber"}}).image),this.viewModel.children.forEach(function(u,h){for(u.screenSize=c,o=u.content.length,["l","xl"].indexOf(c)>-1?u.isLargeScreen=!0:u.isSmallScreen=!0,u.layoutConfig.numColumns&&(u.numColumns=u.layoutConfig.numColumns[u.productType][c]),h<this.viewModel.children.length-1&&(u.showDivider=!0),u.visibleContent=[],this.isMultiroom&&(l=u.layoutConfig.multiroomMax[u.productType][c],u.content.length>l?(o=l,u.showSeeAll=!0):u.showSeeAll=!1),s=0;o>s;){if(r=u.content[s],e=t(r.kind,u.layout),n=a.artwork.getArtworkForContent({content:r,artworkMap:this.artworkMap,params:{type:e}}),r.title=r.title||r.name,r.line1=a.lockup.line1(r),u.showDescription&&r.itunesNotes&&(r.itunesNotes["short"]||r.itunesNotes.standard)&&(r.lineDescription=r.itunesNotes["short"]||r.itunesNotes.standard),r.isExplicit=a.lockup.isExplicit(r),"playlist"===u.content[s].kind){var d=a.extend(a.artwork.artworkMap,this.artworkMap);i=d[e][c],this.artworkMap[e+"Child"]={crop:"cc"},this.artworkMap[e+"Child"][c]=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)]}u.visibleContent.push(a.lockup.setArtworks(u.content[s],n,this.artworkMap,e)),s++}},this)},p.prototype.handleRotation=function(){this.renderView()},p.prototype.layouts={Grid:{id:"grid",multiroomMax:{album:{xs:6,s:6,m:6,l:8,xl:6},video:{xs:6,s:6,m:6,l:8,xl:6}},numColumns:{album:{xs:2,s:2,m:2,l:4,xl:6},video:{xs:2,s:2,m:2,l:4,xl:6}}},"Grid+ShortCopy":{id:"gridWithCopy",showDescription:!0,multiroomMax:{album:{xs:6,s:6,m:6,l:6,xl:6},video:{xs:6,s:6,m:6,l:6,xl:6}},numColumns:{album:{xs:1,s:1,m:1,l:2,xl:2},video:{xs:1,s:1,m:1,l:3,xl:4}}},Spotlight:{id:"spotlight",multiroomMax:{album:{xs:1,s:1,m:1,l:1,xl:1},video:{xs:1,s:1,m:1,l:1,xl:1}},numColumns:{album:{xs:1,s:1,m:1,l:1,xl:1},video:{xs:1,s:1,m:1,l:1,xl:1}}},"Spotlight+ShortCopy":{id:"spotlight",showDescription:!0,multiroomMax:{album:{xs:1,s:1,m:1,l:1,xl:1},video:{xs:1,s:1,m:1,l:1,xl:1}},numColumns:{album:{xs:1,s:1,m:1,l:1,xl:1},video:{xs:1,s:1,m:1,l:1,xl:1}}},Shelf:{id:"shelf",multiroomMax:{album:{xs:6,s:6,m:6,l:5,xl:6},video:{xs:6,s:6,m:6,l:5,xl:6}},numColumns:{album:{xs:3,s:3,m:3,l:5,xl:6},video:{xs:3,s:3,m:3,l:5,xl:6}}},List:{id:"list",multiroomMax:{album:{xs:6,s:6,m:6,l:8,xl:8},video:{xs:6,s:6,m:6,l:8,xl:8}}}},p.prototype.artworkMap={uber:{crop:"h",xs:[320,140],s:[375,160],m:[414,180],l:[768,330],xl:[1024,330]},album_list:{crop:"cc",xs:[55,55],s:[55,55],m:[80,80],l:[100,100],xl:[100,100]},video_list:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84]},album_shelf:{crop:"cc",xs:[105,105],s:[123,123],m:[137,137],l:[152,152],xl:[168,168]},video_shelf:{crop:"h",xs:[105,60],s:[123,70],m:[137,78],l:[152,86],xl:[170,96]},album_grid:{crop:"cc",xs:[158,158],s:[187,187],m:[207,207],l:[190,190],xl:[200,200]},video_grid:{crop:"h",xs:[158,90],s:[187,105],m:[207,116],l:[190,108],xl:[170,96]},album_gridWithCopy:{crop:"cc",xs:[130,130],s:[130,130],m:[150,150],l:[130,130],xl:[150,150]},video_gridWithCopy:{crop:"h",xs:[144,82],s:[152,86],m:[180,102],l:[224,125],xl:[224,125]},album_spotlight:{crop:"cc",xs:[158,158],s:[187,187],m:[207,207],l:[185,185],xl:[185,185]},video_spotlight:{crop:"h",xs:[320,182],s:[375,210],m:[414,232],l:[356,202],xl:[356,202]}},e.exports=p},{"../../util":304,"../base":84,"../common":92,"./partials":265,"./style.hbs":271,"./template.hbs":272,itml:355}],260:[function(t,e,n){var i=t("../../util"),a=t("../base/document"),r=t("./element"),o=t("../common").traits.TabComponent,l=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("room-document");var n=t.data;this.controller=new r({data:n}),t.controllers.push(this.controller),a.call(this,t,e),o.call(this)};i.inherit(l,a),i.inherit(l,o,!0),l.prototype.documentType="stackTemplate",e.exports=l},{"../../util":304,"../base/document":83,"../common":92,"./element":259}],261:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'    <divider class="room-divider" />\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.showDivider:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":338}],262:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return'        <button type="imagetext" class="more-link" data-link-url="'+o(r(null!=(a=null!=t?t.seeAllUrl:t)?a.url:a,t))+'" data-link-title="'+o(r(null!=t?t.title:t,t))+'">\n            <title class="edge-title title-color">'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n            <img class="edge-chevron title-chevron" src="resource://ChevronTerms"/>\n        </button>\n'},3:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <title class="edge-title title-color">'+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<header class="edge-header">\n';return a=e["if"].call(t,null!=t?t.showSeeAll:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+"</header>"},useData:!0})},{"hbsfy/runtime":338}],263:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),r+'<lockup class="ghost-divider"></lockup>'},3:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"edge-"+l((a=null!=(a=e.numColumns||(null!=t?t.numColumns:t))?a:o,typeof a===r?a.call(t,{name:"numColumns",hash:{},data:i}):a))+"col-grid"},5:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"        ","shelfLockup",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='\n\n<grid class="',a=e["if"].call(t,null!=t?t.numColumns:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="</grid>\n\n",a=this.invokePartial(n.roomDivider,"","roomDivider",t,void 0,e,n,i),null!=a&&(o+=a),o},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],264:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),r+'<lockup class="ghost-divider-s"></lockup>'},3:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"grid-"+l((a=null!=(a=e.numColumns||(null!=t?t.numColumns:t))?a:o,typeof a===r?a.call(t,{name:"numColumns",hash:{},data:i}):a))+"-col"},5:function(t,e,n,i){return"grid-no-border"},7:function(t,e,n,i){return"grid-with-border"},9:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=a[1]?a[1].isAlbumType:a[1],{name:"if",hash:{},fn:this.program(10,i,a),inverse:this.program(13,i,a),data:i}),null!=r&&(o+=r),o},10:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='            <lockup type="editorial" class="action-lockup '+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===o?r.call(t,{name:"kind",hash:{},data:i}):r))+'" data-preview-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-link-url="'+s((r=null!=(r=e.url||(null!=t?t.url:t))?r:l,typeof r===o?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"                ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"            </lockup>\n"},11:function(t,e,n,i){return'disabled="true"'},13:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=a[2]?a[2].isLargeScreen:a[2],{name:"if",hash:{},fn:this.program(14,i,a),inverse:this.program(16,i,a),data:i}),null!=r&&(o+=r),o},14:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='                <lockup type="shelf" class="action-lockup '+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===o?r.call(t,{name:"kind",hash:{},data:i}):r))+'" data-preview-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-link-url="'+s((r=null!=(r=e.url||(null!=t?t.url:t))?r:l,typeof r===o?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"                    ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                    ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"                </lockup>\n"},16:function(t,e,n,i){var a,r,o=e.helperMissing,l=this.escapeExpression,s="function",c='                <lockup type="editorial" style="itml-item-height: '+l((e.multiply||t&&t.multiply||o).call(t,null!=(a=null!=t?t.image:t)?a.height:a,1.15,{name:"multiply",hash:{},data:i}))+'" class="action-lockup '+l((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:o,typeof r===s?r.call(t,{name:"kind",hash:{},data:i}):r))+'" data-preview-id="'+l((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===s?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+l((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,
typeof r===s?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-link-url="'+l((r=null!=(r=e.url||(null!=t?t.url:t))?r:o,typeof r===s?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"                    ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                    ","lockupDetails",t,{"class":"video-description"},e,n,i),null!=a&&(c+=a),c+"                </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o=e.helperMissing,l="";return r=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+='\n\n<grid class="',r=e["if"].call(t,null!=t?t.numColumns:t,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+=" ",r=e["if"].call(t,null!=t?t.isLargeScreen:t,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.program(7,i,a),data:i}),null!=r&&(l+=r),l+='" ',r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=r&&(l+=r),l+=">\n",r=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="</grid>\n\n",r=this.invokePartial(n.roomDivider,"","roomDivider",t,void 0,e,n,i),null!=r&&(l+=r),l},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],265:[function(t,e,n){var i=t("itml").utils.Handlebars,a={roomEdgeHeader:t("./edgeHeader.hbs"),lockupArtwork:t("./lockupArtwork.hbs"),lockupDetails:t("./lockupDetails.hbs"),roomDivider:t("./divider.hbs"),roomList:t("./list.hbs"),roomShelf:t("./shelf.hbs"),roomGrid:t("./grid.hbs"),roomGridWithCopy:t("./gridWithCopy.hbs"),roomSpotlight:t("./spotlight.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./divider.hbs":261,"./edgeHeader.hbs":262,"./grid.hbs":263,"./gridWithCopy.hbs":264,"./list.hbs":266,"./lockupArtwork.hbs":267,"./lockupDetails.hbs":268,"./shelf.hbs":269,"./spotlight.hbs":270,itml:355}],266:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),r+'<lockup class="ghost-divider-s"></lockup>'},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"        ","listLockup",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='\n\n<grid class="track-list" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"</grid>"},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],267:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},3:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.song:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":338}],268:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'    <title maxLines="2" class="lockup-title">'+l((a=null!=(a=e.title||(null!=t?t.title:t))?a:o,typeof a===r?a.call(t,{name:"title",hash:{},data:i}):a))+' <badge class="explict-badge" src="resource://explicit"/></title>\n'},3:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'    <title maxLines="2" class="lockup-title">'+l((a=null!=(a=e.title||(null!=t?t.title:t))?a:o,typeof a===r?a.call(t,{name:"title",hash:{},data:i}):a))+"</title>\n"},5:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'    <subtitle class="lockup-subtitle">'+l((a=null!=(a=e.line1||(null!=t?t.line1:t))?a:o,typeof a===r?a.call(t,{name:"line1",hash:{},data:i}):a))+"</subtitle>\n"},7:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'    <subtitle class="lockup-subtitle-2">'+l((a=null!=(a=e.line2||(null!=t?t.line2:t))?a:o,typeof a===r?a.call(t,{name:"line2",hash:{},data:i}):a))+"</subtitle>\n"},9:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'    <subtitle class="lockup-subtitle-3">'+l((a=null!=(a=e.line3||(null!=t?t.line3:t))?a:o,typeof a===r?a.call(t,{name:"line3",hash:{},data:i}):a))+"</subtitle>\n"},11:function(t,e,n,i){var a,r=e.helperMissing,o='    <description class="lockup-description ';return a=e["if"].call(t,null!=t?t["class"]:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.lineDescription:t,{name:"escapeText",hash:{},data:i}),null!=a&&(o+=a),o+"</description>\n"},12:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return l((a=null!=(a=e["class"]||(null!=t?t["class"]:t))?a:o,typeof a===r?a.call(t,{name:"class",hash:{},data:i}):a))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.line2:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.line3:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.lineDescription:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":338}],269:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),r+'<lockup class="ghost-divider"></lockup>'},3:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"edge-"+l((a=null!=(a=e.numColumns||(null!=t?t.numColumns:t))?a:o,typeof a===r?a.call(t,{name:"numColumns",hash:{},data:i}):a))+"col-grid"},5:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <lockup type="shelf" class="shelf-lockup action-lockup '+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===o?r.call(t,{name:"kind",hash:{},data:i}):r))+'" data-preview-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-link-url="'+s((r=null!=(r=e.url||(null!=t?t.url:t))?r:l,typeof r===o?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"            ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"            ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"        </lockup>\n"},6:function(t,e,n,i){return'disabled="true"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='\n\n<grid class="',a=e["if"].call(t,null!=t?t.numColumns:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="</grid>\n\n",a=this.invokePartial(n.roomDivider,"","roomDivider",t,void 0,e,n,i),null!=a&&(o+=a),o+"]\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],270:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"    ","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.isAlbumType:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){return'        <lockup class="ghost-divider"></lockup>\n'},4:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isLargeScreen:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){return'            <lockup class="ghost-divider"></lockup>\n'},7:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"grid-"+l((a=null!=(a=e.numColumns||(null!=t?t.numColumns:t))?a:o,typeof a===r?a.call(t,{name:"numColumns",hash:{},data:i}):a))+"-col"},9:function(t,e,n,i){return"grid-full-width"},11:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=a[1]?a[1].isVideoType:a[1],{name:"if",hash:{},fn:this.program(12,i,a),inverse:this.program(18,i,a),data:i}),null!=r&&(o+=r),o},12:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=a[2]?a[2].isSmallScreen:a[2],{name:"if",hash:{},fn:this.program(13,i,a),inverse:this.program(16,i,a),data:i}),null!=r&&(o+=r),o},13:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='                <card class="action-lockup" style="itml-card-type:billboard;" data-preview-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-kind="'+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===o?r.call(t,{name:"kind",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='>\n                    <lockup type="editorial">\n',a=this.invokePartial(n.lockupArtwork,"                        ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),c+='                    </lockup>\n                    <lockup type="caption" class="transparent-bar top">\n',a=this.invokePartial(n.lockupDetails,"                        ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"                    </lockup>\n                </card>\n"},14:function(t,e,n,i){return'disabled="true"'},16:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='                <lockup type="editorial" class="action-lockup shelf-lockup" data-preview-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-kind="'+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===o?r.call(t,{name:"kind",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"                    ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                    ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"                </lockup>\n"},18:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='            <lockup type="editorial" class="action-lockup shelf-lockup" data-preview-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-kind="'+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===o?r.call(t,{name:"kind",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"                ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"            </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='\n<grid class="grid-no-border ',r=e["if"].call(t,null!=t?t.numColumns:t,{name:"if",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+=" ",r=e["if"].call(t,null!=t?t.isSmallScreen:t,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='" style="padding: 0 0 0 0;">\n',r=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='</grid>\n\n<lockup class="ghost-divider-s"></lockup>\n',r=this.invokePartial(n.roomDivider,"","roomDivider",t,void 0,e,n,i),null!=r&&(o+=r),o},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],271:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    .room-document {\n        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,{name:"hexToRgb",hash:{},data:i}))+";\n        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n     }\n\n    .uber-image {\n        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n    }\n\n     .title-color {\n        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor3:t,{name:"hexToRgb",hash:{},data:i}))+";\n     }\n\n    .title-chevron {\n        itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor3:t,{name:"hexToRgb",hash:{},data:i}))+";\n     }\n\n    .track-list {\n        border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,.15,{name:"hexToRgb",hash:{},data:i}))+" ;\n    }\n\n    .room-divider {\n        border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.15,{name:"hexToRgb",hash:{},data:i}))+";\n    }\n\n    .grid-with-border {\n        border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.15,{name:"hexToRgb",hash:{},data:i}))+";\n    }\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=" .edge-header {\n    padding: 5pt 0 0 15pt;\n }\n\n .editorial-card {\n    itml-card-type: editorial;\n }\n\n.grid-copy-large-screen {\n    border-width: 0;\n}\n\n.ghost-divider {\n    itml-padding: 0 0 15pt 0;\n}\n\n.ghost-divider-s {\n    itml-padding: 0 0 7pt 0;\n}\n\n.grid-no-border {\n    border-width: 0;\n}\n\n.grid-full-width {\n    itml-item-width: 100%;\n}\n\n.grid-1-col {\n    column-count: 0;\n}\n\n.grid-2-col {\n    column-count: 2;\n}\n\n.grid-3-col {\n    column-count: 3;\n}\n\n.grid-4-col {\n    column-count: 4;\n}\n\n.grid-5-col {\n    column-count: 5;\n}\n\n.grid6col {\n    column-count: 6;\n}\n\n.grid-lockup-title {\n    itml-font-style: super-headline-1;\n    font-size: 14pt;\n    padding: 0 0 0 0;\n}\n\n.lockup-description {\n    padding: 5pt 0 0 0;\n    itml-text-max-lines: 3;\n}\n\n.video-description {\n    itml-text-max-lines: 2;\n}\n\n.artist-artwork {\n    itml-img-treatment: artist-circle;\n}\n\n.uber-image {\n    itml-img-treatment: uber;\n    itml-img-fill:1;\n}\n\n";return a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":338}],272:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.uber:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.children:a,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.description:a,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        	<img class="uber-image"\n                width="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.width:a,t))+'"\n                height="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.height:a,t))+'"\n                srcset="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.url:a,t))+" "+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.dpr:a,t))+'" />\n'},5:function(t,e,n,i){var a,r=e.helperMissing,o='        	<description maxLines="3">';return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.description:a,{name:"escapeText",hash:{},data:i}),null!=a&&(o+=a),o+"</description>\n"},7:function(t,e,n,i){var a,r="		";return a=e["if"].call(t,null!=t?t.list:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.shelf:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.grid:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.gridWithCopy:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.spotlight:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},8:function(t,e,n,i){var a;return a=this.invokePartial(n.roomList,"","roomList",t,void 0,e,n,i),null!=a?a:""},10:function(t,e,n,i){var a;return a=this.invokePartial(n.roomShelf,"","roomShelf",t,void 0,e,n,i),null!=a?a:""},12:function(t,e,n,i){var a;return a=this.invokePartial(n.roomGrid,"","roomGrid",t,void 0,e,n,i),null!=a?a:""},14:function(t,e,n,i){var a;return a=this.invokePartial(n.roomGridWithCopy,"","roomGridWithCopy",t,void 0,e,n,i),null!=a?a:""},16:function(t,e,n,i){var a;return a=this.invokePartial(n.roomSpotlight,"","roomSpotlight",t,void 0,e,n,i),null!=a?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],273:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../base").controller,o=t("../../util/"),l=o.loc,s=t("../common").traits.DataProvider,c=t("./template.hbs"),u=function(t,e){t=t||{},this.loading=!0,this.pickerMode=t.context&&"media-picker"===t.context,this.largeScreen=!0,this.controllerName="search";var n=o.screen.sizeForScreenDimension();("xs"===n||"s"===n||"m"===n)&&(this.largeScreen=!1),r.call(this,t,e),o.extend(this.onSelect,{"play-button":this.playMedia,"more-link":this.pushMorePage,"add-button":this.setSelectedItem,"action-lockup":this.handleActionLockup}),this.model=new s,this.model.addEventListener("dataReady",this.handleDataReady.bind(this))};o.inherit(u,r),u.prototype.template=c,u.prototype.artworkMap={product:{xs:[40,40],s:[40,40],m:[40,40],l:[55,55],xl:[55,55]},productChild:{xs:[20,20],s:[20,20],m:[20,20],l:[30,30],xl:[30,30]},video:{xs:[40,30],s:[40,30],m:[40,30],l:[73,55],xl:[73,55]},profile:{xs:[40,40],s:[40,40],m:[40,40],l:[55,55],xl:[55,55]},track:{xs:[40,40],s:[40,40],m:[40,40],l:[55,55],xl:[55,55]}},u.prototype.get=function(t){this.loading=!0,this.model.fetchData({url:t,success:this.handleDataSuccess.bind(this),failure:this.handleFailedFetch.bind(this),retries:1}),this.render()},u.prototype.search=function(t,e){this.loading=!0,this.term=t,e||(e=o.urls.build("search",{term:encodeURIComponent(t)})),this.get(e)},u.prototype.handleDataSuccess=function(t){return this.model.data=t,this.createView(t)},u.prototype.createView=function(t){this.errorTitle=null,this.errorMessage=null;var e=t.pageData.bubbles;if(!e)return[];this.term=t.pageData.term;var n=3;this.largeScreen&&(n=6);var i,a=[],r=["album","artist","topResults","song","station","artistStation","songStation","musicVideo","musicPlaylist","brand","activity","auc"],s=o.screen.sizeForScreenDimension();this.pickerMode&&(r=["album","song","musicVideo","musicPlaylist"]);var c=function(t,e,n){t=t.slice(0,100);for(var i=[],a=[],r=0;r<t.length;r++){var o=t[r];a.push(o.id),e>r&&i.push(this.model.lookupContent(o.id,this.processContent.bind(this)))}return this.model.setData(n,a),i}.bind(this);if(e.length>0){this.noresults=!1;for(var u=0;u<e.length;u++){var h,d=e[u].results,p=e[u].name,m=d.length,f={},g=n;if(i=m>n?p:null,r.indexOf(p)>-1){if("topResults"===p&&"xl"===s?g=3:"topResults"===p&&"l"===s&&(g=2),h=c(d,g,i),"topResults"===p)for(var b=0;b<h.length;b++)h[b]=this.setSubtitleForContent(h[b]),h[b].isTopResult=!0;var v=p;"artistStation"===p?v="artist":"songStation"===p&&(v="song"),f.title=l.loc("FUSE.Search.BubbleHeader."+v),f.sectionId=i,f.content=h,a.push(f)}}}else this.noresults=!0;return a},u.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.noresults=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},u.prototype.processContent=function(t){var e=o.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap}),n=o.lockup.setArtworks(t,e,this.artworkMap);return n.line1=o.lockup.line1(n),n.isExplicit=o.lockup.isExplicit(n),n[t.kind]=!0,"playlist"===t.kind&&t.itunesNotes&&(n.line1=t.itunesNotes["short"]||t.itunesNotes.standard),n},u.prototype.setSubtitleForContent=function(t){var e="";switch(t.kind){case"album":e=l.loc("FUSE.Search.AlbumBy")+" "+t.artistName;break;case"artist":e=l.loc("FUSE.Artist");break;case"playlist":e=l.loc("FUSE.Playlist");break;case"station":e=l.loc("FUSE.Station");break;case"song":e=l.loc("FUSE.Search.SongBy")+" "+t.artistName;break;case"musicVideo":e=l.loc("FUSE.MusicVideoBy")+" "+t.artistName;break;default:e=t.artistName}return t.line1=e,t},u.prototype.handleDataReady=function(t){this.loading=!1,o.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},u.prototype.updateSearchTerm=function(t,e){this.term!==t&&""!==t&&(this.showAboutAppleMusic="aboutapplemusic"===t,this.manifestVersionText=UpdatableAssets.currentManifestVersion(),this.manifestLatestVersionText=UpdatableAssets.newestCachedManifestVersion(),this.search(t,e),this.render())},u.prototype.handleLink=function(t){var e=t.target.getAttribute("data-link-url");e&&(this.get(e),this.render())},u.prototype.getDocumentType=function(){return"stackTemplate"},u.prototype.handleActionLockup=function(t){if(this.pickerMode){var e=t.target,n=e.getAttribute("data-content-id"),i=this.model.lookupContent(n),r=e.getElementsByTagName("button");this.dispatchEvent(new a("selectMediaPickerItem",{detail:{productData:i}}));for(var o=0,l=r.length;l>o;o++){var s=r.item(o);if(s.getAttribute("class").indexOf("add-button")>-1){s.innerHTML='<img src="resource://checkmark"/>';break}}}else this.handleLockup(t)},u.prototype.handleRotation=function(){this.viewModel=this.createView(this.model.data),this.render()},e.exports=u},{"../../util/":304,"../base":84,"../common":92,"./template.hbs":277,itml:355}],274:[function(t,e,n){var i=t("../../util/"),a=t("../base").style,r=t("./style.hbs"),o=t("../base/document"),l=t("./controller"),s=t("./trending"),c=t("../common/traits/tab_component"),u=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("search-template"),t.styles=t.styles||[],t.styles.push(new a({styleTemplate:r})),t.context=t.context,this.trendingController=new s,this.trendingController.addEventListener("trendingTermSelect",this.handleTrendingTermSelect.bind(this)),this.resultsController=new l(t),t.controllers=t.controllers||[],this.controller=this.trendingController,t.controllers.push(this.controller),this.documentType=this.controller.getDocumentType(),o.call(this,t,e),c.call(this),this.addEventDelegates(this.resultsController,["selectMediaPickerItem"])};i.inherit(u,o),i.inherit(u,c,!0),u.prototype.handleTrendingTermSelect=function(t){this.removeController(this.trendingController),this.resultsController.get(t.detail.url),this.addController(this.resultsController),this.controllers=[this.resultsController],this.controller=this.resultsController,this.documentType=this.controller.getDocumentType(),this.render(),this.dispatchEvent(t)},u.prototype.updateSearchTerm=function(t,e){this.controller instanceof l||(this.removeController(this.trendingController),this.controller=this.resultsController,this.addController(this.controller),this.controllers=[this.resultsController],this.documentType=this.controller.getDocumentType(),this.render()),this.controller.updateSearchTerm(t,e)},e.exports=u},{"../../util/":304,"../base":84,"../base/document":83,"../common/traits/tab_component":112,"./controller":273,"./style.hbs":276,"./trending":278}],275:[function(t,e,n){var i=t("./document"),a=t("../../util"),r=function(t,e){this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);this.searchContext=t.searchContext,this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.handleNeedsContent.bind(this)),this.nativeViewController.addEventListener("submit",this.handleSubmit.bind(this)),this.nativeViewController.addEventListener("change",this.handleChange.bind(this))};r.prototype.handleNeedsContent=function(t){var e={};e.name=t.storeSearchSegmentTitle,e.context=this.searchContext,this.storeSearchResultsDocumentController=new i(e),a.metrics.track(this.storeSearchResultsDocumentController,{tabIdentifier:TabBar.selectedTab.identifier,entityType:"search"}),this.storeSearchResultsDocumentController.addEventListener("tabPush",this.eventHandlers.tabPush),this.storeSearchResultsDocumentController.addEventListener("trendingTermSelect",this.handleTrendingTermSelect.bind(this)),this.storeSearchResultsDocumentController.addEventListener("selectMediaPickerItem",this.handleSelectMediaPickerItem.bind(this)),this.nativeViewController.setStoreSearchResultsDocument(this.storeSearchResultsDocumentController.el)},r.prototype.handleSubmit=function(t){if(a.pubSub.publish("search",{event:t}),this.storeSearchResultsDocumentController){var e=t.term||"",n=t.url;this.storeSearchResultsDocumentController.updateSearchTerm(e,n)}},r.prototype.handleChange=function(t){""===t.term&&this.handleNeedsContent(t)},r.prototype.handleTrendingTermSelect=function(t){this.nativeViewController.setSearchTerm(t.detail.term)},r.prototype.handleSelectMediaPickerItem=function(t){var e=t.detail.productData;this.nativeViewController.selectMediaPickerItem(e)},e.exports=r},{"../../util":304,"./document":274}],276:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* search */ \n.search-template {\n    itml-align: center;\n    text-align: center;\n}\n.trending-grid {\n    padding: 9, 0, 0, 0;\n    border-color: rgba(0, 0, 0, 0);\n    itml-align: center;\n    text-align: center;\n}\n.search-results-grid {\n    itml-align: left;\n    text-align: left;\n    padding: 0, 0, 0, 0;\n    itml-item-height: 36;\n    border-color: rgb(235, 235, 235);\n    itml-item-border-margin: 0pt 0pt 0pt 64pt;\n    itml-item-width:100%;\n}\n.trending-header {\n    background-color: rgb(255, 255, 255);\n    padding: 40.0, 16.0, 8.0, 16.0;\n    border-width: 0, 0, 0.5, 0;\n    border-color: rgba(0, 0, 0, 0.2);\n    itml-item-border-margin: 0, 0, 0, 16;\n}\n.trending-title {\n    color: rgb(0, 0, 0);\n    font-size: 22pt;\n    font-weight: light;\n}\n.search-lockup {\n    itml-item-height: 36;\n    font-size: 15pt;\n    padding: 8pt 0 8pt 0;\n}\n.line1 {\n    font-size: 11pt;\n    color: rgb(142, 142, 147);\n}\n.results-divider {\n    font-size: 2pt;\n    padding: 0 0 0 0;\n    itml-margin: 0;\n}\n.no-results-card {\n    padding: 80% 0 20 0;\n}\n.no-results-icon {\n    itml-img-mask-color: rgba(83,83,83,1);\n}\n.no-results-header {\n    color: rgba(83,83,83,1);\n    itml-text-max-lines: 2;\n}\n.grid-section-header {\n    text-align: left;\n    itml-align: left;\n    background-color: rgb(255, 255, 255);\n    padding: 17.5, 16.0, 4.0, 16.0;\n    itml-item-border-margin: 0pt 0pt 0pt 16pt;\n}\n.edge-title {\n    color: rgb(102,102,102);\n    font-size: 12pt;\n}\n\n.action-lockup {\n    itml-item-height: 48;\n    padding: 0pt 16pt 0pt 16pt;\n}\n\n@media all and (min-width: 768pt) {\n    .action-lockup {\n        itml-item-height: 71;\n        padding: 0pt 16pt 0pt 16pt;\n    }\n}\n\n.light-art {\n    margin: 0pt 8pt 0pt 0pt;\n}"},useData:!0})},{"hbsfy/runtime":338}],277:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"    <grid>\n        <header>\n            <title>Current version: "+l((a=null!=(a=e.manifestVersionText||(null!=t?t.manifestVersionText:t))?a:o,typeof a===r?a.call(t,{name:"manifestVersionText",hash:{},data:i}):a))+"</title>\n            <title>Latest version: "+l((a=null!=(a=e.manifestLatestVersionText||(null!=t?t.manifestLatestVersionText:t))?a:o,typeof a===r?a.call(t,{name:"manifestLatestVersionText",hash:{},data:i}):a))+"</title>\n        </header>\n    </grid>\n"},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='    <title class="trending-title">'+o(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.header:a)?a.label:a,t))+"</title>\n    <section ";return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"section",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.trendingSearches:a,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </section>\n"},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <button class="align-center link tint-color" data-link-url="'+o(r(null!=t?t.url:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"button",{
name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+">"+o(r(null!=t?t.label:t,t))+"</button>\n"},6:function(t,e,n,i){return"    <section></section>\n"},8:function(t,e,n,i,a){var r,o="";return r=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(9,i,a),inverse:this.program(16,i,a),data:i}),null!=r&&(o+=r),o},9:function(t,e,n,i){var a,r=e.helperMissing,o='        <grid class="search-results-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+='>\n            <header class="grid-section-header">\n',a=e["if"].call(t,null!=t?t.sectionId:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.program(12,i),data:i}),null!=a&&(o+=a),o+='            </header>\n        </grid>\n        <grid class="search-results-grid" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"        </grid>\n"},10:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <button type="imagetext" class="more-link" data-section-id="'+r(a(null!=t?t.sectionId:t,t))+'" data-link-title="'+r(a(null!=t?t.title:t,t))+'">\n                        <title class="edge-title" id=\'name\'>'+r(a(null!=t?t.title:t,t))+'</title>\n                        <img class="edge-chevron" src="resource://ChevronTerms"/>\n                    </button>\n'},12:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <title class="edge-title">'+r(a(null!=t?t.title:t,t))+"</title>\n"},14:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                ","listLockup",t,{line2:null!=t?t.line2:t,line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},16:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=t?t.noresults:t,{name:"if",hash:{},fn:this.program(17,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o},17:function(t,e,n,i,a){var r,o='            <card class="no-results-card">\n                <img width="124" height="128" class="no-results-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXQAAAGACAMAAACKvmluAAADAFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzMPSIAAABAHRSTlMABR86U2h+kqKyws/b4O/0//Lp39FSEF6ApMbk/V04DQQujbr+3a+CVigDF4v494pRFilmoNrZXJ9bFTF9yMd8MDOH3DIt1xp6GE2x+0wi5eJAs7A9WcvKVw5zcQzreHQJBm/o5m0BVMPBLxSX/JUS7WIsxCoHg/r51NI0iITQznC4tERB8PGqu5tlSzclJp291VjzmWweIEKcySECjqV3OwgKP/UThb4RHdY8aTbhR6hGHGQLwEhQbk+RzOok3q4bVWCQiTW8ttOBqw+57nlOOZNF9pSpPsUZhqGPKyOMdb/jnmpfmEPne2N2zbdKZ2HstSdrln+ao6etWqZJrNhyQ5gd9wAAEWVJREFUeAHt3fl/VdW9//F3EsJMeAMaAkQIcghwMEGMRWQSQQElgFQUgSQkDEcQTolWIGIFoQzKpBAN0xElhkkRFSlai0CtAwpaBeXaohY6qC22tlW/6te29/aXO/SHez9r5+y9zt5rr+c/wOPxYj32WVnD3vCLtPSMBpkNGzVu0rRZ8xZZWS1Jtspq3abNec2aNmncqGHm+RnpaXCJlZ3RNqdd+w65FOV2aN8u54KOnVB/Vl7nthd26UCnIl3zu3XvEYVTVs/zL2pfwCQUtu91cW9Yqi4puvQ7dEWfS4t6QGL1vuzSDnRVh76X94MgzPoPGJhLD+QOumIwwklw5ZCh9NDQIVfB+hdXdxtKzw3rdjXCQzB8xDBqMmzENbAQvXZkMTUqzh8VRbiN7jaG2l3XLR3hNfa7uUyJ3OvHIZTybriRKTT+pjyEzYSJLZhibSZ1Qphk52TRB7JyshEWJVdk0SdKy0rCkbyslD5SOrkcpquYMpU+M216GkwWu3kofajPxTBX/xn0qZm3wEyzZufSt+LfmwPzxIoq6Wult8ZgmNu+T9+beTtMMnfefAZAVU4ajNHxDgbEgjthhrk/iDMwiu9KgwFuWchAWXQbgi42uYABU3h3DIHWczEDaEk/BNgPpzKQxixFUMXK4gyo4skxBNKEfHplWdbUNv/UOms5vbKiEwLotj50VVXze+4dsXLV6jX90vA/pPVe2/HaogH33d91Pl217hIEzvpquqVV+wceHFsThSBvw8Ypmza3pFtaNUCwxObRFQXtezXYEoMDiTXdH9o8n26IDIghQOZuZfKqv/vwI9tQL7WPjlhcx+RdWoHA2N6UyVq449EKJGXbxl7rmKyduxAQa/owKfH7p++GK0ZPnJHLpDy2BYHweCmTEGm6pzdcNHzKQCaj9RMIgFF1rL+hDdPhujXz9rL+6p6E711exfqqempsDJ5IPJ1fzPqq6g6f2xNhPU1t2Bse2ndXJespXgRfu7u+zdc9sw0e2//gUNZPZA98rIz186NVMWiQaDContUnGte86Vhoc+BG1stEs5oPOgCdYs8u8vcTRsNv6GOrUnCgsiudi2TCh9pG6Fjlc3lIgbkPL6dj8RvgOz+O06ni5+cgRa65L5dOVa2Cz4wroFNNb0cKXfkTOlWXAV/pUUmHlmfGkFJ5E+vo0MEX4CO9D9Ghw0eQcqO70KE+s+AbtZvpTOlP4QsvLqczM7bBJ6L5dGbxcPjElu/TmRUx+MPPAnxsLTqgmI68BF+4lY4s6AxfWT2UjlwOH3i5kE602w+fyW5CJ+o6I+X6taADVc/Bf2ID4nSg6y6kWPQVOjDmEfjSk5V04NUEUuslOjDoGvjUhqN04DWkVIMI1b1eC986dpzqIqOQQrvfoLpeCfhY2r1UVzocKRP9EZXFM+Fzb0aorEsMqTKCygp/Dt+7bD6VTUaKPDGfquo2IgCuraOqgv5IiZLmVLXsLQTCRvXq68qRCvdR1cGrEBBvLaOqt5ECJyLKza9GYKxWrh5ZCu1qD1HRsjsRIB3rqOhQCXR7iIrqViNQNtb59gHzRDyg8xbZz+dTTW5HaJW2gGrioyAI8Ame89Kg0xVUtAcB9DAVPQyN0k/q3NzS7x2qabkb+jyldRtXv+irVPMutDlFNf+2DQE14SjVbIQmiUVUMu09BNYLWVSyIAo9iqik6hEE2KgIlRRBi2OtqWQ6Ai2HSqZ2gg6/oJJfItgSS6ikGzR4r5oqFpQj4Ha1oIrqnvDeaaqoex+BNy5OFc/Dc7tPUkURDDCPKqpq4LXZVDESJsgbRBWz4bEtVVQwtR+M8EErXwz1vlTRAIbY44ehXlNMBYdhilhTKqgaDi99SAVZw2GMHoVUcBE8dGx5aGYujnYOqrPhnV9RwZkYDJJ2HhWMgGcqzlJW/D6McipCWYcKeOUCKngbhnkqtTeRFlJWOQeGUdqb3AyPZFDBgzDOa1Twcgr/MDqaB+PsP0vZr+GJCXWUPQsDraSsbg688BvKBsVgoLzmlD0HLzSj7ACM9FvKFsEDL1PWFGZKrKPsKrjvd5SNhaFuouxncN3cN8wd6LLYYxRNjcJtF1N2LYz1DGUfwW0rKBqWgLHmfpyCvYySkxSthME+oag0De5aT9HUbTDY9pb6J8zvUtQQRnuHok1wVXk1JfPfg9EGU/RGBdw0iqLXYbjNFJ3QfcToBAz3e81/H8XOUtIiAcN1akXJIc3Ps9dgvAcougTu+QNFPWC8cRRNgXteoeQczJcYQ0kTuKa8kJIyhMCHlFRXwC0/pOgDhEBHih6HW7pRMhBhENtLySdwyxlKJiMULqTkU7hkWyElaxEKGympzoM73qKkD8KhohUl/eGOSZRciJDIp2SPthOUf0RI/EnbneU2FBTUIiRqKBkGV8yh5AxCYxgF8Vq44SNKchAa91Jyp6Y7Lz9EaHxGye/hhl9SULwfobGWktNwwzkKziFEWlOwEy5I1FHwPYTIYQr+DBeMpuRWhMgISo4geasouQUhMkrLkcYpFBSkIUTSKclE8hpR0AyhkkVBLyTvLxS0Q6jM1PEOkMco+ASh8raOGXQ1Bd0RKs9RcFDHctfLCJVRlJQjWZ0pmYVQuY2SvyJZT1JQjXApoeSU968bOQ8h09r7H7k/UDASIbOZgs+9/8rrFwiZwxTM836r5EuEzP/z/t1Or1OQiZAZQsFX3p+Svhkh8ysKliBZP7EbpE63SWciWXdQcCVCZpT3y65tKHgBITPW+/NGBymoQcg8QUEb79fssxEygyl4w0Z3XWcKspAsShA2G2x0Gz0UaihohWRV6Y9uR3oWBXkImdEUVNrZi+sGez9Pb0HBLrjNRm9DwQaETAYFR72/ZNPDrr24vuDVjILVCJkGFIxHsgZScAAhU+T9ZcPFFKxHyLxJwfVI1tcUTEfIXERBX+9fDrgDIXOp9/frdlBwL0JmCQVXeH/75ThC5jwK/uT966S/g5BZ7v1nhzZSUJVAqGyn5C0kqwcl+xAqd1KSjmTVUnIKoXIzBfE0JK2UgrYIlT9Q0AHJW0TBXQiVvhQMQvK+oSAfoXJOx73aXiGbMwryCinopuO7kLmdECK3U/JbLW/dfAQhchMlGUjee5RMR4jsoJad+koKvkKI3E9BCz2vfWiO8MhrSUETTZ/b6YfQeJl69hcyKTkfoTGFkpvghtWUnEZovKvpqzvlxRQ0Q2hMo6AwD644SkGkN0KiMyXjdd3L5v9HSJRR8ra27yv3RUjM1Db+3qfkYAKhkF1MXddqE5WK6w1214gfwy3XUzIEoXApJV/DLZMp6RpDCMxdRsmDGjfA2REhcC1FtwH6HuofIgQaUzItBtesoGRvAsYrr6akMdyzkqJx9gqGy8dRaih6AMZrQknkGrhoISXLa2G4I3FKxmveGWRbGG4ARV/CTRkUfR9mS7SgqL/uD4nzFhjtAEWHYnDVF6H/Kc2n9sWQjyg62RsGW5tL0ZVwV7Q1Rd1gsNmk/kOd71BUWgtj9TuZikGXQdnnMFYOZVfDbbGuFA3Ng6HKSylal6L/6xdhqDLKRsB96bkUda2AkUpKKYrvgwf+QlkmjPQlZZ/CC89StncbDJSdRdlP4YW8jym7GwbaQdnHFan7tw/ugnF211E2D94YnUvZaRjnW8riNfDIEsqKL4FhMiKUHYZXllLBpzBL4kYqeBSeuZEKVsEon1HBOXjnBio4tB8GmXWQCi6Ad/JaUMFDMMhXVLA3DR6aRAXxJ2CMv1HFc/BSSRYVLEiDIUr2UkHpfi3ryoIBMMTzVFEGb00opYKq/jDCiQgVlJZoWlkW3LENBpg1RtdAF5RMo4pGMMD11DbQBXdTReTHCLxMKrkb3iu/jioq0xFw79dRxd650KCISsZvQ6BN6EMlL0KH6HlUch+CLHY9lTRLQIuxVJNpxMFowUZo8ncqqVqNwPpbnEpGQpcthVQypgYB1eMNKin4QP9OreToMQTSrOZUcxf0KelANfdUIIDKm1LN3lpodDMV9Y0hcKJ/p6JnodVhKspB4LxDRYeh1/AsKipDwMyjouX7oFkRFUX2IFAepqrPoVvsjHL1zxAgeyJUtDMG7dYUUlH8chObt9yCFJhEVfFbERDTI1T1G6RCbDFVRaYjEMqorEkMKfHeQSp7E/4X20Fl0/ohRa6NUFmvGHwu+gCVRZ5EynyP6rbOha+VLKG6h5A65euobsZ2+NiRRVS3cC5S6OqWVNdnLXxr8Fmqa/VXpNR6OlC6FD7141ZUF7kYKXYhHYj/KgYfis6L0IFfINXydtKJv3eC72w/TieOR5FyPc/SiWG3w2fubEEn2myHD6wuoBPVRfCT2MQCOnHyKvhC2wgdyZ8F3zjShY5E1sMn7qIzY56GT5z/ZzpzBfwi9hSdiTTqBB+Y05cOfRWDb8ydSYf2rkLK3TSVDnWpgI9kH6VTX/dEStU0oVPNjsFX9p2lU38uSiBl0ia1olNV6fCZtQfpWLOxSJE//oP1MLICPtN/GZ37ZjRS4JJXSZpRPaOOzhX0mgXN3mtUTBpTfWMd66F6yC5o1PP0SYrMr86snGxoMmtINZNzvNaQ6sx6aR802PJ8NZN2v++qj1vG+qn6ajA8tnpFnKSJ1VdXsr7ueTYPnqnoPoOCAFe/ugPr7bqcDfDEmh1TSRpc/YPmrL/cey4ogcuO/X5mhKTZ1XsPYjJOft2gHK4pWf9NAQVGVK99ncmpfv2y7XBBzxdHnqTAmOqJXkxWfMaAt6JIQtq4nIG5FBhVHZlxJm/Zq58srUU9lJz48ng1BQZWP7Ccrije/LPPriyHsv1PPPP2uTgFplZfewddE//HioaXPb4vgf9DtOZU25xvmudSYHb1kqfosqrmx7c2avj5+hOPDh68dkNN+oa/Dh489ukbHsx5+9t7us6nLATVMamY2tnqpz621fUbvtNW1y86othW1++toQyY79zorHoJ/KfkdxEGSOSd2mMD6cTAY/ChVR0YGHufBGBE9exNEQZC5IEJgCnV8XRXBsDQpQAMql77i/n0uap52wCzquP9mfS1+y8BYFz12A0d6FvX3QTAxOoo2XGSvlT3Wi1ganXsbpxL38ntewSAwdXR/1P6SyR/MADDq6Ojr7J/2hH/u2ODjKmOR8/QJ3Z2FGa695tTHWN30gdeGQuBWdVx57fFTKn57a6CwLzqSP9wOVNmWa/dEJhZHccmd2VKdP33ThCYWx2JE+9WUbOCrz+KQWB2dWDWxHXUaN2kWZAlVX18PwTA47NbU4vWszMgS7r6gn4IgrwDmyrpscpNH0UhMK66IC3Z7kLxA2kQGFpdED310h30wNEfjItCYHZ1we5btx6ki1pv/Ww3BLY6ELs98+vr6IK9WzN7xPBfbHXJ8PN/8Eol6+3jLkMuHg5ZGKsLap79pF2zQjpy8ie/nvRRb8jCXV2QSN+4csi3TQ9VCZv5h5p+O2Tl0vQEvFP7XfOqC7b3ONXgmcnzTm9qnJ9//Mw/Hc/Pb7zp9LzJzzQ41WMOdKgY6bS6Zavb6patbqtbtrqt7lO2uq3eZx8s7dWb2+q2uq1u2eohrG4JKg7rr25F29nqtrrP2Oq2umWr2+qWrW6rW7a6rS6w1TfA0l797AvwM1vdstVtdSv6O/3VrdgXtrqt7jO2uq1u2eq2umWr2+qWrW6rC2z14bC0Vx9fC0t79SZRWNqrN47BSl7seTrxRQwusIbY6rZ6OKsLLoJ+tvqb0M5Wj/wU2tnqdZ2hna3eLA3a2epl0M5Wz8qGdrb6AGhnq7eBfrZ6Z2hnqxdBO1v9C2hnqx+Ge6wRVHIGLrLKqOJVaGerb4V2tnoOtLPVR0E3W72wBLrZ6iugna0+DrrZ6iOhm62+bAs0s9WXrYYGtrrG5ra6/ubWnmr9za0tXfivZrwPy3OP5BfwP8UX/xFaWMe691q8sM3CV965oCf+238AluL5xRThNTgAAAAASUVORK5CYII="/>\n            </card>\n            <card class="no-results-header">\n                <header>\n';return r=e["if"].call(t,null!=a[1]?a[1].term:a[1],{name:"if",hash:{},fn:this.program(18,i,a),inverse:this.program(20,i,a),data:i}),null!=r&&(o+=r),o+"                </header>\n            </card>\n"},18:function(t,e,n,i,a){var r=this.lambda,o=this.escapeExpression;return'                        <title class="no-results-title">No results found for "'+o(r(null!=a[1]?a[1].term:a[1],t))+'"</title>\n'},20:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.term:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.program(23,i),data:i}),null!=a&&(r+=a),r},21:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'                            <title class="no-results-title">No results found for "'+l((a=null!=(a=e.term||(null!=t?t.term:t))?a:o,typeof a===r?a.call(t,{name:"term",hash:{},data:i}):a))+'"</title>\n'},23:function(t,e,n,i){return'                            <title class="no-results-title">No results found.</title>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=r&&(o+=r),o+="\n",r=e["if"].call(t,null!=t?t.showAboutAppleMusic:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),r=e["if"].call(t,null!=(r=null!=t?t.viewModel:t)?r.trendingSearches:r,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),r=e["if"].call(t,null!=(r=null!=t?t.viewModel:t)?r.blank:r,{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.program(8,i,a),data:i}),null!=r&&(o+=r),o},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],278:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=i.controller.MultiElementController,o=t("../../util/"),l=t("../common").traits.DataProvider,s=t("./template.hbs"),c=t("../common/traits/event_map"),u=t("../common/traits/tab_component"),h=function(t,e){t=t||{},t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),this.loading=!0,r.call(this,t,e),c.call(this,t),u.call(this),o.extend(this.onSelect,{link:this.handleLink}),this.model=new l,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get()};o.inherit(h,r),o.inherit(h,c,!0),o.inherit(h,u,!0),h.prototype.template=s,h.prototype.get=function(){this.loading=!0;var t=o.urls.trendingSearches();this.model.fetchData({url:t,success:this.createTrendingSearchesView.bind(this),failure:this.handleFailedFetch.bind(this)})},h.prototype.createTrendingSearchesView=function(t){return this.errorTitle=null,this.errorMessage=null,t.trendingSearches&&0===t.trendingSearches.length?{blank:!0}:t},h.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},h.prototype.handleDataReady=function(t){this.loading=!1,o.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},h.prototype.getDocumentType=function(){return"trendingSearchTemplate"},h.prototype.handleLink=function(t){var e=t.target.getAttribute("data-link-url");if(e){var n=e.lastIndexOf("term=")+5,i=e.slice(n).indexOf("&");i=0>i?e.length-n:i;var r=decodeURIComponent(e.substr(n,i));o.pubSub.publish("search",{url:e,term:r,type:"trending",element:t.target}),this.dispatchEvent(new a("trendingTermSelect",{detail:{url:e,term:r}}))}},e.exports=h},{"../../util/":304,"../common":92,"../common/traits/event_map":109,"../common/traits/tab_component":112,"./template.hbs":277,itml:355}],279:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.keypath,o=a.loc,l=i.event.Event,s=i.controller.MultiElementController,c=t("../common").traits.DataProvider,u=t("./template.hbs"),h=function(t,e){t=t||{},t.data=t.data||{},t.events=t.events||[],this.viewModel=[],this.loading=!0,this.shareType="content",t.data.content?(this.data=t.data.content,this.shareType=t.data.shareType||this.shareType):t.data.event&&(this.data=this.getShareDataFromEvent(t.data.event),this.shareType=this.data.shareType||this.shareType),s.call(this,t,e),this.data&&(this.model=new c({data:this.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.dataSuccess(this.model.data,{success:this.handleData.bind(this),failure:this.handleFailedFetch.bind(this)}))};a.inherit(h,s),h.prototype.template=u,h.prototype.handleShareSubmit=function(t){if("connect-post"===this.shareType){var e,n=this.data&&this.data.id,i=t&&t.activityType;"function"==typeof a.urls.incrementShareCount&&(e=a.urls.incrementShareCount()),n&&e&&i&&a.xhr({method:"POST",url:e+a.query.build({activities:n}),failure:this.handleShareSubmitFailure})}},h.prototype.handleShareSubmitFailure=function(t){a.log.error("Connect: share submit failed. "+t)},h.prototype.getShareDataFromEvent=function(t){var e,n,i,r={},o=t.entityValueProvider,l=o.valueForEntityProperty("metadata")||o.valueForEntityProperty("sidePackData");if(o&&(e=o.valuesForEntityProperties(["subscriptionStoreItemAdamID","storeItemAdamID","albumStoreID","artistStoreID","musicRadioStationStationStringID","playlistStoreID"])||{},i=e.playlistStoreID,n=o.valuesForEntityProperties(["playlistShareURL","name"])||{}),e.subscriptionStoreItemAdamID&&"0"!==e.subscriptionStoreItemAdamID)return{id:e.subscriptionStoreItemAdamID};if(l)r=l;else if(i){var s=n.playlistShareURL;s&&0!==s.length||(s=a.urls.build("playlist",{id:i})),r={id:i,url:s,shareType:"playlist",name:n.name}}else if(e)for(var c in e)if(e[c]&&"0"!==e[c]){r={id:e[c]};break}return r},h.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},h.prototype.handleData=function(t){this.errorTitle=null,this.errorMessage=null;var e=this.model.lookup(t.id);if("connect-post"===this.shareType)e=this.processPost(t);else if(e||"playlist"!==this.shareType)t.id&&(e=this.model.lookupContent(t.id,this.processContent.bind(this,t)));else{var n=itms.accountInfo.firstName;e={url:t.url,title:this.getShareText("ConnectPost.Playlist",{name:t.name,artist:n,playlistName:t.name,playlistCreator:n})}}return e&&this.viewModel.push(e),this.viewModel},h.prototype.processContent=function(t,e){var n,i,r={},l=e||{},s=l.kind||"default",c=a.artwork.getArtworkForContent({content:l}),u="artist"===l.kind?l.name:l.artistName||l.curatorName||l.brandName||o.loc("FUSE.AppleMusic"),h=c&&c.image&&c.image.url,d=l.shortUrl||l.url||t.url,p=l.collectionName,m=l.title||t.name,f=l.name||t.name,g=l.postId;switch(h&&(r.image=h),d&&(r.url=d),l.url&&(r.fullUrl=l.url),g&&(r.url=l.url||a.urls.post()+g.replace("sa.","")),"iTunesBrand"!==s||l.artistName||(s="curator"),s){case"brand":n="Brand",i={brand:f};break;case"curator":n="Curator",i={curator:f};break;case"artist":n="Artist",i={artist:u};break;case"track":case"song":n="Song",i={name:f,collection:p,artist:u};break;case"video":case"musicVideo":n="Video",i={name:f,artist:u};break;case"playlist":n="Playlist",i={name:f,artist:u,playlistName:f,playlistCreator:u};break;case"album":n="Album",i={name:f,artist:u};break;case"radioStation":case"station":n="RadioStation",i={name:f,stationName:f};break;case"uploadedAudio":n="ArtistUploadedAudio",i={name:m,artist:u};break;case"uploadedVideo":n="ArtistUploadedVideo",i={name:m,artist:u};break;case"default":n="Default",i={name:f||m};break;default:n="Default",i={name:f||m}}return r.title=this.getShareText("Content."+n,i),r},h.prototype.processPost=function(t){var e,n={},i={},l=t.message||"",s=t.content&&t.content[0]||{},c=t.target&&t.target.type||"default",u=r(t,"author.image.url"),h=r(t,"author.fullName")||r(t,"owner.name"),d=s.image&&s.image.url,p=t.url||a.urls.post()+t.id,m=s.aucType||o.loc("FUSE.UserSharing.ConnectPost.DefaultAudioAUC");switch(h?n.author=h:s.artistName?n.author=s.artistName:t.admin&&t.admin.name&&(n.author=t.admin.name),n.author=n.author.replace("<b>","").replace("</b>",""),l&&(n.message=l),u&&(i.image=d||u),p&&(i.url=p),s.artistName&&(n.artistName=n.artist=s.artistName),s.name&&(n.name=s.name),"iTunesBrand"===c&&s.kind&&(c=s.kind),c){case"artist":case"brand":case"curator":e="Artist";break;case"track":case"song":e="Song",n.songName=s.name,n.albumName=s.collectionName;break;case"video":case"musicVideo":e="Video",n.videoName=s.name;break;case"playlist":e="Playlist",n.playlistName=s.name,n.playlistCreator=s.playlistBy.split(" ")[2];break;case"album":e="Album",n.albumName=s.name;break;case"radio":case"station":case"radioStation":e="RadioStation",n.stationName=s.name;break;case"uploadedAudio":e="ArtistUploadedAudio",n.aucType=m,n.songName=s.name;break;case"uploadedVideo":e="ArtistUploadedVideo",n.videoName=s.name;break;case"default":e="Default"}return i.title=this.getShareText("ConnectPost."+e,n),i},h.prototype.getShareText=function(t,e){return{mail:o.loc("FUSE.UserSharing."+t+".Mail",e),message:o.loc("FUSE.UserSharing."+t+".Message",e),facebook:o.loc("FUSE.UserSharing."+t+".Facebook",e),twitter:o.loc("FUSE.UserSharing."+t+".Twitter",e),"default":o.loc("FUSE.UserSharing."+t+".Default",e)}},h.prototype.handleDataReady=function(t){a.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.loading=!1,this.render(),this.dispatchEvent(new l("shareDataReady"))},e.exports=h},{"../../util":304,"../common":92,"./template.hbs":281,itml:355}],280:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=t("./element"),l=function(t,e){t=t||{},t.data=t.data||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[],0===t.controllers.length&&(this.controller=new o({data:t.data}),t.controllers.push(this.controller)),r.call(this,t,e),this.controller&&(this.el.addEventListener("submit",this.controller.handleShareSubmit.bind(this.controller)),this.addEventDelegates(this.controller,["shareDataReady"]))};a.inherit(l,r),l.prototype.documentType="shareTemplate",e.exports=l},{"../../util":304,"./element":279,itml:355}],281:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="    \n";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},2:function(t,e,n,i){var a,r="";return a=e["if"].call(t,i&&i.first,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},3:function(t,e,n,i){var a,r='\n            <activity type="message">\n                ';return a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a.message:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="mail">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a.mail:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="twitter">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a.twitter:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="facebook">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a.facebook:a,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="more">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a["default"]:a,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="airdrop">\n                ',a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a["default"]:a,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.fullUrl:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.program(20,i),data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="*">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a["default"]:a,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n            </activity>\n\n"},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'<img src="'+r(a(null!=t?t.image:t,t))+'"/>'},6:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"<text>"+o((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a.message:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},8:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"<url>"+r(a(null!=t?t.url:t,t))+"</url>"},10:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"<text>"+o((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a.mail:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},12:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"<text>"+o((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a.twitter:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},14:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"<text>"+o((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a.facebook:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},16:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"<text>"+o((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a["default"]:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},18:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"<url>"+r(a(null!=t?t.fullUrl:t,t))+"</url>"},20:function(t,e,n,i){var a,r="\n                ";return a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],282:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='        <lockup class="top-charts-lockup-column action-lockup" type="list" data-url="'+o(r(null!=t?t.url:t,t))+'" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-id="'+o(r(null!=t?t.id:t,t))+'" data-content-kind="'+o(r(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+='> \n            <ordinal class="top-charts-ordinal">'+o((e.increment||t&&t.increment||l).call(t,i&&i.index,{name:"increment",hash:{},data:i}))+"</ordinal>\n            "+o((e.productArtwork||t&&t.productArtwork||l).call(t,t,{name:"productArtwork",hash:{},data:i}))+'\n            <title maxLines="1" class="lockup-title">\n                <text>'+o(r(null!=t?t.name:t,t))+"</text>\n            </title>\n",a=e["if"].call(t,null!=t?t.collectionName:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=a&&(s+=a),s+'            <button type="image" class="action-button" data-content-id="'+o(r(null!=t?t.id:t,t))+'"><img src="resource://UniversalActionControl"/></button>\n        </lockup>\n'},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                <subtitle class="one-line">\n                    <span fallbackValue="'+r(a(null!=t?t.artistName:t,t))+'"/>  <span fallbackValue="'+r(a(null!=t?t.collectionName:t,t))+'"/>\n                </subtitle>\n'},6:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                <subtitle class="one-line">\n                    <span fallbackValue="'+r(a(null!=t?t.artistName:t,t))+'"/>\n                </subtitle>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.lambda,l=this.escapeExpression,s='<column class="no-borders-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"column",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+="> \n    <header>\n        <title>"+l(o(null!=t?t.title:t,t))+"</title>\n    </header>\n\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</column>\n"},useData:!0})},{"hbsfy/runtime":338}],283:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),o=t("../../common").traits.DataProvider,l=i.controller.MultiElementController,s=t("../../common").traits.TabComponent,c=t("../../common").traits.EventMap,u=t("../../base").style,h=t("../style.hbs"),d=t("itml").utils.Handlebars,p=i.event.Event,m=a.artwork,f=t("../../filter"),g=function(e,n){e=e||{},e.styles=e.styles||[],e.styles.push(new u({styleTemplate:h})),e.events=e.events||[],e.events.push("holdselect","select"),e.entityProviders=e.entityProviders||[],e.classes=e.classes||[],d.registerPartial("chart_partial",t("../chart_partial.hbs")),this.loading=!0,this.controllerName="top-charts",this.artworkMap={track:{xs:[42,42],s:[42,42],m:[42,42],l:[42,42],xl:[42,42]},product:{xs:[42,42],s:[42,42],m:[42,42],l:[42,42],xl:[42,42]},video:{xs:[56,32],s:[56,32],m:[56,32],l:[56,32],xl:[56,32]}},l.call(this,e,n),c.call(this,e),s.call(this,e),this.chartTitles=e.chartTitles,a.extend(this.onSelect,{"play-button":this.playMedia}),this.model=new o({maxContentSize:150}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.fetchData({url:e.data.seeAllUrls[0],success:this.handleDataFetchSuccess.bind(this),failure:this.handleFailedFetch.bind(this)})};a.inherit(g,l),a.inherit(g,c,!0),a.inherit(g,s,!0),g.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},g.prototype.handleDataReady=function(){this.loading=!1,this.render()},g.prototype.processData=function(t){var e=t.pageData&&t.pageData.topCharts||[],n=[],i=0,a=0;for(i=0;i<e.length;i++)for(n[i]={},n[i].content=[],n[i].title=e[i].shortTitle,a=0;a<e[i].adamIds.length;a++)n[i].content.push(this.model.lookupContent(e[i].adamIds[a],this.processContent.bind(this)));return n},g.prototype.showGenreFilter=function(){if(this.model.data&&this.model.data.pageData.categoryList&&this.model.data.pageData.categoryList.children){var t=[],e=this.model.data.pageData.categoryList;e.name=e.parentCategoryLabel,t.push(e),t.push.apply(t,this.model.data.pageData.categoryList.children),this.filterModal=new f({filters:t,selectedFilter:this.selectedFilter,selectCallback:this.handleFilterSelection.bind(this),cancelCallback:this.handleFilterCancellation.bind(this)}),modal.pushDocument(this.filterModal.el,{})}},g.prototype.handleFilterSelection=function(t){var e=t.target,n=e.getAttribute("data-link-url");this.currentUrl=n,this.selectedFilter=e.getAttribute("label");var i={selectedFilter:this.selectedFilter,url:n};this.dispatchEvent(new p("genre-selected",{detail:i})),modal.popDocument(),this.hasData=!1,this.model.data=null,this.model.viewModel=null,this.loading=!0,this.render(),this.model.fetchData({url:n,success:this.handleDataFetchSuccess.bind(this),failure:this.handleFailedFetch.bind(this)})},g.prototype.handleFilterCancellation=function(){modal.popDocument()},g.prototype.processContent=function(t){var e=m.setArtworkForContent(t,this.artworkMap);return e.isExplicit=a.lockup.isExplicit(e),e},g.prototype.handleDataFetchSuccess=function(t){return this.errorTitle=null,this.errorMessage=null,this.model.data=t,this.processData(t)},g.prototype.template=r,e.exports=g},{"../../../util":304,"../../base":84,"../../common":92,"../../filter":165,"../chart_partial.hbs":282,"../style.hbs":291,"./template.hbs":284,itml:355}],284:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.model:t)?a.viewModel:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},4:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=(a=null!=t?t.model:t)?a.viewModel:a,{
name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.chart_partial,"            ","chart_partial",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.model:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],285:[function(t,e,n){var i=t("../../util"),a=t("../base/document"),r=t("./column_chart/element"),o=t("./menu_bar/element"),l=t("../common").traits.TabComponent,s=t("./title.hbs"),c=t("../base").style,u=i.loc,h=function(t,e){t=t||{},t.controllers=t.controllers||[],t.styles=t.styles||[],t.styles.push(new c),t.name=u.loc("FUSE.New.TopCharts.HeaderTitle");var n,h=i.screen.sizeForScreenDimension();"xs"===h||"s"===h||"m"===h?(t.documentType="menuBarTemplate",n=new o(t),t.controllers.push(n)):(t.documentType="chartsTemplate",t.watchedAttributes=t.watchedAttributes||[],t.watchedAttributes.push("type"),t.type="modern",n=new r(t),t.controllers.push(n)),this.titleTemplate=s,a.call(this,t,e),l.call(this,t),this.navigationBarController.shouldShowSearchButton=!1,this.genreName=u.loc("FUSE.TopCharts.Genres"),this.el.getElementById("genreName").innerHTML=this.genreName;var d=this.el.getElementById("genre-selector");d&&d.addEventListener("select",n.showGenreFilter.bind(n)),n&&n.addEventListener("genre-selected",function(e){t.name=e.detail.selectedFilter,t.url=e.detail.url,this.el.getElementById("genreName").innerHTML=t.name.replace("&","&amp;")}.bind(this))};i.inherit(h,a),i.inherit(h,l,!0),e.exports=h},{"../../util":304,"../base":84,"../base/document":83,"../common":92,"./column_chart/element":283,"./menu_bar/element":286,"./title.hbs":292}],286:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.BaseController,o=i.controller.MenuBarController,l=t("../segmented_chart"),s=t("../../common").traits.DataProvider,c=t("../../common").traits.TabComponent,u=t("./template.hbs"),h=i.event.Event,d=a.artwork,p=t("../../filter"),m=function(t){t=t||{},t.controllers=t.controllers||[],this.data=t.data,this.loading=!0,this.index=0,this.hasData=!!this.data.topChartsSidePack,this.currentUrl=this.data.seeAllUrls[0],this.menuItemDocumentControllers=[],this.template=u,this.menuItems=[],this.artworkMap={track:{xs:[40,40],s:[40,40],m:[40,40],l:[40,40],xl:[40,40]},product:{xs:[54,54],s:[54,54],m:[54,54],l:[54,54],xl:[54,54]},video:{xs:[100,56],s:[100,56],m:[100,56],l:[100,56],xl:[100,56]}},this.model=new s,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),r.call(this,t),o.call(this,t),c.call(this,t),this.addEventListener("needscontent",this.menuBarNeedsContent.bind(this)),this.get(this.currentUrl)};a.inherit(m,r),a.inherit(m,o),a.inherit(m,c,!0),m.prototype.showGenreFilter=function(){if(this.model.data&&this.model.data.pageData.categoryList&&this.model.data.pageData.categoryList.children){var t=[],e=this.model.data.pageData.categoryList;e.name=e.parentCategoryLabel,t.push(e),t.push.apply(t,this.model.data.pageData.categoryList.children),this.filterModal=new p({filters:t,selectedFilter:this.selectedFilter,selectCallback:this.handleFilterSelection.bind(this),cancelCallback:this.handleFilterCancellation.bind(this)}),modal.pushDocument(this.filterModal.el,{})}},m.prototype.handleFilterSelection=function(t){var e=t.target,n=e.getAttribute("data-link-url");this.currentUrl=n,this.selectedFilter=e.getAttribute("label");var i={selectedFilter:this.selectedFilter,url:n};modal.popDocument(),this.hasData=!1,this.model.data=!1;var a=0;for(a=0;a<this.menuItemDocumentControllers.length;a++){var r=this.menuItemDocumentControllers[a];r&&r.controller.clearViewData()}this.dispatchEvent(new h("genre-selected",{detail:i})),this.menuItemDocumentControllers=[],this.menuItems=[],this.get(n)},m.prototype.handleFilterCancellation=function(){modal.popDocument()},m.prototype.getIndexForMenuItem=function(t){var e,n=this.el.getElementsByTagName("menuItem");for(e=0;e<n.length&&n.item(e)!==t;e++);return e},m.prototype.processContent=function(t){var e=d.setArtworkForContent(t,this.artworkMap);return e.isExplicit=a.lockup.isExplicit(e),e},m.prototype.processData=function(t){var e=0,n=0,i=[],a=t.pageData&&t.pageData.topCharts||[];for(e=0;e<a.length;e++)for(i[e]={},i[e].content=[],this.menuItems[e]={},this.menuItems[e].title=t.pageData.topCharts[e].shortTitle,n=0;n<t.pageData.topCharts[e].adamIds.length;n++)i[e].content.push(this.model.lookupContent(t.pageData.topCharts[e].adamIds[n],this.processContent.bind(this)));return i},m.prototype.handleDataFetchSuccess=function(t){return this.errorTitle=null,this.errorMessage=null,this.model.data=t,this.processData(t)},m.prototype.handleDataReady=function(t){if(a.keypath(t,"detail.view")){var e=0,n={};for(e=0;e<this.model.data.pageData.topCharts.length;e++){n.index=e,n.data=t.detail.view[e];var i=this.createDocumentController(n);this.menuItemDocumentControllers[e]=i}}this.loading=!1,this.render()},m.prototype.setDataForDocumentControllers=function(t){var e=0;for(e=0;e<this.menuItemDocumentControllers.length;e++)this.menuItemDocumentControllers[e].handleDataReady(t)},m.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},m.prototype.get=function(t){this.model.fetchData({url:t,success:this.handleDataFetchSuccess.bind(this),failure:this.handleFailedFetch.bind(this)})},m.prototype.createDocumentController=function(t){var e=new l(t);return this.addEventDelegates(e,c.prototype.tabDelegatedEvents),e},m.prototype.menuBarNeedsContent=function(t){this.currentMenuItem=t.target;var e=this.getIndexForMenuItem(this.currentMenuItem);this.setDocumentForItem(this.menuItemDocumentControllers[e].el,this.currentMenuItem),this.dispatchEvent(new h("menuBarChangedContent",{detail:{index:e}}))},e.exports=m},{"../../../util":304,"../../common":92,"../../filter":165,"../segmented_chart":289,"./template.hbs":287,itml:355}],287:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r=e.helperMissing,o="    <menuItem>\n        <title>";return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.title:t,{name:"escapeText",hash:{},data:i}),null!=a&&(o+=a),o+"</title>\n    </menuItem>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e.each.call(t,null!=t?t.menuItems:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],288:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),o=i.controller.MultiElementController,l=t("../../common").traits.TabComponent,s=t("../../common").traits.EventMap,c=t("../../base").style,u=t("../../common").traits.DataProvider,h=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new c),t.events=[],t.events.push("holdselect","select"),t.entityProviders=t.entityProviders||[],this.menuItemIndex=t.index,t.classes=t.classes||[],this.model=new u({data:t.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.viewModel=this.model.data.content,o.call(this,t,e),s.call(this,t),a.extend(this.onSelect,{"play-button":this.playMedia}),l.call(this,t)};a.inherit(h,o),a.inherit(h,s,!0),a.inherit(h,l,!0),h.prototype.setViewData=function(t){this.loading=!1,this.viewModel=t.view[this.menuItemIndex]?t.view[this.menuItemIndex].content:null,this.model.data=t,this.render()},h.prototype.handleDataReady=function(t){this.viewModel=t.detail.view,this.model.data=t.detail,this.loading=!1,this.render()},h.prototype.clearViewData=function(){this.viewModel=null,this.loading=!0,this.render()},h.prototype.template=r,e.exports=h},{"../../../util":304,"../../base":84,"../../common":92,"./template.hbs":290,itml:355}],289:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.DocumentController,o=t("./element"),l=t("../../common").traits.TabComponent,s=i.event.EventDelegate,c=function(t,e){t=t||{},t.controllers=[],this.documentType="stackTemplate",this.controller=new o(t),t.controllers.push(this.controller),s.call(this,t,e),r.call(this,t,e),l.call(this,t,e)};a.inherit(c,r),a.inherit(c,l,!0),c.prototype.handleDataReady=function(t){this.controller.setViewData(t)},e.exports=c},{"../../../util":304,"../../common":92,"./element":288,itml:355}],290:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="track-list-ordered" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+="> \n",a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"    </grid>\n"},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <lockup class="'+o(r(null!=t?t.kind:t,t))+' action-lockup chart-lockup" type="list" data-url="'+o(r(null!=t?t.url:t,t))+'" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-id="'+o(r(null!=t?t.id:t,t))+'" data-content-kind="'+o(r(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+='>\n                <ordinal style="color: rgb(142,142,147); font-size: 15pt; font-weight: regular;">'+o((e.increment||t&&t.increment||l).call(t,i&&i.index,{name:"increment",hash:{},data:i}))+'</ordinal>\n                <img class="light-art play-button" width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" data-content-id="'+o(r(null!=t?t.id:t,t))+'" src="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+'" alt="'+o(r(null!=t?t.name:t,t))+'">\n                    <button show-on-demand="true" class="play-button cover-button middle" data-content-id="'+o(r(null!=t?t.id:t,t))+"\" type='play'/>\n                </img>\n\n",a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.collectionName:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(s+=a),s+'                <button type="image" class="action-button" data-content-id="'+o(r(null!=t?t.id:t,t))+'"><img src="resource://UniversalActionControl"/></button>\n            </lockup>\n'},3:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},5:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <title maxLines="2" class="lockup-title">'+r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/></title>\n'},7:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <title maxLines="2" class="lockup-title">'+r(a(null!=t?t.name:t,t))+"</title>\n"},9:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <subtitle class="one-line">\n                        <span fallbackValue="'+r(a(null!=t?t.artistName:t,t))+'"/>  <span fallbackValue="'+r(a(null!=t?t.collectionName:t,t))+'"/>\n                    </subtitle>\n'},11:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <subtitle class="one-line">\n                        <span fallbackValue="'+r(a(null!=t?t.artistName:t,t))+'"/>\n                    </subtitle>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":338}],291:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".song {\n	itml-item-height: 60;\n}\n\n.album {\n	itml-item-height: 54;\n}\n\n.top-charts-lockup-column {\n    itml-item-height: 46;\n    itml-padding: 2pt 0 2pt 0;\n}\n\n.top-charts-ordinal {\n    color: rgb(142,142,147);\n    font-size: 15pt;\n    font-weight: regular;\n}\n\n.caption-title {\n    color: rgba(255, 255, 255, 1.0);\n    font-size: 13pt;\n    itml-padding: 0pt 16pt 0pt 16pt;\n}\n\n.chart-lockup {\n    itml-padding: 5pt 0pt 5pt 0pt;\n}"},useData:!0})},{"hbsfy/runtime":338}],292:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression,s=this.lambda;return'<title id="name" class="align-center">'+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+'</title>\n<button type="imagetext" class="align-right" id="genre-selector">\n    <text id=\'genreName\'>'+l(s(null!=t?t.genreTitle:t,t))+"</text>\n</button>\n"},useData:!0})},{"hbsfy/runtime":338}],293:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("./app/for_you/"),o=t("./app/new/"),l=t("./app/connect"),s=t("./app/radio/"),c=t("./app/loading"),u=i.controller.TabbedApplication,h=t("./app/account/migration"),d=t("./app/account/carrier_bundling/carrier_verification"),p=t("./app/account/carrier_bundling/sms_verification"),m=t("./app/account/carrier_bundling/account_linking"),f=t("./app/product/"),g=t("./app/profile/"),b=t("./app/search/"),v=t("./app/account/settings"),y=t("./app/permission_banner/"),w=t("./app/account/welcome"),k=t("./app/contextual_actions"),x=t("./app/preview"),C=t("./util"),A=C.loc,S=C.pubSub,D=t("./app/common/controller_helper"),M=t("./app/common"),E=M.traits.ControllerCache,T=function(t){itms.log("ITMLJS: Music init: "+UpdatableAssets.currentManifestVersion()),t=t||{},u.call(this,t),E.call(this),this.tabControllers={for_you:r,"new":o,connect:l,radio:s},this.didAskForTab=!1,this.addEventListener("ready",this.readyApp.bind(this)),this.addEventListener("resume",this.resumeApp.bind(this)),this.tabBar.addEventListener("needscontent",this.handleTabNeedsContent.bind(this)),this.addEventListener("pageResponse",D.onPageResponse.bind(D)),this.registerGlobalEventCallbacks(),this.setDeviceCookies()};C.inherit(T,u),C.inherit(T,E,!0),T.prototype.registerGlobalEventCallbacks=function(){itms.onPageResponse=this.onPageResponse.bind(this),itms.onAccountChange=this.onAccountChange.bind(this),itms.onBuy=this.onBuyHandler.bind(this),itms.onSubscriptionRequired=this.handleSubscriptionRequired.bind(this),TabBar.onUpdate=this.onTabBarUpdate.bind(this),this.addEventListener("error",this.handleError.bind(this)),S.subscribe("showModal",this.handleTabPush.bind(this)),S.subscribe("setSelectedTab",this.handleSetSelectedTab.bind(this)),Settings.onRestrictionsChange=this.setDeviceCookies.bind(this)},T.prototype.setDeviceCookies=function(){C.cookie.restrictExplicit(C.enablers.allowsExplicit()?!1:!0),C.account.enableAppleMusic(C.account.isEligibleForAppleMusic()||C.account.isAppleMusicEnabled()?!0:!1)},T.prototype.resumeApp=function(t){var e=C.keypath(t,"detail.options.url");e&&this.isTrustedUrl(e)&&(this.updateAffiliateCookie(e),this.parseDeepLink(e)),this.setDeviceCookies(),C.loc.update()},T.prototype.parseDeepLink=function(t){var e,n,i,r,o=TabBar.transientTab.navigationDocument,l=TabBar.transientTab,s=t.split("apple.com/")[1];if("undefined"==typeof s){var c=new RegExp("^https://|music://|http://");s=t.split(c)[1]}if(s.match("/MZStore.woa/")&&(s=s.split("WebObjects/MZStore.woa/wa/")[1]),s.match(/(^subscribe.*)?/)[1])return void(C.account.isEligibleForAppleMusic()||this.showDeepLinkWelcomePage());switch(s){case s.match(/(^foryou.*)?/)[1]:l=this.getTabForIdentifier("for_you");break;case s.match(/(^new.*)?/)[1]:l=this.getTabForIdentifier("new");break;case s.match(/(^radio.*)?/)[1]:l=this.getTabForIdentifier("radio");break;case s.match(/(^beats1.*)?/)[1]:r="radio_live_station";break;case s.match(/(^station.*)?/)[1]:case s.match(/(^[A-Za-z]{2}\/station.*)?/)[1]:case s.match(/(^[A-Za-z]{2}\/radio.*)?/)[1]:return n={target:this.getTabForIdentifier("radio"),url:t},this.handleSetSelectedTab("radio"),void this.handleTabNeedsContent({detail:n});case s.match(/(^connect.*)?/)[1]:case s.match(/(^[A-Za-z]{2}\/connect.*)?/)[1]:l=this.getTabForIdentifier("connect");break;case s.match(/(^post.*)?/)[1]:case s.match(/(^[A-Za-z]{2}\/post.*)?/)[1]:case s.match(/(^viewPost.*)?/)[1]:case s.match(/(^[A-Za-z]{2}\/viewPost.*)?/)[1]:r="connect_detail";break;case s.match(/(^mymusic.*)?/)[1]:l=this.getTabForIdentifier("my_music");break;case s.match(/(^beatsMigrationInfoSrv.*)?/)[1]:e=new h({deepLink:t}),i=!0;break;case s.match(/(^carrier.*)?/)[1]:this.hasCarrierBundlingDeepLinkOpened=!0,e=new d({},{reason:"deepLink",ignoreCache:!0}),i=!0}e&&i?(this.addEventDelegates(e,["tabPush"]),this.pushAccountModal(e)):(n={data:{url:t},dataType:r,navigationDocument:o},TabBar.selectedTab=l,this.handleTabPush(new a("tabPush",{detail:n})))},T.prototype.pushAccountModal=function(t){UserInterfaceStatusController.hasUserAcknowledgedWelcomeScreen()&&C.account.isIntroSheetOpen()===!1?C.account.isIntroSheetOpen()?S.publish("replaceNativeModal",{detail:{newDoc:t}}):(t.addEventListener("tabPush",this.handleTabPush.bind(this)),modal.pushDocument(t.el,{})):setTimeout(function(){C.account.isIntroSheetOpen()?S.publish("replaceNativeModal",{detail:{newDoc:t}}):(t.addEventListener("tabPush",this.handleTabPush.bind(this)),modal.pushDocument(t.el,{}))}.bind(this),500)},T.prototype.handleTabNeedsContent=function(t){var e=t.detail.target;if(!e.identifier.match(/my_music|library|playlists/)){this.didAskForTab=!0;var n=function(){var n=t.detail.url,i=e.identifier,a=this.tabControllers[i],r=this.getCachedControllerForKey(i);if(r)n&&r.handleDeepLink(n);else{if(!a)return;e.navigationDocument.clear(),r=new a({tab:e,name:e.title,url:n}),r.addEventListener("tabPush",this.handleTabPush.bind(this)),r.addEventListener("handleAskToBuy",this.handleAskToBuy.bind(this)),r.addEventListener("checkLocalManifestVersion",this.checkLocalManifestVersion.bind(this)),this.setCachedControllerForKey(i,r)}}.bind(this);this.versionCheckComplete?n():this.checkLocalManifestVersion({detail:{callback:n,showLoading:!0,tab:e}})}},T.prototype.handlePrepareForTabPush=function(t){var e=t.detail.tab;if(e){if(0===e.navigationDocument.documents.length){var n={target:e};this.handleTabNeedsContent({detail:n})}t.detail.switchToTab&&(TabBar.selectedTab=e)}},T.prototype.handleTabPush=function(t){var e=t.detail.options||{},n=D.getControllerDocument(t);n.addEventListener("tabPush",this.handleTabPush.bind(this)),n.addEventListener("handleAskToBuy",this.handleAskToBuy.bind(this)),n.addEventListener("checkLocalManifestVersion",this.checkLocalManifestVersion.bind(this));var i,a=C.keypath(t,"detail.navigationDocument"),r=modal.documents;a||(C.log.error("Trying to push from JavaScript without specifiying a navigation document to push onto. Falling back to the old and racy method for finding the navigation document. This is really bad, please file a radar. Originating tabPush event: ",t),r.length>0?(i=r[r.length-1],a=i.navigationDocument):a=TabBar.selectedTab.navigationDocument),0===r.length&&C.metrics.track(n,{tabIdentifier:TabBar.selectedTab.identifier,entityType:t.detail.entityType||t.detail.dataType}),n instanceof c&&C.keypath(t,"detail.data.url")&&(e={url:t.detail.data.url}),a.pushDocument(n.el,e)},T.prototype.getTabForIdentifier=function(t){for(var e,n=0;n<TabBar.tabs.length;n++)if(e=TabBar.tabs[n],e.identifier===t)return e},T.prototype.handleSetSelectedTab=function(t){if(t!==TabBar.selectedTab.identifier){var e=this.getTabForIdentifier(t);TabBar.selectedTab=e}},T.prototype.handleAskToBuy=function(t){var e=t.detail.buyInfo,n=e.document?e.document:t.detail.document,i=e.controller?e.controller:t.detail.controller,a=e.options&&e.options.offers?e.options.offers:{},r=C.doc.findNodeWithTagName(n,"template");if("undefined"!==r){var o=new y({document:r.ownerDocument,controller:i},{offers:a}),l=o.el,s=r.firstChild;"permission-banner"===s.getAttribute("id")&&r.removeChild(s),r.ownerDocument.adoptNode(l.document);var c=r;c.insertBefore(l,c.firstChild)}},T.prototype.onPageResponse=function(t,e){var n={callerDocument:t,response:e,pushFunction:this.handleTabPush};this.dispatchEvent(new a("pageResponse",{detail:n}))},T.prototype.onAccountChange=function(){S.publish("serviceChange",{}),C.metrics.recordAccountChange(),this.setDeviceCookies()},T.prototype.onBuyHandler=function(t){(t.result||C.account.isEligibleForAppleMusic())&&S.publish("serviceChange",{}),t.result?S.publish("buyConfirmed",{buyInfo:t}):S.publish("buyFailed",{buyInfo:t})},T.prototype.handleSubscriptionRequired=function(){C.account.showPlayUpsell()},T.prototype.onTabBarUpdate=function(){for(var t,e={},n=0;n<TabBar.tabs.length;n++)t=TabBar.tabs[n],e[t.identifier]=!0;for(var i in this.tabControllers)this.tabControllers.hasOwnProperty(i)&&(e[i]||this.bustCacheForKey(i))},T.prototype.handleError=function(t){C.log.error({message:"App.onError: type="+t.type+"; details="+JSON.stringify(t.detail.options)})};var F=function(t,e,n,i){var a=new t[e](i,n);itms.log("ITMLJS: init native view: "+a)},P=function(t,e){for(var n in t)t.hasOwnProperty(n)&&NativeViewEventRegistry.addNativeViewAppearanceListener(n,"load",F.bind(this,t,n,e))};T.prototype.readyApp=function(t){C.loc.update();var e=UpdatableAssets.currentManifestVersion();C.log.level=C.compareNumerically(e,"1000000")<0?5:4;var n=C.keypath(t,"detail.options")||{},i={tabPush:this.handleTabPush.bind(this),prepareForTabPush:this.handlePrepareForTabPush.bind(this),checkLocalManifestVersion:this.checkLocalManifestVersion.bind(this)},a={"contextual-actions":k,product:f,profile:g,search:b,account:v,welcome:w,preview:x};P(a,i),C.metrics.init(this,n),n.url&&this.isTrustedUrl(n.url)&&(this.updateAffiliateCookie(n.url),this.parseDeepLink(n.url)),this.hasCarrierBundlingDeepLinkOpened||C.account.getSubscriptionStatus({partialResults:!0},this.handleServiceEligibility.bind(this))},T.prototype.showDeepLinkWelcomePage=function(){if(UserInterfaceStatusController.hasUserAcknowledgedWelcomeScreen()){var t={detail:{data:{mode:"intro",sheetType:"js"},dataType:"welcome_page",navigationDocument:modal,options:{animated:!1}}};this.handleTabPush(t)}},T.prototype.handleServiceEligibility=function(t,e){C.log.warn("lib/index handleServiceEligibility",t,e);var n;if(!this.hasCarrierBundlingDeepLinkOpened&&!C.account.getAlreadySubscribedCheckInProgress()){if(1===t){if(e&&e.isFinal&&"unlinked"===e.carrierBundle&&"true"!==localStorage.getItem("Music.hasAccountLinkingSheetOpened"+Telephony.phoneNumber)){var i;i="true"===localStorage.getItem("Music.hasUserOpenedSubscriptionOffers")?A.locWithMarkupTokens("FUSE.CarrierBundling.AlreadySubscribed.Title",{carrierName:Telephony.providerName}):A.locWithMarkupTokens("FUSE.CarrierBundling.CarrierActivation.Title",{carrierName:Telephony.providerName}),n=new m({data:{header:i}})}}else e&&"needsVerification"===e.carrierBundle&&(n=new p({data:e}));n&&this.pushAccountModal(n)}},T.prototype.updateAffiliateCookie=function(t){var e=C.urls.affiliateCookie();if(!e)return void C.log.error("No util.bag().affiliateCookie: skipping trying to update affiliate cookie");var n=C.query.parse(t);if(n.at){n.appType=1;var i={url:e+C.query.build(n),method:"GET",success:function(t){var e=JSON.parse(t),n=Object.keys(e)[0],i=new Date;i.setDate(i.getDate()+30);var a=i.toUTCString();C.cookie.set({name:n,path:"/",value:e[n],expires:a,domain:".apple.com"})}.bind(this),failure:function(){itms.log("Failed to get affiliate cookie string. URL: "+t+" :: at:"+n.at+" :: ct:"+n.ct)}};C.xhr(i)}},T.prototype.checkLocalManifestVersion=function(t){var e=C.keypath(t,"detail.callback"),n=C.keypath(t,"detail.tab"),i=C.keypath(t,"detail.showLoading"),a=this,r="8.4.0.1.0.0",o=UpdatableAssets.currentManifestVersion(),l=function(){a.versionCheckComplete=!0,e.call(this,a.versionCheckComplete)},s=setTimeout(function(){l()},6e5);if(itms.log("ITMLJS: currentManifestVersion: "+o),itms.log("ITMLJS: releaseManifestVersion: "+r),C.compareNumerically(o,r)<0){if(itms.log("ITMLJS: we have a lower version"),i){var u=new c({title:A.loc("FUSE.Updating")}),h=n&&n.navigationDocument||TabBar.selectedTab.navigationDocument;h.pushDocument(u.el)}UpdatableAssets.refreshCachedManifest(function(){itms.log("ITMLJS: manifest was refreshed"),clearTimeout(s);try{var t=UpdatableAssets.newestCachedManifestVersion();itms.log("ITMLJS: currentManifestVersion: "+o),itms.log("ITMLJS: newestManifestVersion: "+t),C.compareNumerically(o,t)<0?(itms.log("ITMLJS: RESTART"),App.restart()):(itms.log("ITMLJS: ALL GOOD"),l())}catch(e){itms.log("ITMLJS: error trying to string compare compareNumerically:"+e),l()}})}else itms.log("ITMLJS: we are up to date"),clearTimeout(s),l()},T.prototype.isTrustedUrl=function(t){function e(t,e){return-1!==t.indexOf(e,t.length-e.length)}var n=t.match(/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/)[1],i=C.bag().trustedDomains||[];i.push("beatsMigrationInfoSrv"),i.push("subscribe");for(var a=!1,r=0,o=i.length;o>r;r++){var l=i[r].replace("*","");if(l.match(/^\./)&&e(n,l)){a=!0;break}if(n===l){a=!0;break}}return a},e.exports=T},{"./app/account/carrier_bundling/account_linking":3,"./app/account/carrier_bundling/carrier_verification":8,"./app/account/carrier_bundling/sms_verification":18,"./app/account/migration":32,"./app/account/settings":52,"./app/account/welcome":76,"./app/common":92,"./app/common/controller_helper":88,"./app/connect":130,"./app/contextual_actions":160,"./app/for_you/":171,"./app/loading":202,"./app/new/":212,"./app/permission_banner/":214,"./app/preview":216,"./app/product/":218,"./app/profile/":240,"./app/radio/":245,"./app/search/":275,"./util":304,itml:355}],294:[function(t,e,n){var i,a,r,o=t("itml").utils.keypath,l=t("./urls"),s=t("./xhr"),c=t("./cookie"),u=t("./bag"),h=t("./pub_sub"),d=t("itml"),p=d.event.Event,m=!1,f=!1,g=[],b=!1,v=!1,v=!1,y=function(){return itms.accountInfo&&itms.accountInfo.DSID},w=function(t){t=t||{},t.options=t.options||{};var e=function(){var e=itms.accountInfo.DSID;e?t.success&&t.success.call(this,e):t.failure&&t.failure.call(this,e,t.options)};itms.authenticate(t.options,e.bind(this))},k=function(t){var e=l.profilePermissions(),n=itms.accountInfo.DSID;e&&n&&s({method:"GET",url:e+"?user="+n,success:function(e){var n=JSON.parse(e);g=[],g=n&&n.permissions||[],t.success&&t.success(g)},failure:function(e){t.failure&&t.failure(JSON.parse(e))}})},x=function(t){var e=l.profile(),n=itms.accountInfo.DSID;e&&n&&s({method:"GET",url:e+"?user="+n,success:function(e){var n=JSON.parse(e);b={},b=n&&n.profile||{},t.success&&t.success(b)},failure:function(e){t.failure&&t.failure(JSON.parse(e))}})},C=function(){return b},A=function(){return g},S=function(){return f},D=function(){return m},M=function(){return itms.eligibilityForService({service:"AppleMusic"})},E=function(){var t=M();return t?t.subscribed===!0||"unlinked"===t.carrierBundle||"eligible"===t.carrierBundle:!1},T=function(){return i},F=function(t){i=t},P=function(t){var e=t.currentDoc,n=t.newDoc;T()?this.dispatchEvent(new p("replaceNativeModal",{detail:t})):modal.documents.length?e.navigationDocument.replaceDocument(n.el,e,{}):modal.pushDocument(n.el)},I=function(){modal.documents.length&&modal.popDocument(),T()&&this.dispatchEvent(new p("closeIntroPage"))},T=function(){return i},F=function(t){i=t},L=function(t,e){t=t||{service:"AppleMusic"};var n=[],i=function(t,n){e.call(this,t,n)},a=function(){var t=E()?1:0,n=M();e.call(this,t,n)};itms.getServiceEligibility(t,function(t,e){n=e&&e.permissions||[],f=n.indexOf("post")>-1,m=n.indexOf("admin")>-1,e&&"needsAuthentication"===o(e,"accountStatus")?w({success:function(){a()},failure:function(){i(t,e)}}):i(t,e)})},R=function(t){r=t},U=function(){return r},_=function(){return a},N=function(t){a=t},B=function(){var t=["Telstra"];return Telephony&&t.indexOf(Telephony.providerName)>-1&&"iPhone"===Device.model},O=function(t){c.hideSubscription(!t),UserInterfaceStatusController.setHasUserRequestedSubscriptionHidden(!t)},H=function(){return!UserInterfaceStatusController.hasUserRequestedSubscriptionHidden()},V=function(){var t=u();return t&&"undefined"!=typeof t.musicSubscription?t.musicSubscription.isEnabled!==!1:!1},z=function(){var t=u();return t&&"undefined"!=typeof t.musicConnect?t.musicConnect.isEnabled!==!1:!1},G=function(){return v},Y=function(t){v=t},W=function(){Y(!1),modal.popDocument()},j=function(){if(!G()){Y(!0);var t={data:{mode:"upsell",upsellIdentifier:"Generic",sheetType:"js"},dataType:"welcome_page",navigationDocument:modal,options:{animated:!0}};h.publish("showModal",{detail:t})}},q=function(t){t=t||{},t.options=t.options||{};var e=function(e,n){!t.successCallback||e&&!n?t.failureCallback&&t.failureCallback.call(this):t.successCallback.call(this)};itms.displayTermsAndConditions(e.bind(this))},K=function(){return localStorage.getItem("Music.hasShownFamilyWelcome."+y())},J=function(t){localStorage.setItem("Music.hasShownFamilyWelcome."+y(),t)},Z=function(t){t||(t=this.getCachedSubscriptionStatus());var e=!1;return t&&t.subscribed===!0&&t.isSubscriptionPurchaser===!1&&t.familySubscription===!0&&(e=!0),e&&!K()},G=function(){return v},Y=function(t){v=t},W=function(){Y(!1),modal.popDocument()},j=function(){if(!G()){Y(!0);var t={data:{mode:"upsell",upsellIdentifier:"Generic",sheetType:"js"},dataType:"welcome_page",navigationDocument:modal,options:{animated:!0}};h.publish("showModal",{detail:t})}};e.exports={auth:w,hasPostPermission:S,hasAdminPermission:D,getSubscriptionStatus:L,isIntroSheetOpen:T,setIsIntroSheetOpen:F,closeAccountModal:I,replaceAccountModal:P,isOnCarrierBundlingNetwork:B,getProfilePermissions:k,profilePermissions:A,getProfile:x,profile:C,getDSID:y,enableAppleMusic:O,setAlreadySubscribedCheckInProgress:R,getAlreadySubscribedCheckInProgress:U,isMigrationInProgress:_,setIsMigrationInProgress:N,isAppleMusicEnabled:H,getCachedSubscriptionStatus:M,isAppleMusicEnabledForStorefront:V,isConnectEnabledForStorefront:z,isEligibleForAppleMusic:E,showPlayUpsell:j,setShowingPlayUpsell:Y,closePlayUpsell:W,showTermsIfRequired:q,shouldShowFamilyWelcomePage:Z,setShownFamilyWelcomePage:J,hasShownFamilyWelcomePage:K}},{"./bag":297,"./cookie":299,"./pub_sub":311,"./urls":319,"./xhr":320,itml:355}],295:[function(t,e,n){function i(t,e,n,i){n=n||l;var a,r=i||o.screen.sizeForScreenDimension(),s=n[t][r],c=n[t].crop||"sr";if(s){var u,h,d={width:s[0]*Device.pixelRatio,height:s[1]*Device.pixelRatio},p=o.clone(e);if(e instanceof Array){for(var m={width:1e4,height:1e4},f={width:0,height:0},g=!1,b=0;b<e.length;b++){var v=e[b];if(v.height===d.height&&v.width===d.width)return v.width=Math.round(v.width/Device.pixelRatio),v.height=Math.round(v.height/Device.pixelRatio),v.dpr=Device.pixelRatio+"x",v;v.height>d.height||v.width>d.width?(v.height<m.height||v.width<m.width)&&(m=v,g=!0):(v.height>f.height||v.width>f.width)&&(f=v)}p=g?m:f,u=p.width,h=p.height,"bb"===c&&(a=Math.min(d.width/u,d.height/h),u=Math.round(u*a),h=Math.round(h*a))}else p.url&&("bb"===c?(u=p.width,h=p.height,a=Math.min(d.width/u,d.height/h),u=Math.round(u*a),h=Math.round(h*a),p.url=p.url.replace("{w}",u).replace("{h}",h).replace("{c}",c).replace("{f}","jpeg")):(p.url="hero"===t?p.url.replace("{h}bb","{h}fa"):p.url.replace("{h}bb","{h}"+c),p.url=p.url.replace("{w}",d.width).replace("{h}",d.height).replace("{c}",c).replace("{f}","jpeg"),u=d.width,h=d.height));if(p.width=Math.round(u/Device.pixelRatio),p.height=Math.round(h/Device.pixelRatio),
p.dpr=Device.pixelRatio+"x",p.bgColor){var y=new o.color(p.bgColor);p.isDark="brick"===t?y.isDarkBrick():y.isDark(),p.bgColorComplement=p.isDark?y.lighten(.1):y.darken(.1)}return p}o.log.error("No size defined for type:",t)}function a(t,e,n,a){if(t){if(!t.artwork)return t;var r=o.clone(l),c=o.clone(s);o.extend(r,e),o.extend(c,n);for(var u=t.type||t.kind||"product",h=Object.keys(c),d="product",p=0;p<h.length;p++){var m=h[p];c[m].indexOf(u)>-1&&(d=m)}if(t.hasOwnProperty("artwork")&&(t.image=i(d,t.artwork,r,a)),t.hasOwnProperty("editorialArtwork")){if(t.editorialArtwork&&t.editorialArtwork.subscriptionHero){var f=t.editorialArtwork.subscriptionHero||t.editorialArtwork.subscriptionCover;t.hero=i("hero",f,null,a)}t.editorialArtwork&&t.editorialArtwork.brandLogo&&(t.logo=i(d,t.editorialArtwork.brandLogo,null,a))}else t.hasOwnProperty("uber")&&t.uber&&t.uber.masterArt&&(t.hero=i("hero",t.uber.masterArt,r,null,a));return t}}function r(t){var e=t.content;if(e&&(e.artwork||e.editorialArtwork||e.latestAlbumArtwork)){var n=t.params,a=o.clone(l),r=o.clone(s),c=t.screenSize;o.extend(a,t.artworkMap),o.extend(r,t.artworkKeys);var u=e.kind||"product";n&&n.type&&(u=n.type);for(var h=Object.keys(r),d=u,p=0;p<h.length;p++){var m=h[p];r[m].indexOf(u)>-1&&(d=m)}var f={},g=d||"hero";if(e.hasOwnProperty("artwork")?f.image=i(d,e.artwork,a,c):e.hasOwnProperty("latestAlbumArtwork")&&(f.image=i(d,e.latestAlbumArtwork,a,c)),e.hasOwnProperty("uber")&&e.uber&&e.uber.masterArt&&(f.legacyUber=i(g,e.uber.masterArt,a,c)),e.hasOwnProperty("editorialArtwork")){var b;e.editorialArtwork.subscriptionHero&&(b="brick"!==u?"hero":"brick",f.hero=i(b,e.editorialArtwork.subscriptionHero,a,c)),e.editorialArtwork.subscriptionCover&&(b="brick"!==u?"cover":"brick",f.image||(f.image=i(d,e.editorialArtwork.subscriptionCover,a,c)),f.cover=i(b,e.editorialArtwork.subscriptionCover,a,c)),e.editorialArtwork.brandLogo&&(f.logo=i(d,e.editorialArtwork.brandLogo,a,c)),e.editorialArtwork.bannerUber&&(f.uber=i(g,e.editorialArtwork.bannerUber,a,c))}return Object.keys(f).length>0?f:void 0}}var o=t("itml").utils;o.screen=t("./screen"),o.log=t("./logger");var l={hero:{crop:"fa",xs:[320,240],s:[375,240],m:[414,240],l:[768,288],xl:[1024,288]},cover:{crop:"sr",xs:[320,240],s:[375,240],m:[414,293],l:[768,305],xl:[1024,305]},social:{crop:"h",xs:[320,193],s:[375,184],m:[414,240],l:[320,193],xl:[578,289]},heroChild:{xs:[88,88],s:[125,125],m:[125,125],l:[250,250],xl:[250,250]},brick:{crop:"sr",xs:[320,82],s:[375,97],m:[414,107],l:[251,160],xl:[336,160]},product:{xs:[105,105],s:[123,123],m:[137,137],l:[150,150],xl:[144,144]},productChild:{crop:"sr",xs:[53,53],s:[62,62],m:[70,70],l:[75,75],xl:[80,80]},video:{xs:[159,89],s:[185,105],m:[185,105],l:[148,84],xl:[164,93]},profile:{xs:[88,88],s:[115,115],m:[125,125],l:[110,110],xl:[110,110]},sharing:{xs:[100,100],s:[100,100],m:[100,100],l:[100,100],xl:[100,100]},track:{xs:[56,56],s:[56,56],m:[56,56],l:[56,56],xl:[56,56]},list:{crop:"sr",xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},listChild:{xs:[27,27],s:[27,27],m:[27,27],l:[60,60],xl:[60,60]}},s={track:["song","uploadedAudio","UploadedAudio"],video:["video","musicVideo","uploadedVideo","UploadedVideo"],product:["album","playlist","radioStation"],profile:["artist","iTunesBrand","brand","activity"],social:["social","connect","post"],brick:["brick","link"],sharing:["sharing"],hero:["hero"]};e.exports={setArtworkForContent:a,getArtworkForContent:r,bestArtwork:i,artworkMap:l,typesForKey:s}},{"./logger":307,"./screen":313,itml:355}],296:[function(t,e,n){var i=t("./logger"),a=t("./account"),r=t("./pub_sub"),o=function(t,e){var n=(TabBar.selectedTab.identifier+"").replace(" ","-").toLowerCase(),i=t.selectedFilter?(t.selectedFilter+"").toLowerCase():"none",a=t.controllerName,r=n+":"+i+" / "+a,o={items:[],featureName:r};t.recoId&&(o.recommendationData=t.recoId),void 0!==t.shuffle&&(o.shuffle=t.shuffle);var l={};if(t.items){void 0!==t.selectedTrackIndex&&t.items.length>1&&(o.selectedTrackIndex=t.selectedTrackIndex);for(var s=0;s<t.items.length;s++){var c=t.items[s],u=c.productData;if(u){l={id:u.id,url:u.url,metadata:u};var h=u.kind||"song";l.isFullMetadata="album"===h||"playlist"===h?u.childrenIds&&u.children?u.childrenIds.length===u.children.length:!1:!0,o.items.push(l)}}}e.call(this,o)},l=function(t){return t&&t.match(/radioStation|uploadedVideo|uploadedAudio/i)?!1:!0},s=function(t){if(t.items&&t.items.length>0){var e=t.items[0].productData.kind,n=l(e);n&&!a.isEligibleForAppleMusic()?a.showPlayUpsell():o(t,function(t){t.items&&t.items.length>0&&itms.playMedia(t,function(e){e?(i.log("playback success",t),-1!==t.items[0].metadata.kind.indexOf("Video")&&NowPlayingController.presentNowPlayingView(),-1!==t.items[0].metadata.kind.indexOf("radio")&&r.publish("playRadioStation",{detail:t})):i.error("Error during playback",t)})})}},c={play:s,determineTrackInfo:o};e.exports=c},{"./account":294,"./logger":307,"./pub_sub":311}],297:[function(t,e,n){var i={},a=function(t){return Object.keys(i).length>0&&!t?i:i=itms.getBag()||{}};itms.onBagChange=function(){var e=t("./network"),n=t("./pub_sub");n.publish("appRefresh"),e.handleNetworkChange()},e.exports=a},{"./network":310,"./pub_sub":311}],298:[function(t,e,n){var i=function(){var t,e,n,i=[],r=95.0456,o=100,l=108.9058,c=function(t){if("string"==typeof t)return t.indexOf("%")>0?parseFloat(t)/100:parseFloat(t);if("number"==typeof t)return t;throw{error:"InvalidFormat",message:"Argument "+t+" is not a number."}},u=function(t){return t=c(t),t>1||-1>t?t/100:t},d=function(t,e,n){return Math.max(Math.min(c(t),c(n)),c(e))},p=function(t){return t===+t&&t===(0|t)},m=function(a,r,o){return a=c(a),r=c(r),o=c(o),p(a)&&p(r)&&p(o)?(a=d(a,0,255),r=d(r,0,255),o=d(o,0,255),t=a/255,e=r/255,n=o/255):(t=d(a,0,1),e=d(r,0,1),n=d(o,0,1),a=Math.round(255*t),r=Math.round(255*e),o=Math.round(255*n)),i=[a,r,o],{r:a,g:r,b:o}},f=function(t){return"undefined"==typeof t||null==t||""===t?t=1:(t=u(t),t=d(t,0,1)),t},g=function(t){return/(^#?[0-9A-F]{6}$)|(^#?[0-9A-F]{3}$)/i.test(t)},b=function(t){return t.match(/[\d.]{1,3}/gi)};return{parseColor:function(t,e){var n,i;return null==t?(n=m(0,0,0),i=f(e)):t instanceof a?(n=m(t.rgb.r.color.rgb.g,t.rgb.b),i=f(t.alpha)):null!=t.r?(n=m(t.r,t.g,t.b),i=f(t.alpha||1)):Array.isArray(t)&&t.length>=3?(n=m(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):!g(t)&&(t.indexOf("rgb")>-1||null!=t.match(/[\d.]{1,3}/gi)&&t.match(/[\d.]{1,3}/gi).length>=3)?(t=t.match(/[\d.]{1,3}/gi),n=m(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):t.indexOf("hsv")>-1?(t=t.match(/[\d.%]{1,3}/gi),n=this.HSVtoRGB(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):t.indexOf("hsl")>-1?(t=b(t),n=this.HSLtoRGB(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):g(t)&&(n=this.HEXtoRGB(t),i=f(e)),{rgb:n,alpha:i}},setOpacity:function(t){return f(t)},getHue:function(i,a,r){var o=0;null!=i&&m(i,a,r);var l=Math.max(t,e,n),s=Math.min(t,e,n),c=l-s;switch(l){case t:o=(e-n)/c+(n>e?6:0);break;case e:o=(n-t)/c+2;break;case n:o=(t-e)/c+4;break;default:o=0}return o=60*o,0>o&&(o+=360),o},RGBtoHEX:function(t,e,n){null!=t&&m(t,e,n);var a=i.map(function(t){return t=t.toString(16),1===t.length?"0"+t:t}).join("");return a},HEXtoRGB:function(t){if(g(t)){0===t.indexOf("#")&&(t=t.substr(1));var e=0,n=0,i=0;return 3===t.length?(t=t.split("").map(function(t){return parseInt(t+t,16)}),e=t[0],n=t[1],i=t[2],rgb=m(e,n,i)):t.length>=6&&(e=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),i=parseInt(t.substr(4,2),16),rgb=m(e,n,i)),{r:e,g:n,b:i}}throw{error:"InvalidFormat",message:t+" is not a valid hex value."}},RGBtoHSL:function(i,a,r){null!=i&&m(i,a,r);var o=Math.max(t,e,n),l=Math.min(t,e,n),c=(o+l)/2,u=o-l;return 0===u?h=s=0:(s=c>0?u/(1-Math.abs(2*c-1)):0,h=this.getHue()),{h:h,s:s,l:c}},HSLtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){"string"==typeof t&&t.indexOf("%")>0&&(t=360*c(t)),t=d(t,0,360),e=u(Math.abs(e)),n=u(Math.abs(n));var i=0,a=0,r=0;if(0!==e||0!==n){var o=.5>=n?n*(1+e):n+e-n*e,l=n+n-o,s=function(t){t=0>t?t+1:t>1?t-1:t;var e;return e=1>6*t?l+6*(o-l)*t:.5>t?o:2>3*t?l+(o-l)*(2/3-t)*6:l};i=s(t+1/3),a=s(t),r=s(t-1/3)}return m(i,a,r)}throw{error:"InvalidFormat",message:"NULL is not a valid argument."}},RGBtoHSV:function(i,a,r){null!=i&&m(i,a,r);var o=Math.max(t,e,n),l=Math.min(t,e,n),c=o-l,u=o;return 0===c?h=s=0:(s=c/u,h=this.getHue()),{h:h,s:s,v:u}},HSVtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){"string"==typeof t&&t.indexOf("%")>0&&(t=360*c(t)),t=d(c(t),0,360),e=u(Math.abs(e)),n=u(Math.abs(n));var i=0,a=0,r=0;if(0===e&&0!==n)i=a=r=Math.round(255*n);else if(0!==e&&0!==n){var o=t/60,l=0|o,s=n*e,h=n-s,p=s*(1-Math.abs(o%2-1))+h;switch(s+=h,l){case 0:i=s,a=p,r=h;break;case 1:i=p,a=s,r=h;break;case 2:i=h,a=s,r=p;break;case 3:i=h,a=p,r=s;break;case 4:i=p,a=h,r=s;break;case 5:i=s,a=h,r=p;break;default:i=0,a=0,r=0}}return m(i,a,r)}throw{error:"InvalidFormat",message:"NULL is not a valid argument."}},RGBtoXYZ:function(i,a,r){null!=i&&m(i,a,r);var o=0,l=0,s=0;return i=100*(t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92),a=100*(e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92),r=100*(n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92),o=.412453*i+.35758*a+.180423*r,l=.212671*i+.71516*a+.072169*r,s=.019334*i+.119193*a+.950227*r,{x:o,y:l,z:s}},XYZtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){t=d(Math.abs(t),0,r)/100,e=d(Math.abs(e),0,o)/100,n=d(Math.abs(n),0,l)/100;var i=3.240479*t+-1.53715*e+n*-.498535,a=t*-.969256+1.875992*e+.041556*n,s=.055648*t+e*-.204043+1.057311*n,c=function(t){return t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t};return i=c(i),a=c(a),s=c(s),m(i,a,s)}throw{error:"InvalidFormat",message:"NULL is not a valid argument"}},RGBtoLab:function(t,e,n){null!=t&&m(t,e,n);var i=this.RGBtoXYZ(),a=i.x/r,s=i.y/o,c=i.z/l,u=0,h=0,d=0,p=7.787037037037035,f=function(t){return t>.008856?Math.pow(t,1/3):p*t+.13793103448275862};return a=f(a),s=f(s),c=f(c),u=116*s-16,h=500*(a-s),d=200*(s-c),{L:u,a:h,b:d}},LABtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){t=d(t,0,100),e=d(e,-128,128),n=d(n,-128,128);var i=(t+16)/116,a=e/500+i,s=i-n/200,c=7.787037037037035,u=function(t){var e=Math.pow(t,3);return e>.008856?e:(t-.13793103448275862)/c};return a=u(a),i=u(i),s=u(s),a*=r,i*=o,s*=l,this.XYZtoRGB(a,i,s)}throw{error:"InvalidFormat",message:"NULL is not a valid argument"}},changeHue:function(t,e,n,i){if("string"==typeof t&&t.indexOf("%")>0&&(t=3.6*parseFloat(t)),null!=e&&m(e,n,i),t=d(t,0,360),0===t)return this;t%=360;var a=this.RGBtoHSL(),r=(a.h+t)%360;return 0>r&&(r+=360),this.HSLtoRGB(r,a.s,a.l)},changeBrightness:function(t,e,n,i){null!=e&&m(e,n,i),t=this.number(t),t=t>1||-1>t?t/100:t;var a=this.RGBtoHSV(),r=a.v+t;return r=d(r,0,1),this.HSVtoRGB(a.h,a.s,r,a.a)},changeLightness:function(t,e,n,i){null!=e&&m(e,n,i),t=c(t),t=.99>=t&&t>=-.99?100*t:t;var a=this.RGBtoLab(),r=a.L+t;return r=d(r,0,100),this.LABtoRGB(r,a.a,a.b)},changeSaturation:function(t,e,n,i){null!=e&&m(e,n,i),t=c(t),t=t>1||-1>t?t/100:t;var a=this.RGBtoHSV(),r=a.s+t;return r=d(r,0,1),this.HSVtoRGB(a.h,r,a.v,a.a)},limitColorValuesHSV:function(t,e,n,i,a,r,o,l,s){null!=o&&m(o,l,s);var c=this.RGBtoHSV(),u=d(c.h,t,e),h=d(c.s,n,i),p=d(c.v,a,r);return u=d(u,0,360),h=d(h,0,1),p=d(p,0,1),this.HSVtoRGB(u,h,p,c.a)}}}(),a=function(t,e){this.rgb={},this.alpha=1,this.init(t,e)};a.prototype.init=function(t,e){var n=i.parseColor(t,e);this.rgb=n.rgb,this.alpha=n.alpha},a.prototype.getAlpha=function(){return this.alpha},a.prototype.setAlpha=function(t){return t>=0&&1>=t&&(this.alpha=t),this},a.prototype.getRGB=function(){return this.rgb},a.prototype.getHEX=function(){return this.hex||(this.hex=i.RGBtoHEX(this.rgb.r,this.rgb.g,this.rgb.b)),this.hex},a.prototype.getHSL=function(){return this.hsl||(this.hsl=i.RGBtoHSL(this.rgb.r,this.rgb.g,this.rgb.b)),this.hsl},a.prototype.getHSV=function(){return this.hsv||(this.hsv=i.RGBtoHSV(this.rgb.r,this.rgb.g,this.rgb.b)),this.hsv},a.prototype.getXYZ=function(){return this.xyz||(this.xyz=i.RGBtoXYZ(this.rgb.r,this.rgb.g,this.rgb.b)),this.xyz},a.prototype.getLab=function(){return this.lab||(this.lab=i.RGBtoLab(this.rgb.r,this.rgb.g,this.rgb.b)),this.lab},a.prototype.getHue=function(){return this.hue||(this.hue=i.getHue(this.rgb.r,this.rgb.g,this.rgb.b)),this.hue},a.prototype.lighten=function(t){var e=i.changeLightness(t,this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.limitColorValuesHSV=function(t,e,n,r,o,l){var s=i.limitColorValuesHSV(t,e,n,r,o,l,this.rgb.r,this.rgb.g,this.rgb.b),c=new a(s,this.alpha);return c},a.prototype.darken=function(t){var e=i.changeLightness(-1*Math.abs(t),this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.saturate=function(t){var e=i.changeSaturation(t,this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.desaturate=function(t){var e=i.changeSaturation(-1*Math.abs(t),this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.greyscale=function(){var t=i.changeSaturation(-1,this.rgb.r,this.rgb.g,this.rgb.b),e=new a(t,this.alpha);return e},a.prototype.toString=function(t,e){"undefined"!=typeof t&&(t=t.toLowerCase()),e="undefined"!=typeof e?e+2:2;{var n,i;Math.pow(10,Number(e))}switch(t){case"rgb":case"rgba":var a=this.rgb.r+","+this.rgb.g+","+this.rgb.b;n=this.alpha<1?"rgba("+a+","+this.alpha+")":"rgb("+a+")";break;case"hex":n="#"+this.getHEX();break;case"hsl":case"hsla":i=this.getHSL(),n=i.h.toFixed(e-2)+", "+(100*i.s).toFixed(e-2)+"%, "+(100*i.l).toFixed(e-2)+"%",n=i.a<1?"hsla("+n+", "+i.a+")":"hsl("+n+")";break;case"hsv":case"hsva":i=this.getHSV(),n=i.h.toFixed(e-2)+", "+(100*i.s).toFixed(e-2)+"%, "+(100*i.v).toFixed(e-2)+"%",n=i.a<1?"hsva("+n+", "+i.a+")":"hsv("+n+")";break;default:n=this.alpha<1?"rgba("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+", "+this.alpha+")":"#"+this.getHEX()}return n},a.prototype.isDark=function(){var t=this.getLab();return t.L<50?!0:!1},a.prototype.isDarkBrick=function(){var t=this.getLab();return t.L<80?!0:!1},a.prototype.getDarknessRange=function(){var t=this.getLab();return t.L>=0&&t.L<=39?"dark":t.L>=40&&t.L<=59?"mediumdark":t.L>=60&&t.L<=79?"mediumlight":t.L>=80&&t.L<=100?"light":!1},e.exports=a},{}],299:[function(t,e,n){var i=t("its-util"),a=i.cookie;a.restrictExplicit=function(t){var e=t?1:0;this.set({name:"itre",value:e,domain:".apple.com"})},a.hideSubscription=function(t){var e=t?1:0;this.set({name:"itst",value:e,domain:".apple.com"})},e.exports=a},{"its-util":386}],300:[function(t,e,n){var i=function(t){var e,n,a;if(!t||"object"!=typeof t)return t;if(t instanceof Array){for(e=[],n=0,a=t.length;a>n;n++)e[n]=i(t[n]);return e}if(t instanceof Object){e=Object.create(t.constructor.prototype);for(var r in t)t.hasOwnProperty(r)&&(e[r]=i(t[r]))}return e};e.exports=i},{}],301:[function(t,e,n){var i={findNodeWithTagName:function(t,e){for(var n=new RegExp(e,"i"),i=0;i<t.childNodes.length;i++){var a=t.childNodes.item(i),r=a.tagName;if("document"===a.tagName)return this.findNodeWithTagName(a,e);if(r.match(n))return a}},parsePlistXML:function(t){var e,n,i,a,r,o,l,s=function(t){return t&&(3===t.nodeType||8===t.nodeType||4===t.nodeType)};if(!t)return null;if("plist"===t.nodeName){for(r=[],e=0,n=t.childNodes.length;n>e;e++)s(t.childNodes.item(e))||r.push(this.parsePlistXML(t.childNodes.item(e)));return r}if("dict"===t.nodeName){for(i={},a=null,e=0,n=t.childNodes.length;n>e;e++)s(t.childNodes.item(e))||(null===a?a=this.parsePlistXML(t.childNodes.item(e)):(i[a]=this.parsePlistXML(t.childNodes.item(e)),a=null));return i}if("array"===t.nodeName){for(r=[],e=0,n=t.childNodes.length;n>e;e++)s(t.childNodes.item(e))||(o=this.parsePlistXML(t.childNodes.item(e)),null!=o&&r.push(o));return r}if("#text"===t.nodeName);else{if("key"===t.nodeName)return t.childNodes.item(0).nodeValue;if("string"===t.nodeName){for(o="",l=0,n=t.childNodes.length;n>l;l++)o+=t.childNodes.item(l).nodeValue;return o}if("integer"===t.nodeName)return parseInt(t.childNodes.item(0).nodeValue,10);if("real"===t.nodeName){for(o="",l=0,n=t.childNodes.length;n>l;l++)3===t.childNodes.item(l).nodeType&&(o+=t.childNodes.item(l).nodeValue);return parseFloat(o)}if("data"===t.nodeName);else{if("date"===t.nodeName)return new Date(t.childNodes.item(0).nodeValue);if("true"===t.nodeName)return!0;if("false"===t.nodeName)return!1}}}};e.exports=i},{}],302:[function(t,e,n){var i=t("./bag"),a=i().musicCommon||{},r={reportAConcern:a.isReportAConcernEnabled,allowsExplicit:function(){return!Settings.Restrictions.allowsExplicit||i.isExplicitMusicDisallowed?!1:!0},longPress:function(){var t=Device.productType,e=t.substr(t.indexOf(",")-1).split(",")[0];return parseInt(e,10)<=7?!0:!1}};e.exports=r},{"./bag":297}],303:[function(t,e,n){var i=t("./screen"),a=function(t){var e,n=i.getCurrentOrientation();return e="landscape"===n?i.getScreenDimensions().width:i.getScreenDimensions().height,"resource://"+t+"-"+e+"h.jpg"},r=function(){var t=i.getScreenDimensions().width>414?"60":"40";return"resource://AppleMusic-"+t+"h.png"};e.exports={getBackgroundImageResource:a,getAppleMusicLogoImageResource:r}},{"./screen":313}],304:[function(t,e,n){function i(t){var e=!1,n=function(){};return"function"!=typeof t?void l.error("once must be passed a function"):function(){return e||(n=t.apply(this,arguments),e=!0),n}}function a(t,e){for(var n={},i=0;i<t.length;i++){var a=e?e(t[i]):t[i];n[a]?t.splice(i--,1):n[a]=!0}return t}function r(t){var e={data:{type:"error",title:t||"!!!",buttons:[{title:"OK",className:"cancel-button"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};h.publish("showModal",{detail:e})}var o=t("itml"),l=t("./logger"),s=t("./loc"),c=t("./lockup"),u=t("./metrics"),h=t("./pub_sub"),d=t("./audio"),p=t("./xhr.js"),m=t("./native.js"),f=t("./bag.js"),g=t("./network.js"),b=t("./string"),v=t("./account.js"),y=t("./screen"),w=t("./artwork"),k=t("./color"),x=t("./query_string"),C=t("./cookie"),A=t("./urls"),S=t("./tabs"),D=t("./doc"),M=t("./deepclone"),E=t("./enablers"),T=t("./image"),F=t("./server_constants"),P=t("./template_helpers"),I=t("./template_partials"),L=o.utils;P(L.Handlebars),I(L.Handlebars);var R={bag:f,color:k,cookie:C,log:l,loc:s,lockup:c,metrics:u,"native":m,network:g,query:x,pubSub:h,audio:d,xhr:p,once:i,account:v,screen:y,artwork:w,prune:a,alert:r,urls:A,tabs:S,doc:D,deepClone:M,enablers:E,image:T,serverConstants:F};L.extend(R,b),L.extend(L,R),e.exports=L},{"./account.js":294,"./artwork":295,"./audio":296,"./bag.js":297,"./color":298,"./cookie":299,"./deepclone":300,"./doc":301,"./enablers":302,"./image":303,"./loc":305,"./lockup":306,"./logger":307,"./metrics":308,"./native.js":309,"./network.js":310,"./pub_sub":311,"./query_string":312,"./screen":313,"./server_constants":314,"./string":315,"./tabs":316,"./template_helpers":317,"./template_partials":318,"./urls":319,"./xhr.js":320,itml:355}],305:[function(t,e,n){var i,a=t("itml").utils,r=t("./logger"),o=t("./urls"),l=t("its-localization").its,s=t("moment"),c="en",u=t("./pub_sub"),h={ca:"ca-es",da:"da-dk",de:"de-de",el:"el-gr",en:"en-us","en-au":"en-au","en-gb":"en-uk","en-uk":"en-uk",es:"es-es","es-mx":"es-mx",fi:"fi-fi",fr:"fr-fr","fr-ca":"fr-ca",id:"id-id",it:"it-it",hu:"hu-hu",ja:"ja-jp",ms:"ms-my",nl:"nl-nl",nb:"no-no",pl:"pl-pl",pt:"pt-br","pt-pt":"pt-pt",ro:"ro-ro",ru:"ru-ru",sk:"sk-sk",sv:"sv-se",th:"th-th",tr:"tr-tr",uk:"uk-uk",vi:"vi-vi","zh-cn":"zh-cn","zh-hk":"zh-tw","zh-tw":"zh-tw","zh-hans":"zh-cn","zh-hant":"zh-tw"},d=function(t){t=t.toLowerCase();for(var e in h)if(h.hasOwnProperty(e)&&h[e]===t)return!0};l.update=function(){var e=itms.getBag(),n=this,s="en-uk",c=e&&e.language,p=h[Settings.language];c&&d(c)?s=c.toLowerCase():p&&(s=p.toLowerCase());var m=UpdatableAssets.loadResource("resources/localization/"+s+".json"),f={};m&&(f=JSON.parse(m),l.updateLocale(f)),n.date.update();var g=t("../app/common/traits/data_provider"),b=new g;b.fetchData({url:o.loc(),success:function(t){var e=t.loc;i=t.timestamp,a.extend(f,e),l.updateLocale(f),n.date.update(),u.publish("locUpdate")},failure:function(t){r.error("failed to update localization, even after 1 retry",t)},retries:1})},l.date={timeSince:function(t){return s(t).fromNow(!0)},update:function(){var t={en:{relativeTime:{future:"in %s",past:"%s",s:l.loc("FUSE.Dates.FromNow.OneSecond"),ss:l.loc("FUSE.Dates.FromNow.MultipleSeconds",{timeUnit:"%d"}),m:l.loc("FUSE.Dates.FromNow.OneMinute"),mm:l.loc("FUSE.Dates.FromNow.MultipleMinutes",{timeUnit:"%d"}),h:l.loc("FUSE.Dates.FromNow.OneHour"),hh:l.loc("FUSE.Dates.FromNow.MultipleHours",{timeUnit:"%d"}),d:l.loc("FUSE.Dates.FromNow.OneDay"),dd:l.loc("FUSE.Dates.FromNow.MultipleDays",{timeUnit:"%d"}),M:l.loc("FUSE.Dates.FromNow.OneMonth"),MM:l.loc("FUSE.Dates.FromNow.MultipleMonths",{timeUnit:"%d"}),y:l.loc("FUSE.Dates.FromNow.OneYear"),yy:l.loc("FUSE.Dates.FromNow.MultipleYears",{timeUnit:"%d"})}}};s.locale(c,t[c])}},l.locWithButtonSubstitution=function(t,e){if(e){var n,i,a,r,o;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],null===n&&(r=t+"."+s+".Url",o=t+"."+s+".Name",i=l.loc(r),a=l.loc(o),i!==r&&a!==o?e[s]='<button class="open-url embedded-link" data-link-url="'+i+'">'+a+"</button>":delete e[s]))}return l.loc(t,e)},e.exports=l},{"../app/common/traits/data_provider":108,"./logger":307,"./pub_sub":311,"./urls":319,itml:355,"its-localization":381,moment:396}],306:[function(t,e,n){var i=t("./artwork"),a=t("itml").utils,r=t("./loc");e.exports={line1:function(t){var e="";switch(t.kind){case"playlist":var n=t.curatorName||"Apple Music";e=r.loc("FUSE.New.ByCuratorName",{curatorName:n});break;case"song":e=t.artistName+" - "+t.collectionName;break;case"radioStation":e="object"==typeof t.description?t.description.standard:t.description;break;default:e=t.artistName}return e},getDescription:function(t){var e=a.keypath(t,"description.short")||a.keypath(t,"description.standard");return e},isExplicit:function(t){return t.isExplicit||"Explicit"===a.keypath(t,"contentRatingsBySystem.riaa.name")?!0:!1},formatDuration:function(t,e){var n,i;try{n=t.offers[0].assets[0].duration}catch(a){}if(n){var o={},l=parseInt(n,10);o.h=Math.floor(l/3600),o.m=Math.floor((l-3600*o.h)/60),o.s=l-3600*o.h-60*o.m,i=r.loc(e,o)}return i},playlistProcessCard:function(t){t.description=this.getDescription(t);var e=t.curatorName||t.artistName||"APPLE MUSIC";t.artistName=e?r.loc("FUSE.ForYou.PlaylistBy",{artistName:e}):null;var n="D9D9D9",i=!1,o=t.artworkTracks||t.children,l=o&&Object.keys(o).length>0;if(t.hero=t.hero||t.cover,t.hero)n=t.hero.bgColor||n,i=t.hero.isDark;else if(o&&l){var s,c=t.artworkTrackIds||[],u=c.length;if(u>0)for(var h=0;u>h;h++){var d=o[c[h]];if(d){n=d.artwork.bgColor||n,s=new a.color(n),i=s.isDark();break}}else{var p=Object.keys(o);p.length>0&&o[p[0]].artwork.bgColor&&(n=o[p[0]].artwork.bgColor||n,s=new a.color(n),i=s.isDark())}}return t.cardColor={bgColor:n,isDark:i},t},setArtworks:function(t,e,n,r,o){r=r||"product";var l=a.clone(i.artworkMap);if(a.extend(l,n),t.kind&&(t[t.kind]=!0),t.name=t.shortName||t.name,e)t.image=e.image,t.hero=e.hero,t.cover=e.cover,t.logo=e.logo,t.uber=e.uber;else{if(t.artworkTracks)for(var s=Object.keys(t.artworkTracks),c=0;c<s.length;c++){var u=t.artworkTracks[s[c]],h=r?r+"Child":"productChild";l[h]||(h=r);var d=i.getArtworkForContent({content:u,artworkMap:l,params:{type:h},screenSize:o});t.artworkTracks[s[c]].image=d.image}var p=l[r]&&l[r][o];p&&(t.image={width:p[0],height:p[1]})}return t}}},{"./artwork":295,"./loc":305,itml:355}],307:[function(t,e,n){var i=t("lager");e.exports=i},{lager:389}],308:[function(t,e,n){var i,a,r=t("metrics-base"),o=t("fuse-metrics"),l=t("./pub_sub"),s=t("./bag"),c=t("itml").utils.keypath,u={},h={topic:"xp_its_music_main",eventBase:o.createEventBase,eventFields:o.eventFields,recordEvent:function(t,e){itms.recordEvent(e,t)},pubsub:l,resources:{bag:s,itms:itms,Settings:Settings,Device:Device,UpdatableAssets:UpdatableAssets,TabBar:TabBar},disabled:function(){var t=s();return c(t,"metrics.disabled")||Object.keys(t).length<1?!0:!1},blacklistedEvents:c(s(),"metrics.blacklistedEvents")||[],blacklistedFields:c(s(),"metrics.blacklistedFields")||[],addSecondaryBaseFields:function(t,e,n){t=t||{};var r,l,h,d,p,m,f,g=c(e,"doc"),b=c(e,"buyInfo.metrics.clientBuyId"),v=c(g,"controllers")&&g.controllers[0]||{},y=c(v,"data.pageData")||c(v,"data.metrics")||c(v,"model.metrics.pageData")||c(u[b],"pageData")||c(v,"metricsPageData")||c(g,"metricsPageData"),w=c(y,"metrics.config"),k=c(e,"options.pageContext");if(w&&(w.disabled===!0&&(this.disabled=!0),w.blacklistedFields&&this.blacklistedFields.concat(w.blacklistedFields),w.blacklistedEvents&&this.blacklistedEvents.concat(w.blacklistedEvents)),this.disabled!==!0){if(h=o.util.toUpperCamelCase(TabBar.selectedTab.identifier)||TabBar.selectedTab.identifier,d=c(y,"metricsBase"),p=c(y,"metrics.fields"),"impressions"===n?m=i:"buyConfirmed"===n?m=u[b]&&u[b].pageContext:(m=h,i=m),d)for(var x in d)null!==d[x]&&(t[x]=d[x]);else r=s(),t.pageId=c(y,"pageId"),t.pageType=c(y,"pageType"),l=c(r,"metrics.compoundSeparator")||"",c(t,"pageType")&&(t.page=t.pageType),c(t,"pageId")&&(t.page+=l+t.pageId);if("page"===n&&p)for(var C in p)null!==p[C]&&p.hasOwnProperty(p[C])&&(t[C]=p[C]);return"AccountSettings"===k&&(a=!0),"Picker_Genre"!==t.page&&"Picker_Artist"!==t.page&&(a=!1),a&&(m="AccountSettings"),f=c(v,"pageUrl")||c(v,"model.config.url"),f&&(t.pageUrl=f),t.pageContext=m,t}}},d=function(){var t=0,e=function(e){return u[t]={pageData:c(e,"metricsPageData"),pageContext:o.util.toUpperCamelCase(TabBar.selectedTab.identifier)},t++};return e},p=function(t,e){var n,i,a=[],r=[],o=Object.keys(t),l={type:"section",timestamps:[e.pageLoadTime],index:0,children:[]};if(r.push(l),Array.isArray(t))a=t.slice(0,e.artistIndexCap);else if("object"==typeof t)for(var s=0;s<o.length;++s)a.push(t[o[s]]);for(var c=0;c<a.length;++c){n={},i=Object.keys(a[c]);for(var u=0;u<i.length;++u){var h=i[u];n[h]=a[c][h]}n.type="circle",n.kind=e.kind,n.timestamps=[e.pageLoadTime],n.index=c,n.parent=l,l.children.push(n)}return r},m=function(t){var e,n=c(t,"controller.model");return c(n,"data.genres")?e=p(n.data.genres,{pageLoadTime:c(n,"pageLoadTime"),kind:"genre"}):c(n,"data.artists")&&(e=p(n.data.artists,{artistIndexCap:c(n,"data.artistsDisplayIndexEnd")||0,pageLoadTime:c(n,"pageLoadTime"),kind:"artist"})),e},f=function(t,e,n){var i=function(){var e=c(t,"controller.model");e&&(e.pageLoadTime=Date.now())},a=function(i){var a=c(i,"target.tagName");"physicalCirclesTemplate"===a?l.publish("impressions",{doc:t,impressions:m(t),options:n}):a&&a.search(/template/i)>=0&&l.publish("impressions",{doc:t,impressions:e.recordedImpressions(),options:n})};c(t,"el.addEventListener")&&(t.el.addEventListener("appear",i),t.el.addEventListener("disappear",a))},g=function(t,e){var n=function(n){var i=c(n,"target")||{},a=c(t,"controllers")[0]||c(t,"controller"),r=c(a,"model"),o=c(a,"model.data.offersById"),s=i.getAttribute("data-content-index"),u=o&&o[s]&&o[s].buyParams,h=t.el.snapshotImpressions();h=h.length?h:m(t),"moreArtists"===i.getAttribute("id")&&r&&(a.model.pageLoadTime=Date.now()),l.publish("click",{doc:t,impressions:h,element:i,details:{buyParams:u},options:e})}.bind(this);t.el.addEventListener("select",n)},b=function(t,e){var n=c(t,"controller")||c(t,"controllers")&&t.controllers[0],i=c(n,"model"),a=function(a){var r,o=c(a,"type"),s=c(i,"data")||c(i,"viewModel"),u=c(i,"metrics.xhrMetrics")||c(n,"data.xhrMetrics"),h=c(a,"target.tagName");"appear"===o?(r=h&&h.search(/template/i)>=0&&(i.dataLoaded||s&&Object.keys(s)&&Object.keys(s).length),i.metricsPageAppeared=!0):"dataReady"===o&&(r=i.metricsPageAppeared&&getActiveDocument()===t.el&&!i.dataLoaded,i.dataLoaded=!0),r&&l.publish("page",{doc:t,event:a,options:e,xhrMetrics:u})};c(t,"el.addEventListener")&&c(i,"addEventListener")&&(t.el.addEventListener("appear",a),i.addEventListener("dataReady",a))},v=function(){l.publish("account")},y=function(){l.publish("exit"),itms.flushUnreportedEvents()},w=function(t){var e=t&&t.detail&&t.detail.options||{};l.publish("enter",{type:"taskSwitch",refUrl:e.refUrl,refApp:e.refApp})},k=function(t,e){"loadingTemplate"!==c(t,"documentType")&&(g(t,e),b(t,e),f(t,t.el,e))},x=function(t,e){h.resources.launchData=e,r.init(h),t.addEventListener("suspend",y),t.addEventListener("resume",w),l.publish("enter",{type:"launch"})},C={init:x,addClickEvent:g,addImpressionsEvent:f,addPageEvent:b,track:k,recordAccountChange:v,recordExit:y,recordResume:w,buyId:d(),metricsLibrary:r,configuration:h};e.exports=C},{"./bag":297,"./pub_sub":311,"fuse-metrics":321,itml:355,"metrics-base":390}],309:[function(t,e,n){var i=t("itml"),a=t("native-ios"),r=i.utils,o={itms:void 0};"undefined"!=typeof itms&&(o.itms=itms),r.extend(a,o),e.exports=a},{itml:355,"native-ios":397}],310:[function(t,e,n){var i=t("./bag"),a=t("./pub_sub"),r={isOnline:function(){return Object.keys(i()).length>0&&""!==itms.networkConnectionType},isOffline:function(){return 0===Object.keys(i()).length||""===itms.networkConnectionType},handleNetworkChange:function(){if(a.publish("networkChange"),""!==itms.networkConnectionType&&0===Object.keys(i()).length){if(a.publish("appRefresh"),modal.documents&&modal.documents.length>0)for(;modal.documents.length;)modal.popDocument();App.reload()}else if(""!==itms.networkConnectionType){var e=t("./loc");i(!0),e.update()}}};Device.onNetworkChange=function(){r.handleNetworkChange()},e.exports=r},{"./bag":297,"./loc":305,"./pub_sub":311}],311:[function(t,e,n){var i=t("itml").utils.PubSub;e.exports=new i},{itml:355}],312:[function(t,e,n){var i={build:function(t){t=t||{};var e=[],n="";if(Object.keys(t).length){for(var i in t)t[i]&&e.push(i+"="+t[i]);n="?"+e.join("&")}return n},parse:function(t){var e={},n=decodeURIComponent(t||""),i=n.indexOf("?")>-1?n.split("?")[1]:n,a=i.split("&");if(t&&""!==n.trim())for(var r=0;r<a.length;r++){var o=a[r].split("=");e[o[0]]=o[1]}return e}};e.exports=i},{}],313:[function(t,e,n){function i(t){t&&t.height&&t.width&&(l=t)}function a(){return Settings.Screen}function r(t){return t||(t=a()),t.width<=320?"xs":t.width<=375?"s":t.width<=615?"m":t.width<=768?"l":t.width>=1024?"xl":void 0}function o(t){return t||(t=a()),t.width>t.height?"landscape":"portrait"}var l=Settings.Screen;e.exports={getScreenDimensions:a,setScreenDimensions:i,sizeForScreenDimension:r,getCurrentOrientation:o}},{}],314:[function(t,e,n){var i=t("./bag"),a=function(){return i().musicCommon||{}},r={defaultCommentFetchCount:function(){return a().defaultCommentFetchCount||24}};e.exports=r},{"./bag":297}],315:[function(t,e,n){function i(t){return t.length>0?t.charAt(0).toUpperCase()+t.slice(1):t}function a(t,e){for(var n="0123456789",i=e;i<t.length&&!(n.indexOf(t[i])<0);i++);return t.substring(e,i)}function r(t,e){if(!t&&!e)return 0;if(!t)return-1;if(!e)return 1;for(var n="0123456789",i=0,r=0;i<t.length||r<e.length;){var o=t[i],l=e[r];if(!l)return 1;if(!o)return-1;var s=n.indexOf(o)>=0,c=n.indexOf(l)>=0;if(s&&c){var u=a(t,i),h=a(e,r);if(parseInt(u,10)<parseInt(h,10))return-1;if(parseInt(u,10)>parseInt(h,10))return 1;i+=u.length,r+=h.length}else{if(l>o)return-1;if(o>l)return 1;i++,r++}}return 0}e.exports={capitalizeString:i,compareNumerically:r}},{}],316:[function(t,e,n){var i=function(t){if(t===TabBar.selectedTab.identifier)return TabBar.selectedTab;for(var e,n=0;n<TabBar.tabs.length;n++)if(e=TabBar.tabs[n],e.identifier===t)return e},a=function(t){if(t===TabBar.selectedTab.identifier)return TabBar.selectedTab;var e=i(t);return e?(TabBar.selectedTab=e,e):void 0};e.exports={setSelectedTab:a,getTab:i}},{}],317:[function(t,e,n){var i=t("./string"),a=t("./bag"),r=t("./loc"),o=t("./logger"),l=t("./artwork"),s=t("./screen"),c=t("./color"),u=t("./enablers"),h=t("fuse-metrics").util,d="rgb(217,217,217)",p=function(t,e){e="object"!=typeof e?e:null;var n="",i="rgb";if(!t)return n;var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),r=a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:null;return e&&(r.push(e),i="rgba"),r&&(n=i+"("+r.join(",")+")"),n},m=function(t,e,n){var i;return e&&"object"!=typeof e?e+="":e="1.0",i=n?t?e?"rgba(0,0,0,"+e+")":"rgb(0,0,0)":e?"rgba(255,255,255,"+e+")":"rgb(255,255,255)":t?e?"rgba(255,255,255,"+e+")":"rgb(255,255,255)":e?"rgba(0,0,0,"+e+")":"rgb(0,0,0)";

},f=function(t){var e;if(t&&t.length){var n,i,a=t.length||0;for(e=0;a>e;e++)if(i=t[e].artwork,i&&i.bgColor){n=i;break}return n||o.warn("No color object in array: ",t),n}},g=function(t,e,n,i,a,r,o){var l=new c(t),s=l.limitColorValuesHSV(e,n,i,a,r,o);return s?s.getHEX():t},b=function(t){var e=new c(t),n=e.isDark();return n},v=function(t,e){var n=new RegExp(/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g);return t.replace(n,function(t){return'<button data-url="'+t+'" class="open-url tint-color" style="color:'+m(e)+'">'+t+"</button>"})},y=function(t,e){var n=t.split("{")[1].split("}")[0].replace(/&quot;/g,"").split(":")||[];return n.length&&(t='<button class="view-mention tint-color" style="color:'+m(e)+'" data-mention-type="'+n[0]+'" data-content-id="'+n[1]+'">'+n[2]+"</button>"),t},w=function(t){var e=t.split("{")[1].split("}")[0].replace(/&quot;/g,"").split(":")||[];return e.length&&(t="@"+e[2]),t},k=function(t,e){return t.replace(/@{(.*?)}/g,function(t){return y(t,e)})},x=function(t){return t.replace(/@{(.*?)}/g,function(t){return w(t)})},C=function(t){var e=[];switch(t){case"iTunesBrand":e.push("artist-art");break;case"artist":e.push("light-art"),e.push("artist-artwork");break;case"caption":e.push("no-light-art");break;default:e.push("light-art")}return e},A=function(t,e){if(t.image||t.logo){var n,i,a=e&&e.type?e.type:null,r=e&&e.className?e.className:null,o=e&&e.playlistId?e.playlistId:t.id,l=[],s=t.logo||t.image,c=s.bgColor?p(s.bgColor):d,u=r?r:t.kind,h=s.width,m=s.height;if(s&&s.url)n=s.url;else{var f=["artist","album","playlist","radioStation"];f.indexOf(u)>-1&&(n="resource://Missing"+u.charAt(0).toUpperCase()+u.slice(1)+"CellArtworkProxyiPhoneSearch",i=!0)}var g="<img ";return o&&(g+='data-content-id="'+o+'" '),g+='style="itml-img-placeholder-background-color:'+c+';" class="play-button '+C(u)+" "+r+'" width="'+h+'" height="'+m+'" ',g+=i?'src="'+n+'"':'srcset="'+n+" "+s.dpr+'"',g+=">",l.push(g),l.push("play"===a&&"artist"!==u?'<button class="play-button cover-button" data-content-id="'+o+'" type="play"/>':'<button show-on-demand="true" class="play-button cover-button middle" data-content-id="'+o+'" type="play"/>'),l.push("</img>"),l.join("")}},S=function(t){if(t instanceof Array?t=t.join(""):t&&"string"==typeof t||(t=""),t&&""!==t){t=t.replace(/&quot;/g,'"').replace(/&mdash;/g,"").replace(/&apos;/g,"'").replace(/&#[0-9]+;/g,"").replace("&amp;","&").replace(/&/g,"&amp;").replace("<br>","<br/>");var e=t.match(/(<([^>]+)>)/gi);if(e&&e.length>0)for(var n=0;n<e.length;n++)-1===e[n].search(/<b>|<i>|<\/b>|<\/i>/gi)&&(t=t.replace(e[n],""))}return t};e.exports=function(t){t.registerHelper("data-metrics",function(e){var n=!this.recoId&&this.content&&this.content[0]||this.artist||this,i=a(),r=h.getFieldMappedData(n,i,"impressions"),o=h.getFieldMappedData(n,i,"single");return"string"==typeof e&&(r.type=e),r=JSON.stringify(r),r=t.Utils.escapeExpression(r),o=JSON.stringify(o),o=t.Utils.escapeExpression(o),new t.SafeString("data-metrics='"+r+"' click-metrics='"+o+"'")}),t.registerHelper("click-metrics",function(e){var n=a(),i=h.getFieldMappedData(e.hash,n,"single");return i=JSON.stringify(i),i=t.Utils.escapeExpression(i),new t.SafeString("click-metrics='"+i+"'")}),t.registerHelper("capitalize",function(t){return t&&"string"==typeof str?i.capitalizeString(t):t}),t.registerHelper("toUpperCase",function(t){var e=a();return e&&e.language&&e.language.toLowerCase().match(/tr\-tr|el\-gr/i)?t:t&&"string"==typeof t?t.toUpperCase():t}),t.registerHelper("encode",function(t){return encodeURIComponent(t)}),t.registerHelper("debug",function(t){o.log("HB DEBUG: ",t)}),t.registerHelper("equal",function(t,e,n){return t!=e?n.inverse(this):n.fn(this)}),t.registerHelper("increment",function(t){return parseInt(t,10)+1}),t.registerHelper("first",function(t){return t[0]}),t.registerHelper("multiply",function(t,e){return t*e}),t.registerHelper("getYearFromDate",function(t){return t=t||"",t.split("-")[0]}),t.registerHelper("getGenreName",function(t){var e=t.length>0?t[0].name+"  ":"";return e}),t.registerHelper("shouldDisable",function(t,e){return t.isExplicit&&!u.allowsExplicit()?e.fn(this):e.inverse(this)}),t.registerHelper("arrayPrettify",function(t,e){var n,i=e.count?e.count:2,a="",r=e.append?e.append:", & more";for(n=0;i>n;n++)a+=t[n],n!==i-1&&(a+=", ");return a+=r}),t.registerHelper("numberWithCommas",function(t){return t=t||0,t.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}),t.registerHelper("hexToRgb",function(t,e){return p(t,e)}),t.registerHelper("getHighContrastColor",function(t,e){return m(t,e)}),t.registerHelper("colorAuthorName",function(t,e,n){return t&&(t=S(t),t='<span style="color:'+m(e,n)+'">'+t,t=t.replace("<b>","</span> <b>")),t}),t.registerHelper("getColorGridStyle",function(t){var e,n,i,a,r="top",o="rgb(255,255,255)",l="",s=f(t),c=s&&s.bgColor?s.bgColor:l;return c||(c="ffffff"),c=g(c,0,360,0,1,.1,.9),a=b(c),n=a?p(c,"0.15"):p(c,"0.65"),i=p(c,"0"),e="background-color: linear-gradient("+r+", "+o+", "+n+", "+i+");"}),t.registerHelper("heroArtwork",function(e,n,i){var a=[],r=d,o=e.cardColor?p(e.cardColor.bgColor):r,s=4,c=e.artworkTracks;if(e.hero)a.push("<background>"),a.push('<img class="gradient" style="background-color:'+p(e.hero.bgColor)+'" width="'+e.hero.width+'" height="'+e.hero.height+'" srcset="'+e.hero.url+" "+e.hero.dpr+'" />'),a.push("</background>");else if(e.cover)a.push("<background>"),a.push('<img class="gradient" style="background-color:'+p(e.cover.bgColor)+'" width="'+e.cover.width+'" height="'+e.cover.height+'" srcset="'+e.cover.url+" "+e.cover.dpr+'" />'),a.push("</background>");else if(c){var u=Object.keys(c).length>0,h=e.artworkTrackIds,m=h.length;if(u){for(var f=!1,g=0;s>g;){for(var b=!1,v=0;m>v;v++){var y=c[h[v]];if(y){var w={content:y,params:{type:"heroChild"}};i&&(w.artworkMap=i);var k=l.getArtworkForContent(w);n&&(k=y),k.image&&(f||(a.push("<background></background><imageDeck>"),f=!0),a.push('<img style="itml-img-placeholder-background-color: '+o+';" class="light-art 4up-grid" width="'+k.image.width+'" height="'+k.image.height+'" srcset="'+k.image.url+" "+k.image.dpr+'" />'),b=!0,g++)}if(g===s)break}if(b===!1)break}f&&a.push("</imageDeck>")}}var x=a.join("");return new t.SafeString(x)}),t.registerHelper("topChartsGetFirstBgColor",function(t,e){return e?"rgba(0,0,0,.1)":"transparent"}),t.registerHelper("productArtwork",function(e,n,i){var a,r={};if(n&&(r.type=n),i&&(r.className=i),!e.artwork&&e.artworkTracks&&e.artworkTrackIds){var o,l,s=[],c=0,u=Object.keys(e.artworkTracks).length>0,h=e.artworkTrackIds,d=h.length,p=0,m=4;if(u&&d>0){for(r.className=r.className+" img-fill",e.image&&(o=e.image.width,l=e.image.height),s.push('<imageGrid width="'+o+'" height="'+l+'" class="four-up-grid">');m>c;){var f=e.artworkTracks[h[p]];f&&("play"===n&&c===m-1?(r.playlistId=e.id,r.type=n,s.push(A(f,r))):(r.type="",s.push(A(f,r))),c++),p++,p===d&&(p=0)}s.push("</imageGrid>"),a=s.join("")}}else a=A(e,r);return new t.SafeString(a)}),t.registerHelper("getColumnClass",function(){var t,e=s.sizeForScreenDimension();switch(e){case"xl":t="edge-6col-grid";break;case"l":t="edge-5col-grid";break;default:t="edge-3col-grid"}return t}),t.registerHelper("getLikeImageByLikesData",function(e,n){var i=e&&e[n]?"resource://LoveHateControlLoved":"resource://LoveHateControlNeutral";return new t.SafeString(i)}),t.registerHelper("formatUrls",function(e,n){var i=t.Utils.escapeExpression(e);return new t.SafeString(v(i,n))}),t.registerHelper("formatMentionsAndUrls",function(e,n){var i=t.Utils.escapeExpression(e),a=v(k(i,n),n);return a}),t.registerHelper("formatPlainTextMentions",function(e){var n=t.Utils.escapeExpression(e),i=x(n);return new t.SafeString(i)}),t.registerHelper("loc",function(t,e){var n=e.hash.params?JSON.parse(e.hash.params):{},i=r.loc(t);return n.toUpperCase&&(i=i.toUpperCase()),i}),t.registerHelper("classesForKind",function(e){var n=C(e);return new t.SafeString(n.join(" "))}),t.registerHelper("margin",function(t){var e=t?t:"1pt",n='<divider class="margin-helper" style="itml-divider-type:borderless; itml-item-height:'+e+';"/>';return n}),t.registerHelper("escapeText",function(t){return S(t)}),t.registerHelper("replaceHtmlEntities",function(t){return String(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&mdash;/g,"").replace(/&apos;/g,"'")}),t.registerHelper("selectorLockupItem",function(t,e){var n,i=[],a=t.label?t.label:t.name;a=a.replace(/&/g,"&amp;");var r=encodeURI(t.url)||"";r=r.replace(/&/g,"&amp;"),e=e.replace(/&/g,"&amp;");var o=a===e?!0:!1;return i.push('<lockup class="filter-lockup" data-link-url="'+r+'" label="'+a+'">'),i.push('<title class="filter-title'),o&&i.push(" filter-selected"),i.push('">'+a+"</title>"),o&&i.push('<decorationImage src="resource://checkmark"/>'),i.push("</lockup>"),n=i.join("")})}},{"./artwork":295,"./bag":297,"./color":298,"./enablers":302,"./loc":305,"./logger":307,"./screen":313,"./string":315,"fuse-metrics":321}],318:[function(t,e,n){var i={loading:t("../app/common/partials/loading.hbs"),errorMessage:t("../app/common/partials/error_message.hbs"),commonStates:t("../app/common/partials/common_states.hbs"),listLockup:t("../app/common/partials/list_lockup.hbs"),shelfLockup:t("../app/common/partials/shelf_lockup.hbs"),playlistCard:t("../app/common/partials/playlistCard.hbs")};e.exports=function(t){for(var e in i)i[e]&&t.registerPartial(e,i[e])}},{"../app/common/partials/common_states.hbs":96,"../app/common/partials/error_message.hbs":97,"../app/common/partials/list_lockup.hbs":98,"../app/common/partials/loading.hbs":99,"../app/common/partials/playlistCard.hbs":100,"../app/common/partials/shelf_lockup.hbs":101}],319:[function(t,e,n){var i=t("./query_string"),a=t("./bag"),r={common:function(){return a().musicCommon||{}},subscription:function(){return a().musicSubscription||{}},connect:function(){return a().musicConnect||{}},radioTab:function(){return a().radioTab||{}},reportConcern:function(){return this.common().reportConcern&&this.common().reportConcern.url},album:function(){return a().viewAlbum},artist:function(){return a().viewArtist},affiliateCookie:function(){return a().affiliateCookie},enableAutoFollow:function(){return a().subscription&&a().subscription.enableAutoFollow},userProfile:function(){return a().subscription&&a().subscription.userProfile},getSubscriptionOffersSrv:function(){return a().getSubscriptionOffersSrv},updateTastePreference:function(){return this.subscription().updateTastePreference},tastePreferenceLabels:function(){return this.subscription().tastePreferenceLabels},tastePreferenceArtists:function(){return this.subscription().tastePreferenceArtists},profile:function(){return this.common().profile},profilePermissions:function(){return this.connect().profilePermissions},likesData:function(){return this.connect().likesData},justForYou:function(){return this.subscription().justForYou},browse:function(){return this.subscription().browse},radio:function(){return this.radioTab().grouping},radioFeatured:function(){return this.radioTab().featured},comment:function(){return this.connect().comment},comments:function(){return this.connect().comments},deleteComment:function(){return this.connect().deleteComment},fuseSendSmsCode:function(){return a().fuseSendSmsCode},fuseVerifySmsCode:function(){return a().fuseVerifySmsCode},follow:function(){return this.connect().follow},unfollow:function(){return this.connect().unfollow},like:function(){return this.connect().like},unlike:function(){return this.connect().unlike},activityFeed:function(){return this.connect().activityFeed},activities:function(){return this.connect().activities},socialActivitiesData:function(){return this.connect().socialActivitiesData},incrementShareCount:function(){return this.connect().incrementShareCount},carrierLinkSrv:function(){return a().carrierLinkSrv},deleteSocialPost:function(){return this.connect().deleteSocialPost},modifyAccount:function(){return a().modifyAccount},signup:function(){return a().signup},setRecommendationPref:function(t){return a().musicSubscription.setRecommendationPref+"?pref="+t},brand:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewBrand"},activity:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewActivity"},followerCount:function(){return this.connect().followerCount},followingCount:function(){return this.connect().followingCount},recommendedEntities:function(){return this.connect().recommendedEntities},follows:function(){return this.connect().follows},migration:function(){return"https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/beatsMigrationStatusSrv"},loc:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/appLoc"},grouping:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewGrouping"},search:function(){return a().search},trendingSearches:function(){return"https://search.itunes.apple.com/WebObjects/MZSearchHints.woa/wa/trends"},iforgot:function(){return"https://iforgot.apple.com"},post:function(){return"https://itunes.apple.com/post/idsa."},playlist:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewPlaylist"},build:function(t,e){var n=this[t].call(this);if(n){var a=e;if(n.indexOf("?")>-1){var r=i.parse(n);for(var o in r)r.hasOwnProperty(o)&&(a[o]=r[o]);var l=n.slice(n.indexOf("?"),n.length);n=n.replace(l,"")}return n+=i.build(a)}}};e.exports=r},{"./bag":297,"./query_string":312}],320:[function(t,e,n){var i=t("./network"),a=function(t){var e,n=this,a=itms.makeStoreXMLHttpRequest(),r=new Date;if(!t.url||i.isOffline()){var o=i.isOnline()?400:418;return void t.failure.apply(n,[o,"cannot supply a null URL"])}a.timeout=3e4,a.onreadystatechange=function(){4===a.readyState&&200===a.status?"function"==typeof t.success&&t.success.apply(n,[a.response,a.metrics]):4===a.readyState&&"function"==typeof t.failure&&t.failure.apply(n,[a.status,a.response])},a.open(t.method,t.url,!0),a.setRequestHeader("X-Time-Zone-Offset",-1*r.getTimezoneOffset()),t.headers&&Object.keys(t.headers).forEach(function(e){a.setRequestHeader(e,t.headers[e])}),t.data&&(e=JSON.stringify(t.data)),t.params&&(e=t.params),a.send(e)};e.exports=a},{"./network":310}],321:[function(t,e,n){var i=t("./lib/event_base"),a=t("./lib/events"),r=t("./lib/events/util");e.exports={createEventBase:i,eventFields:a,util:r}},{"./lib/event_base":324,"./lib/events":326,"./lib/events/util":328}],322:[function(t,e,n){var i="	\n\f\r \u2028\u2029",a=new RegExp("^["+i+"]+"),r=new RegExp("["+i+"]+$"),o=function(t){var e=null;return e=t.trim?t.trim():t.replace(a,"").replace(r,"")},l=function(t,e){var n,i,a,r,l,s=null,c=e&&e.cookie;if(c&&t){n=c.split(";");for(var u=n.length-1;!s&&u>=0;u--)r=n[u],l=r.indexOf("="),l>0&&(i=o(r.substring(0,l)),a=r,i===t&&(('"'===a[0]||'"'===a[a.length-1])&&(a=a.substring(1,a.length-1)),s=o(a.substring(l+1))))}return s},s=function(t,e){var n=l(t,e);return n&&(n=unescape(n)),n};e.exports={get:s,getUnescaped:l}},{}],323:[function(t,e,n){var i=function(t){for(var e="ab:",n="string"==typeof t?t.split(" "):[],i=0;i<n.length;++i)if(0===n[i].search(e))return n[i].slice(e.length)};e.exports={getExperimentId:i}},{}],324:[function(t,e,n){var i,a=t("utils").keypath,r=t("./cookies"),o=t("./experimentid"),l=t("../events/util"),s=function(t){var e=t&&"function"==typeof t.bag&&t.bag()||{},n=t&&t.itms||{},s=t&&t.Device||{},c=t&&t.UpdatableAssets||{currentManifestVersion:function(){return void 0}},u=t&&t.TabBar||{selectedTab:{}},h=a(s,"prototype.capacity")||function(){return void 0},d=a(t,"Settings.Screen")||{},p=a(n,"accountInfo.DSID")||void 0,m=n.eligibilityForService&&n.eligibilityForService();m=a(m,"accountStatus");var f,g,b=n.storefront,v=o.getExperimentId(b),y={},w=!1;if(i={clientId:r.get("xp_ci",n),baseVersion:1,dsId:p,eventTime:Date.now(),timezoneOffset:(new Date).getTimezoneOffset(),userAgent:n.userAgent,app:s.appIdentifier,pixelRatio:s.pixelRatio,screenHeight:d.height,screenWidth:d.width,capacitySystem:h("totalSystemCapacity"),capacitySystemAvailable:h("totalSystemAvailable"),capacityDisk:h("totalDiskCapacity"),capacityData:h("totalDataCapacity"),capacityDataAvailable:h("totalDataAvailable"),isSignedIn:p?!0:!1,connection:n.networkConnectionType,resourceRevNum:c.currentManifestVersion(),osVersion:s.systemVersion,userType:m,pageContext:l.toUpperCamelCase(u.selectedTab.identifier),xpSendMethod:"itms",xpPostFrequency:a(e,"metrics.postFrequency"),storeFrontHeader:b,experimentId:v,appVersion:s.appVersion},e&&e.metrics){if(e.metrics.metricsBase)for(var k in e.metrics.metricsBase)i[k]=e.metrics.metricsBase[k];if(e.metrics.blacklistedFields)for(var x=0;x<e.metrics.blacklistedFields.length;x++)delete i[e.metrics.blacklistedFields[x]];if(e.metrics.fieldsMap&&e.metrics.fieldsMap.cookies){for(var C=0;C<e.metrics.fieldsMap.cookies.length;C++)f=e.metrics.fieldsMap.cookies[C],g=r.get(f,n),g&&(y[f]=g,w=!0);w&&(i.cookies=y)}}return i};e.exports=s},{"../events/util":328,"./cookies":322,"./experimentid":323,utils:330}],325:[function(t,e,n){var i=t("./util"),a=t("utils").keypath,r=function(){return{getLocation:function(t,e){for(var n,a,r,o,l,s,c,u=t,h=[];u;){if(a={},s=0,n=u.parentNode,u.hasAttribute&&u.hasAttribute("data-metrics")&&(c=JSON.parse(u.getAttribute("data-metrics")),a=i.getFieldMappedData(c,e,"location"),c.type)){if(a.locationType=c.type,n){r=n.childNodes;for(var d=0;d<r.length;d++)if(o=r.item(d),l=o.hasAttribute("data-metrics")?JSON.parse(o.getAttribute("data-metrics")).type:void 0){if(o===u)break;l===a.locationType&&s++}}a.locationPosition=s,h.push(a)}u=n}return h},getActionContext:function(t){var e,n,i,a;if(t){n={navigate:["link","brick-lockup","playlist","album","track","carousel","more-link","hero-lockup","action-lockup","next-button","done-button","continue-button"],play:["play-button","radio","listen-button","cover-button"],subscription:["subscribe-buy-button"],connect:["view-detail","connect-card","share-button","like-button","comment-button"],onboarding:["genre-bubble","artist-bubble","more-artists","reset-button"]},i=Object.keys(n),a=function(e){for(var n=0;n<t.length;++n)if(e.indexOf(t[n])>-1)return t[n]};for(var r=0;r<i.length;++r)if(e=a(n[i[r]]))return{context:i[r],elementClass:e}}return{}},getActionType:function(t,e){switch(t){case"navigate":return"more-link"===e?"more":"next-button"===e?"next":"done-button"===e?"done":"forward";case"play":return"play";case"subscription":return"buy";case"connect":return"view-detail"===e?"view-detail":"share-button"===e?"share":"like-button"===e?"like":"comment-button"===e?"comment":"select";case"onboarding":return"genre-bubble"===e?"adjust-genre":"artist-bubble"===e?"adjust-artist":"more-artists"===e?"more-artists":"reset-button"===e?"reset":"select"}},getActionContextAndType:function(t){var e=this.getActionContext(t),n=a(e,"context")||"select",i=this.getActionType(n,a(e,"elementClass"));return{context:n,type:i}}}};e.exports=r()},{"./util":328,utils:330}],326:[function(t,e,n){var i=t("utils").keypath,a=t("lager"),r=t("./click"),o=t("./page"),l=t("./util"),s={account:function(t){var e=i(t,"eventBase")||{},n=i(t,"resources.itms")||{},a=(n&&n.accountInfo||{}).DSID?"signedIn":"signedOut";return e.eventType="account",e.eventVersion=1,e.type=a,e},buyConfirmed:function(t){var e,n,a=i(t,"eventBase")||{},r=i(t,"buyInfo"),o=i(t,"buyCache")||{};i(r,"options")?(e=i(r,"options.clientBuyId"),n=i(r,"options.pageInfo")):i(r,"metrics")&&(e=i(r,"metrics.clientBuyId")),r&&e&&(n||(n=o[e],a.detoured=!0),delete o[e]),i(r,"metrics")&&n&&(r.metrics.pageUrl=n.url);for(var l in i(r,"metrics"))a[l]=r.metrics[l];for(var s in i(n,"metricsBase"))a[s]=n.metricsBase[s];return a.clientBuyId=e,a.eventType="buyConfirmed",a.eventVersion=1,a},click:function(t){var e,n=i(t,"eventBase")||{},a=i(t,"resources.bag")||{},o="function"==typeof a&&a(),s=t.element,c=s.getAttribute("class"),u=s.hasAttribute("click-metrics")?JSON.parse(s.getAttribute("click-metrics")):{};n.eventType="click",n.eventVersion=3,n.impressions=l.flattenImpressions(t.impressions,o),n.location=r.getLocation(s,o),n.targetType=s.hasAttribute("data-metrics")?JSON.parse(s.getAttribute("data-metrics")).type:s.tagName;for(var h in u)n[h]=u[h];return c&&c.length>0&&(e=r.getActionContextAndType(c.split(" ")),n.actionContext=i(e,"context"),n.actionType=i(e,"type")),s.hasAttribute("data-link-url")&&(n.actionUrl=s.getAttribute("data-link-url")),t.details&&(n.actionDetails=t.details),n},enter:function(t){var e=i(t,"eventBase")||{};return e.eventType="enter",e.eventVersion=1,t?(e.refApp=t.refApp,e.refUrl=t.refUrl,"launch"===t.type?e.type="launch":"taskSwitch"===t.type&&(e.type=t.refApp||t.refUrl?"link":t.type)):a.warn("Fuse-Metrics: No event data provided to to enter"),e},exit:function(t){var e=i(t,"eventBase")||{};return e.eventType="exit",e.eventVersion=1,e.destinationUrl=void 0,e.type=void 0,e},impressions:function(t){var e,n=i(t,"eventBase")||{},a=i(t,"resources.bag")||{},r="function"==typeof a&&a();return t&&r&&(e=l.flattenImpressions(t.impressions,r)),n.eventType="impressions",n.eventVersion=3,n.impressions=e,n},media:function(){return{eventType:"media",eventVersion:1,type:void 0}},page:function(t){var e=i(t,"resources.bag")||{},n=("function"==typeof e&&e(),i(t,"eventBase")||{}),a=i(t,"resources.launchParams")||{},r=i(t,"options.pageDetails"),l=i(t,"xhrMetrics");return n.eventType="page",n.eventVersion=1,n.pageLoadTime=Date.now(),i(a,"hostApp")&&(n.hostApp=a.hostApp),i(a,"refApp")&&(n.refApp=a.refApp),i(a,"refUrl")&&(n.extRefUrl=a.refUrl),l&&(n.requestStartTime=i(l,"requestStartTime"),n.responseEndTime=i(l,"responseEndTime"),n.responseStartTime=i(l,"responseStartTime")),r&&(n.pageDetails=r),i(t,"searchTerm")&&(n.searchTerm=t.searchTerm),n.page&&(n.pageHistory=o.getPageHistory(n.page)),n},search:function(t){var e=i(t,"eventBase")||{},n=i(t,"event"),a=i(t,"resources.bag")?t.resources.bag():void 0,o=i(t,"type");return e.eventType="search",e.eventVersion=2,e.term=i(n,"term")||i(t,"term"),e.location=r.getLocation(i(t,"element"),a),e.actionUrl=i(n,"url")||i(t,"url"),o&&(e.actionType=o),i(n,"searchHintOriginalTerm")&&(e.actionType="hint",e.actionDetails=n.searchHintOriginalTerm,e.location=[{locationPosition:n.searchHintIndex,locationType:"listItem"},{locationPosition:0,locationType:"hintList"}],e.targetType="listItem",e.targetId=n.searchHintIndex),e}};e.exports=s},{"./click":325,"./page":327,"./util":328,lager:329,utils:330}],327:[function(t,e,n){var i=t("lager"),a=(t("utils").keypath,[]),r=function(t){var e=a.slice(0);return"string"==typeof t?(a.length>=5&&a.shift(),a.push(t)):i.warn("fuse-metrics: getPageHistory was not provided a string input"),e};e.exports={getPageHistory:r}},{lager:329,utils:330}],328:[function(t,e,n){var i=t("utils").keypath,a=t("lager"),r=function(t,e,n){var r,o,l={};if(t)if(r=i(e,"metrics.fieldsMap")||{},o="single"===n?"single":"custom."+n,r=i(r,o)){for(var s in r)for(var c=0;c<r[s].length;c++)if(t[r[s][c]]){l[s]=t[r[s][c]];break}}else a.warn("Fuse-Metrics: unable to get fieldsMap from bag");else a.warn("Fuse-Metrics: No data provided to to getFieldMappedData");return l},o=function(t,e){var n="its",a="",r=t.indexOf("."),o=i(e,"metrics.compoundSeparator")||a,l=-1!==r?t.substring(0,r):n;return l+o+"id"},l=function(t,e){var n=i(e,"metrics.impressions.viewableThreshold")||1e3;return Array.isArray(t)?t.filter(function(t,e,n){return 0===e||t-n[e-1]>=this},n):(a.warn("Fuse-Metrics: filterImpressionTimestamps did not receive an array"),[])},s=function(t){if(t&&t[0]&&void 0!==t[0].index){for(var e,n={},i=[],a=0;a<t.length;++a)e=t[a].index,n[e]||(n[e]=!0,i.push(t[a]));return i}return t},c=function(t,e,n){var u,h,d,p,m=[],f=n||1;if(t){t=s(t);for(var g=0;g<t.length;g++)u=t[g],h="string"==typeof u.data?JSON.parse(u.data):u,p=i(h,"type"),h=r(h,e,"impressions"),h.impressionTimes=l(u.timestamps,e),h.impressionIndex=u.index,h.impressionType=p,h.id&&(h.idType="genre"===u.kind?"label"+i(e,"metrics.compoundSeparator")+"id":o(h.id.toString(),e)),u.parent&&void 0!==u.parent.impressionId&&(h.impressionParentId=u.parent.impressionId),h.impressionId=f,u.impressionId=f,++f,m.push(h),i(u,"children.length")>0&&(d=c(u.children,e,f),m=m.concat(d),f+=d.length)}else a.warn("Fuse-Metrics: No impressions provided to to flattenImpressions");return m},u=function(t){var e,n="";if(t){e=t.toLowerCase().split("_");for(var i=0;i<e.length;i++)n+=e[i][0].toUpperCase()+e[i].slice(1)+""}else a.warn("Fuse-Metrics: No source provided to to UpperCamelCase");return n};e.exports={flattenImpressions:c,getFieldMappedData:r,toUpperCamelCase:u}},{lager:329,utils:330}],329:[function(t,e,n){e.exports=function(){function t(){for(var t,i=1;i<o.length;i++)t=o[i],r[t]=r.level>=i?c.enabled?n(t):e(t):function(){return!1},r.log=r.info}function e(t){return console[t]?Function.prototype.bind.call(console[t],console):Function.prototype.bind.call(console.log,console)}function n(t){var n=Error;return n.prototype.log=function(){var n=e(t),i=this.stack.split("\n",19).splice(c.offset,c.lines);n.apply(console,arguments);for(var a=0;a<i.length;a++){var r=i[a];console.log(r)}},Function.prototype.bind.call(n().log,n())}function i(e){var n=r.level;"string"==typeof e&&l.hasOwnProperty(e)?(e.toLowerCase(),s=l[e]):"number"==typeof e&&e>=0&&4>=e&&(s=e),s!==n&&t()}function a(e){if((e===!0||e===!1)&&(c.enabled=e),"object"==typeof e){e=e||{};for(var n in e)c[n]=e[n]}t()}var r=Object.create(Object.prototype),o=["silent","error","warn","info","debug"],l={silent:0,error:1,warn:2,info:3,debug:4},s=0,c={enabled:!1,lines:1,offset:0};return Object.defineProperties(r,{level:{set:i,get:function(){return s}},trace:{set:a,get:function(){return c.enabled}}}),r.setDefaults=function(){s=3,t()},r.silent=function(){s=0,t()},r.setDefaults(),r}()},{}],330:[function(t,e,n){function i(t,e){var n;if("undefined"==typeof t)return t;for(n in e)t[n]=e[n];return t}function a(t){return i({},t)}function r(t,e,n){n?i(t.prototype,e.prototype):t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writeable:!0,configurable:!0}})}function o(t,e){if(!e)return t;for(var n=e.split("."),i=t,a=0,r=n.length;r>a&&"undefined"!=typeof i;a++)i=i[n[a]];return i}function l(t){setTimeout(t,1)}e.exports={clone:a,extend:i,inherit:r,keypath:o,nextTick:l}},{}],331:[function(t,e,n){"use strict";var i=t("./handlebars/base"),a=t("./handlebars/safe-string")["default"],r=t("./handlebars/exception")["default"],o=t("./handlebars/utils"),l=t("./handlebars/runtime"),s=function(){var t=new i.HandlebarsEnvironment;return o.extend(t,i),t.SafeString=a,t.Exception=r,t.Utils=o,t.escapeExpression=o.escapeExpression,t.VM=l,t.template=function(e){return l.template(e,t)},t},c=s();c.create=s,c["default"]=c,n["default"]=c},{"./handlebars/base":332,"./handlebars/exception":333,"./handlebars/runtime":334,"./handlebars/safe-string":335,"./handlebars/utils":336}],332:[function(t,e,n){"use strict";function i(t,e){this.helpers=t||{},this.partials=e||{},a(this)}function a(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse,a=n.fn;if(e===!0)return a(this);if(e===!1||null==e)return i(this);if(u(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var o=g(n.data);o.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:o}}return a(e,n)}),t.registerHelper("each",function(t,e){if(!e)throw new o("Must pass iterator to #each");var n,i,a=e.fn,l=e.inverse,s=0,c="";if(e.data&&e.ids&&(i=r.appendContextPath(e.data.contextPath,e.ids[0])+"."),h(t)&&(t=t.call(this)),e.data&&(n=g(e.data)),t&&"object"==typeof t)if(u(t))for(var d=t.length;d>s;s++)n&&(n.index=s,n.first=0===s,n.last=s===t.length-1,i&&(n.contextPath=i+s)),c+=a(t[s],{data:n});else for(var p in t)t.hasOwnProperty(p)&&(n&&(n.key=p,n.index=s,n.first=0===s,i&&(n.contextPath=i+p)),c+=a(t[p],{data:n}),s++);return 0===s&&(c=l(this)),c}),t.registerHelper("if",function(t,e){return h(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){h(t)&&(t=t.call(this));var n=e.fn;if(r.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var i=g(e.data);i.contextPath=r.appendContextPath(e.data.contextPath,e.ids[0]),e={data:i}}return n(t,e)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}var r=t("./utils"),o=t("./exception")["default"],l="2.0.0";n.VERSION=l;var s=6;n.COMPILER_REVISION=s;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=c;var u=r.isArray,h=r.isFunction,d=r.toString,p="[object Object]";n.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:m,log:f,registerHelper:function(t,e){if(d.call(t)===p){if(e)throw new o("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){d.call(t)===p?r.extend(this.partials,t):this.partials[t]=e},unregisterPartial:function(t){delete this.partials[t]}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(m.level<=t){var n=m.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};n.logger=m;var f=m.log;n.log=f;var g=function(t){var e=r.extend({},t);return e._parent=t,e};n.createFrame=g},{"./exception":333,"./utils":336}],333:[function(t,e,n){"use strict";function i(t,e){var n;e&&e.firstLine&&(n=e.firstLine,t+=" - "+n+":"+e.firstColumn);for(var i=Error.prototype.constructor.call(this,t),r=0;r<a.length;r++)this[a[r]]=i[a[r]];n&&(this.lineNumber=n,this.column=e.firstColumn)}var a=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,n["default"]=i},{}],334:[function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=h;if(e!==n){if(n>e){var i=d[n],a=d[e];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+a+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function a(t,e){if(!e)throw new u("No environment passed to template");if(!t||!t.main)throw new u("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var n=function(n,i,a,r,o,l,s,h,d){o&&(r=c.extend({},r,o));var p=e.VM.invokePartial.call(this,n,a,r,l,s,h,d);if(null==p&&e.compile){var m={helpers:l,partials:s,data:h,depths:d};s[a]=e.compile(n,{data:void 0!==h,compat:t.compat},e),p=s[a](r,m)}if(null!=p){if(i){for(var f=p.split("\n"),g=0,b=f.length;b>g&&(f[g]||g+1!==b);g++)f[g]=i+f[g];p=f.join("\n")}return p}throw new u("The partial "+a+" could not be compiled when running in runtime-only mode")},i={lookup:function(t,e){for(var n=t.length,i=0;n>i;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:c.escapeExpression,invokePartial:n,fn:function(e){return t[e]},programs:[],program:function(t,e,n){var i=this.programs[t],a=this.fn(t);return e||n?i=r(this,t,a,e,n):i||(i=this.programs[t]=r(this,t,a)),i},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=c.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler},a=function(e,n){n=n||{};var r=n.data;a._setup(n),!n.partial&&t.useData&&(r=s(e,r));var o;return t.useDepths&&(o=n.depths?[e].concat(n.depths):[e]),t.main.call(i,e,i.helpers,i.partials,r,o)};return a.isTop=!0,a._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,e.helpers),
t.usePartial&&(i.partials=i.merge(n.partials,e.partials)))},a._child=function(e,n,a){if(t.useDepths&&!a)throw new u("must pass parent depths");return r(i,e,t[e],n,a)},a}function r(t,e,n,i,a){var r=function(e,r){return r=r||{},n.call(t,e,t.helpers,t.partials,r.data||i,a&&[e].concat(a))};return r.program=e,r.depth=a?a.length:0,r}function o(t,e,n,i,a,r,o){var l={partial:!0,helpers:i,partials:a,data:r,depths:o};if(void 0===t)throw new u("The partial "+e+" could not be found");return t instanceof Function?t(n,l):void 0}function l(){return""}function s(t,e){return e&&"root"in e||(e=e?p(e):{},e.root=t),e}var c=t("./utils"),u=t("./exception")["default"],h=t("./base").COMPILER_REVISION,d=t("./base").REVISION_CHANGES,p=t("./base").createFrame;n.checkRevision=i,n.template=a,n.program=r,n.invokePartial=o,n.noop=l},{"./base":332,"./exception":333,"./utils":336}],335:[function(t,e,n){"use strict";function i(t){this.string=t}i.prototype.toString=function(){return""+this.string},n["default"]=i},{}],336:[function(t,e,n){"use strict";function i(t){return c[t]}function a(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function r(t){return t instanceof s?t.toString():null==t?"":t?(t=""+t,h.test(t)?t.replace(u,i):t):t+""}function o(t){return t||0===t?m(t)&&0===t.length?!0:!1:!0}function l(t,e){return(t?t+".":"")+e}var s=t("./safe-string")["default"],c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,h=/[&<>"'`]/;n.extend=a;var d=Object.prototype.toString;n.toString=d;var p=function(t){return"function"==typeof t};p(/x/)&&(p=function(t){return"function"==typeof t&&"[object Function]"===d.call(t)});var p;n.isFunction=p;var m=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===d.call(t):!1};n.isArray=m,n.escapeExpression=r,n.isEmpty=o,n.appendContextPath=l},{"./safe-string":335}],337:[function(t,e,n){e.exports=t("./dist/cjs/handlebars.runtime")},{"./dist/cjs/handlebars.runtime":331}],338:[function(t,e,n){e.exports=t("handlebars/runtime")["default"]},{"handlebars/runtime":337}],339:[function(t,e,n){function i(t,e){this.dispatchEvent(new o(t,{detail:{options:e}}))}function a(t,e,n){i.call(this,"error",{msg:t,url:e,line:n})}var r=t("native"),o=t("dom-events").Event,l=t("./base"),s=t("../utils"),c=function(t,e){t=t||{},this.application=t.application||r.application,l.call(this,t,e),this.application.onLaunch=i.bind(this,"ready"),this.application.onExit=i.bind(this,"exit"),this.application.onSuspend=i.bind(this,"suspend"),this.application.onResume=i.bind(this,"resume"),this.application.onError=a.bind(this)};s.inherit(c,l),e.exports=c},{"../utils":366,"./base":340,"dom-events":370,"native":375}],340:[function(t,e,n){var i=t("dom-events").EventTarget,a=t("../utils"),r=function(){i.call(this)};a.inherit(r,i),e.exports=r},{"../utils":366,"dom-events":370}],341:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r='class="';return a=e.each.call(t,null!=(a=null!=t?t.self:t)?a.classes:a,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'"'},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=o(r(t,t));return a=e.unless.call(t,i&&i.last,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l},3:function(t,e,n,i){return" "},5:function(t,e,n,i,a){var r,o=e.helperMissing;return r=(e.ifValidAttribute||t&&t.ifValidAttribute||o).call(t,e.lookup.call(t,null!=a[1]?a[1].self:a[1],t,{name:"lookup",hash:{},data:i}),{name:"ifValidAttribute",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r?r:""},6:function(t,e,n,i,a){var r=this.lambda,o=this.escapeExpression;return" "+o(r(t,t))+'="'+o(e.lookup.call(t,null!=a[2]?a[2].self:a[2],t,{name:"lookup",hash:{},data:i}))+'" '},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s="<head>\n</head>\n<"+l(o(null!=(r=null!=t?t.self:t)?r.documentType:r,t))+" ";return r=e["if"].call(t,null!=(r=null!=t?t.self:t)?r.classes:r,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+=" ",r=e.each.call(t,null!=(r=null!=t?t.self:t)?r.watchedAttributes:r,{name:"each",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+"></"+l(o(null!=(r=null!=t?t.self:t)?r.documentType:r,t))+">"},useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],342:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s='<?xml version="1.0" encoding="UTF-8"?>\n<document>\n';return r=null!=(r=e.content||(null!=t?t.content:t))?r:l,a=typeof r===o?r.call(t,{name:"content",hash:{},data:i}):r,null!=a&&(s+=a),s+"\n</document>"},useData:!0})},{"hbsfy/runtime":338}],343:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"<title>"+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+"</title>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.name:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":338}],344:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c="    <"+s((r=null!=(r=e.providerType||(null!=t?t.providerType:t))?r:l,typeof r===o?r.call(t,{name:"providerType",hash:{},data:i}):r))+' id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"';return a=e["if"].call(t,null!=t?t.entityType:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(c+=a),a=e["if"].call(t,null!=t?t.prefetchedProperties:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=e["if"].call(t,null!=t?t.predicateList:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(c+=a),a=e["if"].call(t,null!=t?t.limitList:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"    </"+s((r=null!=(r=e.providerType||(null!=t?t.providerType:t))?r:l,typeof r===o?r.call(t,{name:"providerType",hash:{},data:i}):r))+">\n"},2:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return' entityType="'+l((a=null!=(a=e.entityType||(null!=t?t.entityType:t))?a:o,typeof a===r?a.call(t,{name:"entityType",hash:{},data:i}):a))+'"'},4:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return' prefetchedProperties="'+l((a=null!=(a=e.prefetchedProperties||(null!=t?t.prefetchedProperties:t))?a:o,typeof a===r?a.call(t,{name:"prefetchedProperties",hash:{},data:i}):a))+'"'},6:function(t,e,n,i){var a,r="        <predicateList>\n";return a=e.each.call(t,null!=t?t.predicateList:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"        </predicateList>\n"},7:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <propertyPredicate property="'+r(a(null!=t?t.property:t,t))+'" value="'+r(a(null!=t?t.value:t,t))+'"/>\n'},9:function(t,e,n,i){var a,r="        <limitList>\n";return a=e.each.call(t,null!=t?t.limitList:t,{name:"each",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"        </limitList>\n"},10:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l="            <"+o(r(null!=t?t.limitType:t,t));return a=e["if"].call(t,null!=t?t.entityType:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+' value="'+o(r(null!=t?t.value:t,t))+'"/>\n'},11:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return' entityType="'+r(a(null!=t?t.entityType:t,t))+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e.each.call(t,null!=t?t.entityProviders:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":338}],345:[function(t,e,n){var i=t("../render"),a=t("../element"),r=t("../../utils"),o=t("parser"),l=t("dom-events").Event,s=t("../../mixins").ArrayPropertyFactory,c=new s(["controller"]),u=function(e,n){e=e||{},e.titleTemplate&&(this.titleTemplate=e.titleTemplate),e.documentType&&(this.documentType=e.documentType),this.name=e.name,this.suppressNavigationController=e.suppressNavigationController;var r=new a({elementType:"style",template:function(){return this.styles.map(function(t){return t.style}).join("\n")},styles:e.styles}),o=new a({elementType:"entityProviderList",template:t("./entity_provider.hbs"),entityProviders:e.entityProviders}),l=new a({elementType:"navigationBar",template:this.titleTemplate});l.name=this.name,this.stylesController=r,this.entityProviderListController=o,this.navigationBarController=l,c.createProperties(this),e.controllers&&e.controllers.forEach(function(t){this.addController(t),t.styles.forEach(function(t){this.stylesController.addStyle(t)},this),t.entityProviders.forEach(function(t){this.entityProviderListController.addEntityProvider(t)},this)},this),i.call(this,e,n),r.addEventListener("addStyle",function(){r.render()}),r.addEventListener("removeStyle",function(){r.render()}),o.addEventListener("addEntityProvider",function(){o.render()}),o.addEventListener("removeEntityProvider",function(){o.render()}),this.addEventListener("addController",function(t){var e=t.detail.controller;e.styles.forEach(function(t){this.stylesController.addStyle(t)},this),e.entityProviders.forEach(function(t){this.entityProviderListController.addEntityProvider(t)},this)}.bind(this)),this.addEventListener("removeController",function(t){var e=t.detail.controller;e.styles.forEach(function(t){this.stylesController.removeStyle(t)},this),e.entityProviders.forEach(function(t){this.entityProviderListController.removeEntityProvider(t)},this)}.bind(this)),this.addEventListener("addStyle",function(t){this.stylesController.addStyle(t.detail.style)}.bind(this)),this.addEventListener("removeStyle",function(t){this.stylesController.removeStyle(t.detail.style)}.bind(this)),this.addEventListener("addEntityProvider",function(t){this.entityProviderListController.addEntityProvider(t.detail.entityProvider)}.bind(this)),this.addEventListener("removeEntityProvider",function(t){this.entityProviderListController.removeEntityProvider(t.detail.entityProvider)}.bind(this))};r.inherit(u,i),c.mixin(u.prototype),u.prototype.delegateEvents=["load","unload","appear","disappear","update","didupdate"].concat(i.prototype.delegateEvents),u.prototype.tagTemplate=t("./document_tag.hbs"),u.prototype.titleTemplate=t("./document_title.hbs"),u.prototype.template=t("./document.hbs"),u.prototype.render=function(t){var e=o.parse(this.tagTemplate({content:this.template({self:this})}),this.el),n=this.el||e,i=e.documentElement||e,a=e.getElementsByTagName("head").item(0),r=e.getElementsByTagName(this.documentType).item(0);this.stylesController.render(n),this.entityProviderListController.render(n),this.navigationBarController.render(n),this.stylesController.insertInto(a),this.entityProviderListController.insertInto(a),this.suppressNavigationController||this.navigationBarController.insertInto(i,r),this.controllers.forEach(function(e){t&&e.render(n),e.insertInto(r)}),this.el?this.el.replaceChild(e,this.el.documentElement):this.el=e,this.dispatchEvent(new l("render"))},e.exports=u},{"../../mixins":357,"../../utils":366,"../element":346,"../render":352,"./document.hbs":341,"./document_tag.hbs":342,"./document_title.hbs":343,"./entity_provider.hbs":344,"dom-events":370,parser:376}],346:[function(t,e,n){var i=t("./render"),a=t("../utils"),r=a.parser,o=t("dom-events").Event,l=function(t,e){t=t||{},t.elementType&&(this.elementType=t.elementType),i.call(this,t,e)};a.inherit(l,i),l.prototype.render=function(t){!t&&this.el&&(t=this.el.ownerDocument);var e=r.parse(this.tagTemplate({self:this,content:this.template(this)}),t);this.el&&this.container&&this.container.replaceChild(e,this.el),this.el=t?e:e.documentElement,this.dispatchEvent(new o("render"))},l.prototype.insertInto=function(t,e){var n=this.el;t.ownerDocument!==n.ownerDocument&&(n=t.ownerDocument.adoptNode(n),this.el=n),t.insertBefore(this.el,e),this.container=t},e.exports=l},{"../utils":366,"./render":352,"dom-events":370}],347:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r='class="';return a=e.each.call(t,null!=(a=null!=t?t.self:t)?a.classes:a,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'"'},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=o(r(t,t));return a=e.unless.call(t,i&&i.last,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l},3:function(t,e,n,i){return" "},5:function(t,e,n,i,a){var r,o=e.helperMissing;return r=(e.ifValidAttribute||t&&t.ifValidAttribute||o).call(t,e.lookup.call(t,null!=a[1]?a[1].self:a[1],t,{name:"lookup",hash:{},data:i}),{name:"ifValidAttribute",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r?r:""},6:function(t,e,n,i,a){var r=this.lambda,o=this.escapeExpression;return" "+o(r(t,t))+'="'+o(e.lookup.call(t,null!=a[2]?a[2].self:a[2],t,{name:"lookup",hash:{},data:i}))+'" '},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o,l=this.lambda,s=this.escapeExpression,c="function",u=e.helperMissing,h="<"+s(l(null!=(r=null!=t?t.self:t)?r.elementType:r,t))+" ";return r=e["if"].call(t,null!=(r=null!=t?t.self:t)?r.classes:r,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+=" ",r=e.each.call(t,null!=(r=null!=t?t.self:t)?r.watchedAttributes:r,{name:"each",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+=">",o=null!=(o=e.content||(null!=t?t.content:t))?o:u,r=typeof o===c?o.call(t,{name:"content",hash:{},data:i}):o,null!=r&&(h+=r),h+"</"+s(l(null!=(r=null!=t?t.self:t)?r.elementType:r,t))+">"},useData:!0,useDepths:!0})},{"hbsfy/runtime":338}],348:[function(t,e,n){e.exports={BaseController:t("./base"),RenderableController:t("./render"),DocumentController:t("./document"),ElementController:t("./element"),MultiElementController:t("./multielement"),MenuBarController:t("./menu_bar"),Application:t("./application"),TabbedApplication:t("./tab_application")}},{"./application":339,"./base":340,"./document":345,"./element":346,"./menu_bar":349,"./multielement":351,"./render":352,"./tab_application":353}],349:[function(t,e,n){var i=t("../element"),a=t("../../utils"),r=function(t,e){t=t||{},this.menuItems=t.menuItems||[],i.call(this,t,e)};a.inherit(r,i),r.prototype.elementType="menuBar",r.prototype.template=t("./menu_bar.hbs"),r.prototype.delegateEvents=["needscontent","select"].concat(i.prototype.delegateEvents),r.prototype.setDocumentForItem=function(t,e){this.el.getFeature("MenuBarDocument").setDocument(t,e)},r.prototype.getDocumentForItem=function(t){this.el.getFeature("MenuBarDocument").getDocument(t)},r.prototype.getSelectedItem=function(){this.el.getFeature("MenuBarDocument").getActiveElement()},r.prototype.setSelectedItem=function(t){this.el.getFeature("MenuBarDocument").setSelectedItem(t)},e.exports=r},{"../../utils":366,"../element":346,"./menu_bar.hbs":350}],350:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s="    <menuItem>\n        <title>";return r=null!=(r=e.title||(null!=t?t.title:t))?r:l,a=typeof r===o?r.call(t,{name:"title",hash:{},data:i}):r,null!=a&&(s+=a),s+"</title>\n    </menuItem>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e.each.call(t,null!=t?t.menuItems:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":338}],351:[function(t,e,n){var i=t("./render"),a=t("../utils"),r=t("parser"),o=t("dom-events").Event,l=function(t,e){i.call(this,t,e)};a.inherit(l,i),l.prototype.tagTemplate=function(t){return"<stackTemplate>"+t.content+"</stackTemplate>"},l.prototype.render=function(t){!t&&this.el&&(t=this.el.ownerDocument);var e=r.parse(this.tagTemplate({content:this.template(this)}),t);e=t?e:e.documentElement;var n,i,a,l,s=e.childNodes,c=s.length,u=this.container;if(this.el&&this.container){if(n=this.elementArray.reduce(function(t,e){return s.length>0?(a=s.item(0),u.replaceChild(a,e),t.push(a)):u.removeChild(e),t},[]),n.length<c)for(l=n[n.length-1],i=n.length;c>i;i++)a=s.item(0),n.push(a),u.insertBefore(a,l.nextSibling),l=a}else for(n=[],i=0;c>i;i++)n.push(s.item(i));this.el=e,this.elementArray=n,this.dispatchEvent(new o("render"))},l.prototype.insertInto=function(t,e){this.elementArray=this.elementArray.reduce(function(n,i){var a=i;return a.ownerDocument!==t.ownerDocument&&(a=t.ownerDocument.adoptNode(a)),t.insertBefore(a,e),n.push(a),n},[]),this.el.ownerDocument!==t.ownerDocument&&(this.el=t.ownerDocument.adoptNode(this.el)),this.container=t},e.exports=l},{"../utils":366,"./render":352,"dom-events":370,parser:376}],352:[function(t,e,n){var i=t("./base"),a=t("dom-events").EventDelegate,r=t("dom-events").Event,o=t("../utils"),l=t("../mixins").ArrayPropertyFactory,s=t("../mixins").SetPropertyFactory,c=new l(["style","entityProvider"]),u=new s([{property:"class",plural:"classes"}]),h=function(t){i.call(this),a.call(this),t=t||{};var e;Object.defineProperty(this,"el",{get:function(){return e},set:function(t){var n=e;e=t,this.delegateEvents.length&&(n&&this.removeEventDelegates(n,this.delegateEvents),this.addEventDelegates(t,this.delegateEvents))},enumerable:!0,configurable:!0}),c.createProperties(this),u.createProperties(this),t.styles&&t.styles.forEach(function(t){this.addStyle(t)},this),t.entityProviders&&t.entityProviders.forEach(function(t){this.addEntityProvider(t)},this),t.classes&&t.classes.forEach(function(t){this.addClass(t)},this);var n=function(){this.render()}.bind(this);this.addEventListener("addClass",n),this.addEventListener("removeClass",n),t.template&&(this.template=t.template);var o=this.watchedAttributes;t.watchedAttributes||(t.watchedAttributes=[]),o=o.concat(t.watchedAttributes),this.watchedAttributes=o;var l=o.reduce(function(e,n){return e[n]=t[n],e},{});this.addEventListener("change",n),Object.defineProperties(this,o.reduce(function(t,e){return t[e]={enumerable:!0,get:function(){return l[e]},set:function(t){var n=l[e];l[e]=t,this.dispatchEvent(new r("change",{detail:{oldValue:n,newValue:t,name:e}}))}},t},{})),t&&t.el?this.el=t.el:this.render()};o.inherit(h,i),c.mixin(h.prototype),u.mixin(h.prototype),h.prototype.delegateEvents=[],h.prototype.tagTemplate=t("./element_tag.hbs"),h.prototype.watchedAttributes=["selected","disabled","accessibilityText"],h.prototype.template=function(){return""},h.prototype.render=function(){},e.exports=h},{"../mixins":357,"../utils":366,"./base":340,"./element_tag.hbs":347,"dom-events":370}],353:[function(t,e,n){var i=t("native-ios"),a=t("./application"),r=t("./tab_bar"),o=t("dom-events").EventDelegate,l=t("../utils"),s=function(t,e){t=t||{},t.tabBar=t.tabBar||i.tabBar,a.call(this,t,e),o.call(this),this.tabBar=new r({tabBar:t.tabBar}),this.addEventDelegates(this.tabBar,this.tabBar.delegatedEvents)};l.inherit(s,a),e.exports=s},{"../utils":366,"./application":339,"./tab_bar":354,"dom-events":370,"native-ios":372}],354:[function(t,e,n){function i(t){t||(t=new s("select",{detail:{target:this.tabBar.selectedTab}})),this.dispatchEvent(t)}function a(t){t||(t=new s("reload",{detail:{target:this.tabBar}})),this.dispatchEvent(t)}function r(t){var e=new s("needscontent",{detail:{target:t.detail.tab}});this.dispatchEvent(e)}var o=t("native-ios"),l=t("./base"),s=t("dom-events").Event,c=t("../utils"),u=function(t){l.call(this),t=t||{},t.tabBar=t.tabBar||o.tabBar,this.tabBar=t.tabBar,this.tabBar.onSelect=i.bind(this),this.tabBar.onReload=a.bind(this),this.tabBar.onNeedsContent=r.bind(this)};c.inherit(u,l),u.prototype.delegatedEvents=["select","reload","needscontent"],e.exports=u},{"../utils":366,"./base":340,"dom-events":370,"native-ios":372}],355:[function(t,e,n){e.exports={controller:t("./controllers"),event:t("dom-events"),traits:t("./traits"),utils:t("./utils"),model:t("./models")}},{"./controllers":348,"./models":361,"./traits":363,"./utils":366,"dom-events":370}],356:[function(t,e,n){function i(t){return t+"s"}function a(t){return t.charAt(0).toUpperCase()+t.slice(1)}function r(t,e,n){if(this.dispatchEvent){var i={};i[e.property]=n,this.dispatchEvent(new o(t+e.capitalized,{detail:i}))}}var o=t("dom-events").Event,l=function(t){this.propertyNames=t.map(function(t){return"string"==typeof t&&(t={property:t}),t.plural||(t.plural=i(t.property)),t.capitalized||(t.capitalized=a(t.property)),t})};l.prototype.createProperties=function(t){Object.defineProperties(t,this.propertyNames.reduce(function(t,e){return t[e.plural]={value:[]},t},{}))},l.prototype.dispatchPropertyEvent=r,l.prototype.addGenerator=function(t){return function(e){this[t.plural].push(e),r.call(this,"add",t,e)}},l.prototype.removeGenerator=function(t){return function(e){var n=this[t.plural].reduceRight(function(t,n,i){return n===e&&t.push(i),t},[]);n.forEach(function(e){this[t.plural].splice(e,1)},this),r.call(this,"remove",t,e)}},l.prototype.mixin=function(t){this.propertyNames.forEach(function(e){t["add"+e.capitalized]=this.addGenerator(e),t["remove"+e.capitalized]=this.removeGenerator(e)},this)},e.exports=l},{"dom-events":370}],357:[function(t,e,n){e.exports={ArrayPropertyFactory:t("./array"),SetPropertyFactory:t("./set")}},{"./array":356,"./set":358}],358:[function(t,e,n){var i=t("./array"),a=t("../utils"),r=function(){i.apply(this,arguments)};a.inherit(r,i);var o=r.prototype.dispatchPropertyEvent;r.prototype.addGenerator=function(t){return function(e){-1===this[t.plural].indexOf(e)&&(this[t.plural].push(e),o.call(this,"add",t,e))}},e.exports=r},{"../utils":366,"./array":356}],359:[function(t,e,n){var i=t("dom-events").EventTarget,a=t("../utils"),r=function(){i.call(this)};a.inherit(r,i),e.exports=r},{"../utils":366,"dom-events":370}],360:[function(t,e,n){var i=t("./base"),a=t("../utils"),r=function(t){i.call(this),this.providerType=t.providerType,this.entityType=t.entityType,this.id=t.id,t.predicateList&&(this.predicateList=t.predicateList),t.limitList&&(this.limitList=t.limitList),t.prefetchedProperties&&(this.prefetchedProperties=t.prefetchedProperties)};a.inherit(r,i),e.exports=r},{"../utils":366,"./base":359}],361:[function(t,e,n){e.exports={BaseModel:t("./base"),Style:t("./style"),EntityProvider:t("./entity_provider")}},{"./base":359,"./entity_provider":360,"./style":362}],362:[function(t,e,n){var i=t("./base"),a=t("../utils"),r=function(t){i.call(this),this.style=t.style};a.inherit(r,i),e.exports=r},{"../utils":366,"./base":359}],363:[function(t,e,n){e.exports={SelectMap:t("./select_map")}},{"./select_map":364}],364:[function(t,e,n){function i(t){t.addEventListener("select",this.handleSelect.bind(this))}var a=t("../controllers").MultiElementController,r=function(){var t;t=this instanceof a?function(){this.elementArray.forEach(function(t){i.call(this,t)},this)}:function(){i.call(this,this.el)},this.addEventListener("render",t.bind(this)),t.call(this),this.onSelect={}};r.prototype.handleSelect=function(t){var e=t.target.getAttribute("class").split(" "),n=this.onSelect;e.forEach(function(e){var i=n[e];"function"==typeof i&&i.call(this,t)}.bind(this))},e.exports=r},{"../controllers":348}],365:[function(t,e,n){var i=t("hbsfy/runtime");i.registerHelper("ifValidAttribute",function(t,e){return t||t===!1||0===t?e.fn(this):e.inverse(this)}),e.exports=i},{"hbsfy/runtime":338}],366:[function(t,e,n){var i=t("utils"),a=t("parser"),r=t("pubsub"),o=t("./handlebars"),l={parser:a,PubSub:r,Handlebars:o};i.extend(i,l),e.exports=i},{"./handlebars":365,parser:376,pubsub:378,utils:379}],367:[function(t,e,n){var i=t("./event-target"),a=t("utils"),r=function(){function t(t){this.dispatchEvent(t)}this.hasOwnProperty("dispatchEvent")||i.call(this);var e=t.bind(this);this.addEventDelegates=function(t,n){n.forEach(function(n){t.addEventListener(n,e)},this)},this.removeEventDelegates=function(t,n){n.forEach(function(n){t.removeEventListener(n,e)},this)}};a.inherit(r,i),e.exports=r},{"./event-target":368,utils:371}],368:[function(t,e,n){var i=function(){var t={};this.addEventListener=function(e,n){t[e]=t[e]||[],t[e].push(n)},this.removeEventListener=function(e,n){var i,a=t[e];a&&(i=a.indexOf(n),i>-1&&a.splice(i,1))},this.dispatchEvent=function(e){var n=t[e.type];n&&n.forEach(function(t){t.call(this,e)},this)}};e.exports=i},{}],369:[function(t,e,n){var i=t("utils"),a=function(t,e){if(this.type=t,!t)throw new TypeError("Failed to construct Event: An event name must be provided.");e&&e.detail&&(this.detail=i.clone(e.detail))};a.prototype.initEvent=function(){},a.prototype.preventDefault=function(){},a.prototype.stopImmediatePropagation=function(){},a.prototype.stopPropagation=function(){},e.exports=a},{utils:371}],370:[function(t,e,n){e.exports={Event:t("./event"),EventDelegate:t("./event-delegate"),EventTarget:t("./event-target")}},{"./event":369,"./event-delegate":367,"./event-target":368}],371:[function(t,e,n){e.exports=t(330)},{}],372:[function(t,e,n){var i=t("utils"),a=t("native"),r={modal:void 0,tabBar:void 0};"undefined"!=typeof modal&&(r.modal=modal),"undefined"!=typeof TabBar&&(r.tabBar=TabBar),i.extend(a,r),e.exports=a},{"native":373,utils:374}],373:[function(t,e,n){var i,a={application:void 0,DOMParser:void 0,XMLSerializer:void 0};"undefined"!=typeof DOMImplementationRegistry&&(i=function(){},i.prototype.serializer=DOMImplementationRegistry.getDOMImplementation(null).createLSSerializer(),i.prototype.serializeToString=function(t){return this.serializer.writeToString(t)},a.XMLSerializer=i),"undefined"!=typeof DOMParser&&(a.DOMParser=DOMParser),"undefined"!=typeof App&&(a.application=App),e.exports=a},{}],374:[function(t,e,n){e.exports=t(330)},{}],375:[function(t,e,n){e.exports=t(373)},{}],376:[function(t,e,n){var i=t("native"),a=new i.DOMParser,r=new i.XMLSerializer;e.exports={parse:function(t,e){var n=a.parseFromString(t,"text/xml");return e?e.adoptNode(n.documentElement):n},stringify:function(t){return r.serializeToString(t)}}},{"native":377}],377:[function(t,e,n){e.exports=t(373)},{}],378:[function(t,e,n){function i(){return"uuid_"+ ++a}var a=-1,r=function(){this.topics={}};r.prototype.publish=function(t,e){var n=this.topics[t];if(n){var i=Object.keys(n);i.forEach(function(t){n[t](e)})}},r.prototype.subscribe=function(t,e){this.topics[t]||(this.topics[t]={});var n=i();return this.topics[t][n]=e,n},r.prototype.unsubscribe=function(t){if(this.topics[t])return void delete this.topics[t];for(var e,n,i=Object.keys(this.topics),a=0,r=i.length;r>a;a++){if(e=this.topics[i[a]],e[t]){delete e[t];break}for(n in e)e.hasOwnProperty(n)&&e[n]===t&&delete e[n]}},e.exports=r},{}],379:[function(t,e,n){e.exports=t(330)},{}],380:[function(t,e,n){e.exports=function(e,n){return t("./util").its.loc(e,n)},"undefined"!=typeof Handlebars&&Handlebars.registerHelper("loc",helper)},{"./util":385}],381:[function(t,e,n){e.exports=t("./its"),e.exports.hbsHelper=t("./hbs-helper")},{"./hbs-helper":380,"./its":382}],382:[function(t,e,n){e.exports.its={},t("./util")(e.exports),t("./loc")(e.exports)},{"./loc":383,"./util":384}],383:[function(t,e,n){e.exports=function(t){var e=t.its,n=t.iTSLocalization={};n._strings={},n.hasLocalizedValue=function(t){var i=n._strings[t];return e.isDefined(i)},e.loc=function(t,e){var i=n._strings[t];return"undefined"==typeof i&&(i=t),e&&(i=n.replaceTokens(i,e)),"undefined"==typeof itms&&(i=n.replaceMarkupTokens(i,e)),i},e.locDate=function(t){if(!t)return"";var e,n=t.length;if(n>10)e=new Date(t);else{var i=n>=4?t.slice(0,4):0,a=n>=7?t.slice(5,7):1,r=n>=10?t.slice(8,10):1;e=new Date(i,a-1,r)}return formatDate(e)},e.locWithMarkupTokens=function(t,i){return n.replaceMarkupTokens(e.loc(t,i),i)},n._strings._showLocKeys&&(e.loc=function(t){return"+"+t+"+"}),e.locWithCount=function(t,i,a){var r,o,l=null;return 0==i&&(r=t+".zero",n.hasLocalizedValue(r)&&(l=r)),null===l&&(l=t,o=n.pluralCategory(i),"other"!==o&&(r=t+"."+o,n.hasLocalizedValue(r)&&(l=r))),a||(a={}),e.isDefined(a.count)||(a.count=e.formatNumber(i)),e.loc(l,a)},n.replaceTokens=function(t,n){if(n)for(var i in n)if(n.hasOwnProperty(i)){var a="@@"+i+"@@";t=e.string.replace(t,a,n[i])}return t},n.markupParams={nbsp:"&nbsp;",gt:"&gt;",lt:"&lt;",copy:""},n.replaceMarkupTokens=function(t,e){if(t.indexOf("##")>-1){if(e)for(var i in e)n.markupParams[i.toString()]=e[i];for(var a in n.markupParams){var r="##"+a+"##";t=t.replace(new RegExp(r,"gi"),n.markupParams[a])}t=t.replace(/##([^##]+)##/gi,"<$1>")}return t},n.localizedResourceUrlForPathKey=function(t,n){void 0===n&&(n=/https:/.test(window.location.protocol));var i=n?"https://s.mzstatic.com":"http://r.mzstatic.com";return i+e.loc(t)},e.formatNumber="undefined"!=typeof itms&&"undefined"!=typeof formatNumber?function(t){return formatNumber(Number(t))}:function(t){if("undefined"==typeof n.decimalSeparator){var e=n._strings._decimalSeparator;"undefined"==typeof e&&(e="."),n.decimalSeparator=e,e=n._strings._thousandsSeparator,"undefined"==typeof e&&(e=","),n.thousandsSeparator=e}for(var i=parseFloat(t).toString().split("."),a=n.thousandsSeparator,r=i[0].split(""),o=r.length-3;o>0;o-=3)r.splice(o,0,a);i[0]=r.join("");var l=i.join(n.decimalSeparator);return l},n._pluralCategoryDefault=function(t){return"other"},n._pluralCategoryOne=function(t){return 1==t?"one":"other"},n._pluralCategoryArabic=function(t){var e=t>>0;if(e!=t)return"other";if(0===e)return"zero";if(1===e)return"one";if(2===e)return"two";var n=e%100;return n>=11?"many":n>=3?"few":"other"},n._pluralCategoryFrench=function(t){return 2>t&&t>=0?"one":"other"},n._pluralCategoryHebrew=function(t){var e=t>>0;if(e!=t)return"other";if(1===e)return"one";if(2===e)return"two";var n=e%10;return 0==n&&e>10?"many":"other"},n._pluralCategoryPolish=function(t){var e=t>>0;if(e!=t)return"other";if(1===e)return"one";var n=e%10;if(4>=n&&n>=2){var i=e%100;if(i>14||12>i)return"few"}return"many"},n._pluralCategoryRomanian=function(t){var e=t>>0;if(e!=t)return"few";if(0===e)return"few";if(1===e)return"one";var n=t%100;return 19>=n&&n>=1?"few":"other"},n._pluralCategoryRussian=function(t){var e=t>>0;if(e!=t)return"other";var n=e%10;if(n>=5||0==n)return"many";var i=e%100;return 14>=i&&i>=11?"many":1==n?"one":"few"},n._pluralCategoryFnByLanguage={zh:n._pluralCategoryDefault,id:n._pluralCategoryDefault,ja:n._pluralCategoryDefault,ko:n._pluralCategoryDefault,ms:n._pluralCategoryDefault,th:n._pluralCategoryDefault,vi:n._pluralCategoryDefault,en:n._pluralCategoryOne,ca:n._pluralCategoryOne,da:n._pluralCategoryOne,nl:n._pluralCategoryOne,de:n._pluralCategoryOne,el:n._pluralCategoryOne,fi:n._pluralCategoryOne,hu:n._pluralCategoryOne,it:n._pluralCategoryOne,nb:n._pluralCategoryOne,no:n._pluralCategoryOne,pt:n._pluralCategoryOne,es:n._pluralCategoryOne,sv:n._pluralCategoryOne,tr:n._pluralCategoryOne,ar:n._pluralCategoryArabic,fr:n._pluralCategoryFrench,iw:n._pluralCategoryHebrew,pl:n._pluralCategoryPolish,ro:n._pluralCategoryRomanian,ru:n._pluralCategoryRussian},n.pluralCategory=function(t){if(e.serverData&&e.serverData.constants){var i=n._pluralCategoryFnByLanguage[e.serverData.constants.languageCode];if(i)return i(t);throw new Error("missing plural category function for: "+e.serverData.constants.languageCode)}return"other"},e.updateLocale=function(t){n._strings=t}}},{}],384:[function(t,e,n){e.exports=function(t){var e=t.its;e.isDefined=function(t){return"undefined"!=typeof t},"undefined"==typeof e.string&&(e.string={}),e.string.replace=function(t,e,n){return t?("string"!=typeof t&&(t+=""),t.split(e).join(n)):t}}},{}],385:[function(t,e,n){window.iTSLocalization||(iTSLocalization={}),window.iTSLocalization._strings||(iTSLocalization._strings={}),
iTSLocalization.hasLocalizedValue=function(t){var e=iTSLocalization._strings[t];return its.isDefined(e)},its.loc=function(t,e){var n=iTSLocalization._strings[t];return"undefined"==typeof n&&(n=t),e&&(n=iTSLocalization.replaceTokens(n,e)),"undefined"==typeof itms&&(n=iTSLocalization.replaceMarkupTokens(n,e)),n},its.locDate=function(t){if(!t)return"";var e,n=t.length;if(n>10)e=new Date(t);else{var i=n>=4?t.slice(0,4):0,a=n>=7?t.slice(5,7):1,r=n>=10?t.slice(8,10):1;e=new Date(i,a-1,r)}return formatDate(e)},its.locWithMarkupTokens=function(t,e){return iTSLocalization.replaceMarkupTokens(its.loc(t,e),e)},iTSLocalization._strings._showLocKeys&&(its.loc=function(t){return"+"+t+"+"}),its.locWithCount=function(t,e,n){var i,a,r=null;return 0==e&&(i=t+".zero",iTSLocalization.hasLocalizedValue(i)&&(r=i)),null===r&&(r=t,a=iTSLocalization.pluralCategory(e),"other"!==a&&(i=t+"."+a,iTSLocalization.hasLocalizedValue(i)&&(r=i))),n||(n={}),its.isDefined(n.count)||(n.count=its.formatNumber(e)),its.loc(r,n)},iTSLocalization.replaceTokens=function(t,e){if(e)for(var n in e)if(e.hasOwnProperty(n)){var i="@@"+n+"@@";t=its.string.replace(t,i,e[n])}return t},iTSLocalization.markupParams={nbsp:"&nbsp;",gt:"&gt;",lt:"&lt;",copy:""},iTSLocalization.replaceMarkupTokens=function(t,e){if(t.indexOf("##")>-1){if(e)for(var n in e)iTSLocalization.markupParams[n.toString()]=e[n];for(var i in iTSLocalization.markupParams){var a="##"+i+"##";t=t.replace(new RegExp(a,"gi"),iTSLocalization.markupParams[i])}t=t.replace(/##([^##]+)##/gi,"<$1>")}return t},iTSLocalization.localizedResourceUrlForPathKey=function(t,e){void 0===e&&(e=/https:/.test(window.location.protocol));var n=e?"https://s.mzstatic.com":"http://r.mzstatic.com";return n+its.loc(t)},its.formatNumber="undefined"!=typeof itms&&"undefined"!=typeof formatNumber?function(t){return formatNumber(Number(t))}:function(t){if("undefined"==typeof iTSLocalization.decimalSeparator){var e=iTSLocalization._strings._decimalSeparator;"undefined"==typeof e&&(e="."),iTSLocalization.decimalSeparator=e,e=iTSLocalization._strings._thousandsSeparator,"undefined"==typeof e&&(e=","),iTSLocalization.thousandsSeparator=e}for(var n=parseFloat(t).toString().split("."),i=iTSLocalization.thousandsSeparator,a=n[0].split(""),r=a.length-3;r>0;r-=3)a.splice(r,0,i);n[0]=a.join("");var o=n.join(iTSLocalization.decimalSeparator);return o},iTSLocalization._pluralCategoryDefault=function(t){return"other"},iTSLocalization._pluralCategoryOne=function(t){return 1==t?"one":"other"},iTSLocalization._pluralCategoryArabic=function(t){var e=t>>0;if(e!=t)return"other";if(0===e)return"zero";if(1===e)return"one";if(2===e)return"two";var n=e%100;return n>=11?"many":n>=3?"few":"other"},iTSLocalization._pluralCategoryFrench=function(t){return 2>t&&t>=0?"one":"other"},iTSLocalization._pluralCategoryHebrew=function(t){var e=t>>0;if(e!=t)return"other";if(1===e)return"one";if(2===e)return"two";var n=e%10;return 0==n&&e>10?"many":"other"},iTSLocalization._pluralCategoryPolish=function(t){var e=t>>0;if(e!=t)return"other";if(1===e)return"one";var n=e%10;if(4>=n&&n>=2){var i=e%100;if(i>14||12>i)return"few"}return"many"},iTSLocalization._pluralCategoryRomanian=function(t){var e=t>>0;if(e!=t)return"few";if(0===e)return"few";if(1===e)return"one";var n=t%100;return 19>=n&&n>=1?"few":"other"},iTSLocalization._pluralCategoryRussian=function(t){var e=t>>0;if(e!=t)return"other";var n=e%10;if(n>=5||0==n)return"many";var i=e%100;return 14>=i&&i>=11?"many":1==n?"one":"few"},iTSLocalization._pluralCategoryFnByLanguage={zh:iTSLocalization._pluralCategoryDefault,id:iTSLocalization._pluralCategoryDefault,ja:iTSLocalization._pluralCategoryDefault,ko:iTSLocalization._pluralCategoryDefault,ms:iTSLocalization._pluralCategoryDefault,th:iTSLocalization._pluralCategoryDefault,vi:iTSLocalization._pluralCategoryDefault,en:iTSLocalization._pluralCategoryOne,ca:iTSLocalization._pluralCategoryOne,da:iTSLocalization._pluralCategoryOne,nl:iTSLocalization._pluralCategoryOne,de:iTSLocalization._pluralCategoryOne,el:iTSLocalization._pluralCategoryOne,fi:iTSLocalization._pluralCategoryOne,hu:iTSLocalization._pluralCategoryOne,it:iTSLocalization._pluralCategoryOne,nb:iTSLocalization._pluralCategoryOne,no:iTSLocalization._pluralCategoryOne,pt:iTSLocalization._pluralCategoryOne,es:iTSLocalization._pluralCategoryOne,sv:iTSLocalization._pluralCategoryOne,tr:iTSLocalization._pluralCategoryOne,ar:iTSLocalization._pluralCategoryArabic,fr:iTSLocalization._pluralCategoryFrench,iw:iTSLocalization._pluralCategoryHebrew,pl:iTSLocalization._pluralCategoryPolish,ro:iTSLocalization._pluralCategoryRomanian,ru:iTSLocalization._pluralCategoryRussian},iTSLocalization.pluralCategory=function(t){if(its.serverData&&its.serverData.constants){var e=iTSLocalization._pluralCategoryFnByLanguage[its.serverData.constants.languageCode];if(e)return e(t);if(its.Logger){var n=its.Logger.named("its-base-util");n.error("missing plural category function for: "+its.serverData.constants.languageCode,!0)}}return"other"}},{}],386:[function(t,e,n){e.exports={color:t("./lib/color"),cookie:t("./lib/cookie")}},{"./lib/color":387,"./lib/cookie":388}],387:[function(t,e,n){var i=function(){var t,e,n,i=[],r=95.0456,o=100,l=108.9058,c=function(t){if("string"==typeof t)return t.indexOf("%")>0?parseFloat(t)/100:parseFloat(t);if("number"==typeof t)return t;throw{error:"InvalidFormat",message:"Argument "+t+" is not a number."}},u=function(t){return t=c(t),t>1||-1>t?t/100:t},d=function(t,e,n){return Math.max(Math.min(c(t),c(n)),c(e))},p=function(t){return t===+t&&t===(0|t)},m=function(a,r,o){return a=c(a),r=c(r),o=c(o),p(a)&&p(r)&&p(o)?(a=d(a,0,255),r=d(r,0,255),o=d(o,0,255),t=a/255,e=r/255,n=o/255):(t=d(a,0,1),e=d(r,0,1),n=d(o,0,1),a=Math.round(255*t),r=Math.round(255*e),o=Math.round(255*n)),i=[a,r,o],{r:a,g:r,b:o}},f=function(t){return"undefined"==typeof t||null==t||""===t?t=1:(t=u(t),t=d(t,0,1)),t},g=function(t){return/(^#?[0-9A-F]{6}$)|(^#?[0-9A-F]{3}$)/i.test(t)},b=function(t){return t.match(/[\d.]{1,3}/gi)};return{parseColor:function(t,e){var n,i;return null==t?(n=m(0,0,0),i=f(e)):t instanceof a?(n=m(t.rgb.r.color.rgb.g,t.rgb.b),i=f(t.alpha)):null!=t.r?(n=m(t.r,t.g,t.b),i=f(t.alpha||1)):Array.isArray(t)&&t.length>=3?(n=m(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):!g(t)&&(t.indexOf("rgb")>-1||null!=t.match(/[\d.]{1,3}/gi)&&t.match(/[\d.]{1,3}/gi).length>=3)?(t=t.match(/[\d.]{1,3}/gi),n=m(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):t.indexOf("hsv")>-1?(t=t.match(/[\d.%]{1,3}/gi),n=this.HSVtoRGB(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):t.indexOf("hsl")>-1?(t=b(t),n=this.HSLtoRGB(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):g(t)&&(n=this.HEXtoRGB(t),i=f(e)),{rgb:n,alpha:i}},setOpacity:function(t){return f(t)},getHue:function(i,a,r){var o=0;null!=i&&m(i,a,r);var l=Math.max(t,e,n),s=Math.min(t,e,n),c=l-s;switch(l){case t:o=(e-n)/c+(n>e?6:0);break;case e:o=(n-t)/c+2;break;case n:o=(t-e)/c+4;break;default:o=0}return o=60*o,0>o&&(o+=360),o},RGBtoHEX:function(t,e,n){null!=t&&m(t,e,n);var a=i.map(function(t){return t=t.toString(16),1===t.length?"0"+t:t}).join("");return a},HEXtoRGB:function(t){if(g(t)){0===t.indexOf("#")&&(t=t.substr(1));var e=0,n=0,i=0;return 3===t.length?(t=t.split("").map(function(t){return parseInt(t+t,16)}),e=t[0],n=t[1],i=t[2],rgb=m(e,n,i)):t.length>=6&&(e=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),i=parseInt(t.substr(4,2),16),rgb=m(e,n,i)),{r:e,g:n,b:i}}throw{error:"InvalidFormat",message:t+" is not a valid hex value."}},RGBtoHSL:function(i,a,r){null!=i&&m(i,a,r);var o=Math.max(t,e,n),l=Math.min(t,e,n),c=(o+l)/2,u=o-l;return 0===u?h=s=0:(s=c>0?u/(1-Math.abs(2*c-1)):0,h=this.getHue()),{h:h,s:s,l:c}},HSLtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){"string"==typeof t&&t.indexOf("%")>0&&(t=360*c(t)),t=d(t,0,360),e=u(Math.abs(e)),n=u(Math.abs(n));var i=0,a=0,r=0;if(0!==e||0!==n){var o=.5>=n?n*(1+e):n+e-n*e,l=n+n-o,s=function(t){t=0>t?t+1:t>1?t-1:t;var e;return e=1>6*t?l+6*(o-l)*t:.5>t?o:2>3*t?l+(o-l)*(2/3-t)*6:l};i=s(t+1/3),a=s(t),r=s(t-1/3)}return m(i,a,r)}throw{error:"InvalidFormat",message:"NULL is not a valid argument."}},RGBtoHSV:function(i,a,r){null!=i&&m(i,a,r);var o=Math.max(t,e,n),l=Math.min(t,e,n),c=o-l,u=o;return 0===c?h=s=0:(s=c/u,h=this.getHue()),{h:h,s:s,v:u}},HSVtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){"string"==typeof t&&t.indexOf("%")>0&&(t=360*c(t)),t=d(c(t),0,360),e=u(Math.abs(e)),n=u(Math.abs(n));var i=0,a=0,r=0;if(0===e&&0!==n)i=a=r=Math.round(255*n);else if(0!==e&&0!==n){var o=t/60,l=0|o,s=n*e,h=n-s,p=s*(1-Math.abs(o%2-1))+h;switch(s+=h,l){case 0:i=s,a=p,r=h;break;case 1:i=p,a=s,r=h;break;case 2:i=h,a=s,r=p;break;case 3:i=h,a=p,r=s;break;case 4:i=p,a=h,r=s;break;case 5:i=s,a=h,r=p;break;default:i=0,a=0,r=0}}return m(i,a,r)}throw{error:"InvalidFormat",message:"NULL is not a valid argument."}},RGBtoXYZ:function(i,a,r){null!=i&&m(i,a,r);var o=0,l=0,s=0;return i=100*(t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92),a=100*(e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92),r=100*(n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92),o=.412453*i+.35758*a+.180423*r,l=.212671*i+.71516*a+.072169*r,s=.019334*i+.119193*a+.950227*r,{x:o,y:l,z:s}},XYZtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){t=d(Math.abs(t),0,r)/100,e=d(Math.abs(e),0,o)/100,n=d(Math.abs(n),0,l)/100;var i=3.240479*t+-1.53715*e+n*-.498535,a=t*-.969256+1.875992*e+.041556*n,s=.055648*t+e*-.204043+1.057311*n,c=function(t){return t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t};return i=c(i),a=c(a),s=c(s),m(i,a,s)}throw{error:"InvalidFormat",message:"NULL is not a valid argument"}},RGBtoLab:function(t,e,n){null!=t&&m(t,e,n);var i=this.RGBtoXYZ(),a=i.x/r,s=i.y/o,c=i.z/l,u=0,h=0,d=0,p=7.787037037037035,f=function(t){return t>.008856?Math.pow(t,1/3):p*t+.13793103448275862};return a=f(a),s=f(s),c=f(c),u=116*s-16,h=500*(a-s),d=200*(s-c),{L:u,a:h,b:d}},LABtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){t=d(t,0,100),e=d(e,-128,128),n=d(n,-128,128);var i=(t+16)/116,a=e/500+i,s=i-n/200,c=7.787037037037035,u=function(t){var e=Math.pow(t,3);return e>.008856?e:(t-.13793103448275862)/c};return a=u(a),i=u(i),s=u(s),a*=r,i*=o,s*=l,this.XYZtoRGB(a,i,s)}throw{error:"InvalidFormat",message:"NULL is not a valid argument"}},changeHue:function(t,e,n,i){if("string"==typeof t&&t.indexOf("%")>0&&(t=3.6*parseFloat(t)),null!=e&&m(e,n,i),t=d(t,0,360),0===t)return this;t%=360;var a=this.RGBtoHSL(),r=(a.h+t)%360;return 0>r&&(r+=360),this.HSLtoRGB(r,a.s,a.l)},changeBrightness:function(t,e,n,i){null!=e&&m(e,n,i),t=this.number(t),t=t>1||-1>t?t/100:t;var a=this.RGBtoHSV(),r=a.v+t;return r=d(r,0,1),this.HSVtoRGB(a.h,a.s,r,a.a)},changeLightness:function(t,e,n,i){null!=e&&m(e,n,i),t=c(t),t=.99>=t&&t>=-.99?100*t:t;var a=this.RGBtoLab(),r=a.L+t;return r=d(r,0,100),this.LABtoRGB(r,a.a,a.b)},changeSaturation:function(t,e,n,i){null!=e&&m(e,n,i),t=c(t),t=t>1||-1>t?t/100:t;var a=this.RGBtoHSV(),r=a.s+t;return r=d(r,0,1),this.HSVtoRGB(a.h,r,a.v,a.a)}}}(),a=function(t,e){this.rgb={},this.alpha=1,this.init(t,e)};a.prototype.init=function(t,e){var n=i.parseColor(t,e);this.rgb=n.rgb,this.alpha=n.alpha},a.prototype.getAlpha=function(){return this.alpha},a.prototype.setAlpha=function(t){return t>=0&&1>=t&&(this.alpha=t),this},a.prototype.getRGB=function(){return this.rgb},a.prototype.getHEX=function(){return this.hex||(this.hex=i.RGBtoHEX(this.rgb.r,this.rgb.g,this.rgb.b)),this.hex},a.prototype.getHSL=function(){return this.hsl||(this.hsl=i.RGBtoHSL(this.rgb.r,this.rgb.g,this.rgb.b)),this.hsl},a.prototype.getHSV=function(){return this.hsv||(this.hsv=i.RGBtoHSV(this.rgb.r,this.rgb.g,this.rgb.b)),this.hsv},a.prototype.getXYZ=function(){return this.xyz||(this.xyz=i.RGBtoXYZ(this.rgb.r,this.rgb.g,this.rgb.b)),this.xyz},a.prototype.getLab=function(){return this.lab||(this.lab=i.RGBtoLab(this.rgb.r,this.rgb.g,this.rgb.b)),this.lab},a.prototype.getHue=function(){return this.hue||(this.hue=i.getHue(this.rgb.r,this.rgb.g,this.rgb.b)),this.hue},a.prototype.lighten=function(t){var e=i.changeLightness(t,this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.darken=function(t){var e=i.changeLightness(-1*Math.abs(t),this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.saturate=function(t){var e=i.changeSaturation(t,this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.desaturate=function(t){var e=i.changeSaturation(-1*Math.abs(t),this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.greyscale=function(){var t=i.changeSaturation(-1,this.rgb.r,this.rgb.g,this.rgb.b),e=new a(t,this.alpha);return e},a.prototype.toString=function(t,e){"undefined"!=typeof t&&(t=t.toLowerCase()),e="undefined"!=typeof e?e+2:2;{var n,i;Math.pow(10,Number(e))}switch(t){case"rgb":case"rgba":var a=this.rgb.r+","+this.rgb.g+","+this.rgb.b;n=this.alpha<1?"rgba("+a+","+this.alpha+")":"rgb("+a+")";break;case"hex":n="#"+this.getHEX();break;case"hsl":case"hsla":i=this.getHSL(),n=i.h.toFixed(e-2)+", "+(100*i.s).toFixed(e-2)+"%, "+(100*i.l).toFixed(e-2)+"%",n=i.a<1?"hsla("+n+", "+i.a+")":"hsl("+n+")";break;case"hsv":case"hsva":i=this.getHSV(),n=i.h.toFixed(e-2)+", "+(100*i.s).toFixed(e-2)+"%, "+(100*i.v).toFixed(e-2)+"%",n=i.a<1?"hsva("+n+", "+i.a+")":"hsv("+n+")";break;default:n=this.alpha<1?"rgba("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+", "+this.alpha+")":"#"+this.getHEX()}return n},a.prototype.isDark=function(){var t=this.getLab();return t.L<50?!0:!1},e.exports=a},{}],388:[function(t,e,n){var i="	\n\f\r \u2028\u2029",a=new RegExp("^["+i+"]+"),r=new RegExp("["+i+"]+$"),o=function(t){var e=null;return e=t.trim?t.trim():t.replace(a,"").replace(r,"")},l=function(t,e){var n,i,a,r,l,s=null,c=e&&e.cookie;if(c&&t){n=c.split(";");for(var u=n.length-1;!s&&u>=0;u--)r=n[u],l=r.indexOf("="),l>0&&(i=o(r.substring(0,l)),a=r,i===t&&(('"'===a[0]||'"'===a[a.length-1])&&(a=a.substring(1,a.length-1)),s=o(a.substring(l+1))))}return s},s=function(t,e){var n=l(t,e);return n&&(n=unescape(n)),n},c=function(t){var e=new Date;e.setDate(e.getDate()+365);var n=t.namespace||itms,i=t.domain||"apple.com",a=t.expires||e.toUTCString(),r=t.path||"/",o={name:t.name,path:r,value:t.value+"",domain:i,expires:a};n.cookie=o};e.exports={get:s,set:c,getUnescaped:l}},{}],389:[function(t,e,n){e.exports=function(){function t(){for(var t,n=1;n<h.length;n++)t=h[n],u[t]=u.level>=n?m.enabled?a(t):i(t):function(){return!1},u.log=u.info;5===p&&f&&(u.error=e)}function e(t){if(!t.message){var e=Array.prototype.slice.call(arguments);t={},t.message=t.message||JSON.stringify(e)}t.eventType=t.eventType||"lager";var i="",a=g.serverReportingProtocol,r="://"+g.serverReportingDomain,o="/"+g.serverReportingApp,l="/WebObjects"+o+".woa/wa",s="/"+g.recordStatsAction,u="?eventType="+t.eventType+"&version="+g.version;i=a+r+l+s+u,t.ITSLogger_version=g.version,t.ITSLogger_dsid=c+"",t.currentManifestVersion=g.currentManifestVersion,t.ITSLogger_loggerName="appleMusicMain",t.ITSLogger_loggingThreshold=4,t.sender=g.senderName,n({data:t,url:i,success:t.success,failure:t.failure})}function n(t){var e=this,n=JSON.stringify(t.data),i=t.url,a=itms?itms.makeStoreXMLHttpRequest():new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status?"function"==typeof t.success&&t.success.apply(e,[a.response,a.metrics]):4==a.readyState&&"function"==typeof t.failure&&t.failure.apply(e,[a.status,a.response])},a.open("POST",i,!0),a.setRequestHeader("Content-Type","application/json"),a.send(n)}function i(t){return console[t]?Function.prototype.bind.call(console[t],console):"splunk"===t&&f?Function.prototype.bind.call(e):Function.prototype.bind.call(console.log,console)}function a(t){var e=Error;return e.prototype.log=function(){var e=i(t),n=this.stack.split("\n",19).splice(m.offset,m.lines);e.apply(console,arguments);for(var a=0;a<n.length;a++){var r=n[a];console.log(r)}},Function.prototype.bind.call(e().log,e())}function r(e){var n=u.level;"string"==typeof e&&d.hasOwnProperty(e)?(e.toLowerCase(),p=d[e]):"number"==typeof e&&e>=0&&5>=e&&(p=e),p!==n&&t()}function o(e){if((e===!0||e===!1)&&(m.enabled=e),"object"==typeof e){e=e||{};for(var n in e)m[n]=e[n]}t()}var l,s,c,u=Object.create(Object.prototype),h=["silent","error","warn","info","debug","splunk"],d={silent:0,error:1,warn:2,info:3,debug:4,splunk:5},p=0,m={enabled:!1,lines:1,offset:0},f=parseFloat(10*Math.random())%10<.1,g={recordStatsAction:"recordStats",senderName:"ITSClient",serverReportingApp:"MZUserXP",serverReportingDomain:"metrics.mzstatic.com",serverReportingProtocol:"https",version:"3.1",currentManifestVersion:"unknown"};return"undefined"!=typeof itms?(s=itms.getBag(),c=itms.DSID):"undefined"!=typeof iTunes&&(s=iTunes.getBag()),l="undefined"!=typeof s?s.custombag?0:s.metrics.postFrequency:6e4,"undefined"!=typeof UpdatableAssets&&(g.currentManifestVersion=UpdatableAssets.currentManifestVersion()),Object.defineProperties(u,{level:{set:r,get:function(){return p}},trace:{set:o,get:function(){return m.enabled}}}),u.setDefaults=function(){p=3,t()},u.silent=function(){p=0,t()},u.setDefaults(),u}()},{}],390:[function(t,e,n){var i=t("./lib/event_base"),a=t("./lib/event_fields"),r=t("./lib/record_event"),o=t("lager"),l=function(){var t,e=function(e){t?(t.resources=e,i.setResources(e),a.unsubscribeFromEvents(),a.subscribeToEvents(t.eventFields)):o.warn("Metrics not configured, setResources aborted")},n=function(e){e?(t=e,i.setResources(t.resources),i.addFieldsToBase(t.eventBase),r.setDefaultTopic(t.topic),r.assignRecordMethod(t.recordEvent),a.setConfig(t),a.unsubscribeFromEvents(),a.subscribeToEvents(t.eventFields)):o.warn("No configuration provided to Metrics, init aborted")};return{init:n,setResources:e,addEvent:a.addEvent,unsubscribeFromEvents:a.unsubscribeFromEvents}}();e.exports=l},{"./lib/event_base":391,"./lib/event_fields":392,"./lib/record_event":393,lager:394}],391:[function(t,e,n){var i=t("lager"),a=function(){var t,e,n={},a=function(e){"function"==typeof e?t=e:(i.warn("Metrics was not provided a valid eventBase"),t=function(){return{}})},r=function(t){t?e=t:i.warn("No resources provided to event_base.setResources, setResources aborted")},o=function(){var i=t&&t(e)||{};for(var a in i)n[a]=i[a];return n};return{getBase:o,addFieldsToBase:a,setResources:r,resources:function(){return e}}};e.exports=a()},{lager:394}],392:[function(t,e,n){var i=t("./event_base.js"),a=t("./record_event"),r=t("lager"),o=t("utils").keypath,l=function(){var t,e=function(e,n,l){var s;o(t,"disabled")&&"function"==typeof t.disabled?s=t.disabled():r.warn("Metrics-base was not provided with a function to determine if metrics is disabled");var c,u=o(t,"blacklistedEvents")||[],h=o(t,"blacklistedFields")||[];!s&&u.indexOf(n)<0&&(e=e||{},e.resources=t.resources||{},baseEventFields=Object.create(i.getBase()),t.addSecondaryBaseFields&&(baseEventFields=t.addSecondaryBaseFields(baseEventFields,e,n)),e.eventBase=baseEventFields,c=l(e),h.forEach(function(t){var e=t.split(".");e.length>1&&e[0]===n&&(t=e[1]),delete c[t]}),a.record(c))},n=function(n,i){o(t,"pubsub")?t.pubsub.subscribe?t.pubsub.subscribe(n,function(t){e(t,n,i)}):r.warn("Pubsub library provided to Metrics has no method 'subscribe', addEvent aborted"):r.warn("Metrics has no pubsub library, addEvent aborted")},l=function(t){var e;if(t)for(var i in t)e=t[i],n(i,e);else r.warn("No eventFields configured for Metrics, aborting subscribeToEvents")},s=function(){if(t&&t.pubsub&&t.pubsub.unsubscribe)for(var e in t.eventFields)t.pubsub.unsubscribe(t.eventFields);else r.warn("Incompatible or no pubsub lib present, Metrics.unsubscribeFromEvents aborted")},c=function(e){e?t=e:r.warn("No resources provided to event_fields.setConfig, setConfig aborted")};return{addEvent:n,subscribeToEvents:l,unsubscribeFromEvents:s,setConfig:c}};e.exports=l()},{"./event_base.js":391,"./record_event":393,lager:394,utils:395}],393:[function(t,e,n){var i=function(){var t,e="",n=function(n,i){i=i||e,"function"==typeof t&&t(n,i)},i=function(e){t=e},a=function(t){return e="string"==typeof t?t:e};return{record:n,assignRecordMethod:i,setDefaultTopic:a}};e.exports=i()},{}],394:[function(t,e,n){e.exports=t(329)},{}],395:[function(t,e,n){e.exports=t(330)},{}],396:[function(t,e,n){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?e.exports=i():"function"==typeof define&&define.amd?define(i):t.moment=i()}(this,function(){"use strict";function n(){return Tn.apply(null,arguments)}function i(t){Tn=t}function a(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function l(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function u(t,e,n,i){return Dt(t,e,n,i,!0).utc()}function h(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&void 0===t._pf.bigHour)),t._isValid}function d(t){var e=u(0/0);return null!=t?c(e._pf,t):e._pf.userInvalidated=!0,e}function p(t,e){var n,i,a;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Pn.length>0)for(n in Pn)i=Pn[n],a=e[i],"undefined"!=typeof a&&(t[i]=a);return t}function m(t){p(this,t),this._d=new Date(+t._d),In===!1&&(In=!0,n.updateOffset(this),In=!1)}function f(t){return t instanceof m||null!=t&&s(t,"_isAMomentObject")}function g(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function b(t,e,n){var i,a=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(i=0;a>i;i++)(n&&t[i]!==e[i]||!n&&g(t[i])!==g(e[i]))&&o++;return o+r}function v(){}function y(t){return t?t.toLowerCase().replace("_","-"):t}function w(t){for(var e,n,i,a,r=0;r<t.length;){for(a=y(t[r]).split("-"),e=a.length,n=y(t[r+1]),n=n?n.split("-"):null;e>0;){if(i=k(a.slice(0,e).join("-")))return i;if(n&&n.length>=e&&b(a,n,!0)>=e-1)break;e--}r++}return null}function k(n){var i=null;if(!Ln[n]&&"undefined"!=typeof e&&e&&e.exports)try{i=Fn._abbr,t("./locale/"+n),x(i)}catch(a){}return Ln[n]}function x(t,e){var n;return t&&(n="undefined"==typeof e?A(t):C(t,e),n&&(Fn=n)),Fn._abbr}function C(t,e){return null!==e?(e.abbr=t,Ln[t]||(Ln[t]=new v),Ln[t].set(e),x(t),Ln[t]):(delete Ln[t],null)}function A(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Fn;if(!r(t)){if(e=k(t))return e;t=[t]}return w(t)}function S(t,e){var n=t.toLowerCase();Rn[n]=Rn[n+"s"]=Rn[e]=t}function D(t){return"string"==typeof t?Rn[t]||Rn[t.toLowerCase()]:void 0}function M(t){var e,n,i={};for(n in t)s(t,n)&&(e=D(n),e&&(i[e]=t[n]));return i}function E(t,e){return function(i){return null!=i?(F(this,t,i),n.updateOffset(this,e),this):T(this,t)}}function T(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function F(t,e,n){return t._d["set"+(t._isUTC?"UTC":"")+e](n)}function P(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=D(t),"function"==typeof this[t])return this[t](e);return this}function I(t,e,n){for(var i=""+Math.abs(t),a=t>=0;i.length<e;)i="0"+i;return(a?n?"+":"":"-")+i}function L(t,e,n,i){var a=i;"string"==typeof i&&(a=function(){return this[i]()}),t&&(Bn[t]=a),e&&(Bn[e[0]]=function(){return I(a.apply(this,arguments),e[1],e[2])}),n&&(Bn[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),t)})}function R(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function U(t){var e,n,i=t.match(Un);for(e=0,n=i.length;n>e;e++)i[e]=Bn[i[e]]?Bn[i[e]]:R(i[e]);return function(a){var r="";for(e=0;n>e;e++)r+=i[e]instanceof Function?i[e].call(a,t):i[e];return r}}function _(t,e){return t.isValid()?(e=N(e,t.localeData()),Nn[e]||(Nn[e]=U(e)),Nn[e](t)):t.localeData().invalidDate()}function N(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(_n.lastIndex=0;i>=0&&_n.test(t);)t=t.replace(_n,n),_n.lastIndex=0,i-=1;return t}function B(t,e,n){$n[t]="function"==typeof e?e:function(t){return t&&n?n:e}}function O(t,e){return s($n,t)?$n[t](e._strict,e._locale):new RegExp(H(t))}function H(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,a){return e||n||i||a}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function V(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=g(t)}),n=0;n<t.length;n++)ti[t[n]]=i}function z(t,e){V(t,function(t,n,i,a){i._w=i._w||{},e(t,i._w,i,a)})}function G(t,e,n){null!=e&&s(ti,t)&&ti[t](e,n._a,n,t)}function Y(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function W(t){return this._months[t.month()]}function j(t){return this._monthsShort[t.month()]}function q(t,e,n){var i,a,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(a=u([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function K(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),Y(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function J(t){return null!=t?(K(this,t),n.updateOffset(this,!0),this):T(this,"Month")}function Z(){return Y(this.year(),this.month())}function X(t){var e,n=t._a;return n&&-2===t._pf.overflow&&(e=n[ni]<0||n[ni]>11?ni:n[ii]<1||n[ii]>Y(n[ei],n[ni])?ii:n[ai]<0||n[ai]>24||24===n[ai]&&(0!==n[ri]||0!==n[oi]||0!==n[li])?ai:n[ri]<0||n[ri]>59?ri:n[oi]<0||n[oi]>59?oi:n[li]<0||n[li]>999?li:-1,t._pf._overflowDayOfYear&&(ei>e||e>ii)&&(e=ii),t._pf.overflow=e),t}function Q(t){n.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function $(t,e){var n=!0;return c(function(){return n&&(Q(t),n=!1),e.apply(this,arguments)},e)}function tt(t,e){ui[t]||(Q(e),ui[t]=!0)}function et(t){var e,n,i=t._i,a=hi.exec(i);if(a){for(t._pf.iso=!0,e=0,n=di.length;n>e;e++)if(di[e][1].exec(i)){t._f=di[e][0]+(a[6]||" ");break}for(e=0,n=pi.length;n>e;e++)if(pi[e][1].exec(i)){t._f+=pi[e][0];break}i.match(Zn)&&(t._f+="Z"),wt(t)}else t._isValid=!1}function nt(t){var e=mi.exec(t._i);return null!==e?void(t._d=new Date(+e[1])):(et(t),void(t._isValid===!1&&(delete t._isValid,n.createFromInputFallback(t))))}function it(t,e,n,i,a,r,o){var l=new Date(t,e,n,i,a,r,o);return 1970>t&&l.setFullYear(t),l}function at(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function rt(t){return ot(t)?366:365}function ot(t){return t%4===0&&t%100!==0||t%400===0}function lt(){return ot(this.year())}function st(t,e,n){var i,a=n-e,r=n-t.day();return r>a&&(r-=7),a-7>r&&(r+=7),i=Mt(t).add(r,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ct(t){return st(t,this._week.dow,this._week.doy).week}function ut(){return this._week.dow}function ht(){return this._week.doy}function dt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function pt(t){var e=st(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function mt(t,e,n,i,a){var r,o,l=at(t,0,1).getUTCDay();return l=0===l?7:l,n=null!=n?n:a,r=a-l+(l>i?7:0)-(a>l?7:0),o=7*(e-1)+(n-a)+r+1,{year:o>0?t:t-1,dayOfYear:o>0?o:rt(t-1)+o}}function ft(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function gt(t,e,n){return null!=t?t:null!=e?e:n}function bt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function vt(t){var e,n,i,a,r=[];if(!t._d){for(i=bt(t),t._w&&null==t._a[ii]&&null==t._a[ni]&&yt(t),t._dayOfYear&&(a=gt(t._a[ei],i[ei]),t._dayOfYear>rt(a)&&(t._pf._overflowDayOfYear=!0),n=at(a,0,t._dayOfYear),t._a[ni]=n.getUTCMonth(),t._a[ii]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=r[e]=i[e];for(;7>e;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[ai]&&0===t._a[ri]&&0===t._a[oi]&&0===t._a[li]&&(t._nextDay=!0,t._a[ai]=0),t._d=(t._useUTC?at:it).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ai]=24)}}function yt(t){var e,n,i,a,r,o,l;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(r=1,o=4,n=gt(e.GG,t._a[ei],st(Mt(),1,4).year),i=gt(e.W,1),a=gt(e.E,1)):(r=t._locale._week.dow,o=t._locale._week.doy,n=gt(e.gg,t._a[ei],st(Mt(),r,o).year),i=gt(e.w,1),null!=e.d?(a=e.d,r>a&&++i):a=null!=e.e?e.e+r:r),l=mt(n,i,a,o,r),t._a[ei]=l.year,t._dayOfYear=l.dayOfYear}function wt(t){if(t._f===n.ISO_8601)return void et(t);t._a=[],t._pf.empty=!0;var e,i,a,r,o,l=""+t._i,s=l.length,c=0;for(a=N(t._f,t._locale).match(Un)||[],e=0;e<a.length;e++)r=a[e],i=(l.match(O(r,t))||[])[0],i&&(o=l.substr(0,l.indexOf(i)),o.length>0&&t._pf.unusedInput.push(o),l=l.slice(l.indexOf(i)+i.length),c+=i.length),Bn[r]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(r),G(r,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(r);t._pf.charsLeftOver=s-c,l.length>0&&t._pf.unusedInput.push(l),t._pf.bigHour===!0&&t._a[ai]<=12&&(t._pf.bigHour=void 0),t._a[ai]=kt(t._locale,t._a[ai],t._meridiem),vt(t),X(t)}function kt(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function xt(t){var e,n,i,r,o;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(r=0;r<t._f.length;r++)o=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=a(),e._f=t._f[r],wt(e),h(e)&&(o+=e._pf.charsLeftOver,o+=10*e._pf.unusedTokens.length,e._pf.score=o,(null==i||i>o)&&(i=o,n=e));c(t,n||e)}function Ct(t){if(!t._d){var e=M(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],vt(t)}}function At(t){var e,n=t._i,i=t._f;return t._locale=t._locale||A(t._l),null===n||void 0===i&&""===n?d({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),f(n)?new m(X(n)):(r(i)?xt(t):i?wt(t):St(t),e=new m(X(t)),e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e))}function St(t){var e=t._i;void 0===e?t._d=new Date:o(e)?t._d=new Date(+e):"string"==typeof e?nt(t):r(e)?(t._a=l(e.slice(0),function(t){return parseInt(t,10)}),vt(t)):"object"==typeof e?Ct(t):"number"==typeof e?t._d=new Date(e):n.createFromInputFallback(t)}function Dt(t,e,n,i,r){var o={};return"boolean"==typeof n&&(i=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=n,o._i=t,o._f=e,o._strict=i,o._pf=a(),At(o)}function Mt(t,e,n,i){return Dt(t,e,n,i,!1)}function Et(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return Mt();for(n=e[0],i=1;i<e.length;++i)e[i][t](n)&&(n=e[i]);return n}function Tt(){var t=[].slice.call(arguments,0);return Et("isBefore",t)}function Ft(){var t=[].slice.call(arguments,0);return Et("isAfter",t)}function Pt(t){var e=M(t),n=e.year||0,i=e.quarter||0,a=e.month||0,r=e.week||0,o=e.day||0,l=e.hour||0,s=e.minute||0,c=e.second||0,u=e.millisecond||0;
this._milliseconds=+u+1e3*c+6e4*s+36e5*l,this._days=+o+7*r,this._months=+a+3*i+12*n,this._data={},this._locale=A(),this._bubble()}function It(t){return t instanceof Pt}function Lt(t,e){L(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+I(~~(t/60),2)+e+I(~~t%60,2)})}function Rt(t){var e=(t||"").match(Zn)||[],n=e[e.length-1]||[],i=(n+"").match(yi)||["-",0,0],a=+(60*i[1])+g(i[2]);return"+"===i[0]?a:-a}function Ut(t,e){var i,a;return e._isUTC?(i=e.clone(),a=(f(t)||o(t)?+t:+Mt(t))-+i,i._d.setTime(+i._d+a),n.updateOffset(i,!1),i):Mt(t).local()}function _t(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Nt(t,e){var i,a=this._offset||0;return null!=t?("string"==typeof t&&(t=Rt(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(i=_t(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==t&&(!e||this._changeInProgress?$t(this,Kt(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?a:_t(this)}function Bt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ot(t){return this.utcOffset(0,t)}function Ht(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(_t(this),"m")),this}function Vt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Rt(this._i)),this}function zt(t){return t=t?Mt(t).utcOffset():0,(this.utcOffset()-t)%60===0}function Gt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Yt(){if(this._a){var t=this._isUTC?u(this._a):Mt(this._a);return this.isValid()&&b(this._a,t.toArray())>0}return!1}function Wt(){return!this._isUTC}function jt(){return this._isUTC}function qt(){return this._isUTC&&0===this._offset}function Kt(t,e){var n,i,a,r=t,o=null;return It(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},e?r[e]=t:r.milliseconds=t):(o=wi.exec(t))?(n="-"===o[1]?-1:1,r={y:0,d:g(o[ii])*n,h:g(o[ai])*n,m:g(o[ri])*n,s:g(o[oi])*n,ms:g(o[li])*n}):(o=ki.exec(t))?(n="-"===o[1]?-1:1,r={y:Jt(o[2],n),M:Jt(o[3],n),d:Jt(o[4],n),h:Jt(o[5],n),m:Jt(o[6],n),s:Jt(o[7],n),w:Jt(o[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(a=Xt(Mt(r.from),Mt(r.to)),r={},r.ms=a.milliseconds,r.M=a.months),i=new Pt(r),It(t)&&s(t,"_locale")&&(i._locale=t._locale),i}function Jt(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Zt(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Xt(t,e){var n;return e=Ut(e,t),t.isBefore(e)?n=Zt(t,e):(n=Zt(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Qt(t,e){return function(n,i){var a,r;return null===i||isNaN(+i)||(tt(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),r=n,n=i,i=r),n="string"==typeof n?+n:n,a=Kt(n,i),$t(this,a,t),this}}function $t(t,e,i,a){var r=e._milliseconds,o=e._days,l=e._months;a=null==a?!0:a,r&&t._d.setTime(+t._d+r*i),o&&F(t,"Date",T(t,"Date")+o*i),l&&K(t,T(t,"Month")+l*i),a&&n.updateOffset(t,o||l)}function te(t){var e=t||Mt(),n=Ut(e,this).startOf("day"),i=this.diff(n,"days",!0),a=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this,Mt(e)))}function ee(){return new m(this)}function ne(t,e){var n;return e=D("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Mt(t),+this>+t):(n=f(t)?+t:+Mt(t),n<+this.clone().startOf(e))}function ie(t,e){var n;return e=D("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Mt(t),+t>+this):(n=f(t)?+t:+Mt(t),+this.clone().endOf(e)<n)}function ae(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function re(t,e){var n;return e=D(e||"millisecond"),"millisecond"===e?(t=f(t)?t:Mt(t),+this===+t):(n=+Mt(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))}function oe(t){return 0>t?Math.ceil(t):Math.floor(t)}function le(t,e,n){var i,a,r=Ut(t,this),o=6e4*(r.utcOffset()-this.utcOffset());return e=D(e),"year"===e||"month"===e||"quarter"===e?(a=se(this,r),"quarter"===e?a/=3:"year"===e&&(a/=12)):(i=this-r,a="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-o)/864e5:"week"===e?(i-o)/6048e5:i),n?a:oe(a)}function se(t,e){var n,i,a=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(a,"months");return 0>e-r?(n=t.clone().add(a-1,"months"),i=(e-r)/(r-n)):(n=t.clone().add(a+1,"months"),i=(e-r)/(n-r)),-(a+i)}function ce(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ue(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():_(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):_(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function he(t){var e=_(this,t||n.defaultFormat);return this.localeData().postformat(e)}function de(t,e){return Kt({to:this,from:t}).locale(this.locale()).humanize(!e)}function pe(t){return this.from(Mt(),t)}function me(t){var e;return void 0===t?this._locale._abbr:(e=A(t),null!=e&&(this._locale=e),this)}function fe(){return this._locale}function ge(t){switch(t=D(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function be(t){return t=D(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function ve(){return+this._d-6e4*(this._offset||0)}function ye(){return Math.floor(+this/1e3)}function we(){return this._offset?new Date(+this):this._d}function ke(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function xe(){return h(this)}function Ce(){return c({},this._pf)}function Ae(){return this._pf.overflow}function Se(t,e){L(0,[t,t.length],0,e)}function De(t,e,n){return st(Mt([t,11,31+e-n]),e,n).week}function Me(t){var e=st(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Ee(t){var e=st(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Te(){return De(this.year(),1,4)}function Fe(){var t=this.localeData()._week;return De(this.year(),t.dow,t.doy)}function Pe(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Ie(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function Le(t){return this._weekdays[t.day()]}function Re(t){return this._weekdaysShort[t.day()]}function Ue(t){return this._weekdaysMin[t.day()]}function _e(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=Mt([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function Ne(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Ie(t,this.localeData()),this.add(t-e,"d")):e}function Be(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Oe(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function He(t,e){L(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ve(t,e){return e._meridiemParse}function ze(t){return"p"===(t+"").toLowerCase().charAt(0)}function Ge(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function Ye(t){L(0,[t,3],0,"millisecond")}function We(){return this._isUTC?"UTC":""}function je(){return this._isUTC?"Coordinated Universal Time":""}function qe(t){return Mt(1e3*t)}function Ke(){return Mt.apply(null,arguments).parseZone()}function Je(t,e,n){var i=this._calendar[t];return"function"==typeof i?i.call(e,n):i}function Ze(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e}function Xe(){return this._invalidDate}function Qe(t){return this._ordinal.replace("%d",t)}function $e(t){return t}function tn(t,e,n,i){var a=this._relativeTime[n];return"function"==typeof a?a(t,e,n,i):a.replace(/%d/i,t)}function en(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)}function nn(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function an(t,e,n,i){var a=A(),r=u().set(i,e);return a[n](r,t)}function rn(t,e,n,i,a){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return an(t,e,n,a);var r,o=[];for(r=0;i>r;r++)o[r]=an(t,r,n,a);return o}function on(t,e){return rn(t,e,"months",12,"month")}function ln(t,e){return rn(t,e,"monthsShort",12,"month")}function sn(t,e){return rn(t,e,"weekdays",7,"day")}function cn(t,e){return rn(t,e,"weekdaysShort",7,"day")}function un(t,e){return rn(t,e,"weekdaysMin",7,"day")}function hn(){var t=this._data;return this._milliseconds=Gi(this._milliseconds),this._days=Gi(this._days),this._months=Gi(this._months),t.milliseconds=Gi(t.milliseconds),t.seconds=Gi(t.seconds),t.minutes=Gi(t.minutes),t.hours=Gi(t.hours),t.months=Gi(t.months),t.years=Gi(t.years),this}function dn(t,e,n,i){var a=Kt(e,n);return t._milliseconds+=i*a._milliseconds,t._days+=i*a._days,t._months+=i*a._months,t._bubble()}function pn(t,e){return dn(this,t,e,1)}function mn(t,e){return dn(this,t,e,-1)}function fn(){var t,e,n,i=this._milliseconds,a=this._days,r=this._months,o=this._data,l=0;return o.milliseconds=i%1e3,t=oe(i/1e3),o.seconds=t%60,e=oe(t/60),o.minutes=e%60,n=oe(e/60),o.hours=n%24,a+=oe(n/24),l=oe(gn(a)),a-=oe(bn(l)),r+=oe(a/30),a%=30,l+=oe(r/12),r%=12,o.days=a,o.months=r,o.years=l,this}function gn(t){return 400*t/146097}function bn(t){return 146097*t/400}function vn(t){var e,n,i=this._milliseconds;if(t=D(t),"month"===t||"year"===t)return e=this._days+i/864e5,n=this._months+12*gn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(bn(this._months/12)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 24*e*60+i/6e4;case"second":return 24*e*60*60+i/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+i;default:throw new Error("Unknown unit "+t)}}function yn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function wn(t){return function(){return this.as(t)}}function kn(t){return t=D(t),this[t+"s"]()}function xn(t){return function(){return this._data[t]}}function Cn(){return oe(this.days()/7)}function An(t,e,n,i,a){return a.relativeTime(e||1,!!n,t,i)}function Sn(t,e,n){var i=Kt(t).abs(),a=ra(i.as("s")),r=ra(i.as("m")),o=ra(i.as("h")),l=ra(i.as("d")),s=ra(i.as("M")),c=ra(i.as("y")),u=a<oa.s&&["s",a]||1===r&&["m"]||r<oa.m&&["mm",r]||1===o&&["h"]||o<oa.h&&["hh",o]||1===l&&["d"]||l<oa.d&&["dd",l]||1===s&&["M"]||s<oa.M&&["MM",s]||1===c&&["y"]||["yy",c];return u[2]=e,u[3]=+t>0,u[4]=n,An.apply(null,u)}function Dn(t,e){return void 0===oa[t]?!1:void 0===e?oa[t]:(oa[t]=e,!0)}function Mn(t){var e=this.localeData(),n=Sn(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function En(){var t=la(this.years()),e=la(this.months()),n=la(this.days()),i=la(this.hours()),a=la(this.minutes()),r=la(this.seconds()+this.milliseconds()/1e3),o=this.asSeconds();return o?(0>o?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||a||r?"T":"")+(i?i+"H":"")+(a?a+"M":"")+(r?r+"S":""):"P0D"}var Tn,Fn,Pn=n.momentProperties=[],In=!1,Ln={},Rn={},Un=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,_n=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Nn={},Bn={},On=/\d/,Hn=/\d\d/,Vn=/\d{3}/,zn=/\d{4}/,Gn=/[+-]?\d{6}/,Yn=/\d\d?/,Wn=/\d{1,3}/,jn=/\d{1,4}/,qn=/[+-]?\d{1,6}/,Kn=/\d+/,Jn=/[+-]?\d+/,Zn=/Z|[+-]\d\d:?\d\d/gi,Xn=/[+-]?\d+(\.\d{1,3})?/,Qn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$n={},ti={},ei=0,ni=1,ii=2,ai=3,ri=4,oi=5,li=6;L("M",["MM",2],"Mo",function(){return this.month()+1}),L("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),L("MMMM",0,0,function(t){return this.localeData().months(this,t)}),S("month","M"),B("M",Yn),B("MM",Yn,Hn),B("MMM",Qn),B("MMMM",Qn),V(["M","MM"],function(t,e){e[ni]=g(t)-1}),V(["MMM","MMMM"],function(t,e,n,i){var a=n._locale.monthsParse(t,i,n._strict);null!=a?e[ni]=a:n._pf.invalidMonth=t});var si="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ci="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ui={};n.suppressDeprecationWarnings=!1;var hi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,di=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],pi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],mi=/^\/?Date\((\-?\d+)/i;n.createFromInputFallback=$("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),L(0,["YY",2],0,function(){return this.year()%100}),L(0,["YYYY",4],0,"year"),L(0,["YYYYY",5],0,"year"),L(0,["YYYYYY",6,!0],0,"year"),S("year","y"),B("Y",Jn),B("YY",Yn,Hn),B("YYYY",jn,zn),B("YYYYY",qn,Gn),B("YYYYYY",qn,Gn),V(["YYYY","YYYYY","YYYYYY"],ei),V("YY",function(t,e){e[ei]=n.parseTwoDigitYear(t)}),n.parseTwoDigitYear=function(t){return g(t)+(g(t)>68?1900:2e3)};var fi=E("FullYear",!1);L("w",["ww",2],"wo","week"),L("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),B("w",Yn),B("ww",Yn,Hn),B("W",Yn),B("WW",Yn,Hn),z(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=g(t)});var gi={dow:0,doy:6};L("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),B("DDD",Wn),B("DDDD",Vn),V(["DDD","DDDD"],function(t,e,n){n._dayOfYear=g(t)}),n.ISO_8601=function(){};var bi=$("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Mt.apply(null,arguments);return this>t?this:t}),vi=$("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Mt.apply(null,arguments);return t>this?this:t});Lt("Z",":"),Lt("ZZ",""),B("Z",Zn),B("ZZ",Zn),V(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Rt(t)});var yi=/([\+\-]|\d\d)/gi;n.updateOffset=function(){};var wi=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ki=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Kt.fn=Pt.prototype;var xi=Qt(1,"add"),Ci=Qt(-1,"subtract");n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ai=$("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});L(0,["gg",2],0,function(){return this.weekYear()%100}),L(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Se("gggg","weekYear"),Se("ggggg","weekYear"),Se("GGGG","isoWeekYear"),Se("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),B("G",Jn),B("g",Jn),B("GG",Yn,Hn),B("gg",Yn,Hn),B("GGGG",jn,zn),B("gggg",jn,zn),B("GGGGG",qn,Gn),B("ggggg",qn,Gn),z(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=g(t)}),z(["gg","GG"],function(t,e,i,a){e[a]=n.parseTwoDigitYear(t)}),L("Q",0,0,"quarter"),S("quarter","Q"),B("Q",On),V("Q",function(t,e){e[ni]=3*(g(t)-1)}),L("D",["DD",2],"Do","date"),S("date","D"),B("D",Yn),B("DD",Yn,Hn),B("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),V(["D","DD"],ii),V("Do",function(t,e){e[ii]=g(t.match(Yn)[0],10)});var Si=E("Date",!0);L("d",0,"do","day"),L("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),L("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),L("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),L("e",0,0,"weekday"),L("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),B("d",Yn),B("e",Yn),B("E",Yn),B("dd",Qn),B("ddd",Qn),B("dddd",Qn),z(["dd","ddd","dddd"],function(t,e,n){var i=n._locale.weekdaysParse(t);null!=i?e.d=i:n._pf.invalidWeekday=t}),z(["d","e","E"],function(t,e,n,i){e[i]=g(t)});var Di="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Mi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ei="Su_Mo_Tu_We_Th_Fr_Sa".split("_");L("H",["HH",2],0,"hour"),L("h",["hh",2],0,function(){return this.hours()%12||12}),He("a",!0),He("A",!1),S("hour","h"),B("a",Ve),B("A",Ve),B("H",Yn),B("h",Yn),B("HH",Yn,Hn),B("hh",Yn,Hn),V(["H","HH"],ai),V(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),V(["h","hh"],function(t,e,n){e[ai]=g(t),n._pf.bigHour=!0});var Ti=/[ap]\.?m?\.?/i,Fi=E("Hours",!0);L("m",["mm",2],0,"minute"),S("minute","m"),B("m",Yn),B("mm",Yn,Hn),V(["m","mm"],ri);var Pi=E("Minutes",!1);L("s",["ss",2],0,"second"),S("second","s"),B("s",Yn),B("ss",Yn,Hn),V(["s","ss"],oi);var Ii=E("Seconds",!1);L("S",0,0,function(){return~~(this.millisecond()/100)}),L(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Ye("SSS"),Ye("SSSS"),S("millisecond","ms"),B("S",Wn,On),B("SS",Wn,Hn),B("SSS",Wn,Vn),B("SSSS",Kn),V(["S","SS","SSS","SSSS"],function(t,e){e[li]=g(1e3*("0."+t))});var Li=E("Milliseconds",!1);L("z",0,0,"zoneAbbr"),L("zz",0,0,"zoneName");var Ri=m.prototype;Ri.add=xi,Ri.calendar=te,Ri.clone=ee,Ri.diff=le,Ri.endOf=be,Ri.format=he,Ri.from=de,Ri.fromNow=pe,Ri.get=P,Ri.invalidAt=Ae,Ri.isAfter=ne,Ri.isBefore=ie,Ri.isBetween=ae,Ri.isSame=re,Ri.isValid=xe,Ri.lang=Ai,Ri.locale=me,Ri.localeData=fe,Ri.max=vi,Ri.min=bi,Ri.parsingFlags=Ce,Ri.set=P,Ri.startOf=ge,Ri.subtract=Ci,Ri.toArray=ke,Ri.toDate=we,Ri.toISOString=ue,Ri.toJSON=ue,Ri.toString=ce,Ri.unix=ye,Ri.valueOf=ve,Ri.year=fi,Ri.isLeapYear=lt,Ri.weekYear=Me,Ri.isoWeekYear=Ee,Ri.quarter=Ri.quarters=Pe,Ri.month=J,Ri.daysInMonth=Z,Ri.week=Ri.weeks=dt,Ri.isoWeek=Ri.isoWeeks=pt,Ri.weeksInYear=Fe,Ri.isoWeeksInYear=Te,Ri.date=Si,Ri.day=Ri.days=Ne,Ri.weekday=Be,Ri.isoWeekday=Oe,Ri.dayOfYear=ft,Ri.hour=Ri.hours=Fi,Ri.minute=Ri.minutes=Pi,Ri.second=Ri.seconds=Ii,Ri.millisecond=Ri.milliseconds=Li,Ri.utcOffset=Nt,Ri.utc=Ot,Ri.local=Ht,Ri.parseZone=Vt,Ri.hasAlignedHourOffset=zt,Ri.isDST=Gt,Ri.isDSTShifted=Yt,Ri.isLocal=Wt,Ri.isUtcOffset=jt,Ri.isUtc=qt,Ri.isUTC=qt,Ri.zoneAbbr=We,Ri.zoneName=je,Ri.dates=$("dates accessor is deprecated. Use date instead.",Si),Ri.months=$("months accessor is deprecated. Use month instead",J),Ri.years=$("years accessor is deprecated. Use year instead",fi),Ri.zone=$("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Bt);var Ui=Ri,_i={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ni={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Bi="Invalid date",Oi="%d",Hi=/\d{1,2}/,Vi={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},zi=v.prototype;zi._calendar=_i,zi.calendar=Je,zi._longDateFormat=Ni,zi.longDateFormat=Ze,zi._invalidDate=Bi,zi.invalidDate=Xe,zi._ordinal=Oi,zi.ordinal=Qe,zi._ordinalParse=Hi,zi.preparse=$e,zi.postformat=$e,zi._relativeTime=Vi,zi.relativeTime=tn,zi.pastFuture=en,zi.set=nn,zi.months=W,zi._months=si,zi.monthsShort=j,zi._monthsShort=ci,zi.monthsParse=q,zi.week=ct,zi._week=gi,zi.firstDayOfYear=ht,zi.firstDayOfWeek=ut,zi.weekdays=Le,zi._weekdays=Di,zi.weekdaysMin=Ue,zi._weekdaysMin=Ei,zi.weekdaysShort=Re,zi._weekdaysShort=Mi,zi.weekdaysParse=_e,zi.isPM=ze,zi._meridiemParse=Ti,zi.meridiem=Ge,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===g(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),n.lang=$("moment.lang is deprecated. Use moment.locale instead.",x),n.langData=$("moment.langData is deprecated. Use moment.localeData instead.",A);var Gi=Math.abs,Yi=wn("ms"),Wi=wn("s"),ji=wn("m"),qi=wn("h"),Ki=wn("d"),Ji=wn("w"),Zi=wn("M"),Xi=wn("y"),Qi=xn("milliseconds"),$i=xn("seconds"),ta=xn("minutes"),ea=xn("hours"),na=xn("days"),ia=xn("months"),aa=xn("years"),ra=Math.round,oa={s:45,m:45,h:22,d:26,M:11},la=Math.abs,sa=Pt.prototype;sa.abs=hn,sa.add=pn,sa.subtract=mn,sa.as=vn,sa.asMilliseconds=Yi,sa.asSeconds=Wi,sa.asMinutes=ji,sa.asHours=qi,sa.asDays=Ki,sa.asWeeks=Ji,sa.asMonths=Zi,sa.asYears=Xi,sa.valueOf=yn,sa._bubble=fn,sa.get=kn,sa.milliseconds=Qi,sa.seconds=$i,sa.minutes=ta,sa.hours=ea,sa.days=na,sa.weeks=Cn,sa.months=ia,sa.years=aa,sa.humanize=Mn,sa.toISOString=En,sa.toString=En,sa.toJSON=En,sa.locale=me,sa.localeData=fe,sa.toIsoString=$("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",En),sa.lang=Ai,L("X",0,0,"unix"),L("x",0,0,"valueOf"),B("x",Jn),B("X",Xn),V("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),V("x",function(t,e,n){n._d=new Date(g(t))}),n.version="2.10.2",i(Mt),n.fn=Ui,n.min=Tt,n.max=Ft,n.utc=u,n.unix=qe,n.months=on,n.isDate=o,n.locale=x,n.invalid=d,n.duration=Kt,n.isMoment=f,n.weekdays=sn,n.parseZone=Ke,n.localeData=A,n.isDuration=It,n.monthsShort=ln,n.weekdaysMin=un,n.defineLocale=C,n.weekdaysShort=cn,n.normalizeUnits=D,n.relativeTimeThreshold=Dn;var ca=n;return ca})},{}],397:[function(t,e,n){e.exports=t(372)},{"native":398,utils:399}],398:[function(t,e,n){e.exports=t(373)},{}],399:[function(t,e,n){e.exports=t(330)},{}],400:[function(t,e,n){var i=t("lager"),a=function(t){t=t||{},this._caller=t.caller||"P6",this._maxContentSize=t.maxContentSize||200,this._requiresSubscription=t.requireSubscription||!1};a.prototype._cache={},a.prototype._profiles={},a.prototype.fetch=function(t){for(var e=t.profile,n=t.artworkProfile,i=t.contentIds,a=t.onSuccess,r=t.onFailure,o=[],l={},s=0;s<i.length;s++){var c=this._cache[i[s]]&&this._cache[i[s]][e]?this._cache[i[s]][e]:null;c?l[i[s]]=c:o.push(i[s])}if(0===o.length)a.call(this,l);else{var u={idsToFetch:o,contentMap:l,profile:e,artworkProfile:n,onSuccess:a,onFailure:r};this._makeStorePlatformRequest(u)}},a.prototype._makeStorePlatformRequest=function(t){var e=t.idsToFetch;if(t.profile){this._cache[t.profile]||(this._cache[t.profile]={});var n=[],i=0;if(e.length>this._maxContentSize){var a=Math.floor(e.length/this._maxContentSize),r=0,o=0;for(i=0;a>i;i++)r=this._maxContentSize*i,o=this._maxContentSize*(i+1),n.push(e.slice(r,o));this._maxContentSize*i!==e.length&&n.push(e.slice(this._maxContentSize*i,e.length))}else n.push(e);var l=0,s={},c=t.contentMap&&Object.keys(t.contentMap).length>0,u=!1,h=t.onSuccess,d=t.onFailure,p=function(e){l++,c=!0,this._copy(e,s),t.iterativeCallback&&t.iterativeCallback.call(this,s),l===n.length&&h.call(this,s,u)},m=function(t){l++,u=!0,l===n.length&&(c?h.call(this,s,u):d.call(this,t))},f={p:t.profile,caller:this._caller,requestParameters:{},version:"2"};t.artworkProfile&&(f.artwork=t.artworkProfile);var g=function(e,n){var i=!(!n&&e&&e instanceof Object&&Object.keys(e).length&&e.results);if(i)m.call(this,n);else{this.cacheData(e,t.profile);for(var a=Object.keys(e.results),r=0;r<a.length;r++)t.contentMap[a[r]]=e.results[a[r]];p.call(this,t.contentMap)}}.bind(this);for(i=0;i<n.length;i++)e=n[i],f.id=e.join(","),itms.loadStoreContent(f,g)}else t.onFailure.call(this,"missing profile from config")},a.prototype._hasSubscriptionPricing=function(t){var e=t.offers,n=!0;if(e&&e.length>0){n=!1;for(var i=0;i<e.length;i++)if(e[i].type&&"subscription"===e[i].type){n=!0;break}}return n},a.prototype.cacheData=function(t,e){var n=t.results;if(n)for(var a=Object.keys(n),r=0;r<a.length;r++){var o=n[a[r]];(!this._requiresSubscription||this._hasSubscriptionPricing(o))&&(this._cache[a[r]]||(this._cache[a[r]]={}),this._cache[a[r]][e]=o)}else i.warn("No results for store platform profile:",e,t)},a.prototype.lookup=function(t,e){var n;if(this._cache[t]){var i=Object.keys(this._cache[t]);e&&i.indexOf(e)>-1?n=this._cache[t][e]:e||(n=this._cache[t][i[0]])}return this._copy(n)},a.prototype._copy=function(t,e){if(t){var n={};e&&(n=e);for(var i in t)n[i]=t[i];return n}},e.exports=a},{lager:401}],401:[function(t,e,n){e.exports=t(329)},{}]},{},[1]);
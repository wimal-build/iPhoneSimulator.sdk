!function t(e,n,i){function a(o,l){if(!n[o]){if(!e[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return a(n?n:t)},c,c.exports,t,e,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(t,e,n){var i=t("./lib"),a=new i;e.exports=a},{"./lib":259}],2:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,o=i.controller.MultiElementController,l=i.event.Event,s=t("../../../common").traits.EventMap,c=t("../../../base").style,u=t("./style.hbs"),h=t("./template.hbs"),d=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],t.events.push("select"),this.strings={header:t.data.header,subheader:t.data.subheader,differentUser:r.locWithMarkupTokens("FUSE.CarrierBilling.LinkToAppleID.UseDifferentId",{firstName:itms.accountInfo.firstName})},o.call(this,t,e),s.call(this,t),a.extend(this.onSelect,{"continue-button":this.authenticate.bind(this),"sign-in-different-user":this.signInAsDifferentUser.bind(this)})};a.inherit(d,o),a.inherit(d,s,!0),d.prototype.authenticate=function(){a.account.auth({success:this.linkCarrier.bind(this)})},d.prototype.linkCarrier=function(){this.dispatchEvent(new l("linkCarrier"))},d.prototype.signInAsDifferentUser=function(){this.dispatchEvent(new l("signInAsDifferentUser"))},d.prototype.template=h,e.exports=d},{"../../../../util":267,"../../../base":72,"../../../common":80,"./style.hbs":4,"./template.hbs":5,itml:317}],3:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,o=t("./title.hbs"),l=a.pubSub,s=t("./element"),c=t("../../signin/element"),u=i.controller.DocumentController,h=function(t,e){t=t||{},t.data=t.data||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("template");var n=itms.DSID;0===t.controllers.length&&(n?(this.documentType="panelTemplate",t.data.header=t.data.header||r.loc("FUSE.CarrierBilling.ConfirmAppleId.Title"),t.data.subheader=t.data.subheader||r.locWithMarkupTokens("FUSE.CarrierBilling.ConfirmAppleId.Subtitle",{carrierName:Telephony.providerName,AppleId:itms.accountInfo.appleId}),this.controller=new s({data:t.data})):(this.documentType="signInTemplate",t.data.header=t.data.header||r.loc("FUSE.CarrierBilling.LinkToAppleID.Title"),t.data.subheader=t.data.subheader||r.locWithMarkupTokens("FUSE.CarrierBilling.LinkToAppleID.Description",{carrierName:Telephony.providerName}),this.controller=new c({data:t.data})),t.controllers.push(this.controller)),u.call(this,t,e);var i=this.el.getElementsByTagName("signInTemplate").item(0);i&&i.addEventListener("change",this.handleChange.bind(this));var a=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.handleCancel.bind(this))};this.addEventListener("render",a.bind(this)),this.controller.addEventListener("signInAsDifferentUser",this.signInAsDifferentUser.bind(this)),this.controller.addEventListener("linkCarrier",this.linkCarrier.bind(this)),a.call(this)};a.inherit(h,u),h.prototype.signInAsDifferentUser=function(){l.subscribe("serviceChange",function(){if(!itms.DSID){l.unsubscribe("serviceChange");var t=this.el.ownerDocument,e=t.navigationDocument,n=new h({});e.replaceDocument(n.el,t,{animated:!1})}}.bind(this)),itms.signOut()},h.prototype.documentType=itms.DSID?"panelTemplate":"signInTemplate",h.prototype.titleTemplate=o,h.prototype.handleChange=function(t){"success"===t.result&&(modal.documents.length>0&&modal.popDocument(),this.linkCarrier())},h.prototype.handleCancel=function(){modal.popDocument(),l.publish("serviceChange",{}),itms.updateServiceEligibility({carrierBundle:"unlinked"}),a.log.warn("cancel account linking, re-render For You"),l.publish("setSelectedTab","new")},h.prototype.linkCarrier=function(){var t=a.urls.carrierLinkSrv(),e={url:t,params:"guid="+Device.guid,method:"POST",success:this.linkCarrierSuccess.bind(this),failure:this.linkCarrierFailed.bind(this)};a.xhr(e)},h.prototype.linkCarrierSuccess=function(t){var e=JSON.parse(t);if(0===e.status)itms.updateServiceEligibility({carrierBundle:"eligible"}),modal.popDocument(),l.publish("serviceChange",{});else if(e.userPresentableErrorMessage){var n={data:{type:"error",title:e.userPresentableErrorMessage,buttons:[{title:"OK",className:"ok-button"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};l.publish("showModal",{detail:n})}},h.prototype.linkCarrierFailed=function(){a.log.error("Carrier Link XHR Failed")},e.exports=h},{"../../../../util":267,"../../signin/element":52,"./element":2,"./title.hbs":6,itml:317}],4:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* loading */\n.title {\n    font-size: 22pt;\n    color: tint-color;\n}\n\n.page-title {\n    itml-text-max-lines: 0;\n    font-weight: thin;\n    font-size: 27pt;\n    text-align: center;\n    margin: 40 0 20 0;\n}\n.page-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 16pt;\n    text-align: center;\n    color: rgb(150, 150, 150);\n    margin: 0 0 10 0;\n}\n.continue-button {\n  	border-color: tint-color;\n  	border-width: 1pt;\n    border-radius: 20pt;\n  	color: tint-color;\n    itml-text-max-lines: 0;\n    font-size: 15pt;\n    text-align: center;\n    border-radius: circle-caps;\n    padding: 15 80;\n    margin: 40 0 20 0;\n}\n.buy-button-title {\n  font-weight: bold;\n}\n.buy-button-subtitle {\n  color: rgb(150,150,150);\n  font-size: 12pt;\n}\n.divider {\n    margin: 10 0 0 0;\n    padding: 10;\n}\n.small-button {\n    font-size: 14pt;\n}\n.button-footer-text {\n    margin: 10 0 0 0;\n}\n.about-music-button {\n    margin: 10 0 15 0;\n}\n"},useData:!0})},{"hbsfy/runtime":300}],5:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+'<title class="page-title top">'+o(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+'</title>\n<subtitle class="page-subtitle middle">'+o(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+'</subtitle>\n<button class="continue-button middle">'+o((e.loc||t&&t.loc||l).call(t,"FUSE.CarrierBilling.ConfirmAppleId.Continue",{name:"loc",hash:{},data:i}))+'</button>\n<button class="middle sign-in-different-user">'+o(r(null!=(a=null!=t?t.strings:t)?a.differentUser:a,t))+"</button>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],6:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelSheetButton" type="link" class="align-left cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.NotNow",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":300}],7:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.pubSub,o=a.loc,l=i.controller.MultiElementController,s=t("../../../common").traits.EventMap,c=t("../../../base").style,u=t("./style.hbs"),h=t("./template.hbs"),d=t("../sms_verification"),p=t("../account_linking"),m=t("../../signin"),f=function(t,e){this.options=e||{ignoreCache:!0},a.account.getSubscriptionStatus(e,this.handleServiceEligibility.bind(this)),t=t||{},this.data=t.data||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],t.events.push("select"),this.showCancelButton=t.data.showCancelButton,l.call(this,t,e),s.call(this,t),this.bgImageName="resource://WelcomeBg-"+a.screen.getScreenDimensions().height+"h.jpg",this.render()};a.inherit(f,l),a.inherit(f,s,!0),f.prototype.template=h,f.prototype.handleServiceEligibility=function(t,e){if(!e||e.isFinal){var n,i=this.el.ownerDocument,a=i.navigationDocument;if(1===t&&e&&"unlinked"===e.carrierBundle)itms.updateServiceEligibility({carrierBundle:"unlinked"}),n=new p;else if(e&&"needsVerification"===e.carrierBundle)n=new d({data:e});else if(!itms.DSID&&this.data.alreadySubscribed)n=new m({data:{showCancelButton:this.showCancelButton,showCreateAppleId:!1}});else{modal.popDocument();var l={data:{type:"error",title:o.locWithMarkupTokens("FUSE.CarrierBundling.NoSubscription",{carrier:Telephony.providerName}),buttons:[{title:o.loc("OK")}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};r.publish("showModal",{detail:l})}n&&a.replaceDocument(n.el,i,{animated:!1})}},e.exports=f},{"../../../../util":267,"../../../base":72,"../../../common":80,"../../signin":53,"../account_linking":3,"../sms_verification":13,"./style.hbs":9,"./template.hbs":10,itml:317}],8:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),o=t("./element"),l=i.controller.DocumentController,s=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new o(t,e),t.controllers.push(n)),this.controller=n,l.call(this,t,e);var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.handleCancel.bind(this))};this.addEventDelegates(this.controller,["tabPush"]),this.addEventListener("render",i.bind(this)),i.call(this)};a.inherit(s,l),s.prototype.documentType="panelTemplate",s.prototype.titleTemplate=r,s.prototype.handleCancel=function(){modal.popDocument()},e.exports=s},{"../../../../util":267,"./element":7,"./title.hbs":11,itml:317}],9:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* loading */\n.welcome-bg {\n    itml-img-fill: scale-to-fill;\n}\n\n.title {\n    font-size: 22pt;\n    color: tint-color;\n}"},useData:!0})},{"hbsfy/runtime":300}],10:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+'<background>\n    <img class="welcome-bg" src="'+o(r(null!=t?t.bgImageName:t,t))+'" />\n</background>\n<title class="position-center title">'+o((e.loc||t&&t.loc||l).call(t,"FUSE.CarrierBundling.VerifyingSubscription",{name:"loc",hash:{},data:i}))+'</title>\n<activityIndicator class="position-center"/>'},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],11:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelSheetButton" type="link" class="align-right cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":300}],12:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,o=i.controller.MultiElementController,l=t("../../../common").traits.EventMap,s=t("../../../base").style,c=t("./style.hbs"),u=t("./model"),h=t("./template.hbs"),d=t("../account_linking"),p=a.pubSub,m=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new s({styleTemplate:c})),t.events=t.events||[],t.events.push("select"),o.call(this,t,e),l.call(this,t),a.extend(this.onSelect,{"resend-code-button":this.resendCodeButtonHandler.bind(this)});var n=new u(t);this.model=n,this.model.setEligibilityData(t),this.model.getSMS(),this.model.addEventListener("smsPinVerified",this.handleSendSMSPosted.bind(this)),this.model.addEventListener("smsPinIncorrect",this.handleSendSMSIncorrect.bind(this)),this.model.addEventListener("sendSMSFailed",this.handleSendSMSFailed.bind(this)),this.strings={header:r.loc("FUSE.SMSVerification.Header"),subheader:r.locWithMarkupTokens("FUSE.SMSVerification.EnterSMSCode",{number:Telephony.phoneNumber}),resendCode:r.loc("FUSE.SMSVerification.SendSMSCodeAgain")},this.render()};a.inherit(m,o),a.inherit(m,l,!0),m.prototype.template=h,m.prototype.setPinValue=function(t){this.pinValue=t,4===this.pinValue.length&&this.model.verifySMSPin(this.pinValue)},m.prototype.resendCodeButtonHandler=function(){this.model.getSMS()},m.prototype.handleSendSMSIncorrect=function(t){var e=this.el.ownerDocument.getElementsByTagName("input").item(),n=e.getFeature("animator");if(n&&n.animate("shake",{erase:1,vibrate:1}),t.detail&&t.detail.dialog){var i={data:{type:"error",title:t.detail.dialog.message,buttons:[{title:r.loc("OK")}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};p.publish("showModal",{detail:i})}},m.prototype.handleSendSMSFailed=function(t){var e={};e=t.detail&&t.detail.dialog?{data:{type:"error",title:t.detail.dialog.message,buttons:[{title:r.loc("Cancel")},{title:r.loc("FUSE.SMSVerification.SendSMSCodeAgain"),className:"confirm-failed",callback:this.resendCodeButtonHandler.bind(this)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}}:{data:{type:"error",title:r.loc("FUSE.Error.AnErrorOccurred"),buttons:[{title:r.loc("OK")}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}},p.publish("showModal",{detail:e})},m.prototype.handleSendSMSPosted=function(){itms.updateServiceEligibility({carrierBundle:"unlinked"}),p.publish("serviceChange",{});var t,e,n=this.el.ownerDocument,i=n.navigationDocument;t=new d({data:{subheader:e}}),t&&modal.documents.length?i.replaceDocument(t.el,n,{animated:!1}):t&&modal.pushDocument(t.el)},e.exports=m},{"../../../../util":267,"../../../base":72,"../../../common":80,"../account_linking":3,"./model":14,"./style.hbs":15,"./template.hbs":16,itml:317}],13:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),o=t("./element"),l=i.controller.DocumentController,s=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new o(t.data),t.controllers.push(n)),this.SMSVerificationController=n,l.call(this,t,e);var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.handleCancel.bind(this));var e=this.el.getElementsByTagName("input").item(0);e&&e.addEventListener("change",this.setPinValue.bind(this))};this.controller=n,this.addEventDelegates(this.controller,["tabPush"]),this.addEventListener("render",i.bind(this)),i.call(this)};a.inherit(s,l),s.prototype.documentType="panelTemplate",s.prototype.titleTemplate=r,s.prototype.handleCancel=function(){modal.popDocument()},s.prototype.setPinValue=function(t){this.SMSVerificationController.setPinValue(t.term||"")},e.exports=s},{"../../../../util":267,"./element":12,"./title.hbs":17,itml:317}],14:[function(t,e,n){function i(t){t=t||{},o.call(this,t)}var a=t("itml"),r=a.event.Event,o=t("../../../base").model,l=t("../../../../util");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.getSMS=function(){var t=l.urls.fuseSendSmsCode(),e="sessionId="+encodeURIComponent(this.getSessionId())+"&phoneNumber="+encodeURIComponent(Telephony.phoneNumber)+"&carrier="+encodeURIComponent(Telephony.providerName),n={url:t,params:e,method:"POST",success:this.onGetSMSSuccess.bind(this),failure:this.onGetSMSFailed.bind(this)};l.xhr(n)},i.prototype.onGetSMSSuccess=function(t){var e=JSON.parse(t);if(-1===e.status&&e.userPresentableErrorMessage){var n={dialog:e.dialog};this.dispatchEvent(new r("sendSMSFailed",{detail:n}))}},i.prototype.onGetSMSFailed=function(){l.log.warn("getSMSFailed"),this.dispatchEvent(new r("sendSMSFailed",{detail:{}}))},i.prototype.verifySMSPin=function(t){var e=l.urls.fuseVerifySmsCode(),n="sessionId="+encodeURIComponent(this.getSessionId())+"&phoneNumber="+encodeURIComponent(Telephony.phoneNumber)+"&carrier="+encodeURIComponent(Telephony.providerName)+"&smsCode="+t,i={url:e,params:n,method:"POST",success:this.onVerifySMSPinSuccess.bind(this),failure:this.onVerifySMSPinFailed.bind(this)};l.xhr(i)},i.prototype.onVerifySMSPinSuccess=function(t){var e=JSON.parse(t);if(e.status<0){var n={dialog:e.dialog};this.dispatchEvent(new r("smsPinIncorrect",{detail:n}))}else 1===e.fuseCarrierBundleStatus?this.dispatchEvent(new r("smsPinVerified")):(l.log.warn("No carrier bundling with this phone number"),modal.popDocument())},i.prototype.onVerifySMSPinFailed=function(t){l.log.warn("FAIL: ",t)},i.prototype.getSessionId=function(){return this.data&&this.data.sessionId},i.prototype.setEligibilityData=function(t){this.data=t||{}},e.exports=i},{"../../../../util":267,"../../../base":72,itml:317}],15:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* subscribe */\n.middle {\n    itml-position: center;\n}\n.pin {\n    itml-text-style: pin;\n    margin: 0 0 18;\n}\n.subtitle {\n    color: rgb(0,0,0);\n    font-size: 18pt;\n    font-weight: light;\n    text-align: center;\n    margin: 0 0 30;\n}\n.error {\n    color: rgb(255,0,0);\n    font-size: 14pt;\n    font-weight: light;\n    text-align: center;\n    margin: 0 0 10;\n}\n.title {\n    color: rgb(0,0,0);\n    font-size: 30pt;\n    font-weight: light;\n    margin: 0 0 10;\n}\n.continue-button {\n    itml-item-width: 208pt;\n    font-size: 14pt;\n}\n.resend-code-button {\n	itml-item-width: 208pt;\n	font-size: 14pt;\n}"},useData:!0})},{"hbsfy/runtime":300}],16:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(l+=a),l+'<title class="middle title">'+o(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+'</title>\n<subtitle class="middle subtitle" maxLines="0">'+o(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+'</subtitle>\n<text class="middle error" id="errorMessage" maxLines="0"></text>\n<input class="middle pin searchInputField" type="number" maxlength="4"/>\n<button class="resend-code-button middle">'+o(r(null!=(a=null!=t?t.strings:t)?a.resendCode:a,t))+"</button>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],17:[function(t,e,n){e.exports=t(11)},{"hbsfy/runtime":300}],18:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.event.Event,o=i.controller.MultiElementController,l=t("../../common").traits.EventMap,s=t("../../common").traits.TabComponent,c=t("../../base").style,u=t("./style.hbs"),h=t("./model"),d=a.pubSub,p=a.loc,m=t("./template.hbs"),f=function(t,e){t=t||{},e=e||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],t.events.push("select"),o.call(this,t,e),l.call(this,t),s.call(this),d.subscribe("buyConfirmed",this.handleBuyConfirmed.bind(this)),d.subscribe("buyFailed",this.handleBuyFailed.bind(this)),this.bag=itms.getBag(),a.extend(this.onSelect,{"migration-continue-button":this.confirmMigration.bind(this),"apple-music-already-subscribed":this.alreadySubscribed.bind(this),"about-music-button":this.pushLearnMore.bind(this)}),this.deepLink=t.deepLink;var n=new h({deepLink:this.deepLink});this.currentDoc=this.el.ownerDocument,this.addEventDelegates(this.currentDoc,["tabPush"]),this.strings={aboutMusicAndPrivacy:p.loc("FUSE.Footer.aboutAppleMusic")},n.addEventListener("dataReady",function(){if(0===n.data.status)this.model=n,this.model.subscribed=a.account.subscribed(),this.buyParams=n.data.buyParams,this.showAlreadySubscribed=itms.accountInfo.DSID,this.render();else if(modal.popDocument(),n.data.userPresentableErrorMessage){var t={data:{type:"error",title:n.data.userPresentableErrorMessage,buttons:[{title:p.loc("OK"),className:"comfirm-button"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};d.publish("showModal",{detail:t})}}.bind(this)),n.get(this.bag.beatsMigrationInfoSrv)};a.inherit(f,o),a.inherit(f,l,!0),a.inherit(f,s,!0),f.prototype.template=m,f.prototype.checkAuth=function(){this.dsid=itms.accountInfo.DSID,this.dsid?this.confirmMigration():this.signin()},f.prototype.signin=function(){var t={callback:this.alreadySubscribed.bind(this),showCancelButton:!0},e={data:t,dataType:"signin",navigationDocument:modal};this.dispatchEvent(new r("tabPush",{detail:e}))},f.prototype.confirmMigration=function(){if(this.deepLink=this.deepLink.slice(this.deepLink.indexOf("?")+1),this.buyParams){var t={offers:[{buyParams:this.buyParams+"&"+this.deepLink+"&isBeatsMigration=true"}]};itms.buy(t),this.disableActionButtons(!0)}else this.handleBuyConfirmed()},f.prototype.handleBuyConfirmed=function(){modal.popDocument(),this.disableActionButtons(!1),d.publish("serviceChange",{}),d.publish("importingFavorites",{})},f.prototype.handleBuyFailed=function(){this.disableActionButtons(!1)},f.prototype.disableActionButtons=function(t){var e,n=this.el.ownerDocument.getElementsByTagName("button"),i=0,a=n.length;for(i=0;a>i;i++)e=n.item(i),e.setAttribute("disabled",t)},f.prototype.alreadySubscribed=function(){a.account.getSubscriptionStatus({partialResults:!0},this.handleServiceEligibility.bind(this))},f.prototype.handleServiceEligibility=function(t,e){if(this.waitingForEligibilityData=!1,1===t)"unlinked"===e.carrierBundle?d.publish("serviceChange",{}):this.confirmMigration();else if(!itms.accountInfo.DSID&&e.isFinal)this.signin();else if(e.isFinal){var n={data:{type:"error",title:p.loc("FUSE.NotAlreadySubscribed"),buttons:[{title:p.loc("OK"),className:"comfirm-button"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};d.publish("showModal",{detail:n})}},e.exports=f},{"../../../util":267,"../../base":72,"../../common":80,"./model":24,"./style.hbs":25,"./template.hbs":26,itml:317}],19:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.controller.MultiElementController,o=t("../../../common").traits.TabComponent,l=t("../../../base").style,s=t("./style.hbs"),c=a.pubSub,u=t("./template.hbs"),h=function(t,e){t=t||{},e=e||{},t.styles=t.styles||[],t.styles.push(new l({styleTemplate:s})),t.events=t.events||[],t.events.push("select"),r.call(this,t,e),o.call(this),this.bag=itms.getBag(),this.currentDoc=this.el.ownerDocument,this.addEventDelegates(this.currentDoc,["tabPush"]),this.render(),this.checkMigrationStatus()};a.inherit(h,r),a.inherit(h,o,!0),h.prototype.template=u,h.prototype.checkMigrationStatus=function(){var t=a.urls.migration(),e={url:t,method:"GET",success:this.checkMigrationStatusSuccess.bind(this),failure:this.checkMigrationStatusFailure.bind(this)};a.xhr(e)},h.prototype.checkMigrationStatusSuccess=function(t){var e;try{e=JSON.parse(t)}catch(n){return void a.log.error("error in beatsMigrationStatusSrv response")}if(e&&0===e.status){a.log.warn(e);var i=e.migrationStatus;"finished"===i.TasteProfile?setTimeout(function(){c.publish("migrationComplete",{}),c.publish("serviceChange",{})},2e3):setTimeout(function(){this.checkMigrationStatus()}.bind(this),1e4)}else a.log.warn("beatsMigrationStatusSrv failed, trying again"),setTimeout(this.checkMigrationStatus,1e4)},h.prototype.checkMigrationStatusFailure=function(){a.log.warn("Migrating Beats Content Failed")},e.exports=h},{"../../../../util":267,"../../../base":72,"../../../common":80,"./style.hbs":21,"./template.hbs":22,itml:317}],20:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./element"),o=i.controller.DocumentController,l=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new r,t.controllers.push(n)),this.controller=n,o.call(this,t,e),this.addEventDelegates(this.controller,["tabPush"])};a.inherit(l,o),l.prototype.documentType="panelTemplate",e.exports=l},{"../../../../util":267,"./element":19,itml:317}],21:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* migration */\n.page-title {\n    margin: 50 0 0 0;\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 27pt;\n    text-align: center;\n}\n.page-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 16pt;\n    text-align: center;\n    itml-align: center;\n    color: rgb(150, 150, 150);\n}\n.offers-grid {\n    itml-row-height: 65pt;\n    padding: 0;\n}\n.offers-grid-divider {\n    margin: 0;\n}\n.offer-title {\n    itml-text-max-lines: 1;\n    font-size: 18pt;\n}\n.selected {\n    color: tint-color;\n    font-size: 18pt;\n}\n.offer-subtitle {\n    itml-text-max-lines: 1;\n    font-size: 16pt;\n    color: rgb(150, 150, 150)\n}\n\n.refund-blurb {\n	font-size:10px;\n	itml-text-max-lines: 0;\n	text-align: left;\n}\n\n.migration-continue-button {\n    itml-text-max-lines: 1;\n    font-size: 20pt;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: tint-color;\n}\n\n.small-button {\n    font-size: 14pt;\n}\n"},useData:!0})},{"hbsfy/runtime":300}],22:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(l+=a),l+'<title class="page-title top">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.Loading.forYou.title",{name:"loc",hash:{},data:i}))+'</title>\n<subtitle class="position-center page-subtitle">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.Loading.forYou.explanation",{name:"loc",hash:{},data:i}))+"</subtitle>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],23:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),o=t("./element"),l=t("../../common").traits.TabComponent,s=i.controller.DocumentController,c=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new o(t),t.controllers.push(n)),s.call(this,t,e),l.call(this);var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.cancelMigration.bind(this))};this.addEventListener("render",i.bind(this)),i.call(this)};a.inherit(c,s),a.inherit(c,l,!0),c.prototype.documentType="panelTemplate",c.prototype.titleTemplate=r,c.prototype.cancelMigration=function(){modal.popDocument()},e.exports=c},{"../../../util":267,"../../common":80,"./element":18,"./title.hbs":27,itml:317}],24:[function(t,e,n){function i(t){t=t||{},this.deepLink=t.deepLink,o.call(this,t)}var a=t("itml"),r=a.event.Event,o=t("../../base").model,l=t("../../../util");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.get=function(t){if(t&&this.deepLink){var e=this.deepLink.substring(this.deepLink.indexOf("?")),n={url:t+e,method:"GET",success:this.onDataSuccess.bind(this),failure:this.onDataFailed.bind(this)};l.xhr(n)}else l.log.error("MigrationModel must have url and this.deepLink")},i.prototype.onDataSuccess=function(t){this.data=JSON.parse(t),this.dispatchEvent(new r("dataReady"))},i.prototype.onDataFailed=function(t){l.log.warn("FAIL: ",t)},e.exports=i},{"../../../util":267,"../../base":72,itml:317}],25:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* migration */\n.page-title {\n    itml-text-max-lines: 0;\n    font-weight: thin;\n    font-size: 27pt;\n    text-align: center;\n    margin: 40 0 20 0;\n}\n.page-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 16pt;\n    text-align: center;\n    color: rgb(150, 150, 150);\n    margin: 0 0 10 0;\n}\n.migration-continue-button {\n    itml-text-max-lines: 0;\n    font-size: 15pt;\n    text-align: center;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: rgb(0,0,0);\n    itml-item-width: 100%;\n    border-radius: circle-caps;\n    padding: 15;\n    margin: 40 0 0 0;\n}\n.migration-button-title {\n  font-weight: bold;\n}\n.migration-button-subtitle {\n  color: rgb(150,150,150);\n  font-size: 12pt;\n}\n.divider {\n    margin: 10 0 0 0;\n    padding: 10;\n}\n.small-button {\n    font-size: 14pt;\n}\n.button-footer-text {\n    margin: 10 0 0 0;\n}\n.about-music-button {\n    margin: 10 0 15 0;\n}\n.refund-blurb {\n    margin: 30 0 0 0;\n    color: rgb(150,150,150);\n}\n.apple-music-already-subscribed {\n    margin: 20 0 10 0;\n}\n"},useData:!0})},{"hbsfy/runtime":300}],26:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda;return'    <title class="page-title">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.AlreadySubscriber_title",{name:"loc",hash:{},data:i}))+'</title>\n    <subtitle class="page-subtitle">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.AlreadySubscriber_description",{name:"loc",hash:{},data:i}))+'</subtitle>\n    <img src="resource://beatsToAppleMusic" class="top" width="128" height="40"/>\n    <button class="migration-continue-button top">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Footer.AlreadyaSubscriber.Continue",{name:"loc",hash:{},data:i}))+'</button>\n	<text class="refund-blurb top">'+o(l(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.refundBlurb:a,t))+"</text>\n"},3:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='    <title class="page-title">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.LandingPage.Title",{name:"loc",hash:{},data:i}))+'</title>\n    <subtitle class="page-subtitle">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.Landingpage.Description",{name:"loc",hash:{},data:i}))+'</subtitle>\n    <button class="migration-continue-button top" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"button",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'><span class="buy-button-title">'+o(l(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.title:a,t))+' </span><br /><span class="migration-button-subtitle">'+o(l(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.description:a,t))+'</span></button>\n    <text class="refund-blurb top">'+o(l(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.refundBlurb:a,t))+" "+o(l(null!=(a=null!=t?t.model:t)?a.subscribed:a,t))+"</text>\n"},5:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda;return'    <divider class="divider bottom" />\n    <button class="small-button tint-color apple-music-already-subscribed bottom" >'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Footer.AlreadyaSubscriber",{name:"loc",hash:{},data:i}))+'</button>\n    <button class="small-button tint-color about-music-button bottom" data-content-kind="learn_more_page" about-type="about_music" push-type="sheet">'+o(l(null!=(a=null!=t?t.strings:t)?a.aboutMusicAndPrivacy:a,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.model:t)?a.subscribed:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),a=e.unless.call(t,null!=(a=null!=t?t.model:t)?a.subscribed:a,{name:"unless",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],27:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelSheetButton" type="link" class="align-left cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":300}],28:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../../util"),o=t("./template.hbs"),l=r.pubSub,s=t("../bubble"),c=t("./model"),u=function(t,e){t=t||{},t.events=t.events||[],t.template=o,s.call(this,t,e),this.onSelect["more-artists"]=this.handleMoreArtistsButton.bind(this);var n=function(){this.el.ownerDocument.addEventListener("change",this.handleBubbleAction.bind(this)),this.getNextArtistBatchAfterRender===!0&&(this.getNextArtistBatchAfterRender=!1,this.model.getNextArtistDataBatch())};this.addEventListener("render",n.bind(this)),n.call(this),this.model=new c,this.model.addEventListener("dataReady",function(){
this.render(),this.dispatchEvent(new a("updateNav"))}.bind(this)),this.model.addEventListener("artistDataPosted",this.handleArtistDataPosted.bind(this)),this.model.initData(t.data),this.model.get()};r.inherit(u,s),u.prototype.handleMoreArtistsButton=function(){this.model.removeUnselectedArtistsFromData(),this.getNextArtistBatchAfterRender=!0,this.render()},u.prototype.handleArtistDataPosted=function(){var t=this.el.ownerDocument.getElementsByTagName("physicalCirclesTemplate").item(0);t.getFeature("CirclesContainer").performFinishAnimation(this.onboardingFinished.bind(this))},u.prototype.onboardingFinished=function(){l.publish("tasteProfileUpdated",{}),this.dispatchEvent(new a("handleOnboardingDone"))},e.exports=u},{"../../../../util":267,"../bubble":33,"./model":30,"./template.hbs":31,itml:317}],29:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),o=i.controller.DocumentController,l=t("./element"),s=function(t,e){t=t||{},t.name="OnboardingArtist",t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new l({data:t.data}),t.controllers.push(n)),this.controller=n;var i=function(){this.navigationBarController&&(this.navigationBarController.disabledSubmitState=this.controller.model.getNeedsMoreSelections(),this.navigationBarController.render())};this.controller.addEventListener("updateNav",i.bind(this)),o.call(this,t,e),this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="transparent-bar",this.navigationBarController.render(),this.addEventDelegates(n,["handleOnboardingDone"]),i.call(this);var a=function(){var t=this.el.getElementById("doneButton");t&&t.addEventListener("select",this.handleDoneButton.bind(this))};this.navigationBarController.addEventListener("render",a.bind(this)),a.call(this)};a.inherit(s,o),s.prototype.documentType="physicalCirclesTemplate",s.prototype.titleTemplate=r,s.prototype.handleDoneButton=function(){this.controller.model.set()},e.exports=s},{"../../../../util":267,"./element":28,"./title.hbs":32,itml:317}],30:[function(t,e,n){function i(t){t=t||{},o.call(this,t)}var a=t("itml"),r=a.event.Event,o=t("../../../base").model,l=t("../../../../util"),s=l.loc,c=20;i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.pageProfile="lockup",i.prototype.set=function(){var t=this.formatArtistDataToPost(),e=this.data.genrePostData,n="artists="+encodeURIComponent(JSON.stringify(t))+"&labels="+encodeURIComponent(JSON.stringify(e));if(l.urls.updateTastePreference()){var i=l.urls.updateTastePreference(),a={url:i,method:"POST",params:n,success:this.onSetSuccess.bind(this),failure:this.onSetFailed.bind(this)};l.xhr(a)}else l.log.warn("FAIL: ","bag error")},i.prototype.formatArtistDataToPost=function(){for(var t,e=this.getSelectedArtists(),n=this.getDeletedArtists(),i=[],a=0;a<e.length;a++)t=e[a],i[a]=t;for(var r=0;r<n.length;r++)t=n[r],i[a++]=t;return i},i.prototype.onSetSuccess=function(){this.dispatchEvent(new r("artistDataPosted"))},i.prototype.onSetFailed=function(t){403===t?l.account.auth({success:this.set.bind(this)}):(modal.popDocument(),l.log.warn("FAIL: ",t))},i.prototype.get=function(){var t=this.data.artists?this.data.artists.length:0,e=0,n=t>c?c:t-1;this.parsePageData(e,n)},i.prototype.initData=function(t){this.data=t&&t.artistData||{},this.cacheContent(this.data),this.data.genrePostData=t&&t.genrePostData||{},this.data.contentMap={},this.data.orderedArtists=[],this.data.selectedArtists=[],this.data.deletedArtists=[]},i.prototype.parsePageData=function(t,e){var n,i,a,r,o=this.data.artists,s=this.getStorePlatformData(this.data),c=[];for(n=t;e>n;n++){if(r=o[n],a=r.id,this.data.contentMap[a]={artist:r},this.data.orderedArtists.push(this.data.contentMap[a]),i=s[a]){var u=l.artwork.getArtworkForContent({content:i,artworkMap:this.artworkMap});u&&(i.image=u.image),this.data.contentMap[a].storeData=i}else this.data.contentMap[a].storeData={adamId:a},c.push(a);r.userPreference>0?this.data.selectedArtists.push(r):r.userPreference<0&&this.data.deletedArtists.push(r)}0===t&&(this.data.tuneYourTaste=this.data.selectedArtists.length>0),this.setContentDerivedData(t),this.startIndex=t,this.endIndex=e,c.length>0?this.fetchContent({profile:this.pageProfile,contentIds:c,onSuccess:this.onDataReady.bind(this,this.startIndex,this.endIndex),onFailure:this.onDataFailed.bind(this)}):this.onDataReady(this.startIndex,this.endIndex)},i.prototype.removeUnselectedArtistsFromData=function(){for(var t={},e=[],n=this.getSelectedArtists(),i=0;i<n.length;i++){var a=n[i].id;t[a]=this.data.contentMap[a],e[i]=t[a]}this.data.contentMap=t,this.data.orderedArtists=e},i.prototype.getNextArtistDataBatch=function(){var t=this.data.artistsDisplayIndexStart,e=this.data.artistsDisplayIndexEnd;t=e+1,e=t+(c-this.getSelectedArtists().length),e>this.data.artists.length&&(e=this.data.artists.length),this.parsePageData(t,e)},i.prototype.onDataFailed=function(t){l.log.warn("content fetch from store platform failed: ",t),this.dispatchEvent(new r("dataReady"))},i.prototype.onDataReady=function(t,e,n){if(n){var i=this.data.contentMap;for(var a in i)if(i.hasOwnProperty(a)&&i[a].storeData.adamId){var o=n[i[a].storeData.adamId];if(o){var s=l.artwork.getArtworkForContent({content:o,artworkMap:this.artworkMap});s&&(o.image=s.image),i[a].storeData=o}}}if("undefined"!=typeof t){this.data.artistsDisplayIndexStart=t,this.data.artistsDisplayIndexEnd=e;var c=this.data.artists?this.data.artists.length:0;this.data.noMoreArtistsToShow=e+1>=c?!0:!1}this.dispatchEvent(new r("dataReady"))},i.prototype.setContentDerivedData=function(t){var e=this.data.selectedArtists.length,n=this.data.deletedArtists.length;if(e>2)this.data.progressValue="1.0";else{var i=.5+.5*e/3;this.data.progressValue=i}var a=t&&t>0,r=e>0,o=n>0;this.data.noUpdates=!(a||r||o),this.data.needsMoreSelections=2>=e,this.data.title=this.data.tuneYourTaste?s.loc("FUSE.Onboarding.Artists.Header.ChooseYourFavorites"):this.getPageTitle(e)},i.prototype.getSelectedArtists=function(){return this.data&&this.data.selectedArtists||null},i.prototype.getDeletedArtists=function(){return this.data&&this.data.deletedArtists||null},i.prototype.getNeedsMoreSelections=function(){return this.data&&this.data.needsMoreSelections||!1},i.prototype.getPageTitle=function(t){var e=[s.loc("FUSE.Onboarding.Artists.Header.GotIt"),s.loc("FUSE.Onboarding.Artists.Header.Choose1"),s.loc("FUSE.Onboarding.Artists.Header.Choose2"),s.loc("FUSE.Onboarding.Artists.Header.Choose3")],n=3-t;return 0>n&&(n=0),e[n]},i.prototype.updateData=function(t,e){var n=this.data.contentMap[t].artist,i=this.getSelectedArtists(),a=this.getDeletedArtists();if(1===e)i.push(n);else if(0===e||-1===e){var r=i.indexOf(n);r>-1&&i.splice(r,1)}-1===e&&a.push(n),n.userPreference=e,this.setContentDerivedData()},i.prototype.resetData=function(){this.data.selectedArtists=[],this.data.deletedArtists=[],this.data.orderedArtists=[],this.get();for(var t in this.data.contentMap)this.data.contentMap.hasOwnProperty(t)&&(this.data.contentMap[t].artist.userPreference=0);this.data.progressValue=.5,this.data.noUpdates=!0,this.data.needsMoreSelections=!0,this.data.title=this.getPageTitle(0)},i.prototype.artworkMap={profile:{xs:[150,150],s:[150,150],m:[150,150],l:[150,150],xl:[150,150]}},e.exports=i},{"../../../../util":267,"../../../base":72,itml:317}],31:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.storeData:t)?a.name:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='        <circle class="bubble onboarding-image-treatment" data-content-id="'+o(r(null!=(a=null!=t?t.artist:t)?a.id:a,t))+'" size="'+o(r(null!=(a=null!=t?t.artist:t)?a.userPreference:a,t))+'" x="'+o(r(null!=(a=null!=t?t.artist:t)?a.x:a,t))+'" y="'+o(r(null!=(a=null!=t?t.artist:t)?a.y:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"circle",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'><title id="title">'+o(r(null!=(a=null!=t?t.storeData:t)?a.name:a,t))+'</title><img src="'+o(r(null!=(a=null!=(a=null!=t?t.storeData:t)?a.image:a)?a.url:a,t))+'"/></circle>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+='<title id="pageTitle">'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.title:a,t))+"</title>\n<subtitle>"+o(r(null!=(a=null!=t?t.strings:t)?a.artistSubheader:a,t))+"</subtitle>\n\n<section ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"section",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.orderedArtists:a,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'</section>\n\n<palette id="palette">\n    <button id="resetButton" class="reset-button" disabled="'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.noUpdates:a,t))+'">'+o(r(null!=(a=null!=t?t.strings:t)?a.resetButton:a,t))+'</button>\n    <progressIndicator id="progress" value="'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.progressValue:a,t))+'">\n        <title>'+o(r(null!=(a=null!=t?t.strings:t)?a.youLabel:a,t))+'</title>\n    </progressIndicator>\n    <button id="moreArtists" class="more-artists" disabled="'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.noMoreArtistsToShow:a,t))+'">'+o(r(null!=(a=null!=t?t.strings:t)?a.moreArtists:a,t))+"</button>\n</palette>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],32:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'<button id="doneButton" type="done" disabled="'+l((a=null!=(a=e.disabledSubmitState||(null!=t?t.disabledSubmitState:t))?a:o,typeof a===r?a.call(t,{name:"disabledSubmitState",hash:{},data:i}):a))+'" class="align-right done-button">'+l((e.loc||t&&t.loc||o).call(t,"FUSE.DoneButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":300}],33:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=i.event.Event,l=t("../../base").style,s=t("./style.hbs"),c=i.controller.MultiElementController,u=t("../../common").traits.EventMap,h=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new l({styleTemplate:s})),t.events=t.events||[],t.events.push("select"),this.template=t.template,this.strings={youLabel:r.loc("FUSE.Onboarding.You.Label"),resetButton:r.loc("FUSE.Onboarding.Reset.Button"),labelsHeader:r.loc("FUSE.Onboarding.Labels.Header"),labelsSubheader:r.loc("FUSE.Onboarding.Labels.Subheader"),artistSubheader:r.loc("FUSE.Onboarding.Artists.Subheader"),moreArtists:r.loc("FUSE.Onboarding.Artists.MoreArtistsButton")},c.call(this,t,e),u.call(this,t),a.extend(this.onSelect,{bubble:this.handleBubbleAction.bind(this),"reset-button":this.handleResetButton.bind(this)});var n=function(){this.el.ownerDocument.addEventListener("change",this.handleBubbleAction.bind(this))};this.addEventListener("render",n.bind(this)),n.call(this)};a.inherit(h,c),a.inherit(h,u,!0),h.prototype.handleBubbleAction=function(t){var e=t.removed||t.target,n=e.getAttribute("data-content-id"),i=e.getAttribute("size"),a=t.removed?-1:this.calculateNewBubbleSize(i);this.updatePageDataAndRefresh(n,a),t.removed?e&&e.parentNode&&e.parentNode.removeChild(e):e.setAttribute("size",a)},h.prototype.handleResetButton=function(){var t=this.el.ownerDocument.getElementsByTagName("physicalCirclesTemplate").item(0);t.getFeature("CirclesContainer").performResetAnimation(this.updatePageDataAndRefresh.bind(this))},h.prototype.handleNextButton=function(){this.model.set()},h.prototype.updatePageDataAndRefresh=function(t,e){var n;"undefined"!=typeof t?this.model.updateData(t,e):(this.model.resetData(),n=!0),this.updateNavButtons(),this.updateResetButton(),this.updateProgress(),n&&this.render()},h.prototype.handleOnboardingDone=function(){this.dispatchEvent(new o("handleOnboardingDone"))},h.prototype.updateNavButtons=function(){this.dispatchEvent(new o("updateNav"))},h.prototype.updateResetButton=function(){var t=this.el.ownerDocument.getElementById("resetButton");this.model.noUpdates?t.setAttribute("disabled","true"):t.setAttribute("disabled","false")},h.prototype.updateProgress=function(){var t=this.el.ownerDocument.getElementById("progress");t.setAttribute("value",this.model.data.progressValue)},h.prototype.calculateNewBubbleSize=function(t){var e=0;return e=t?(parseInt(t)+1)%3:1},e.exports=h},{"../../../util":267,"../../base":72,"../../common":80,"./style.hbs":39,itml:317}],34:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.event.Event,o=t("./template.hbs"),l=t("./model"),s=t("../bubble"),c=t("../artist"),u=function(t,e){t=t||{},t.template=o,s.call(this,t,e),this.model=new l,this.model.addEventListener("dataReady",function(){this.render(),this.dispatchEvent(new r("updateNav"))}.bind(this)),this.model.addEventListener("artistDataReady",this.handleGenreDataReady.bind(this)),this.model.addEventListener("dataPostInProgress",this.handleDataPostInProgress.bind(this)),this.model.addEventListener("dataPostFailed",this.handleDataPostFailed.bind(this)),this.model.get()};a.inherit(u,s),u.prototype.handleNextButton=function(){this.model.set()},u.prototype.handleDataPostInProgress=function(){this.dispatchEvent(new r("updateNav",{detail:{disableNavButtons:!0}}))},u.prototype.handleDataPostFailed=function(){this.dispatchEvent(new r("updateNav",{detail:{disableNavButtons:!1}}))},u.prototype.handleGenreDataReady=function(){var t=this.el.ownerDocument.getElementsByTagName("physicalCirclesTemplate").item(0);t.getFeature("CirclesContainer").performFinishAnimation(this.navigateToArtistPage.bind(this))},u.prototype.navigateToArtistPage=function(){var t={genrePostData:this.model.getGenrePostData(),artistData:this.model.getArtistPageData()},e=new c({data:t});e.addEventListener("handleOnboardingDone",this.handleOnboardingDone.bind(this)),a.metrics.track(e,{tabIdentifier:"onboarding_artist",entityType:TabBar.selectedTab.identifier});var n=this.el.ownerDocument.navigationDocument;n.pushDocument(e.el),this.dispatchEvent(new r("updateNav",{detail:{disableNavButtons:!1}}))},e.exports=u},{"../../../../util":267,"../artist":29,"../bubble":33,"./model":36,"./template.hbs":37,itml:317}],35:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),o=i.controller.DocumentController,l=t("./element"),s=function(t,e){t=t||{},t.name="OnboardingGenre",t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new l,t.controllers.push(n)),this.controller=n;var i=function(t){this.navigationBarController&&(this.navigationBarController.showCancelButton=(modal.documents&&modal.documents.length)>0,this.navigationBarController.disabledSubmitState=t&&t.detail&&t.detail.disableNavButtons||this.controller.model.getNeedsMoreSelections()?!0:!1,this.navigationBarController.render())};this.controller.addEventListener("updateNav",i.bind(this)),o.call(this,t,e),this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="transparent-bar",this.navigationBarController.render(),this.addEventDelegates(n,["handleOnboardingDone"]),i.call(this);var a=function(){var t=this.el.getElementById("nextButton");t&&t.addEventListener("select",this.handleNextButton.bind(this));var e=this.el.getElementById("cancelButton");e&&e.addEventListener("select",this.handleCancelButton.bind(this))};this.navigationBarController.addEventListener("render",a.bind(this)),a.call(this)};a.inherit(s,o),s.prototype.documentType="physicalCirclesTemplate",s.prototype.titleTemplate=r,s.prototype.handleNextButton=function(){this.controller.handleNextButton()},s.prototype.handleCancelButton=function(){modal.popDocument()},e.exports=s},{"../../../../util":267,"./element":34,"./title.hbs":38,itml:317}],36:[function(t,e,n){function i(t){t=t||{},o.call(this,t)}var a=t("itml"),r=a.event.Event,o=t("../../../base").model,l=t("../../../../util");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.get=function(){var t={url:l.urls.tastePreferenceLabels(),method:"GET",success:this.onGetDataSuccess.bind(this),failure:this.onGetDataFailed.bind(this)};l.xhr(t)},i.prototype.onGetDataSuccess=function(t){this.data=this.parsePageData(JSON.parse(t)),this.dispatchEvent(new r("dataReady"))},i.prototype.onGetDataFailed=function(t){403===t?l.account.auth({success:this.get.bind(this)}):(this.dispatchEvent(new r("dataReady")),l.log.warn("FAIL: ",t))},i.prototype.parsePageData=function(t){var e={noUpdates:!0,progressValue:"0",genres:{},orderedGenres:[],selectedGenres:[],deletedGenres:[]};if(t.labels)for(var n=0;n<t.labels.length;n++){var i=t.labels[n];i.id||(i.id=n),i.userPreference?i.userPreference>0?e.selectedGenres.push(i):i.userPreference<0&&e.deletedGenres.push(i):i.userPreference=0,e.genres[i.id]=i,e.orderedGenres.push(e.genres[i.id])}var a=e.selectedGenres.length>0,r=e.deletedGenres.length>0;return e.progressValue=a?"0.5":"0",e.noUpdates=!(a||r),e.needsMoreSelections=e.selectedGenres.length<=0,e},i.prototype.resetData=function(){this.data.selectedGenres=[],this.data.deletedGenres=[];for(var t in this.data.genres)this.data.genres.hasOwnProperty(t)&&(this.data.genres[t].userPreference=0);this.data.progressValue=0,this.data.noUpdates=!0,this.data.needsMoreSelections=!0},i.prototype.set=function(){this.data.genrePostData=this.formatGenreDataToPost();var t={url:l.urls.tastePreferenceArtists(),method:"POST",params:"labels="+encodeURIComponent(JSON.stringify(this.data.genrePostData)),success:this.onSetSuccess.bind(this),failure:this.onSetFailed.bind(this)};l.xhr(t),this.dispatchEvent(new r("dataPostInProgress"))},i.prototype.formatGenreDataToPost=function(){for(var t,e=this.getSelectedGenres(),n=this.getDeletedGenres(),i=[],a=0;a<e.length;a++)t=e[a],i[a]=t;for(var r=0;r<n.length;r++)t=n[r],i[a++]=t;return i},i.prototype.onSetSuccess=function(t){this.data.artistData=JSON.parse(t),this.dispatchEvent(new r("artistDataReady"))},i.prototype.onSetFailed=function(t){this.dispatchEvent(new r("dataPostFailed")),403===t?(l.log.warn("403 onboarding genre"),l.account.auth({success:this.set.bind(this)})):l.log.warn("FAIL: ",t)},i.prototype.getSelectedGenres=function(){return this.data&&this.data.selectedGenres||null},i.prototype.getDeletedGenres=function(){return this.data&&this.data.deletedGenres||null},i.prototype.getArtistPageData=function(){return this.data&&this.data.artistData||null},i.prototype.getGenrePostData=function(){return this.data&&this.data.genrePostData||null},i.prototype.getNeedsMoreSelections=function(){return this.data&&this.data.needsMoreSelections||!1},i.prototype.updateData=function(t,e){var n=this.data.genres,i=n[t],a=this.getSelectedGenres(),r=this.getDeletedGenres();if(1===e)a.push(i);else if(0===e||-1===e){var o=a.indexOf(i);o>-1&&a.splice(o,1)}-1===e&&r.push(i),i.userPreference=e,this.data.progressValue=a.length>0?"0.5":"0",this.data.noUpdates=a.length<=0&&r.length<=0,this.data.needsMoreSelections=a.length<=0},e.exports=i},{"../../../../util":267,"../../../base":72,itml:317}],37:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='        <circle class="bubble" data-content-id="'+o(r(null!=t?t.id:t,t))+'" size="'+o(r(null!=t?t.userPreference:t,t))+'" x="'+o(r(null!=t?t.x:t,t))+'" y="'+o(r(null!=t?t.y:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"circle",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n            <title>"+o(r(null!=t?t.name:t,t))+"</title>\n",a=e["if"].call(t,null!=t?t.imageUri:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"        </circle>\n"},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                <img src="'+r(a(null!=t?t.imageUri:t,t))+'" width="116" height="116"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+="<title>"+o(r(null!=(a=null!=t?t.strings:t)?a.labelsHeader:a,t))+"</title>\n<subtitle>"+o(r(null!=(a=null!=t?t.strings:t)?a.labelsSubheader:a,t))+"</subtitle>\n<section ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"section",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.orderedGenres:a,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'</section>\n\n<palette id="palette">\n    <button id="resetButton" class="reset-button" disabled="'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.noUpdates:a,t))+'">'+o(r(null!=(a=null!=t?t.strings:t)?a.resetButton:a,t))+'</button>\n    <progressIndicator id="progress" value="'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.progressValue:a,t))+'">\n        <title>'+o(r(null!=(a=null!=t?t.strings:t)?a.youLabel:a,t))+"</title>\n    </progressIndicator>\n</palette>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],38:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelButton" type="link" class="align-left cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c="";return a=e["if"].call(t,null!=t?t.showCancelButton:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'\n<button id="nextButton" type="done" disabled="'+s((r=null!=(r=e.disabledSubmitState||(null!=t?t.disabledSubmitState:t))?r:l,typeof r===o?r.call(t,{name:"disabledSubmitState",hash:{},data:i}):r))+'" class="align-right next-button">'+s((e.loc||t&&t.loc||l).call(t,"FUSE.NextButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":300}],39:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".onboarding-image-treatment {\n    itml-img-treatment: onboarding-saturated;\n}"},useData:!0})},{"hbsfy/runtime":300}],40:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),o=r.loc,l=t("./title.hbs"),s=i.controller.DocumentController,c=t("./element"),u=t("../../common/traits/tab_component"),h=r.pubSub,d=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[],t.name=o.loc("FUSE.Account"),this.controller=new c,t.controllers.push(this.controller),s.call(this,t,e),u.call(this),h.subscribe("serviceChange",this.handleServiceChanged.bind(this)),this.setNavigationBarUI(),this.addEventListener("appear",this.controller.handleAppear.bind(this.controller)),this.addEventDelegates(this.controller,["handleOnboardingDone"]),this.addEventDelegates(this.controller,["closeSettings"]),this.addEventDelegates(this.controller,["prepareForTabPush"]),this.addEventDelegates(this.controller,["checkLocalManifestVersion"])};r.inherit(d,s),r.inherit(d,u,!0),d.prototype.documentType="settingsTemplate",d.prototype.titleTemplate=l,d.prototype.setNavigationBarUI=function(){this.navigationBarController.buttonName=o.loc(r.account.getDSID()?"FUSE.DoneButton":"FUSE.CancelButton"),this.navigationBarController.render();var t=this.el.getElementById("doneButton");t&&t.addEventListener("select",this.handleDoneButton.bind(this))},d.prototype.handleServiceChanged=function(){this.setNavigationBarUI()},d.prototype.handleDoneButton=function(){this.dispatchEvent(new a("closeSettings"))},e.exports=d},{"../../../util":267,"../../common/traits/tab_component":93,"./element":41,"./title.hbs":51,itml:317}],41:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),o=r.loc,l=r.account,s=i.controller.MultiElementController,c=t("../../common").traits.EventMap,u=t("../../common").traits.TabComponent,h=t("../../common").traits.DataProvider,d=t("../../base").style,p=t("./style.hbs"),m=t("./template.hbs"),f=r.pubSub,g=t("../onboarding/genre"),b=t("../subscribe"),v=t("./following"),y=t("./profile"),w=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new d({styleTemplate:p})),t.events=t.events||[],t.events.push("select"),this.strings={subscribeLabel:o.loc("FUSE.Settings.Subscribe.Label"),subscribeFooter:o.loc("FUSE.Settings.Subscribe.Footer"),tuneYourTasteLabel:o.loc("FUSE.Settings.TuneYourTaste.Label"),followingLabel:o.loc("FUSE.Settings.Following.Label"),findArtistsToFollowLabel:o.loc("FUSE.Settings.FindArtistsToFollow.Label"),managedAccountHeader:o.loc("FUSE.Settings.ManagedAccounts.Header"),signOutLabel:o.loc("FUSE.Settings.SignOut.Label"),accountSummaryLabel:o.loc("FUSE.ViewAppleId"),appleIdLabel:o.loc("FUSE.SignIn.AppleId.Label"),passwordLabel:o.loc("FUSE.SignIn.Password.Label"),appleIdPlaceholder:o.loc("FUSE.SignIn.AppleIdPlaceholder"),requiredPlaceholder:o.loc("FUSE.SignIn.RequiredPlaceholder"),signIn:o.loc("FUSE.SignInButton"),forgotAppleId:o.loc("FUSE.SignIn.ForgotAppleId")},this.setTemplateData(),this.setNetworkDependentTemplateData(),s.call(this,t,e),c.call(this,t),u.call(this),f.subscribe("serviceChange",this.handleServiceChanged.bind(this)),f.subscribe("networkChange",this.handleNetworkChange.bind(this)),r.extend(this.onSelect,{"tune-taste-action":this.handleTuneYourTaste.bind(this),"subscribe-action":this.handleSubscribeAction.bind(this),"following-action":this.handleFollowingAction.bind(this),"follow-recommendations-action":this.handleFollowRecommendationsAction.bind(this),"profile-action":this.handleProfileAction.bind(this),"managed-accounts-action":this.handleManagedAccountsAction.bind(this),"family-button":this.handleFamilyAction.bind(this),"sign-out-button":this.handleSignOutAction.bind(this),"account-summary-button":this.handleAccountSummaryAction.bind(this),"network-error-action":this.showGenericNetworkWarningDialog.bind(this),"forgot-apple-id-button":this.handleForgotAppleId.bind(this)}),this.model=new h({offlineWarningEnabled:!1}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.DSID&&l.isConnectEnabledForStorefront()&&(this.getFollowersCount(),this.getProfilePermissions())};r.inherit(w,s),r.inherit(w,c,!0),r.inherit(w,u,!0),w.prototype.template=m,w.prototype.setTemplateData=function(){this.DSID=l.getDSID();var t=l.isAppleMusicEnabledForStorefront(),e=l.isConnectEnabledForStorefront(),n=!1;if(t){var i=itms.eligibilityForService({service:"AppleMusic"});n=i&&i.subscribed}this.showTuneTasteRow=n,this.showSubscriptionUpsellRow=t&&!n,this.showFamilySettingsRow=t,this.showProfileEditingRow=e,this.showFollowersRow=e,this.showManagedArtistsRow=e},w.prototype.setNetworkDependentTemplateData=function(){this.setIsOffline(),"undefined"==typeof this.accountActionClassName&&(this.accountActionClassName={}),this.accountActionClassName.tuneTasteClassAction=this.getRowActionClassName("tune-taste-action"),this.accountActionClassName.subscribeAction=this.getRowActionClassName("subscribe-action"),this.accountActionClassName.profileAction=this.getRowActionClassName("profile-action"),this.accountActionClassName.familyAction=this.getRowActionClassName("family-button"),this.accountActionClassName.accountSummaryAction=this.getRowActionClassName("account-summary-button"),this.accountActionClassName.followingAction=this.getRowActionClassName("following-action"),this.accountActionClassName.followRecommendationsAction=this.getRowActionClassName("follow-recommendations-action")},w.prototype.setIsOffline=function(){this.offline=r.network.isOffline()},w.prototype.getIsOffline=function(){return this.setIsOffline(),this.offline},w.prototype.getRowActionClassName=function(t){return this.getIsOffline()?"network-error-action":t},w.prototype.getFollowersCount=function(){var t=r.urls.build("followerCount",{user:itms.accountInfo.DSID});this.model.fetchData({method:"GET",url:t,success:this.followersCountDataSuccess.bind(this),failure:this.followersCountDataFailure.bind(this)}),this.loadingFollowers=!0},w.prototype.followersCountDataSuccess=function(t){this.loadingFollowers=!1;var e=t;if(e){var n=e.count;(!this.followersData||this.followersData&&n!==this.followersData.count)&&(this.followersData={count:n,isFollowingArtists:n>0},this.render())}},w.prototype.followersCountDataFailure=function(t,e,n){this.loadingFollowers=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.render()},w.prototype.handleAppear=function(){!this.loadingFollowers&&this.DSID&&this.updateFollowOnAppear&&(this.updateFollowOnAppear=!1,this.getFollowersCount("appear"))},w.prototype.getProfilePermissions=function(){if(r.network.isOnline()){var t=r.urls.build("profilePermissions",{user:itms.accountInfo.DSID});this.model.fetchData({url:t,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})}},w.prototype.createView=function(t){this.data=t;var e,n,i=[],a=t.permissions;for(e=0;e<a.length;e++){n=a[e];var r=n.entityId,o=this.model.lookupContent(r,this.processContent.bind(this));i.push(o)}return i},w.prototype.handleFailedFetch=function(t,e){this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},w.prototype.processContent=function(t){var e=r.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:{type:"product"}}),n=t;return n[t.kind]=!0,e&&(n.image=e.image,n.hero=e.hero),n},w.prototype.handleDataReady=function(t){this.loading=!1,r.keypath(t,"detail.view")&&(this.viewModel={},this.viewModel.managedArtists=t.detail.view),this.render()},w.prototype.handleTuneYourTaste=function(t){var e=new g;r.metrics.track(e,{tabIdentifier:"onboarding_genre",entityType:TabBar.selectedTab.identifier});var n=t.target.ownerDocument.navigationDocument;e.addEventListener("handleOnboardingDone",this.handleOnboardingDone.bind(this)),n.pushDocument(e.el)},w.prototype.handleOnboardingDone=function(){f.publish("setSelectedTab","for_you"),this.dispatchEvent(new a("closeSettings"))},w.prototype.handleSubscribeAction=function(){var t=new b;this.addEventDelegates(t,["tabPush","checkLocalManifestVersion"]),t.addEventListener("handleSubscribeDone",this.handleSubscriptionSuccess.bind(this)),modal.pushDocument(t.el,{}),t.initManifestVersionCheck()},w.prototype.handleSubscriptionSuccess=function(){modal.popDocument()},w.prototype.handleFollowingAction=function(t){var e=new v;this.addEventDelegates(e,["tabPush"]);var n=t.target.ownerDocument.navigationDocument;n.pushDocument(e.el),this.updateFollowOnAppear=!0},w.prototype.handleFollowRecommendationsAction=function(t){var e=t.target.ownerDocument.navigationDocument,n={dataType:"connect_recommendations",navigationDocument:e};this.dispatchEvent(new a("tabPush",{detail:n})),this.updateFollowOnAppear=!0},w.prototype.handleProfileAction=function(t){var e=new y,n=t.target.ownerDocument.navigationDocument;n.pushDocument(e.el)},w.prototype.handleManagedAccountsAction=function(t){var e=t.target.getAttribute("data-content-id"),n=this.model.lookup(e);if(n){var i=r.tabs.getTab("connect")||TabBar.selectedTab,o={data:n,dataType:"profile_page",navigationDocument:i.navigationDocument},l={switchToTab:!0,tab:i};this.dispatchEvent(new a("prepareForTabPush",{detail:l})),this.dispatchEvent(new a("closeSettings")),this.dispatchEvent(new a("tabPush",{detail:o}))}},w.prototype.handleFamilyAction=function(t){var e=t.state;"none"===e?openURL("prefs:root=CASTLE&aaaction=setupFamily"):("empty"===e||"complete"===e)&&openURL("prefs:root=CASTLE")},w.prototype.handleSignOutAction=function(){itms.signOut()},w.prototype.handleAccountSummaryAction=function(){
var t=r.urls.modifyAccount();t&&(t=t.replace("https","music"),openURL(t))},w.prototype.handleForgotAppleId=function(){openURL(o.loc("FUSE.ForgotAppleId.Url"))},w.prototype.handleServiceChanged=function(){this.setTemplateData(),this.render()},w.prototype.handleNetworkChange=function(){this.setNetworkDependentTemplateData(),this.render()},w.prototype.artworkMap={product:{xs:[32,32],s:[32,32],m:[32,32],l:[32,32],xl:[32,32]}},w.prototype.showGenericNetworkWarningDialog=function(){var t={data:{type:"error",title:o.loc("FUSE.Error.YoureOffline"),subtitle:o.loc("FUSE.Error.YoureOffline.Generic"),buttons:[{title:o.loc("OK")}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};f.publish("showModal",{detail:t})},e.exports=w},{"../../../util":267,"../../base":72,"../../common":80,"../onboarding/genre":35,"../subscribe":58,"./following":42,"./profile":46,"./style.hbs":49,"./template.hbs":50,itml:317}],42:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.controller.DocumentController,o=t("../../../connect/recommendations/element"),l=t("../../../common").traits.TabComponent,s=t("./template.hbs"),c=a.loc,u=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("template");var n={user:itms.accountInfo.DSID};0===t.controllers.length&&(this.controller=new o({api:"follows",pullToRefreshEnabled:!1,params:n,template:s,toggled:!0,followText:c.loc("FUSE.Settings.Following.Follow"),followingText:c.loc("FUSE.Settings.Following.Unfollow")}),t.controllers.push(this.controller)),t.name=c.loc("FUSE.Following.Title"),r.call(this,t,e),l.call(this),this.controller&&this.addEventListener("appear",this.controller.handleAppear.bind(this.controller))};a.inherit(u,r),a.inherit(u,l,!0),u.prototype.documentType="stackTemplate",e.exports=u},{"../../../../util":267,"../../../common":80,"../../../connect/recommendations/element":133,"./template.hbs":43,itml:317}],43:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    <activityIndicator>\n        <title>"+r((e.loc||t&&t.loc||a).call(t,"Fuse.Loading",{name:"loc",hash:{},data:i}))+"</title>\n    </activityIndicator>\n"},3:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(9,i),data:i}),null!=a&&(r+=a),r},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'        <title class="multi-line">'+r(a(null!=t?t.errorMessage:t,t))+"</title>\n"},6:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='        <grid>\n            <lockup class="view-recommended">\n                <title class="recommended-text one-lines">\n                    <text>'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Settings.Following.MoreArtists",{name:"loc",hash:{},data:i}))+'</text>\n                </title>\n                <decorationImage class="arrow-light" src="resource://arrow"/>\n            </lockup>\n';return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"        </grid>\n"},7:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.recommendation,"                ","recommendation",t,void 0,e,n,i),null!=a&&(r+=a),r},9:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <text />\n        <text />\n        <text />\n        <title class="no-followers-title">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Settings.Following.NoFollowers",{name:"loc",hash:{},data:i}))+'</title>\n        <text />\n        <button class="view-recommended tint-color">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Settings.Following.SuggestedArtists",{name:"loc",hash:{},data:i}))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a?a:""},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],44:[function(t,e,n){var i=t("./document"),a=t("../../../util"),r=a.pubSub,o=function(t,e){this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);r.subscribe("appRefresh",this.closeSettings.bind(this)),this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.handleNeedsContent.bind(this))};o.prototype.handleNeedsContent=function(){this.controller=new i,this.controller.addEventListener("closeSettings",this.closeSettings.bind(this)),this.controller.addEventListener("tabPush",this.eventHandlers.tabPush),this.controller.addEventListener("prepareForTabPush",this.eventHandlers.prepareForTabPush),this.controller.addEventListener("checkLocalManifestVersion",this.eventHandlers.checkLocalManifestVersion),this.nativeViewController.navigationDocument.pushDocument(this.controller.el,{animated:!1})},o.prototype.closeSettings=function(){this.nativeViewController.close()},e.exports=o},{"../../../util":267,"./document":40}],45:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.controller.MultiElementController,o=t("../../../common").traits.EventMap,l=t("../../../common").traits.TabComponent,s=t("../../../base").style,c=t("./style.hbs"),u=t("./template.hbs"),h=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new s({styleTemplate:c})),t.events=t.events||[],t.events.push("select"),r.call(this,t,e),o.call(this,t),l.call(this),this.render()};a.inherit(h,r),a.inherit(h,o,!0),a.inherit(h,l,!0),h.prototype.template=u,e.exports=h},{"../../../../util":267,"../../../base":72,"../../../common":80,"./style.hbs":47,"./template.hbs":48,itml:317}],46:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,o=i.controller.DocumentController,l=t("../../../common").traits.TabComponent,s=t("./element"),c=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new s,t.controllers.push(n)),t.name=r.loc("FUSE.Account"),o.call(this,t,e),l.call(this)};a.inherit(c,o),a.inherit(c,l,!0),c.prototype.documentType="settingsTemplate",e.exports=c},{"../../../../util":267,"../../../common":80,"./element":45,itml:317}],47:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return""},useData:!0})},{"hbsfy/runtime":300}],48:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<group>\n    <header>\n        <label class="">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Settings.EditNameWarning.U13",{name:"loc",hash:{},data:i}))+"</label>\n    </header>\n	<settingsEditProfile />\n</group>\n"},useData:!0})},{"hbsfy/runtime":300}],49:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".label-sub-title {\n  color: rgb(178,178,178);\n}\n.tune-taste-action-disabled {\n  background-color: rgba(0,0,0,0);\n}"},useData:!0})},{"hbsfy/runtime":300}],50:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l="";return a=e["if"].call(t,null!=t?t.showProfileEditingRow:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n    <group>\n",a=e["if"].call(t,null!=t?t.showTuneTasteRow:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n",a=e["if"].call(t,null!=t?t.showFollowersRow:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="    </group>\n\n",a=e["if"].call(t,null!=t?t.showSubscriptionUpsellRow:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n",a=e["if"].call(t,null!=t?t.showFamilySettingsRow:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="    \n",a=e["if"].call(t,null!=t?t.showManagedArtistsRow:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'\n    <group>\n        <lockup class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.accountSummaryAction:a,t))+'">\n            <label class="group-button">'+o(r(null!=(a=null!=t?t.strings:t)?a.accountSummaryLabel:a,t))+'</label>\n        </lockup>\n        <lockup class="sign-out-button">\n            <label class="group-button">'+o(r(null!=(a=null!=t?t.strings:t)?a.signOutLabel:a,t))+"</label>\n        </lockup>\n    </group>\n"},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <group>\n            <settingsProfile class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.profileAction:a,t))+'" data-content-kind="user_detail_page">\n                <decorationImage/>\n            </settingsProfile>\n        </group>\n'},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'            <lockup class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.tuneTasteClassAction:a,t))+'" data-content-kind="onboarding_page">\n                <label class="group-label">'+o(r(null!=(a=null!=t?t.strings:t)?a.tuneYourTasteLabel:a,t))+"</label>\n                <decorationImage />\n            </lockup>\n"},6:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.followersData:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(12,i),data:i}),null!=a&&(r+=a),r},7:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.followersData:t)?a.isFollowingArtists:a,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(10,i),data:i}),null!=a&&(r+=a),r},8:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                    <lockup class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.followingAction:a,t))+'" data-content-kind="following_page" type="tabular">\n                        <label class="group-label align-left">'+o(r(null!=(a=null!=t?t.strings:t)?a.followingLabel:a,t))+'</label>\n                        <label class="group-label align-right label-sub-title">'+o(r(null!=(a=null!=t?t.followersData:t)?a.count:a,t))+"</label>\n                        <decorationImage/>\n                    </lockup>\n"},10:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                    <lockup class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.followRecommendationsAction:a,t))+'" data-content-kind="follow-recommendations_page">\n                        <label class="group-label">'+o(r(null!=(a=null!=t?t.strings:t)?a.findArtistsToFollowLabel:a,t))+"</label>\n                        <decorationImage/>\n                    </lockup>\n"},12:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.offline:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},13:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                    <lockup class="network-error-action">\n                        <label class="group-label align-left">'+o(r(null!=(a=null!=t?t.strings:t)?a.followingLabel:a,t))+"</label>\n                        <decorationImage/>\n                    </lockup>\n"},15:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <group>\n            <lockup class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.subscribeAction:a,t))+'"><label class="group-button">'+o(r(null!=(a=null!=t?t.strings:t)?a.subscribeLabel:a,t))+'</label></lockup>\n            <footer class="footer"><label class="group-footer">'+o(r(null!=(a=null!=t?t.strings:t)?a.subscribeFooter:a,t))+"</label></footer>\n        </group>\n"},17:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <group>\n            <settingsFamily class="'+o(r(null!=(a=null!=t?t.accountActionClassName:t)?a.familyAction:a,t))+'"/>\n        </group>\n'},19:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.managedArtists:a,{name:"if",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},20:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='            <group>\n                <header>\n                    <label class="group-label">'+o(r(null!=(a=null!=t?t.strings:t)?a.managedAccountHeader:a,t))+"</label>\n                </header>\n";return a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.managedArtists:a,{name:"each",hash:{},fn:this.program(21,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"            </group>\n"},21:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='                    <lockup class="managed-accounts-action" data-content-id="'+o(r(null!=t?t.id:t,t))+'">\n';return a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'                        <label class="group-label">'+o(r(null!=t?t.name:t,t))+"</label>\n                        <decorationImage />\n                    </lockup>\n"},22:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                            <img width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" src="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+'" />\n'},24:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'    <group type="signin">\n        <group>\n            <settingsField>\n                <label>'+o(r(null!=(a=null!=t?t.strings:t)?a.appleIdLabel:a,t))+'</label>\n                <input type="email" placeholdertext="'+o(r(null!=(a=null!=t?t.strings:t)?a.appleIdPlaceholder:a,t))+'" />\n            </settingsField>\n            <settingsField>\n                <label>'+o(r(null!=(a=null!=t?t.strings:t)?a.passwordLabel:a,t))+'</label>\n                <input type="password" secure="true" placeholdertext="'+o(r(null!=(a=null!=t?t.strings:t)?a.requiredPlaceholder:a,t))+'" />\n            </settingsField>\n        </group>\n        <group>\n            <settingsField class="tint-color">\n                <input class="tint-color" type="submit" value="'+o(r(null!=(a=null!=t?t.strings:t)?a.signIn:a,t))+'" />\n            </settingsField>\n            <footer class="tint-color">\n                <button class="forgot-apple-id-button tint-color">'+o(r(null!=(a=null!=t?t.strings:t)?a.forgotAppleId:a,t))+"</button>\n            </footer>\n        </group>\n    </group>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.DSID:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(24,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],51:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"<title>"+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+'</title>\n<button action="close" id="doneButton" type="done" class="align-right done-button">'+l((a=null!=(a=e.buttonName||(null!=t?t.buttonName:t))?a:o,typeof a===r?a.call(t,{name:"buttonName",hash:{},data:i}):a))+"</button>\n"},useData:!0})},{"hbsfy/runtime":300}],52:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=t("./template.hbs"),l=t("../../common").traits.EventMap,s=t("../../base").style,c=t("./style.hbs"),u=i.controller.MultiElementController,h=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.classes.push("signin-template"),t.events=t.events||[],t.data=t.data||{},t.events.push("select"),t.styles.push(new s({styleTemplate:c})),this.showCreateAppleId=t.data.showCreateAppleId!==!1,this.strings={header:t.data.header||r.loc("FUSE.SignIn.Header"),subheader:t.data.subheader,appleIdLabel:r.loc("FUSE.SignIn.AppleId.Label"),passwordLabel:r.loc("FUSE.SignIn.Password.Label"),appleIdPlaceholder:r.loc("FUSE.SignIn.AppleIdPlaceholder"),requiredPlaceholder:r.loc("FUSE.SignIn.RequiredPlaceholder"),forgotAppleId:r.loc("FUSE.ForgotAppleId"),createAppleId:r.loc("FUSE.CreateAppleId")},u.call(this,t,e),l.call(this,t),a.extend(this.onSelect,{"forgot-apple-id-button":this.handleForgotAppleId.bind(this),"create-apple-id-button":this.handleCreateAppleId.bind(this)})};a.inherit(h,u),a.inherit(h,l,!0),h.prototype.template=o,h.prototype.handleForgotAppleId=function(){openURL(r.loc("FUSE.ForgotAppleId.Url"))},h.prototype.handleCreateAppleId=function(){var t=a.urls.signup();t&&(t=t.replace("https","music"),openURL(t))},e.exports=h},{"../../../util":267,"../../base":72,"../../common":80,"./style.hbs":54,"./template.hbs":55,itml:317}],53:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),o=t("./element"),l=i.controller.DocumentController,s=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.data=t.data||{},t.classes.push("template"),this.cancelButton=t.data.cancel||!0,this.callback=t.data.callback,this.controller=new o({data:t.data}),t.controllers.push(this.controller),l.call(this,t,e),this.navigationBarController.showCancelButton=t.data.showCancelButton!==!1,this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="transparent-bar",this.navigationBarController.render();var n=this.el.getElementsByTagName("signInTemplate").item(0);n&&n.addEventListener("change",this.handleChange.bind(this));var i=this.el.getElementById("cancel");i&&i.addEventListener("select",this.cancel.bind(this,t.data.cancelCallback))};a.inherit(s,l),s.prototype.documentType="signInTemplate",s.prototype.titleTemplate=r,s.prototype.handleChange=function(t){"success"===t.result&&(modal.documents.length>0&&modal.popDocument(),this.callback&&this.callback())},s.prototype.cancel=function(t){modal.popDocument(),t&&t.call()},e.exports=s},{"../../../util":267,"./element":52,"./title.hbs":56,itml:317}],54:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".page-header {\n	itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 27pt;\n    text-align: center;\n    max-width: 90%;\n    margin: 40 0 15 0;\n}\n.page-subheader {\n	itml-text-max-lines: 0;\n    font-weight: light;\n    color: rgba(0,0,0,0.6);\n    text-align: center;\n    max-width: 90%;\n    margin: 0 0 15 0;\n}\n.signin-control {\n    margin: 0 0 15 0;\n}\n.create-apple-id-button {\n    margin: 25 0 0 0;\n}\n.bottom-spacer {\n    margin: 0 0 55 0;\n}\n"},useData:!0})},{"hbsfy/runtime":300}],55:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'<text class="page-subheader subhead top">'+o(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+"</text>\n"},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'  <button class="tint-color footer-link caption2 create-apple-id-button bottom">'+o(r(null!=(a=null!=t?t.strings:t)?a.createAppleId:a,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(l+=a),l+='<text class="page-header top">'+o(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+"</text>\n",a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.subheader:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='<signInControl class="signin-control middle">\n  <label class="caption1-emphasized">'+o(r(null!=(a=null!=t?t.strings:t)?a.appleIdLabel:a,t))+'</label><input type="email" placeholdertext="'+o(r(null!=(a=null!=t?t.strings:t)?a.appleIdPlaceholder:a,t))+'"></input>\n  <label class="caption1-emphasized">'+o(r(null!=(a=null!=t?t.strings:t)?a.passwordLabel:a,t))+'</label><input type="text" placeholdertext="'+o(r(null!=(a=null!=t?t.strings:t)?a.requiredPlaceholder:a,t))+'" secure="true"></input>\n</signInControl>\n<button class="tint-color footer-link caption2 forgot-apple-id-button bottom">'+o(r(null!=(a=null!=t?t.strings:t)?a.forgotAppleId:a,t))+"</button>\n",a=e["if"].call(t,null!=t?t.showCreateAppleId:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'<text class="bottom-spacer bottom"></text>\n'},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],56:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancel" type="link" class="align-right">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.showCancelButton:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n\n"},useData:!0})},{"hbsfy/runtime":300}],57:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=i.event.Event,l=i.controller.MultiElementController,s=t("../../common").traits.EventMap,c=t("../../common").traits.TabComponent,u=t("../../base").style,h=t("./style.hbs"),d=t("./model"),p=t("./template.hbs"),m=a.pubSub,f=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new u({styleTemplate:h})),t.events=t.events||[],t.events.push("select"),this.data=t.data,l.call(this,t,e),s.call(this,t),c.call(this),m.subscribe("buyConfirmed",this.handleBuyConfirmed.bind(this)),m.subscribe("buyFailed",this.handleBuyFailed.bind(this))};a.inherit(f,l),a.inherit(f,s,!0),a.inherit(f,c,!0),f.prototype.template=p,f.prototype.initManifestVersionCheck=function(){this.updating=!0,this.render();var t={callback:this.initSubscribeData.bind(this)},e=new o("checkLocalManifestVersion",{detail:t});this.dispatchEvent(e)},f.prototype.initSubscribeData=function(){this.updating=!1,a.network.isOffline()?(this.errorData={errorMessage:r.loc("FUSE.Error.YoureOffline.Reconnect"),errorTitle:r.loc("FUSE.Error.YoureOffline")},this.render()):(UserInterfaceStatusController.setHasUserAcknowledgedWelcomeScreen(!0),a.extend(this.onSelect,{"open-url":this.openUrl,"subscribe-buy-button":this.buySubscription.bind(this),"learn-more-link":this.handleLearnMoreLink.bind(this),"about-music-button":this.pushLearnMore}),this.strings={subscriptionHeader:r.loc("FUSE.Subscription.Header"),subscriptionSubheader:r.loc("FUSE.Subscription.Subheader"),learnMore:r.loc("FUSE.Subscription.LearnMoreButton"),learnMoreUrl:r.loc("FUSE.Subscription.LearnMore.Url"),familySharing:r.locWithButtonSubstitution("FUSE.Subscription.FamilySharing",{FamilySharingLink:null}),subscriptionDisclosure:r.loc("FUSE.Subscription.Disclosure"),aboutMusicAndPrivacy:r.loc("FUSE.Footer.aboutAppleMusic")},this.model=new d,this.data&&this.data.offers?this.model.setData(this.data):(this.model.addEventListener("dataReady",function(){this.loading=!1,this.render()}.bind(this)),this.loading=!0,this.model.get()),this.render())},f.prototype.handleLearnMoreLink=function(){openURL(this.strings.learnMoreUrl)},f.prototype.disableActionButtons=function(t){var e,n=this.el.ownerDocument.getElementsByTagName("button"),i=0,a=n.length;for(i=0;a>i;i++)e=n.item(i),e.setAttribute("disabled",t)},f.prototype.buySubscription=function(t){var e,n=this.model.data.offersById,i=t.target.getAttribute("data-content-index");if(i&&n)if(e=n[i]&&n[i].buyParams){var r={offers:[{buyParams:e}]};itms.buy(r),this.disableActionButtons(!0)}else a.log.warn("Buy Failed: Missing buyParams data for selected offer.");else a.log.warn("Buy Failed: Missing contentId or offers data.")},f.prototype.handleBuyConfirmed=function(){itms.isCloudLibraryEnabled()||itms.setCloudLibraryEnabled(!0,!0,function(){}),a.account.isAppleMusicEnabled()||a.account.enableAppleMusic(!0),this.dispatchEvent(new o("handleSubscribeDone")),this.disableActionButtons(!1)},f.prototype.handleBuyFailed=function(){a.account.isEligibleForAppleMusic()&&this.dispatchEvent(new o("handleSubscribeDone")),this.disableActionButtons(!1)},e.exports=f},{"../../../util":267,"../../base":72,"../../common":80,"./model":59,"./style.hbs":60,"./template.hbs":61,itml:317}],58:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),o=a.pubSub,l=t("./element"),s=t("../../common").traits.TabComponent,c=i.controller.DocumentController,u=function(t,e){t=t||{},t.name="Subscribe",t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new l(t),t.controllers.push(n)),c.call(this,t,e),s.call(this),this.navigationBarController.showCancelButton=t.showCancelButton!==!1,this.navigationBarController.render(),this.controller=n,this.el.addEventListener("unload",function(){o.unsubscribe("buyConfirmed"),o.unsubscribe("buyFailed")}),this.addEventDelegates(this.controller,["handleSubscribeDone","checkLocalManifestVersion"]);var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.cancelSubscribe.bind(this))};this.addEventListener("render",i.bind(this)),i.call(this)};a.inherit(u,c),a.inherit(u,s,!0),u.prototype.documentType="panelTemplate",u.prototype.titleTemplate=r,u.prototype.cancelSubscribe=function(){modal.popDocument()},u.prototype.initManifestVersionCheck=function(){this.controller.initManifestVersionCheck()},e.exports=u},{"../../../util":267,"../../common":80,"./element":57,"./title.hbs":62,itml:317}],59:[function(t,e,n){function i(t){t=t||{},o.call(this,t)}var a=t("itml"),r=a.event.Event,o=t("../../base").model,l=t("../../../util");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.setData=function(t){this.data=this.parsePageData(t)},i.prototype.get=function(){var t={url:l.urls.getSubscriptionOffersSrv(),method:"GET",success:this.onDataSuccess.bind(this),failure:this.onDataFailed.bind(this)};l.xhr(t)},i.prototype.onDataSuccess=function(t){this.data=this.parsePageData(JSON.parse(t)),this.dispatchEvent(new r("dataReady"))},i.prototype.onDataFailed=function(t){l.log.warn("FAIL: ",t)},i.prototype.parsePageData=function(t){for(var e={monthlyOffers:[],yearlyOffers:[],offersById:{}},n=function(t,e){return t.price-e.price},i=t.offers&&t.offers.slice(0).sort(n)||[],a=0,r=0,o=0;o<i.length;o++){var l=i[o];l.dataIndex=o,l.isFamily?l.isYearly?e.yearlyOffers[r++]=l:e.monthlyOffers[a++]=l:l.isYearly?e.yearlyOffers[r++]=l:e.monthlyOffers[a++]=l,e.offersById[o]=l}return e.monthlyOffers.length&&(e.monthlyOffers[0].selected=!0),e},e.exports=i},{"../../../util":267,"../../base":72,itml:317}],60:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* subscribe */\n.page-title {\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 28pt;\n    text-align: center;\n}\n.title-footnote {\n    itml-text-max-lines: 0;\n    text-align: center;\n    color: rgba(0, 0, 0, 0.6);\n    margin: 0 0 0 0;\n}\n.learn-more-link {\n    margin: 3 0 10 0;\n}\n.subscribe-buy-button {\n    itml-text-max-lines: 0;\n    text-align: center;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: rgb(0,0,0);\n    border-radius: circle-caps;\n    padding: 15;\n    margin: 0;\n}\n.subscribe-button-spacer {\n    margin: 40 0 0 0;\n}\n.buy-button-title {\n  font-weight: bold;\n}\n.buy-button-subtitle {\n  color: rgba(0,0,0,0.6);\n}\n.button-footer-text {\n    color: rgba(0,0,0,0.6);\n    margin: 10 0 15 0;\n    itml-text-max-lines: 0;\n    text-align: center;\n}\n.disclosure-text {\n    color: rgba(0,0,0,0.6);\n    margin: 0 0 18 0;\n    itml-text-max-lines: 0;\n    text-align: center;\n}\n.about-music-button {\n    itml-text-max-lines: 0;\n    margin: 20 0 15 0;\n}\n.error-title-text {\n    margin: 0 0 10 0;\n    font-size: 28pt;\n    font-weight: light;\n    max-width: 290pt;\n    text-align: center;\n}\n.error-message-text {\n    color: rgba(0,0,0,0.6);\n    margin: 25 0 50 0;\n    max-width: 290pt;\n    text-align: center;\n}\n@media (max-width: 767pt) {\n    .max-width {\n        max-width: 88%;\n    }\n    .subscribe-buy-button {\n        itml-item-width: 100%;\n    }\n    .page-title {\n        margin: 25 0 15 0;\n    }\n}\n@media (width: 320pt) {\n    .max-width {\n        max-width: 88%;\n    }\n    .subscribe-buy-button {\n        itml-item-width: 100%;\n    }\n    .page-title {\n        margin: 18 0 15 0;\n    }\n    .subscribe-button-spacer {\n        margin: 15 0 0 0;\n    }\n    .disclosure-text {\n        margin: 0 0 8 0;\n    }\n}\n@media (width: 768pt) {\n    .max-width {\n        max-width: 240pt;\n    }\n    .subscribe-buy-button {\n        padding: 10 88 10 88;\n    }\n    .page-title {\n        margin: 80 0 20 0;\n    }\n}\n@media (width: 1024pt) {\n    .max-width {\n        max-width: 240pt;\n    }\n    .subscribe-buy-button {\n        padding: 10 88 10 88;\n    }\n    .page-title {\n        margin: 60 0 20 0;\n    }\n}"},useData:!0})},{"hbsfy/runtime":300}],61:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="	\n";return a=e["if"].call(t,null!=(a=null!=t?t.errorData:t)?a.errorTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'	    <title maxLines="0" class="error-title-text middle">'+o(r(null!=(a=null!=t?t.errorData:t)?a.errorTitle:a,t))+"</title>\n"},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'	    <subtitle maxLines="0" class="error-message-text subhead middle">'+o(r(null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,t))+"</subtitle>\n"},6:function(t,e,n,i){var a,r="\n";return a=e["if"].call(t,null!=t?t.updating:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(r+=a),r+"\n"},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'		<activityIndicator class="middle">\n		    <title>'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Updating",{name:"loc",hash:{},data:i}))+"</title>\n		</activityIndicator>\n"},9:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='		<title class="page-title max-width top">'+o(r(null!=(a=null!=t?t.strings:t)?a.subscriptionHeader:a,t))+'</title>\n		<subtitle class="title-footnote footnote max-width top">'+o(r(null!=(a=null!=t?t.strings:t)?a.subscriptionSubheader:a,t))+'</subtitle>\n		<button class="learn-more-link footnote top tint-color max-width">'+o(r(null!=(a=null!=t?t.strings:t)?a.learnMore:a,t))+"</button>\n\n";return a=e.each.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.monthlyOffers:a,{name:"each",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='		<text class="caption1 button-footer-text max-width middle">',a=r(null!=(a=null!=t?t.strings:t)?a.familySharing:a,t),null!=a&&(l+=a),l+='</text>\n\n		<text class="caption2 disclosure-text max-width bottom">',a=r(null!=(a=null!=t?t.strings:t)?a.subscriptionDisclosure:a,t),null!=a&&(l+=a),l+'</text>\n\n		<divider class="divider bottom" />\n		<button class="caption2 tint-color about-music-button max-width bottom" data-content-kind="learn_more_page" type-key="MusicAndPrivacy" push-type="sheet">'+o(r(null!=(a=null!=t?t.strings:t)?a.aboutMusicAndPrivacy:a,t))+"</button>\n"},10:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='		  <button class="';return a=e.unless.call(t,i&&i.first,{name:"unless",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' subscribe-buy-button subhead-emphasized middle" data-content-id="'+o(r(null!=t?t.id:t,t))+'" data-content-index="',a=r(null!=t?t.dataIndex:t,t),null!=a&&(s+=a),s+='" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"button",{
name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'><span class="buy-button-title">'+o(r(null!=t?t.title:t,t))+' </span><br /><span class="buy-button-subtitle caption1">'+o(r(null!=t?t.priceForDisplay:t,t))+"</span></button>\n"},11:function(t,e,n,i){return"subscribe-button-spacer"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.errorData:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(6,i),data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":300}],62:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelSheetButton" type="link" class="align-right cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.showCancelButton:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},useData:!0})},{"hbsfy/runtime":300}],63:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),o=i.controller.DocumentController,l=t("./element"),s=t("../../common").traits.TabComponent,c=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new l(t),t.controllers.push(n)),o.call(this,t,e),s.call(this),this.controller=n,t.data&&(this.inIntroMode="intro"===t.data.mode,this.inUpsellMode="upsell"===t.data.mode,this.inJSModal="js"===t.data.sheetType),this.inIntroMode?(this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="hidden",this.navigationBarController.render()):this.inUpsellMode&&this.inJSModal&&(this.navigationBarController.showCancelButton=!0,this.navigationBarController.render());var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.cancelWelcomePage.bind(this))};this.addEventListener("render",i.bind(this)),i.call(this),this.addEventDelegates(this.controller,["closeIntroPage","checkLocalManifestVersion"])};a.inherit(c,o),a.inherit(c,s,!0),c.prototype.documentType="panelTemplate",c.prototype.titleTemplate=r,c.prototype.cancelWelcomePage=function(){this.inJSModal&&(this.inUpsellMode?a.account.closePlayUpsell():modal.popDocument())},e.exports=c},{"../../../util":267,"../../common":80,"./element":64,"./title.hbs":69,itml:317}],64:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=i.controller.MultiElementController,l=t("../../common").traits.EventMap,s=t("../../common").traits.TabComponent,c=t("../../base").style,u=t("./style.hbs"),h=t("./template.hbs"),d=a.pubSub,p=t("./model"),m=t("../../account/subscribe"),f=t("../../account/carrier_bundling/account_linking"),g=t("../../account/carrier_bundling/sms_verification"),b=i.event.Event,v=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],t.events.push("select"),t.data&&(this.inIntroMode="intro"===t.data.mode,this.inUpsellMode="upsell"===t.data.mode,this.inJSModal="js"===t.data.sheetType,this.inNativeModal="native"===t.data.sheetType,this.upsellIdentifier=t.data.upsellIdentifier,this.eligibilityData=t.eligibilityData),this.welcomePageIsInModal=this.inNativeModal||this.inJSModal,this.initTemplateData(),o.call(this,t,e),l.call(this,t),s.call(this),d.subscribe("serviceChange",this.handleServiceChange.bind(this)),a.extend(this.onSelect,{"continue-button":this.openSubscriptionSheet.bind(this),"beats-subscriber-button":this.openBeatsApp,"already-subscribed":this.handleAlreadySubscribed.bind(this),"not-now-button":this.handleNotNow.bind(this),"hide-apple-music":this.handleHideAppleMusic.bind(this),"error-ok-button":this.handleErrorOkButton.bind(this)}),this.model=new p,this.model.addEventListener("dataReady",function(){this.errorData=this.model.data.userPresentableError?{errorTitle:this.model.data.userPresentableErrorTitle,errorMessage:this.model.data.userPresentableError}:null,this.render()}.bind(this)),this.model.addEventListener("dataFailed",function(t){this.loading=!1,this.errorData=t.detail?{errorTitle:t.detail.errorTitle,errorMessage:t.detail.errorMessage}:null,this.render()}.bind(this)),this.model.get(),this.addEventDelegates(this.el.ownerDocument,["replaceDocument"]),this.eligibilityData&&this.eligibilityData.data.isFinal?this.handleServiceEligibility(this.eligibilityData):d.subscribe("eligibilityCheckComplete",this.handleServiceEligibility.bind(this))};a.inherit(v,o),a.inherit(v,l,!0),a.inherit(v,s,!0),v.prototype.template=h,v.prototype.initTemplateData=function(){var t,e=a.screen.getCurrentOrientation();t="landscape"===e?a.screen.getScreenDimensions().width:a.screen.getScreenDimensions().height,this.bgImageName="resource://WelcomeBg-"+t+"h.jpg";var n=a.screen.getScreenDimensions().width>414?"60":"40";if(this.logoImageName="resource://AppleMusic-"+n+"h.png",this.strings={},this.inIntroMode)this.strings.welcomeDescriptionHeader=r.loc("FUSE.Welcome.Description.Header"),this.strings.welcomeDescription=r.loc("FUSE.Welcome.Description");else if("undefined"!=typeof this.upsellIdentifier){var i="FUSE.Upsell."+this.upsellIdentifier+".Description.Header",o="FUSE.Upsell."+this.upsellIdentifier+".Description",l=r.loc(i),s=r.loc(o);this.strings.welcomeDescriptionHeader=i===l?null:l,this.strings.welcomeDescription=o===s?null:s}(this.inIntroMode||"ForYou"===this.upsellIdentifier)&&(this.musicMode={linkName:r.loc(this.inIntroMode?"FUSE.Welcome.NotNow.Button":"FUSE.Upsell.HideAppleMusic.Button"),linkIdentifier:this.inIntroMode?"not-now-button":"hide-apple-music"});var c=[],u=itms.eligibilityForService({service:"AppleMusic"});itms.accountInfo.DSID&&"needsAuthentication"!==u.accountStatus?itms.accountInfo.DSID&&a.account.isOnCarrierBundlingNetwork()&&c.push({linkName:r.locWithMarkupTokens("FUSE.Footer.AlreadyaSubscriber.Carrier",{carrier:Telephony.providerName}),linkIdentifier:"already-subscribed"}):c.push({linkName:r.loc("FUSE.Footer.AlreadyaSubscriber"),linkIdentifier:"already-subscribed"}),itms.findApps(["com.beatsmusic.BeatsMusic"],function(t){if(t)for(var e in t)"com.beatsmusic.BeatsMusic"===e&&(this.footerLinks||(this.footerLinks=[]),this.footerLinks.push({linkName:r.loc("FUSE.Welcome.BeatsSubscriber.Button"),linkIdentifier:"beats-subscriber-button"}),this.render())}.bind(this)),c.length>0&&(this.footerLinks=c)},v.prototype.handleServiceChange=function(){a.account.isEligibleForAppleMusic()&&this.closeWelcomeModal()},v.prototype.handleServiceEligibility=function(t){a.log.warn("WELCOME handleServiceEligibility"),t=t||{};var e,n=t.eligible,i=t.data,o=this.el.ownerDocument,l=o.navigationDocument;if(d.unsubscribe("eligibilityCheckComplete"),1===n)if(i&&i.isFinal&&"unlinked"===i.carrierBundle){var s;s="true"===localStorage.getItem("Music.hasUserOpenedSubscriptionOffers")?r.locWithMarkupTokens("FUSE.CarrierBundling.AlreadySubscribed.Title",{carrierName:Telephony.providerName}):r.locWithMarkupTokens("FUSE.CarrierBundling.CarrierActivation.Title",{carrierName:Telephony.providerName}),e=new f({data:{header:s}})}else this.closeWelcomeModal();else i&&"needsVerification"===i.carrierBundle&&modal.documents.length&&modal.documents[0].navigationDocument===l&&(e=new g({data:i}));e&&modal.documents.length?l&&modal.documents[0].navigationDocument===l&&l.replaceDocument(e.el,o,{animated:!1}):e&&modal.pushDocument(e.el)},v.prototype.openSubscriptionSheet=function(t){localStorage.setItem("Music.hasUserOpenedSubscriptionOffers","true");var e=new m({data:this.model.data,showCancelButton:!this.welcomePageIsInModal});this.addEventDelegates(e,["tabPush","checkLocalManifestVersion"]),e.addEventListener("handleSubscribeDone",this.handleSubscriptionSuccess.bind(this)),this.getNavigationObject(t).pushDocument(e.el,{}),e.initManifestVersionCheck(),a.metrics.track(e,{tabIdentifier:TabBar.selectedTab.identifier,entityType:"Main"})},v.prototype.handleSubscriptionSuccess=function(){this.welcomePageIsInModal?this.closeWelcomeModal():modal.popDocument()},v.prototype.getNavigationObject=function(t){return this.welcomePageIsInModal?t.target.ownerDocument.navigationDocument:modal},v.prototype.handleAlreadySubscribed=function(t){var e,n={showCancelButton:!this.welcomePageIsInModal,showCreateAppleId:!1};a.account.isOnCarrierBundlingNetwork()?(e="carrier_verification",n.alreadySubscribed=!0):e="signin";var i={data:n,dataType:e,navigationDocument:this.getNavigationObject(t)};this.dispatchEvent(new b("tabPush",{detail:i}))},v.prototype.openBeatsApp=function(){openURL("beatsmusic://")},v.prototype.closeWelcomeModal=function(){this.inNativeModal?this.dispatchEvent(new b("closeIntroPage")):this.inUpsellMode&&this.inJSModal?a.account.closePlayUpsell():this.inJSModal&&modal.popDocument()},v.prototype.handleNotNow=function(){this.closeWelcomeModal(),this.inNativeModal&&this.userAcknowledgedWelcomeScreen()},v.prototype.handleHideAppleMusic=function(){a.account.enableAppleMusic(!1)},v.prototype.handleErrorOkButton=function(){this.inNativeModal&&this.userAcknowledgedWelcomeScreen(),this.closeWelcomeModal()},v.prototype.userAcknowledgedWelcomeScreen=function(){UserInterfaceStatusController.setHasUserAcknowledgedWelcomeScreen(!0)},e.exports=v},{"../../../util":267,"../../account/carrier_bundling/account_linking":3,"../../account/carrier_bundling/sms_verification":13,"../../account/subscribe":58,"../../base":72,"../../common":80,"./model":66,"./style.hbs":67,"./template.hbs":68,itml:317}],65:[function(t,e,n){var i=t("./document"),a=t("../../../util"),r=a.pubSub,o=function(t,e){this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);r.subscribe("appRefresh",this.closeIntroPage.bind(this)),this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.handleNeedsContent.bind(this))};o.prototype.handleNeedsContent=function(){this.controller=new i({data:{mode:"intro",sheetType:"native"}}),this.controller.addEventListener("closeIntroPage",this.closeIntroPage.bind(this)),this.controller.addEventListener("tabPush",this.eventHandlers.tabPush),this.controller.addEventListener("checkLocalManifestVersion",this.eventHandlers.checkLocalManifestVersion),this.nativeViewController.setWelcomeDocument(this.controller.el)},o.prototype.closeIntroPage=function(){this.nativeViewController.close()},e.exports=o},{"../../../util":267,"./document":63}],66:[function(t,e,n){function i(t){t=t||{},o.call(this,t),c.subscribe("networkChange",this.handleNetworkChange.bind(this))}var a=t("itml"),r=a.event.Event,o=t("../../base").model,l=t("../../../util"),s=l.loc,c=l.pubSub;i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.get=function(){var t=l.urls.getSubscriptionOffersSrv(),e={url:t,method:"GET",success:this.xhrSuccess(this.onDataSuccess).bind(this),failure:this.onDataFailed.bind(this)};l.xhr(e)},i.prototype.onDataSuccess=function(t){this.data=JSON.parse(t),this.dispatchEvent(new r("dataReady"))},i.prototype.onDataFailed=function(t){this.data={},418===t||0===t&&l.network.isOffline()?(this.data.offline=!0,this.dispatchEvent(new r("dataFailed",{detail:{errorMessage:s.loc("FUSE.Error.YoureOffline.Reconnect"),errorTitle:s.loc("FUSE.Error.YoureOffline")}}))):this.dispatchEvent(new r("dataFailed",{detail:{errorTitle:s.loc("FUSE.Error.GenericDataError")}}))},i.prototype.handleNetworkChange=function(){l.network.isOnline()?this.get():this.dispatchEvent(new r("dataFailed",{detail:{errorMessage:s.loc("FUSE.Error.YoureOffline.Reconnect"),errorTitle:s.loc("FUSE.Error.YoureOffline")}}))},e.exports=i},{"../../../util":267,"../../base":72,itml:317}],67:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".error-title-text {\n    margin: 0 0 10 0;\n    font-size: 28pt;\n    font-weight: light;\n    max-width: 290pt;\n    text-align: center;\n}\n.error-message-text {\n    color: rgba(0,0,0,0.6);\n    margin: 25 0 50 0;\n    max-width: 290pt;\n    text-align: center;\n}\n.error-ok-button {\n    border-width: 1pt;\n    border-color: tint-color;\n    border-radius: circle-caps;\n    padding: 10 100 10 100;\n}\n/* welcome */\n.welcome-bg {\n    itml-img-fill: 1;\n}\n.description-header-text {\n    itml-text-max-lines: 0;\n    text-align: center;\n    margin: 15 0 15 0;\n}\n.description-text {\n    itml-text-max-lines: 0;\n    color: rgba(0, 0, 0, 0.7);\n    text-align: center;\n    margin: 0;\n}\n.continue-button {\n    background-color: tint-color;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: rgb(255,255,255);\n    padding: 10 35 10 35;\n    margin: 35 0 0 0;\n    border-radius: circle-caps;\n}\n.music-mode-link {\n    border-width: 1pt;\n    border-color: tint-color;\n    border-radius: circle-caps;\n    color: tint-color;\n    padding: 10 25 10 25;\n}\n.link-spacer {\n    margin: 20 0 0 0;\n}\n.spacer-b-5 {\n    margin: 0 0 5 0;\n}\n.spacer-b-25 {\n    margin: 0 0 25 0;\n}\n.no-links-spacer {\n    margin: 0 0 40 0;\n}\n.divider {\n    margin: 0;\n}\n@media (max-width: 767pt) {\n    .description-header-text {\n        max-width: 75%;\n    }\n    .description-text {\n        max-width: 88%;\n    }\n    .logo-header {\n        margin: 40 0 0 0;\n    }\n    .music-mode-link {\n        margin: 15 0 40 0;\n    }\n    .button-loading-indicator {\n        margin: 77 0 81 0;\n    }\n}\n@media (max-width: 320pt) {\n    .description-header-text {\n        max-width: 75%;\n    }\n    .description-text {\n        max-width: 88%;\n    }\n    .logo-header {\n        margin: 15 0 0 0;\n    }\n    .music-mode-link {\n        margin: 15 0 20 0;\n    }\n    .button-loading-indicator {\n        margin: 77 0 61 0;\n    }\n    .continue-button {\n        margin: 20 0 0 0;\n    }\n    .link-spacer {\n        margin: 10 0 0 0;\n    }\n}\n@media (width: 768pt) {\n    .max-width {\n        max-width: 300pt;\n    }\n    .logo-header {\n        margin: 90 0 0 0;\n    }\n    .music-mode-link {\n        margin: 15 0 150 0;\n    }\n    .button-loading-indicator {\n        margin: 77 0 191 0;\n    }\n}\n\n@media (width: 1024pt) {\n    .max-width {\n        max-width: 300pt;\n    }\n    .logo-header {\n        margin: 50 0 0 0;\n    }\n    .music-mode-link {\n        margin: 15 0 55 0;\n    }\n    .button-loading-indicator {\n        margin: 77 0 96 0;\n    }\n}"},useData:!0})},{"hbsfy/runtime":300}],68:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='    <img class="logo-header top" src="'+s((r=null!=(r=e.logoImageName||(null!=t?t.logoImageName:t))?r:l,typeof r===o?r.call(t,{name:"logoImageName",hash:{},data:i}):r))+'" />\n';return a=e["if"].call(t,null!=(a=null!=t?t.errorData:t)?a.errorTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(c+=a),a=e["if"].call(t,null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(c+=a),a=e["if"].call(t,null!=t?t.inIntroMode:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'    <text class="spacer-b-25 bottom"></text>\n'},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <title maxLines="0" class="error-title-text middle">'+o(r(null!=(a=null!=t?t.errorData:t)?a.errorTitle:a,t))+"</title>\n"},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <subtitle maxLines="0" class="error-message-text subhead middle">'+o(r(null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,t))+"</subtitle>\n"},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <button class="caption2-emphasized error-ok-button middle">'+r((e.loc||t&&t.loc||a).call(t,"OK",{name:"loc",hash:{},data:i}))+"</button>\n"},8:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='    <img class="logo-header top" src="'+s((r=null!=(r=e.logoImageName||(null!=t?t.logoImageName:t))?r:l,typeof r===o?r.call(t,{name:"logoImageName",hash:{},data:i}):r))+'" />\n';return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.welcomeDescriptionHeader:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(c+=a),a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.welcomeDescription:a,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="        \n",a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.buttonText:a,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(18,i),data:i}),null!=a&&(c+=a),c+="\n",a=e["if"].call(t,null!=t?t.footerLinks:t,{name:"if",hash:{},fn:this.program(20,i),inverse:this.program(23,i),data:i}),null!=a&&(c+=a),c},9:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <text class="description-header-text max-width callout-emphasized bottom">'+o(r(null!=(a=null!=t?t.strings:t)?a.welcomeDescriptionHeader:a,t))+"</text>\n"},11:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <text class="description-text callout max-width bottom">'+o(r(null!=(a=null!=t?t.strings:t)?a.welcomeDescription:a,t))+"</text>\n"},13:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='        <button class="continue-button caption2-emphasized bottom">'+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.buttonText:a,t))+"</button>\n";return a=e["if"].call(t,null!=t?t.musicMode:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.program(16,i),data:i}),null!=a&&(l+=a),l},14:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'            <button class="'+o(r(null!=(a=null!=t?t.musicMode:t)?a.linkIdentifier:a,t))+' music-mode-link caption2-emphasized bottom">'+o(r(null!=(a=null!=t?t.musicMode:t)?a.linkName:a,t))+"</button>\n"},16:function(t,e,n,i){return'            <text class="spacer-b-25 bottom"></text>\n'},18:function(t,e,n,i){return'        <activityIndicator class="button-loading-indicator bottom" />\n'},20:function(t,e,n,i){var a,r='        <divider class="divider bottom" />\n';return a=e.each.call(t,null!=t?t.footerLinks:t,{name:"each",hash:{},fn:this.program(21,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'        <text class="spacer-b-5 bottom"></text>\n'},21:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <button class="'+o(r(null!=t?t.linkIdentifier:t,t))+' caption2 tint-color link-spacer bottom" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"button",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+">"+o(r(null!=t?t.linkName:t,t))+"</button>\n"},23:function(t,e,n,i){return'        <text class="no-links-spacer bottom"></text>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='<background>\n    <img class="welcome-bg" src="'+s((r=null!=(r=e.bgImageName||(null!=t?t.bgImageName:t))?r:l,typeof r===o?r.call(t,{name:"bgImageName",hash:{},data:i}):r))+'" />\n</background>\n';return a=e["if"].call(t,null!=t?t.errorData:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(8,i),data:i}),null!=a&&(c+=a),c},useData:!0})},{"hbsfy/runtime":300}],69:[function(t,e,n){e.exports=t(62)},{"hbsfy/runtime":300}],70:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return".template {\n    background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n.title,\n.lockup-title,\n.list-title {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";   \n}\n.subtitle,\n.lockup-subtitle,\n.lockup-subtitle-2,\n.lockup-subtitle-3,\n.lockup-line-1,\n.lockup-line-2,\n.lockup-line-3 {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,"0.4",{name:"hexToRgb",hash:{},data:i}))+";\n}\n.grid,\n.track-list,\n.track-list-ordered,\n.divider {\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,"0.2",{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.action-color {\n    itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor2:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n"},3:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n"},5:function(t,e,n,i){return"        color: rgba(0, 0, 0, 0.8);\n"},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n"},9:function(t,e,n,i){return"        itml-img-mask-color: rgb(0, 0, 0);\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="/* uber styles */\n";return a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="/* common styles */\n.divider-full {\n    itml-divider-type: full;\n}\n\n.light-art {\n    itml-img-treatment: product;\n    itml-img-fill: 1;\n}\n.dark-art {\n    itml-img-treatment: product;\n    itml-img-fill: 1;\n    border-color: rgba(255,255,255,0.15);\n}\n.radio-art {\n    itml-img-treatment: product;\n}\n\n.artist-art {\n    itml-img-treatment: artist-circle;\n    border-color: rgba(0,0,0,0.2);\n    border-width: 1px;\n}\n\n.no-content {\n    itml-align:center; \n    color: rgba(0,0,0,0.5); \n    font-weight: light;\n    itml-position:center\n}\n\n.curator-avatar {\n    itml-img-treatment: artist-circle;\n}\n\n.cover-button {\n    background-color: blurred;\n}\n\n.brick {\n    itml-img-treatment: brick;\n    border-color: rgba(0, 0, 0, 0.2);\n    padding: 16.0, 16.0, 8.0, 16.0;\n}\n\n.explict-badge {\n    color: rgb(255, 44, 85);\n    itml-img-treatment: tint;\n}\n\n.more-link {\n    color: tint-color;\n}\n\n.tint-color {\n    color: tint-color;\n}\n\n.product-divider {\n    itml-divider-type: full;\n    margin: 0;\n    itml-padding: 0pt 0pt 0pt 0pt;\n}\n\n.bottom-right {\n    itml-position: bottom-right;\n    itml-align: right;\n}\n\n.top {\n    itml-position: top;\n}\n\n.middle {\n    itml-position: center;\n}\n\n.bottom {\n    itml-position: bottom;\n}\n\n.center {\n    text-align: center;\n}\n\n.align-center {\n    itml-align: center;\n}\n\n.align-right {\n    itml-align: right;\n}\n\n.align-left {\n    itml-align: left;\n}\n\n.align-right {\n    itml-align: right;\n}\n\n.position-center {\n    itml-position: center;\n}\n\n.position-right {\n    itml-position: right;\n}\n\n.one-line {\n    itml-text-max-lines: 1;\n}\n\n.two-line {\n    itml-text-max-lines: 2;\n}\n\n.full-width {\n    itml-item-width: 100%;\n}\n\n.white {\n    color: rgb(255,255,255);\n}\n\n.black {\n    color: rgb(0,0,0);\n}\n\n.headline {\n    itml-text-style: headline;\n}\n\n.body {\n    itml-text-style: body;\n}\n\n.callout {\n    itml-text-style: callout;\n}\n\n.callout-emphasized {\n    itml-text-style: callout;\n    font-weight: bold;\n}\n\n.subhead {\n    itml-text-style: subhead;\n}\n\n.subhead-emphasized {\n    itml-text-style: subhead;\n    font-weight: bold;\n}\n\n.footnote {\n    itml-text-style: footnote;\n}\n\n.caption1 {\n    itml-text-style: caption1;\n}\n\n.caption1-emphasized {\n    itml-text-style: caption1;\n    font-weight: bold;\n}\n\n.caption2 {\n    itml-text-style: caption2;\n}\n\n.caption2-emphasized {\n    itml-text-style: caption2;\n    font-weight: bold;\n}\n\n.hidden {\n    visibility: hidden;\n}\n\n.shelf-lockup {\n    itml-padding: 0 0pt 16pt 0pt;\n    text-align: center;\n}\n\n.grid-section-header {\n    text-align: left;\n    itml-align: left;\n    background-color: rgb(255, 255, 255);\n    padding: 16.0, 16.0, 8.0, 16.0;\n    border-width: 0, 0, 0.5, 0;\n    border-color: rgba(0, 0, 0, 0.2);\n    itml-item-border-margin: 0, 0, 0, 16;\n}\n\n.grid-section-title {\n    color: rgb(102,102,102);\n    font-size: 13pt;\n}\n\n.grid-section-title {\n    color: rgb(102,102,102);\n    font-size: 13pt;\n}\n\n.hidden-bar {\n    background-color: rgba(0,0,0,0);\n    visibility: hidden;\n}\n\n.transparent-bar {\n    background-color: rgba(0,0,0,0);\n}\n\n.edge-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 7pt 0pt 0pt;\n    itml-align: center;   \n}\n\n.edge-2col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 2;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 5pt 0pt 5pt;\n    itml-align: center;\n}\n\n.edge-3col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 3;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 7pt 4pt 0pt 4pt;\n    text-align: center;\n}\n\n.edge-4col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 4;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 7pt 4pt 0pt 4pt;\n    text-align: center;\n}\n\n/* ipad 5col portrait */\n.edge-5col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 5;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 0pt 0pt 4pt;\n    itml-align: left;\n}\n\n/* ipad 6col grid landscape */\n.edge-6col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 6;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 0pt 0pt 4pt;\n    itml-align: left;\n}\n\n.border-button {\n    border-width: 1pt;\n    border-color: tint-color;\n    color: tint-color;\n}\n\n.text-shadow {\n    text-shadow: 0pt 1pt 2pt rgb(0,0,0);\n}\n\n.group-label {\n    color: rgb(0, 0, 0);\n    font-size: 16pt;\n}\n\n.group-label-disabled {\n    color: rgb(142, 142, 147);\n    font-size: 16pt;\n}\n\n.group-button {\n    color: tint-color;\n    font-size: 18pt;\n}\n\n.group-footer {\n    itml-padding: 4pt 0pt 20pt 20pt;\n    color: rgb(131, 131, 134);\n    itml-text-max-lines: 0;\n}\n\n.bold {\n    font-weight: bold;\n}\n\n.album-grid {\n    itml-position: bottom;\n    itml-padding: 0 0 0 0;\n    itml-item-width: 100%;\n    column-count: 2;\n    border-width: 1pt;\n    background-color: rgb(255,255,255);\n}\n\n.lockup-title {\n    /* TODO should be able to use itml-font-style only */\n    /* itml-font-style: caption2; */\n    font-size: 11pt;\n    font-weight: regular;\n}\n.list-title {\n    font-size: 15pt;\n    font-weight: regular;\n}\n\n.lockup-subtitle {\n    /* TODO should be able to use itml-font-style only */\n    /* itml-font-style: caption2; */\n    font-size:11pt;\n    font-weight:regular;\n    color: rgb(142,142,147);\n}\n\n.recommended-text {\n    font-size:14pt;\n    font-weight:regular;\n}\n\n.spacer {\n    border-color: rgba(0,0,0,0);\n    font-size: 24pt;\n}\n\n.gradient {\n    itml-img-treatment:radial-gradient;\n    itml-img-fill:1;\n    padding: 0pt, 0pt, 6pt, 0pt;\n}\n\n.inset {\n    itml-divider-type:inset;\n}\n\n.borderless {\n    itml-position:bottom;\n    itml-divider-type:borderless;\n    itml-item-height: 15pt;\n    border-color: rgba(0,0,0,0.0);\n    color:rgba(0,0,0,0.0);\n}\n\n.selector {\n    font-size: 17pt;\n    font-weight: medium;\n    color: tint-color;\n    itml-align: center;\n}\n\n.edge-header {\n    padding: 15pt 0pt 0pt 15pt;\n    itml-align: left;\n}\n\n.edge-title {\n    font-weight: medium;\n    itml-align: left;\n    padding: 0 0 0 0;\n    font-size: 11pt;\n    letter-spacing: 3;\n    itml-item-width: 100%;\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=a&&(r+=a),r+="}\n\n.edge-chevron {\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(r+=a),r+"}\n\n.selector-chevron {\n    margin: 2pt 0pt 0pt 3pt;\n    itml-align: center;\n}\n\n.hero-title {\n    font-weight: medium;\n    font-size: 13pt;\n    letter-spacing: 3;\n    padding: 0 0 16pt 0;\n}\n\n.hero-description {\n    itml-font-style: caption1;\n}\n\n.four-up-subtitle {\n    font-size: 9pt;\n    font-weight: medium;\n}\n\n.four-up-grid {\n    column-count: 2;\n    padding: 0pt;\n}\n.shelf-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    padding: 7pt 0 0 0;\n}\n\n.signin-button {\n    font-size: 13pt;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: tint-color;\n    padding: 10 35 10 35;\n    border-radius: circle-caps;\n}\n\n.img-fill {\n    itml-img-fill: 1;\n}\n\n@media (width: 768pt) {\n    .shelf-grid {\n        column-count: 5;\n    }\n}\n\n@media (width: 1024pt) {\n    .shelf-grid {\n        column-count: 6;\n    }\n}"},useData:!0})},{"hbsfy/runtime":300}],71:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.screen,o=i.controller.DocumentController,l=function(t,e){o.call(this,t,e);var n=this;this.el.onViewAttributesChange=function(t){if(r.setScreenDimensions({width:t.width,height:t.height}),n.handleRotation(t),n.controllers&&n.controllers.length){var e=0;for(e=0;e<n.controllers.length;e++)n.controllers[e].handleRotation&&"function"==typeof n.controllers[e].handleRotation&&n.controllers[e].handleRotation(t)}}};a.inherit(l,o),l.prototype.handleRotation=function(t){this.orientationData=t},e.exports=l},{"../../util":267,itml:317}],72:[function(t,e,n){var i={document:t("./document"),model:t("./model"),style:t("./style")};e.exports=i},{"./document":71,"./model":73,"./style":74}],73:[function(t,e,n){function i(t){t=t||{},o.call(this,t),s.call(this,t)}var a=t("itml"),r=a.event.Event,o=a.model.BaseModel,l=t("../../util"),s=t("store-platform"),c=l.screen;l.inherit(i,o,!0),l.inherit(i,s,!0),i.prototype.constructor=i,i.prototype.pageProfile="lockup",i.prototype._pageCache={},i.prototype.fetchContent=function(t){this.fetch(t)},i.prototype.cacheContent=function(t){var e=this.getStorePlatformData(t);Object.keys(e).length?this.cacheData(t.storePlatformData[this.pageProfile],this.pageProfile):l.log.warn("No [results] in storePlatformData profile: ",this.pageProfile,t)},i.prototype.getStorePlatformData=function(t){return l.keypath(t,"storePlatformData."+this.pageProfile+".results")||{}},i.prototype.setDataForSection=function(t,e){return this._pageCache=this._pageCache||{},this._pageCache[e]=t,e},i.prototype.gridMaxItems=function(){var t=c.sizeForScreenDimension(),e={xs:6,s:6,m:6,l:5,xl:6};return e[t]},i.prototype.getDataForSectionId=function(t){return this._pageCache&&this._pageCache[t]?this._pageCache[t]:void 0},i.prototype.lookupContent=function(t){return this.lookup(t)},i.prototype.xhrSuccess=function(t){var e=function(e,n){var i={xhrMetrics:n};this.dispatchEvent(new r("xhrMetrics",{detail:i})),t.apply(this,arguments)};return e},e.exports=i},{"../../util":267,itml:317,"store-platform":361}],74:[function(t,e,n){function i(t){t=t||{};var e=t.tintInfo,n=t.styleTemplate,i=a;if(i||(a=l(),i=a),e){var r=new s.color(e.bgColor);e.isDark=r.isDark(),i=l(e)}n&&(i+=n(e)),o.call(this,{style:i})}var a,r=t("itml"),o=r.model.Style,l=t("./baseStyle.hbs"),s=t("../../util");s.inherit(i,o),e.exports=i},{"../../util":267,"./baseStyle.hbs":70,itml:317}],75:[function(t,e,n){function i(t){t=t||{},o.call(this),l.call(this),this.tab=t.tab,this.name=t.name,this.navigationDocument=this.tab.navigationDocument,this.addEventListener("replaceDocument",this.replaceDocument.bind(this)),this.controller||(this.controller=this.getDocumentController()),
this.controller&&(this.setDocumentTraits(),this.addEventDelegates(this.controller,this.eventDelegates),this.pushDocument(this.controller))}var a=t("itml"),r=t("../../util"),o=a.controller.BaseController,l=a.event.EventDelegate,s=t("../loading");r.inherit(i,o),i.prototype.getDocumentController=function(){},i.prototype.eventDelegates=["tabPush","replaceDocument","checkLocalManifestVersion"],i.prototype.pushDocument=function(t){t=t||this.controller,t&&this.navigationDocument.pushDocument(t.el)},i.prototype.replaceDocument=function(t){var e=t.detail.document||this.getDocumentController();e&&(this.controller.addEventDelegates(e,this.eventDelegates),this.navigationDocument.replaceDocument(e.el,this.controller.el,{animated:!1}),this.controller=e,this.setDocumentTraits())},i.prototype.setDocumentTraits=function(){this.controller.el.documentElement.setAttribute("impressionsViewableThreshold",1e3),r.metrics.track(this.controller,{tabIdentifier:this.tab.identifier,entityType:"Main"})},i.prototype.getLoadingController=function(){return new s({name:this.name})},e.exports=i},{"../../util":267,"../loading":176,itml:317}],76:[function(t,e,n){var i=t("../../util"),a=t("../loading"),r=t("../product/document"),o=t("../profile/document"),l=t("../account/signin"),s=t("../radio/recents"),c=t("../room"),u=t("../more"),h=t("../music_video"),d=t("../grouping"),p=t("../radio/live_station"),m=t("../learn_more"),f=t("../connect/detail"),g=t("../connect/create"),b=t("../connect/recommendations"),v=t("../account/onboarding/genre"),y=t("../account/settings/following"),w=t("../account/settings/profile"),k=t("../common/dialog"),x=t("../account/subscribe"),A=t("../account/welcome/document"),C=t("../account/carrier_bundling/carrier_verification"),S=t("../account/carrier_bundling/sms_verification"),D=t("../account/carrier_bundling/account_linking"),M=t("../top_charts"),E=t("../sharing"),T=t("../for_you/document"),P=t("../radio/document"),F=t("../common/menu"),I={getControllerDocument:function(t){t=t||{};var e,n,i,r=t.detail||{},o=this.getDataType(r),l=r.data||{};if(o&&""!==o){n=this.getDocumentForType(o),i={data:l,dataType:o,stations:r.stations,event:t};for(var s in i)i[s]||delete i[s];e=new n(i)}else e=new a({data:l});return this.controller=e,e},onPageResponse:function(t){var e=t.detail.callerDocument,n=t.detail.response,a=JSON.parse(n.responseText),r=i.keypath(a,"pageData.componentName"),o=i.keypath(a,"pageData.pageTitle");if(!r){var l=e.getElementsByTagName("loadingTemplate").item(0).getAttribute("loadUrl");r=this.getDataType({url:l})}var s=this.getDocumentForType(r),c=new s({name:o,dataType:r,data:a});c?(this.controller.addEventDelegates(c,["tabPush"]),e.navigationDocument.replaceDocument(c.el,e,{animated:!1})):i.log.error("no document for type: ",r,a)},getDocumentForType:function(t){var e={recents:s,signin:l,album_page:r,product_page:r,playlist_page:r,artist_page:o,itunes_brand_page:o,profile_page:o,room_page:c,more_page:u,music_video_page:h,grouping_page:d,radio_live_station:p,learn_more_page:m,connect_detail:f,connect_create_post:g,connect_recommendations:b,onboarding_page:v,following_page:y,user_detail_page:w,dialog:k,subscribe:x,welcome_page:A,carrier_verification:C,sms_verification:S,account_linking:D,top_charts_page:M,sharing:E,for_you_page:T,menu:F,activity_page:o,radio_page:P},n={product_page:["album","song","playlist","video","music-video","uploadedVideo"],music_video_page:["musicVideo"],artist_page:["artist","iTunesBrand","brand","activity"],room_page:["room_page","multi_room_page","banner_room_page"],radio_page:["station"],connect_detail:["viewSocialActivity"]},i=e[t];if(!i)for(var a in n)n[a].indexOf(t)>-1&&(i=e[a]);return i},getDataType:function(t){var e=t.dataType||t.entityType;if(!e&&t.url){var n=t.url.match(/album|playlist|artist|brand|curator|music-video|viewSocialActivity|activity|station|post/g);e=n?n[0]:null}return e}};e.exports=I},{"../../util":267,"../account/carrier_bundling/account_linking":3,"../account/carrier_bundling/carrier_verification":8,"../account/carrier_bundling/sms_verification":13,"../account/onboarding/genre":35,"../account/settings/following":42,"../account/settings/profile":46,"../account/signin":53,"../account/subscribe":58,"../account/welcome/document":63,"../common/dialog":78,"../common/menu":81,"../connect/create":98,"../connect/detail":101,"../connect/recommendations":134,"../for_you/document":143,"../grouping":153,"../learn_more":171,"../loading":176,"../more":179,"../music_video":182,"../product/document":188,"../profile/document":198,"../radio/document":210,"../radio/live_station":213,"../radio/recents":222,"../room":226,"../sharing":246,"../top_charts":251}],77:[function(t,e,n){var i=t("itml"),a=t("./template.hbs"),r=i.controller.MultiElementController,o=t("../../../util"),l=o.loc,s=t("../traits").EventMap,c=t("../traits").TabComponent,u=function(t){t=t||{},t.data=t.data||{},t.events=t.events||[],t.events.push("select"),r.call(this,t),s.call(this,t),c.call(this,t),o.extend(this.onSelect,{"ok-button":this.handleOk,"subscribe-button":this.handleSubscribe,"reload-button":this.handleReload}),this.type=t.type,this.data=t.data||{};var e=this.data.buttons||[];if(e.length)for(var n=0;n<e.length;n++){var i=e[n];i.className&&i.callback&&(this.onSelect[i.className]=i.callback)}this.viewModel=this.createViewModel(),this.render()};o.inherit(u,r),o.inherit(u,s,!0),o.inherit(u,c,!0),u.prototype.template=a,u.prototype.createViewModel=function(){var t={};switch(this.type){default:t.title=this.data.title||"Error",t.subtitle=this.data.subtitle,t.buttons=this.data.buttons||this.createDefaultButtons()}return t},u.prototype.createDefaultButtons=function(){var t=[];t.push({title:l.loc("OK"),className:"ok-button"})},u.prototype.handleSubscribe=function(t){setTimeout(function(){var e={dataType:"subscribe",modalType:"sheet"};this.pushModal(t,e)}.bind(this),800)},u.prototype.handleOk=function(){modal.popDocument()},u.prototype.handleReload=function(){for(var t=0;t<TabBar.tabs.length;t++)TabBar.tabs[t].navigationDocument.popToRootDocument(),TabBar.tabs[t].navigationDocument.popDocument();o["native"].application.reload()},e.exports=u},{"../../../util":267,"../traits":92,"./template.hbs":79,itml:317}],78:[function(t,e,n){var i=t("itml"),a=i.controller.DocumentController,r=t("./controller"),o=t("../../../util"),l=function(t,e){t=t||{},t.suppressNavigationController=!0,t.watchedAttributes=t.watchedAttributes||[],t.watchedAttributes.push("type"),t.data=t.data||{},t.type=t.data.type||"error",t.controllers=t.controllers||[],t.controllers.length||(this.controller=new r({type:t.type,data:t.data}),t.controllers.push(this.controller)),a.call(this,t,e)};o.inherit(l,a),l.prototype.documentType="dialogTemplate",e.exports=l},{"../../../util":267,"./controller":77,itml:317}],79:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return"<title>"+o(r(null!=(a=null!=t?t.viewModel:t)?a.title:a,t))+"</title>"},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return"<description>"+o(r(null!=(a=null!=t?t.viewModel:t)?a.subtitle:a,t))+"</description>"},5:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'    <button class="'+r(a(null!=t?t.className:t,t))+'">'+r(a(null!=t?t.title:t,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e.unless.call(t,null!=(a=null!=t?t.data:t)?a.hideTitle:a,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.subtitle:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n\n",a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.buttons:a,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":300}],80:[function(t,e,n){e.exports={traits:t("./traits"),valueStore:t("./value_store")}},{"./traits":92,"./value_store":94}],81:[function(t,e,n){var i=t("itml"),a=i.controller.DocumentController,r=t("../../../util"),o=function(t,e){t=t||{},t.suppressNavigationController=!0,a.call(this,t,e)};r.inherit(o,a),o.prototype.documentType="productActionsTemplate",e.exports=o},{"../../../util":267,itml:317}],82:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"    ","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],83:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="	<contentUnavailable>\n\n		";return a=e["if"].call(t,null!=t?t.errorTitle:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.needsAuth:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n	</contentUnavailable>\n"},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'<title maxLines="0">'+r(a(null!=t?t.errorTitle:t,t))+"</title>"},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'<description maxLines="0">'+r(a(null!=t?t.errorMessage:t,t))+"</description>"},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'		    <button class="sign-in-button full-width">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.SignInButton",{name:"loc",hash:{},data:i}))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e.unless.call(t,null!=t?t.viewModel:t,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":300}],84:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <title class="list-title">'+l((a=null!=(a=e.title||(null!=t?t.title:t))?a:o,typeof a===r?a.call(t,{name:"title",hash:{},data:i}):a))+' <badge class="explict-badge" src="resource://explicit"/></title>\n'},3:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <title class="list-title">'+l((a=null!=(a=e.title||(null!=t?t.title:t))?a:o,typeof a===r?a.call(t,{name:"title",hash:{},data:i}):a))+"</title>\n"},5:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <subtitle class="lockup-line-1">'+l((a=null!=(a=e.line1||(null!=t?t.line1:t))?a:o,typeof a===r?a.call(t,{name:"line1",hash:{},data:i}):a))+"</subtitle>\n"},7:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <subtitle class="lockup-line-2">'+l((a=null!=(a=e.line2||(null!=t?t.line2:t))?a:o,typeof a===r?a.call(t,{name:"line2",hash:{},data:i}):a))+"</subtitle>\n"},9:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <subtitle class="lockup-line-3">'+l((a=null!=(a=e.line3||(null!=t?t.line3:t))?a:o,typeof a===r?a.call(t,{name:"line3",hash:{},data:i}):a))+"</subtitle>\n"},11:function(t,e,n,i){var a,r="";return a=e["if"].call(t,(a=i&&i.root)&&a.pickerMode,{name:"if",hash:{},fn:this.program(12,i),inverse:this.program(14,i),data:i}),null!=a&&(r+=a),r},12:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <button type="image" class="add-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'">\n                <img src="resource://UniversalAddCircle"/>\n                <img src="resource://UniversalActionControl"/>\n            </button>\n'},14:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <button type="image" class="action-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'">\n                <img class="action-color" src="resource://UniversalActionControl"/>\n            </button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='<lockup class="'+o(r(null!=t?t.kind:t,t))+' action-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=' disabled="'+o((e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n    '+o((e.productArtwork||t&&t.productArtwork||l).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n    \n",a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line2:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line3:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</lockup>"},useData:!0})},{"hbsfy/runtime":300}],85:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"<activityIndicator>\n    <title>"+r((e.loc||t&&t.loc||a).call(t,"Fuse.Loading",{name:"loc",hash:{},data:i}))+"</title>\n</activityIndicator>"},useData:!0})},{"hbsfy/runtime":300}],86:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return'<lockup>\n    <header>\n        <title class="no-content" maxLines="2">No Content Available</title>\n    </header>\n</lockup>'},useData:!0})},{"hbsfy/runtime":300}],87:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <img \n            class="view-profile curator-avatar" \n            data-content-id="'+o(r(null!=t?t.entityId:t,t))+'" \n            width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" \n            height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" \n            srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'">\n        </img>\n'},3:function(t,e,n,i){return'toggled="true"'},5:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return o(r((a=i&&i.root)&&a.followingText,t))},7:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return o(r((a=i&&i.root)&&a.followText,t))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='<lockup \n    class="view-profile" \n    data-content-id="'+o(r(null!=t?t.entityId:t,t))+'">\n\n';return a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='\n    <title maxLines="2" class="recommended-text view-profile" data-content-id="'+o(r(null!=t?t.entityId:t,t))+'">\n        <text>'+o(r(null!=t?t.name:t,t))+'</text>\n    </title>\n\n    <button \n        type="thin" \n        sub-type="toggle" \n        class="follow-button" \n        toggled-text="'+o(r((a=i&&i.root)&&a.followingText,t))+'" \n        non-toggled-text="'+o(r((a=i&&i.root)&&a.followText,t))+'" \n        ',a=e["if"].call(t,(a=i&&i.root)&&a.toggled,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='\n        toggle-id="'+o(r(null!=t?t.entityId:t,t))+'" \n        data-entity-id="'+o(r(null!=t?t.entityId:t,t))+'" \n        data-entity-type="'+o(r(null!=t?t.entityType:t,t))+'">\n        <title>',a=e["if"].call(t,(a=i&&i.root)&&a.toggled,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(l+=a),l+"</title>\n    </button>\n</lockup>\n<divider/>"},useData:!0})},{"hbsfy/runtime":300}],88:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},3:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+"\n"},5:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <title maxLines="2" class="lockup-title">'+l((a=null!=(a=e.title||(null!=t?t.title:t))?a:o,typeof a===r?a.call(t,{name:"title",hash:{},data:i}):a))+' <badge class="explict-badge" src="resource://explicit"/></title>\n'},7:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <title maxLines="2" class="lockup-title">'+l((a=null!=(a=e.title||(null!=t?t.title:t))?a:o,typeof a===r?a.call(t,{name:"title",hash:{},data:i}):a))+"</title>\n"},9:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <subtitle class="lockup-subtitle">'+l((a=null!=(a=e.line1||(null!=t?t.line1:t))?a:o,typeof a===r?a.call(t,{name:"line1",hash:{},data:i}):a))+"</subtitle>\n"},11:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <subtitle class="lockup-subtitle-2">'+l((a=null!=(a=e.line2||(null!=t?t.line2:t))?a:o,typeof a===r?a.call(t,{name:"line2",hash:{},data:i}):a))+"</subtitle>\n"},13:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'        <subtitle class="lockup-subtitle-3">'+l((a=null!=(a=e.line3||(null!=t?t.line3:t))?a:o,typeof a===r?a.call(t,{name:"line3",hash:{},data:i}):a))+"</subtitle>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='<lockup type="shelf" class="action-lockup shelf-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" data-content-kind="'+o(r(null!=t?t.kind:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=' disabled="'+o((e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n',a=e["if"].call(t,null!=t?t.song:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line2:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line3:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</lockup>"},useData:!0})},{"hbsfy/runtime":300}],89:[function(t,e,n){var i=function(){Object.defineProperty(this,"controllerCache",{value:{},configurable:!1,enumerable:!1,writable:!0})};i.prototype.setCachedControllerForKey=function(t,e){this.controllerCache[t]=e},i.prototype.bustCacheForKey=function(t){this.controllerCache[t]=void 0},i.prototype.getCachedControllerForKey=function(t){return this.controllerCache[t]},i.prototype.resetControllerCache=function(){this.controllerCache={}},e.exports=i},{}],90:[function(t,e,n){function i(t){t=t||{},t.pageProfile&&(this.pageProfile=t.pageProfile),this.offlineWarningEnabled=t.offlineWarningEnabled!==!1,this._pageCache={},l.call(this,t),h.call(this,t),t.data&&(this.data=t.data,this.data.storePlatformData&&this.cacheContent(this.data.storePlatformData)),this.retryRequests=[],u.subscribe("networkChange",this.handleNetworkChange.bind(this))}var a=t("itml"),r=a.utils.keypath,o=a.event.Event,l=a.model.BaseModel,s=t("../../../util"),c=s.loc,u=s.pubSub,h=t("store-platform");s.inherit(i,l,!0),s.inherit(i,h,!0),i.prototype.constructor=i,i.prototype.pageProfile="lockup",i.prototype.fetchData=function(t){this.timeNow=Date.now(),this.config=t||this.config,this.data&&this.dataSuccess(this.data,this.config),s.xhr({method:this.config.method||"GET",url:this.config.url,success:this.xhrSuccess(this.config).bind(this),failure:this.xhrFailed(this.config).bind(this)})},i.prototype.retry=function(){r(this,"config.retries")>0?(this.fetchData(),this.config.retries--):this.config.failure.call(this,{error:"too many failed attempts"})},i.prototype.xhrFailed=function(t){var e=function(e,n){if(s.log.warn("xhr failed:",e,n),e&&403===e)s.account.auth({success:this.retry.bind(this),failure:t.failure.bind(this)});else if(e&&418===e){t.retries=0;var i=this,a=parseInt(localStorage.getItem("Music.hasWarnedAboutConnection"));this.retryRequests.push(function(){this.fetchData(t)}.bind(this));var r=function(){t.failure.call(i,e,c.loc("FUSE.Error.YoureOffline.Reconnect"),c.loc("FUSE.Error.YoureOffline"))};if(!this.offlineWarningEnabled||a&&0!==a)r.call();else{localStorage.setItem("Music.hasWarnedAboutConnection","1");var o={data:{type:"error",title:c.loc("FUSE.Error.YoureOffline"),subtitle:c.loc("FUSE.Error.YoureOffline.ConnectToWifi"),buttons:[{title:c.loc("OK"),className:"done-button",callback:r}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};u.publish("showModal",{detail:o})}}else t&&t.failure.call(this,e,n)};return e},i.prototype.xhrSuccess=function(t){var e=function(e,n){var i;try{i=JSON.parse(e)}catch(a){var r=this,l=function(){t.failure.call(r,200,c.loc("FUSE.Error.AnErrorOccurred"))};"string"==typeof e&&-1===e.indexOf("plist")&&l();for(var s,h,d,p=new DOMParser,m=p.parseFromString(e,"text/xml"),f=m.getElementsByTagName("key"),g=0,b=f.length;b>g;g++)d=f.item(g),"customerTitleMessage"===d.textContent?s=d.nextSibling:"customerMessage"===d.textContent&&(h=d.nextSibling);var v={data:{type:"error",title:s&&s.textContent,subtitle:h&&h.textContent,buttons:[{title:c.loc("OK"),className:"done-button",callback:l}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};u.publish("showModal",{detail:v})}if(i){var v={xhrMetrics:n};this.dispatchEvent(new o("xhrMetrics",{detail:v})),this.dataSuccess(i,t)}}.bind(this);return e},i.prototype.dataSuccess=function(t,e){t.storePlatformData&&this.cacheContent(t.storePlatformData),this.contentIds=[],this.colorFetches=[],this.viewModel=e.success.call(this,t,e),this.viewModel||this.dispatchEvent(new o("dataFailed")),this.contentIds.length>0?this.fetchContent({profile:this.pageProfile,contentIds:this.contentIds,onSuccess:this.handleFetchSuccess.bind(this),onFailure:this.handleFetchFailed.bind(this)}):this.handleFetchSuccess()},i.prototype.handleFetchFailed=function(t){s.log.warn("content fetch from store platform failed: ",t),this.dispatchEvent(new o("dataFailed"))},i.prototype.handleFetchSuccess=function(t){if(t){var e=function(n){if(n=n instanceof Array?n:n.content||n.children)for(var i=n.length;i--;){var a=n[i].id,r=n[i].content||n[i].children;if(r)e(r);else if(a){var o=t[a];n[i].empty&&(o?n[i]="function"==typeof n[i].cb?n[i].cb(o,n[i].params):o:n.splice(i,1))}}};e(this.viewModel)}this.dispatchEvent(new o("dataReady",{detail:{view:this.viewModel}}))},i.prototype.fetchContent=function(t){this.fetch(t)},i.prototype.lookupContent=function(t,e){var n,i,a,r=t.profile||this.pageProfile;return"object"==typeof t?(i=t.id,a=t.params,n=this.lookup(i,r)):(i=t,n=this.lookup(i,r)),n?(e&&(n=e(n,a)),n):(this.contentIds.push(i),{empty:!0,id:i,cb:e,params:a})},i.prototype.cacheContent=function(t){var e=Object.keys(t);if(e.length)for(var n=0;n<e.length;n++){var i=e[n];this.cacheData(t[i],i)}else s.log.warn("No [results] in storePlatformData profile: ",this.pageProfile,t)},i.prototype.setData=function(t,e){this._pageCache[t]=e},i.prototype.getData=function(t){return this._pageCache[t]},i.prototype.handleNetworkChange=function(){if(localStorage.setItem("Music.hasWarnedAboutConnection","0"),s.network.isOnline()&&this.retryRequests.length>0)for(var t=0;t<this.retryRequests.length;t++){var e=this.retryRequests[t];e.call(this)}},e.exports=i},{"../../../util":267,itml:317,"store-platform":361}],91:[function(t,e,n){function i(t,e){e.addEventListener(t,this.handleEvent.bind(this))}var a=t("itml"),r=a.event.Event,o=a.controller.MultiElementController,l=t("../../../util"),s=l.audio,c=function(t){t=t||{};var e,n=t.events||[];e=this instanceof o?function(){n.forEach(function(t){this.elementArray.forEach(function(e){e.addEventListener&&i.call(this,t,e)},this)},this)}:function(){n.forEach(function(t){i.call(this,t,this.el)},this)},this.addEventListener("render",e.bind(this)),e.call(this),this.onSelect={"action-button":this.showActionMenu,"action-lockup":this.handleLockup},this.onHoldSelect={"action-lockup":this.showActionMenu},this.onChange={}};c.prototype.handleEvent=function(t){var e,n=t.target.getAttribute("class").split(" ");"select"===t.type?e=this.onSelect:"holdselect"===t.type?e=this.onHoldSelect:"change"===t.type&&(e=this.onChange),e&&n.forEach(function(n){var i=e[n];"function"==typeof i&&i.call(this,t)}.bind(this))},c.prototype.handleLockup=function(t){var e=t.target,n=e.getAttribute("data-content-id"),i=this.model.lookup(n);if(i){var a=i.kind||"product_page";"song"!==a&&"uploadedAudio"!==a&&"radioStation"!==a?this.pushProduct(t):"song"===a||"uploadedAudio"===a?this.playMedia(i):"radioStation"===a&&this.authAndPlay(t)}},c.prototype.authAndPlay=function(t){if(itms.accountInfo.DSID)this.playMedia(t);else{var e={header:"Sign in to listen to Radio",callback:this.playMedia.bind(this,t),showCancelButton:!0},n={data:e,dataType:"signin",navigationDocument:modal};this.dispatchEvent(new r("tabPush",{detail:n}))}},c.prototype.showActionMenu=function(t){var e=t.target.getAttribute("data-content-id"),n=this.model.lookup(e);if(n){var i=n.releaseDate||"",a=i.substring(0,i.indexOf("-")),o=[];if(n.artwork&&n.artwork.url){var s=l.artwork.getArtworkForContent({content:n});o.push(s.image)}var c={artwork:o,kind:n.kind,metadata:n};switch(n.kind){case"song":var u=n.offers[0].assets.length>0?n.offers[0].assets[0].duration:null;c.artistName=n.artistName,c.collectionName=n.collectionName,c.artistStoreID=""+n.artistId,c.collectionStoreID=n.collectionId,c.trackNumber=n.trackNumber,c.trackName=n.name,c.trackStoreID=""+n.id,c.trackDuration=u;break;default:c.albumStoreID=""+n.id,c.albumName=n.name,c.albumYear=a,c.albumGenre=n.genres&&n.genres[0]&&n.genres[0].name,c.albumItemsCount=n.trackCount,c.albumArtistName=n.artistName,c.albumArtistStoreID=""+n.artistId}var h={options:{productData:c,sourceElement:t.target},navigationDocument:modal,dataType:"menu"};this.dispatchEvent(new r("tabPush",{detail:h}))}},c.prototype.playMedia=function(t){var e,n=t;t&&t.target?e=t.target.getAttribute("data-content-id"):"string"==typeof t&&(e=t),e&&(n=this.model.lookup(e));var i={recoId:t.recoId,productData:n,selectedFilter:this.selectedFilter,playbackId:e,controllerName:this.controllerName};i.productData?s.play(i):l.log.error("playback media missing data for id",e)},e.exports=c},{"../../../util":267,itml:317}],92:[function(t,e,n){var i=t("itml"),a={ControllerCache:t("./controller_cache"),DataProvider:t("./data_provider"),TabComponent:t("./tab_component"),EventMap:t("./event_map")};e.exports=i.utils.extend(a,i.traits)},{"./controller_cache":89,"./data_provider":90,"./event_map":91,"./tab_component":93,itml:317}],93:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=["tabPush"],o=t("../../../util").pubSub,l=function(){this.controllers&&(this.addEventListener("addController",function(t){var e=t.detail.controller;this.addEventDelegates(e,r)}.bind(this)),this.addEventListener("removeController",function(t){var e=t.detail.controller;this.removeEventDelegates(e,r)}.bind(this)),this.controllers.forEach(function(t){this.addEventDelegates(t,r)},this))};l.prototype.pushProduct=function(t){var e=t.target,n=e.getAttribute("data-content-id"),i=this.model.lookup(n);if(i){var r=i.kind||"album_page",o={data:i,dataType:r,navigationDocument:e.ownerDocument.navigationDocument};this.dispatchEvent(new a("tabPush",{detail:o}))}},l.prototype.pushUrl=function(t){var e=t.target,n=e.getAttribute("data-link-url"),i=e.getAttribute("data-container-id"),r=e.getAttribute("data-link-title"),o=e.getAttribute("data-content-kind"),l=e.artworkData,s={data:{artworkData:l,id:i,url:decodeURIComponent(n),title:r},dataType:o,navigationDocument:e.ownerDocument.navigationDocument};this.dispatchEvent(new a("tabPush",{detail:s}))},l.prototype.openUrl=function(t){var e=t.target,n=e.getAttribute("data-link-url");n&&openURL(n)},l.prototype.pushMorePage=function(t){var e,n=t.target,i=n.getAttribute("data-section-id");if(e=this.model.getData?this.model.getData(i):this.model.getDataForSectionId(i)){var r={data:e,dataType:"more_page",navigationDocument:n.ownerDocument.navigationDocument};this.dispatchEvent(new a("tabPush",{detail:r}))}},l.prototype.pushModal=function(t,e){if(e){var n={data:e,dataType:e.dataType,navigationDocument:modal,options:{type:e.modalType}};o.publish("showModal",{detail:n})}},l.prototype.pushLearnMore=function(t){var e=t.target,n=e.getAttribute("type-key"),i=null,r=e.getAttribute("push-type");i="sheet"===r?modal:e.ownerDocument.navigationDocument;var o={data:{typeKey:n},dataType:"learn_more_page",navigationDocument:i};this.dispatchEvent(new a("tabPush",{detail:o}))},l.prototype.tabDelegatedEvents=r,e.exports=l},{"../../../util":267,itml:317}],94:[function(t,e,n){e.exports={}},{}],95:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),o=r.pubSub,l=t("./template.hbs"),s=t("../recommendations/element"),c=i.controller.DocumentController,u=t("../../common").traits.TabComponent,h=r.loc,d=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=t.name||h.loc("FUSE.NavBar.Connect"),this.data=t.data||{},this.controller=this.getController(this.data),t.controllers.push(this.controller),c.call(this,t,e),u.call(this),this.addEventDelegates(this.controller,["getConnectFeed","showConnectFeed"]),o.subscribe("serviceChange",this.replaceController.bind(this))};r.inherit(d,c),r.inherit(d,u,!0),d.prototype.documentType="stackTemplate",d.prototype.getController=function(){var t;return this.data.bgImageName="resource://WelcomeBg-"+r.screen.getScreenDimensions().height+"h.jpg",r.account.getDSID()?t=new s({api:"activityFeed",data:this.data,template:l}):(this.data.signin=!0,t=new s({data:this.data,template:l})),t},d.prototype.replaceController=function(){var t=this.getController();this.dispatchEvent(new a("replaceDocument",{detail:{document:t}}))},e.exports=d},{"../../../util":267,"../../common":80,"../recommendations/element":133,"./template.hbs":96,itml:317}],96:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="    \n";return a=e.unless.call(t,null!=t?t.viewModel:t,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=this.invokePartial(n.coldstart,"    ","coldstart",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.signin:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.noContent,"        ","noContent",t,void 0,e,n,i),null!=a&&(r+=a),r},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <text class="top-spacer bottom"></text>\n        <button class="signin-button bottom">\n            <text>'+r((e.loc||t&&t.loc||a).call(t,"FUSE.SignInButton",{
name:"loc",hash:{},data:i}))+'</text>\n        </button>\n        <text class="bottom-spacer bottom"></text>\n'},8:function(t,e,n,i){var a,r='        <text class="top-spacer bottom"></text>\n        <grid class="bottom">\n';return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"        </grid>\n\n"},9:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.recommendation,"                ","recommendation",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='<background>\n    <img class="welcome-bg" src="'+o(r(null!=(a=null!=t?t.data:t)?a.bgImageName:a,t))+'" />\n</background>\n';return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(l+=a),l},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],97:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),o=i.controller.MultiElementController,l=t("../partials"),s=function(t,e){t=t||{},t.data=t.data||{},t.data.id&&(this.data=t.data,l()),o.call(this,t,e)};a.inherit(s,o),s.prototype.template=r,e.exports=s},{"../../../util":267,"../partials":119,"./template.hbs":99,itml:317}],98:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),o=t("./element"),l=i.controller.DocumentController,s=function(t,e){if(t=t||{},t.classes=t.classes||[],t.controllers=t.controllers||[],t.classes.push("template"),!t.controllers.length){var n=new o({data:t.data,template:r});t.controllers.push(n)}l.call(this,t,e)};a.inherit(s,l),s.prototype.documentType="socialPostTemplate",e.exports=s},{"../../../util":267,"./element":97,"./template.hbs":99,itml:317}],99:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='    <lockup data-content-id="'+o(r(null!=(a=null!=t?t.data:t)?a.id:a,t))+'" data-content-type="'+o(r(null!=(a=null!=t?t.data:t)?a.type:a,t))+'">\n        ';return a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.image:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n        ",a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.title:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n        ",a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.subtitle:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"\n    </lockup>\n"},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'<img style="itml-img-treatment: artist-circle;" src="'+o(r(null!=(a=null!=t?t.data:t)?a.image:a,t))+'"></img>'},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return"<title>"+o(r(null!=(a=null!=t?t.data:t)?a.title:a,t))+"</title>"},6:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"<subtitle>"+o((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.data:t)?a.subtitle:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</subtitle>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.data:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":300}],100:[function(t,e,n){var i=t("../../../util"),a=t("./template.hbs"),r=t("../partials/comment.hbs"),o=t("../element"),l=t("../../common").traits.DataProvider,s=i.loc,c=function(t,e){t=t||{},t.data=t.data||{},this.postViewModel=[],this.commentsViewModel=[],this.postDetail=!0,this.post=t.data.post,this.url=t.data.url,this.id=t.data.id,this.likesData=t.data.likes||{},this.viewSocialActivity="https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSocialActivity?id=",this.controllerName="connect-detail",this.model=new l,this.model.addEventListener("dataReady",this.commentsDataReady.bind(this)),o.call(this,t,e),delete this.onSelect["view-detail"],delete this.onSelect["comment-button"],i.extend(this.onSelect,{"more-comments":this.loadMoreComments,"delete-comment":this.deleteComment}),this.url?this.fetchPost():this.id?(this.url=this.viewSocialActivity+this.id,this.fetchPost()):this.post&&(this.setPostData(this.post),this.getComments()),this.handleRenderAttempt()};i.inherit(c,o),c.prototype.template=a,c.prototype.loadMoreComments=function(){this.getComments("next")},c.prototype.getComments=function(t){var e={activity:this.post.id,limit:20},n=i.urls.comments();if(n){if("next"===t&&!this.offsetId||"next"===t&&this.lastOffSet===this.offsetId)return void(this.loading=!1);"next"===t&&this.offsetId&&(e.offsetId=this.offsetId,this.lastOffSet=this.offsetId),this.model.fetchData({method:"GET",url:n+i.query.build(e),success:this.commentsSuccess.bind(this),failure:this.commentsFailure.bind(this)})}else this.commentsDataReady()},c.prototype.commentsSuccess=function(t,e){var n=this.createViewForComments(t);return this.commentsViewModel="next"===e.eventType?i.prune(n.concat(this.commentsViewModel),function(t){return t.id}):n,this.remainingCount=this.totalComments-this.commentsViewModel.length,this.remainingCountText=s.loc("FUSE.Connect.Detail.RemaingComments",{count:this.remainingCount}),this.showCount=this.remainingCount>0,this.commentsViewModel},c.prototype.commentsFailure=function(t,e){i.log.warn("comments Request Failure: ",t),this.errorMessage=e||t.error||t.serviceError,this.commentsDataReady()},c.prototype.createViewForComments=function(t){for(var e,n=[],i=t.comments||[],a=i.length;a--;)e=this.processCommentNode(i[a]),n.push(e);return n},c.prototype.processCommentNode=function(t){var e=i.keypath(t,"owner.entityId");return itms.accountInfo.DSID===e&&(t.isOwner=!0),t.dateCreated&&(t.timeSincePost=i.date.timeSince(t.dateCreated)),t.message=decodeURIComponent(t.message),this.model.setData(t.id,t),t},c.prototype.commentsDataReady=function(t){var e=i.keypath(t,"detail.view")||[];e.length&&(this.commentsViewModel=e,this.offsetId=e[0],this.handleRenderAttempt())},c.prototype.fetchPost=function(){this.postModel=new l,this.postModel.addEventListener("dataReady",this.postDataReady.bind(this)),this.url&&this.postModel.fetchData({method:"GET",url:this.url,success:this.postSuccess.bind(this),failure:this.postFailure.bind(this)})},c.prototype.postSuccess=function(t){var e=this.createViewForPost(t);return e},c.prototype.postFailure=function(t,e){i.log.warn("Fetching post failed: ",t),this.errorMessage=e||t.error||t.serviceError,this.renderView()},c.prototype.ownerProfileSuccess=function(t){var e=t||{};this.insertOwnerProfile(e,this.postViewModel),this.ownerIds=[],this.postDataReady()},c.prototype.postDataReady=function(t){var e=i.keypath(t,"detail.view");e.length&&(this.postViewModel=e,this.post=e[0],this.getComments()),this.ownerIds.length?this.postModel.fetchContent({contentIds:this.ownerIds,profile:this.postModel.pageProfile,onSuccess:this.ownerProfileSuccess.bind(this),onFailure:this.ownerProfileSuccess.bind(this)}):(this.setPostData(this.postViewModel),this.handleRenderAttempt())},c.prototype.setPostData=function(t){var e=t instanceof Array?t:[t],n=e[0];n&&(this.post=n,this.postViewModel=e,this.totalComments=parseInt(n.commentCount,10)||0,this.hasOwnerProfile=!0,this.postActions={id:n.id,admin:!1,text:s.loc("FUSE.Connect.Detail.ReportConcern"),className:"report-concern"},this.handlePermissions(n),this.model.setData(n.id,n))},c.prototype.handleRenderAttempt=function(){this.postViewModel&&this.hasOwnerProfile&&this.renderView()},c.prototype.renderView=function(){this.loading=!1,this.render()},c.prototype.handlePermissions=function(t){for(var e=i.account.profilePermissions(),n=i.keypath(t,"owner.entityId"),a=0;a<e.length;a++){var r=e[a].entityId,o=e[a].dsId;if(n===r||n===o){this.postActions={id:t.id,admin:!0,text:s.loc("FUSE.Connect.Detail.DeletePost"),className:"delete-post"};break}}},c.prototype.comment=function(t){function e(t,e){var n=JSON.parse(e)||{};if("error"!==n.status&&t){var i=n.comment,a=c.getElementsByTagName("button")||[];this.commentsViewModel.push(i),c.setAttribute("id",i.id);for(var r=0;r<a.length;r++){var o=a.item(r);o.setAttribute("data-comment-id",i.id)}}else u&&u.removeChild(c)}var n=i.keypath(t,"target.tagName"),a=i.keypath(t,"comment")||"",o=this.postViewModel[0];if("commentTemplate"===n&&""!==a.trim()){var l={commentText:encodeURIComponent(a),target:{id:o.id,type:"activity"},owner:{id:this.userProfile.entityId,type:"user"}},s={isOwner:!0,data:o,owner:this.userProfile,message:a,timeSincePost:i.date.timeSince(Date.now())},c=i.parser.parse(r(s),this.el.ownerDocument),u=this.el.ownerDocument.getElementById("comment-section");u&&u.appendChild(c),i.xhr({method:"POST",data:l,headers:{"Content-Type":"application/json; charset=utf-8"},url:i.urls.comment(),failure:e.bind(this,!1),success:e.bind(this,!0)})}},c.prototype.deleteComment=function(t){var e=t.target.getAttribute("data-comment-id"),n=this.el.ownerDocument,a=n.getElementById(e),r=i.urls.build("deleteComment",{commentId:e});r&&(a.parentNode.removeChild(a),i.xhr({method:"POST",url:r,failure:function(t){i.log.error("deleteComment failed: ",t)},success:function(){}}))},e.exports=c},{"../../../util":267,"../../common":80,"../element":103,"../partials/comment.hbs":117,"./template.hbs":102}],101:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./element"),o=t("../../common").traits.TabComponent,l=i.controller.DocumentController,s=a.loc,c=function(t,e){t=t||{},t.data=t.data||{},t.controllers=t.controllers||[],t.name=s.loc("FUSE.NavBar.Connect"),t.watchedAttributes=["postButtonText","postPlaceholderText","scrollNewCommentToView","showKeyboard","commentAsText","myselfText","asText"],t.scrollNewCommentToView="true",t.postButtonText=s.loc("FUSE.Connect.Detail.Post"),t.postPlaceholderText=s.loc("FUSE.Connect.Detail.Comment"),t.commentAsText=s.loc("FUSE.Connect.Detail.CommentAs"),t.myselfText=s.loc("FUSE.Connect.Detail.Myself"),t.asText=s.loc("FUSE.Connect.Detail.As"),t.showKeyboard=t.data.showKeyboard,t.controllers.length||(this.controller=new r({data:t.data}),t.controllers.push(this.controller)),l.call(this,t,e),o.call(this),this.controller&&this.el.addEventListener("change",this.controller.comment.bind(this.controller))};a.inherit(c,l),a.inherit(c,o,!0),c.prototype.documentType="commentTemplate",e.exports=c},{"../../../util":267,"../../common":80,"./element":100,itml:317}],102:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,(a=(a=(a=i&&i.root)&&a.post)&&a.heroImage)&&a.bgColor,{name:"hexToRgb",hash:{},data:i}))+"; color:"+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,(a=(a=(a=i&&i.root)&&a.post)&&a.heroImage)&&a.isDark,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"        ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="\n";return a=e.unless.call(t,null!=t?t.postViewModel:t,{name:"unless",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.postViewModel:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},6:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.noContent,"            ","noContent",t,void 0,e,n,i),null!=a&&(r+=a),r},8:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.postViewModel:t,{name:"each",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n\n",a=e["if"].call(t,null!=t?t.showCount:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            <grid id="comment-section">\n',a=e.each.call(t,null!=t?t.commentsViewModel:t,{name:"each",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="            </grid>\n\n",a=e["if"].call(t,null!=t?t.postActions:t,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},9:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='                <card\n                    data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n                    class="view-detail connect-top"\n                    ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n                    ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=">\n\n",a=e["if"].call(t,null!=(a=null!=t?t.heroImage:t)?a.useArtwork:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.program(14,i),data:i}),null!=a&&(c+=a),c+='                </card>\n                <card\n                    data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n                    class="view-detail connect-bottom ',a=e["if"].call(t,i&&i.last,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='"\n                    ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n                    ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=">\n\n",a=this.invokePartial(n.post,"                    ","post",t,void 0,e,n,i),null!=a&&(c+=a),c+"                </card>\n"},10:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"'},12:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.background,"                        ","background",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.author,"                        ","author",t,void 0,e,n,i),null!=a&&(r+=a),r},14:function(t,e,n,i){var a,r=e.helperMissing,o="                        ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+="\n",a=this.invokePartial(n.author,"                        ","author",t,void 0,e,n,i),null!=a&&(o+=a),o+="                        ",a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+"\n"},16:function(t,e,n,i){return"connect-last"},18:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l="";return a=this.invokePartial(n.commentCount,"                ","commentCount",t,void 0,e,n,i),null!=a&&(l+=a),l+'                <divider style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; border-color: "+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.isDark:a,.3,{name:"getHighContrastColor",hash:{},data:i}))+';;"/>\n'},20:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.comment,"                    ","comment",t,void 0,e,n,i),null!=a&&(r+=a),r},22:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='                <divider style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; border-color: "+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.isDark:a,.3,{name:"getHighContrastColor",hash:{},data:i}))+';;"/>\n';return a=this.invokePartial(n.postActions,"                ","postActions",t,void 0,e,n,i),null!=a&&(l+=a),l},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="<stackTemplate ";return a=e["if"].call(t,(a=i&&i.root)&&a.post,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+=">\n",a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=a&&(r+=a),r+"\n</stackTemplate>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],103:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,o=i.event.Event,l=a.pubSub,s=t("./feed/template.hbs"),c=t("./style.hbs"),u=t("./partials"),h=t("../base").style,d=t("../common").traits.EventMap,p=t("../common").traits.TabComponent,m=i.controller.MultiElementController,f=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.events=t.events||[],t.styleTemplate=c,t.tintInfo=t.tintInfo||{},t.styles.push(new h(t)),t.events.push("select"),t.events.push("change"),u(),this.loading=!0,this.connectIds=[],this.ownerIds=[],m.call(this,t,e),d.call(this,t),p.call(this,t),a.extend(this.onSelect,{"open-url":this.openURL,"done-following":this["continue"],"view-mention":this.viewProfile,"view-profile":this.viewProfile,"view-product":this.pushProduct,"view-detail":this.viewDetail,"comment-button":this.viewDetail,"view-recommended":this.viewRecommended,"follow-button":this.follow,"share-button":this.share,"like-button":this.like,"play-media":this.playMedia,"play-button":this.playMedia,"signin-button":this.signIn,"delete-post":this.deletePost,"report-concern":this.reportPost}),a.account.getProfile({success:this.handleProfile.bind(this),failure:this.handleProfile.bind(this)})};a.inherit(f,m),a.inherit(f,d,!0),a.inherit(f,p,!0),f.prototype.template=s,f.prototype.handleProfile=function(t){this.userProfile=t||{}},f.prototype.handleNeedsMore=function(t){var e=a.keypath(t,"target.tagName");this.loading||"stackTemplate"!==e||this.get("next")},f.prototype.handleAppear=function(t){var e=a.keypath(t,"target.tagName");this.loading||"stackTemplate"!==e||(this.loading=!0,this.get("appear"))},f.prototype["continue"]=function(){localStorage.setItem("Music.Connect.Onboarding","complete"),this.dispatchEvent(new o("getConnectFeed"))},f.prototype.getOffsetId=function(t){var e,n,i=null;return t&&t.length&&(e=t[t.length-1],e.content&&e.content.length&&(n=e.content[e.content.length-1],n.id&&(i=n.id.replace("sa.","")))),i},f.prototype.openURL=function(t){var e=t.target.getAttribute("data-url");e&&openURL(e)},f.prototype.signIn=function(){var t={button:r.loc("FUSE.SignInButton"),header:r.loc("FUSE.Connect.SignIn.Header"),subheader:r.loc("FUSE.Connect.SignIn.SubHeader"),callback:function(){this.dispatchEvent(new o("getConnectFeed",{}))}.bind(this),showCancelButton:!0},e={data:t,dataType:"signin",navigationDocument:modal};this.dispatchEvent(new o("tabPush",{detail:e}))},f.prototype.viewDetail=function(t){var e=t.target.ownerDocument.navigationDocument,n=t.target.getAttribute("data-connect-id"),i=t.target.getAttribute("data-show-keyboard"),a="true"===i,r=this.model.getData(n);if(r){var l={data:{post:r,likes:this.likesData,showKeyboard:a},dataType:"connect_detail",navigationDocument:e};this.dispatchEvent(new o("tabPush",{detail:l}))}},f.prototype.viewProfile=function(t){function e(e){this.model.lookup(e)&&this.pushProduct(t)}var n=t.target.getAttribute("data-content-id"),i=this.model.lookup(n);i?this.pushProduct(t):this.model.fetchContent({contentIds:[n],profile:this.model.pageProfile,onSuccess:e.bind(this,n),onFailure:e.bind(this,n)})},f.prototype.viewRecommended=function(t){var e=t.target.ownerDocument.navigationDocument,n={dataType:"connect_recommendations",navigationDocument:e};this.dispatchEvent(new o("tabPush",{detail:n}))},f.prototype.follow=function(t){function e(t,e){var n=JSON.parse(e);(n&&"error"===n.status||!t)&&a.log.warn("follow request error: ",e)}var n={},i=t.target,r=!t.toggled,o=a.urls.follow(),l=a.urls.unfollow(),s=i.getAttribute("data-entity-id"),c=i.getAttribute("data-entity-type"),u=r?o:l;n[c]=s,a.xhr({method:"POST",url:u+a.query.build(n),failure:e.bind(this,!1),success:e.bind(this,!0)})},f.prototype.like=function(t){function e(t,e){var n=JSON.parse(e);(n&&"error"===n.status||!t)&&(this.likesData[l]=!i)}var n=t.target,i=!t.toggled,r=a.urls.like(),o=a.urls.unlike(),l=n.getAttribute("data-connect-id"),s=i?r:o,c={activity:l};this.likesData[l]=i,a.xhr({method:"POST",url:s+a.query.build(c),failure:e.bind(this,!1),success:e.bind(this,!0)})},f.prototype.share=function(t){a.account.hasPostPermission()?this.sharePost(t,"artist"):this.sharePost(t,"user")},f.prototype.showActionMenu=function(t){var e=t.target.getAttribute("data-connect-id"),n=this.model.getData(e);if(n){var i={data:{type:"actionSheet",hideTitle:!0,buttons:[{title:r.loc("FUSE.Connect.ActionMenu.Share"),className:"share-post",callback:this.sharePost.bind(this,t,"artist")},{title:r.loc("FUSE.Connect.ActionMenu.Post"),className:"create-post",callback:this.createPost.bind(this,t)},{title:r.loc("FUSE.CancelButton"),className:"cancel-post",callback:this.cancelPost.bind(this)}]},dataType:"dialog",navigationDocument:modal};this.dispatchEvent(new o("tabPush",{detail:i}))}},f.prototype.cancelPost=function(){modal.popDocument()},f.prototype.sharePost=function(t,e){function n(t){if(t){var e={data:{content:t,shareType:"connect-post"},dataType:"sharing",navigationDocument:modal};this.dispatchEvent(new o("tabPush",{detail:e}))}}var i=t.target.getAttribute("data-connect-id"),a=this.model.getData(i);"artist"===e?(modal.popDocument(),setTimeout(n.bind(this,a),1e3)):n.call(this,a)},f.prototype.createPost=function(t){var e=t.target.getAttribute("data-connect-id"),n=this.model.getData(e);modal.popDocument(),setTimeout(function(){if(n){var t=this.getPostDataFromPost(n),e={data:t,dataType:"connect_create_post",navigationDocument:modal};this.dispatchEvent(new o("tabPush",{detail:e}))}}.bind(this),1e3)},f.prototype.deletePost=function(t){var e=a.urls.deleteSocialPost(),n=t.target.getAttribute("data-connect-id");if(e&&n){var i={data:{title:r.loc("FUSE.Connect.Detail.DeletePostDialogTitle"),subtitle:r.loc("FUSE.Connect.Detail.DeletePostDialogMessage"),buttons:[{title:r.loc("FUSE.CancelButton"),className:"cancel-button"},{title:r.loc("FUSE.DeleteButton"),className:"delete-button",callback:this.handleDeletePostConfirm.bind(this,e,n)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};l.publish("showModal",{detail:i})}},f.prototype.handleDeletePostConfirm=function(t,e){var n={activity:e.replace("sa.","")};a.xhr({method:"POST",url:t+a.query.build(n),success:function(){},failure:function(t){a.log.error("Connect Post Delete Failure: ",t)}})},f.prototype.getPostDataFromPost=function(t){var e=t.message,n=t.owner&&t.owner.name,i=t.isAttributed&&t.admin,o=a.keypath(t,"author.image.url"),l=r.loc("FUSE.Connect.CreatePost.PostByArtist",{artist:n});i&&(l=r.loc("FUSE.Connect.CreatePost.PostByAdminFromBand",{admin:i.name,band:n}));var s={id:t.id,image:o,title:l,type:"socialActivity",subtitle:e};return s},f.prototype.getArtwork=function(t,e){t=t||{};var n={content:t},i=t;e&&(n.params={type:e}),this.artworkMap&&(n.artworkMap=this.artworkMap),this.artworkKeys&&(n.artworkKeys=this.artworkKeys);var r=a.artwork.getArtworkForContent(n);return i=a.lockup.setArtworks(t,r,this.artworkMap)},f.prototype.createViewForPost=function(t){function e(t){var e=!0;return"activity"===t.targetType&&(e=!1),e}var n,i,r=[],o=t.activities||[];if(t.activity&&o.push(t.activity),o.length)for(var l=[],s=o.length,c=0;s>c;c++){var u=o[c]||{};if(e(u)){var h=this.lookupPost(u);n=h.ownerEntityId,i&&n!==i&&(r.push({content:l}),l=[]),c===parseInt(s-1)&&(h.isLastPost=!0,l.push(h),r.push({content:l}),l=[]),l.push(h),i=n,this.connectIds.push(h.id)}else a.log.error("Connect: Missing required data for post id="+u.id)}return r},f.prototype.lookupPost=function(t){var e,n=t.target&&t.target.id;return e=n?this.model.lookupContent(n,this.processPost.bind(this,t)):this.processPost(t)},f.prototype.processPost=function(t,e){var n,i,o,l,s,c,u,h=t,d=t.owner,p=d&&d.name,m=d&&d.entityId,f=d&&d.entityType,g=this.model.lookup(m),b=t.isAttributed&&t.admin,v=t.dateCreated,y=t.target&&t.target.type||"default",w=t.artwork||{};if(h[y]=!0,h.targetType=y,v&&(h.timeSincePost=a.date.timeSince(v)),h.author={id:m,name:p,admin:!1,fullName:p},b&&(h.author.admin=!0,h.author.name=b.name,h.author.fromBand=r.loc("FUSE.Connect.Feed.FromBand",{band:p}),h.author.fullName=r.loc("FUSE.Connect.Feed.AdminFromBand",{admin:b.name,band:p})),g?(o=d.profileImage||g.latestAlbumArtwork,o&&(o=this.getArtwork({kind:"avatar",artwork:o}).image,h.author.avatar=o),c=g.latestAlbumArtwork,c&&(c=this.getArtwork({kind:"product",artwork:c}).image,h.ownerLatestAlbumImage=c),s=g.artwork,s&&(s=this.getArtwork({kind:"custom",artwork:s}).image,h.ownerArtistImage=s),l=this.getArtwork(g,"custom").uber,l&&(h.ownerUberImage=l)):this.ownerIds.push(m),l?(u=l,u.useArtwork=!0):s?(u=s,u.useArtwork=!1):c&&(u=c,u.useArtwork=!1),u&&u.bgColor&&!u.isDark){var k=new a.color(u.bgColor);u.bgColor=k.darken(.006)}if(h.heroImage=u,e){switch(n=this.getArtwork(e),i=n.artistName||n.curatorName||n.brandName||r.loc("FUSE.AppleMusic"),n.kind){case"uploadedAudio":"artist"===f&&(h.badge=n.aucType||r.loc("FUSE.Connect.Feed.FromTheArtistBadge"));break;case"playlist":n.playlistBy=r.loc("FUSE.Connect.Feed.PlayListBy",{creator:i.toUpperCase()});break;case"album":n.albumOrStationBy=r.loc("FUSE.Connect.Feed.AlbumBy",{creator:i});break;case"radioStation":n.albumOrStationBy=r.loc("FUSE.Connect.Feed.StationBy",{creator:i});break;case"default":}h.content=[n]}return w.url&&"default"===y&&(h.photo=this.getArtwork({artwork:w},"photo")),this.model.setData(h.id,h),h},f.prototype.insertOwnerProfile=function(t,e){for(var n,i,r,o,l=e||this.viewModel||[],s=t||{},c=0;c<l.length;c++)n=l[c],o=a.keypath(n,"ownerProfile.empty"),o&&(i=n.owner&&n.owner.entityId,r=s[i],r?(r=this.getArtwork(r,"social"),n.ownerProfile=r.uber||r.hero):delete n.ownerProfile,this.model.setData(n.id,n))},f.prototype.artworkKeys={follower:["follower"],avatar:["avatar"],video:["video","uploadedVideo"],custom:["custom"]},f.prototype.artworkMap={track:{xs:[60,60],s:[60,60],m:[60,60],l:[60,60],xl:[60,60]},avatar:{xs:[32,32],s:[32,32],m:[32,32],l:[32,32],xl:[32,32]},product:{xs:[88,88],s:[125,125],m:[125,125],l:[150,150],xl:[144,144]},profile:{xs:[88,88],s:[115,115],m:[125,125],l:[144,144],xl:[150,150]},photo:{crop:"bb",xs:[288,512],s:[343,609],m:[382,679],l:[318,565],xl:[318,565]},custom:{crop:"fa",xs:[320,193],s:[375,200],m:[414,240],l:[768,288],xl:[1024,288]},video:{crop:"h",xs:[320,193],s:[375,200],m:[414,240],l:[768,288],xl:[1024,288]},follower:{xs:[55,55],s:[55,55],m:[65,65],l:[65,65],xl:[65,65]}},e.exports=f},{"../../util":267,"../base":72,"../common":80,"./feed/template.hbs":106,"./partials":119,"./style.hbs":136,itml:317}],104:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),o=t("../element"),l=t("../../common").traits.DataProvider,s=t("./template.hbs"),c=function(t,e){t=t||{},o.call(this,t,e),r.extend(this.onChange,{refresh:this.handleRefresh}),this.viewModel=[],this.ownerIds=[],this.data=t.data,this.params=t.params,this.api=t.api||"activityFeed",this.isProfilePage="activities"===this.api,this.bag=r.bag(),this.likesData={},this.requestCount=0,this.connectIds=[],this.controllerName="connect-feed",this.model=new l({data:this.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.addEventListener("dataFailed",this.handleDataReady.bind(this)),this.data?(this.model.dataSuccess(this.data,{success:this.requestSuccess.bind(this),failure:this.requestFailure.bind(this)}),this.model.data&&delete this.model.data):this.get()};r.inherit(c,o),c.prototype.template=s,c.prototype.handleRefresh=function(t){var e=r.keypath(t,"target.tagName");this.loading||"pullToRefresh"!==e||(this.loading=!0,this.get("refresh"))},c.prototype.showRecommendations=function(t){var e={data:t};this.dispatchEvent(new a("showRecommendations",{detail:e}))},c.prototype.get=function(t){var e=this.params||{},n=r.bag(),i=r.keypath(n,"musicConnect."+this.api);this.requestInFlight=!0,"next"===t&&this.lastId&&(e.offsetId=this.lastId),"refresh"===t&&this.firstId&&(e.refreshOffsetId=this.firstId),i&&(i+=r.query.build(e)),e.limit=10,this.model.fetchData({retries:1,method:"GET",eventType:t,url:i,success:this.requestSuccess.bind(this),failure:this.requestFailure.bind(this)})},c.prototype.requestSuccess=function(t,e){if(this.errorTitle=null,this.errorMessage=null,this.viewModel&&!t.activities)return this.endOfFeed=!0,this.viewModel;if(t.recommendedEntities)return this.showRecommendations(t),[];var n=this.createViewForPost(t);return this.viewModel="next"===e.eventType&&this.viewModel?this.viewModel.concat(n):n,this.isProfilePage&&this.getLikesData(),t.likesData&&(this.likesData=r.extend(this.likesData,t.likesData)),this.viewModel},c.prototype.requestFailure=function(t,e,n){r.log.error(this.api+" Request Failure: ",t),this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.renderView()},c.prototype.getLikesData=function(){if(this.connectIds&&0!==this.connectIds.length){var t={activities:this.connectIds.join(",")},e=r.urls.build("likesData",t);r.xhr({method:"GET",url:e,success:this.likesDataSuccess.bind(this),failure:this.likesDataFailure.bind(this)})}},c.prototype.likesDataSuccess=function(t){var e=JSON.parse(t);e.likesData&&(this.likesData=r.extend(this.likesData,e.likesData)),this.connectIds=[],this.hasLikesData=!0,this.handleRender()},c.prototype.likesDataFailure=function(t){r.log.warn("likesData Request Failure: ",t),this.connectIds=[],this.hasLikesData=!0,this.handleRender()},c.prototype.handleAdditionalFetch=function(t){t=t||{},this.insertOwnerProfile(t,this.viewModel),this.ownerIds=[],this.handleDataReady()},c.prototype.handleDataReady=function(t){this.loading=!1,r.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.ownerIds.length?this.model.fetchContent({contentIds:this.ownerIds,profile:this.model.pageProfile,onSuccess:this.handleAdditionalFetch.bind(this),onFailure:this.handleAdditionalFetch.bind(this)}):(this.hasConnectFeed=!0,this.handleRender())},c.prototype.handleRender=function(){(this.isProfilePage&&this.hasConnectFeed||!this.isProfilePage)&&(this.offsetId=this.getOffsetId(this.viewModel),this.hasConnectFeed=!1,this.hasLikesData=!1,this.renderView())},c.prototype.renderView=function(){this.loading=!1,this.render()},e.exports=c},{"../../../util":267,"../../common":80,"../element":103,"./template.hbs":106,itml:317}],105:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./element"),o=i.controller.DocumentController,l=t("../../common").traits.TabComponent,s=t("./title.hbs"),c=i.event.Event,u=a.loc,h=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=t.name||u.loc("FUSE.NavBar.Connect"),t.classes=t.classes||[],t.classes.push("template"),t.controllers.length||(this.controller=new r({data:t.data}),t.controllers.push(this.controller)),o.call(this,t,e),l.call(this),this.controller&&(this.el.addEventListener("needsmore",this.controller.handleNeedsMore.bind(this.controller)),this.addEventDelegates(this.controller,["showRecommendations","getConnectFeed"])),a.account.getSubscriptionStatus({service:"AppleMusic"},function(){this.navigationBarController.hasPostPermission=a.account.hasPostPermission(),this.navigationBarController.render(),a.account.hasAdminPermission()&&a.account.getProfilePermissions({success:this.handlePermissions.bind(this),failure:this.handlePermissions.bind(this)});var t=this.el.getElementById("post");t&&t.addEventListener("select",this.createPost.bind(this))}.bind(this))};a.inherit(h,o),a.inherit(h,l,!0),h.prototype.documentType="stackTemplate",h.prototype.titleTemplate=s,h.prototype.handlePermissions=function(t){this.permissions=t||[]},h.prototype.createPost=function(){var t={dataType:"connect_create_post",navigationDocument:modal};this.dispatchEvent(new c("tabPush",{detail:t}))},e.exports=h},{"../../../util":267,"../../common":80,"./element":104,"./title.hbs":107,itml:317}],106:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),
null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"    ","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="\n";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r="\n";return a=e.unless.call(t,(a=i&&i.root)&&a.isProfilePage,{name:"unless",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,i&&i.last,{name:"if",hash:{},fn:this.program(27,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},7:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='        <card\n            data-connect-id="'+o(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'"\n            class="view-detail connect-top"\n            ';return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.heroImage:a,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n            ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n\n",a=e["if"].call(t,null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.heroImage:a)?a.useArtwork:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.program(12,i),data:i}),null!=a&&(s+=a),s+"        </card>\n"},8:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.heroImage:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"'},10:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.background,"                ","background",null!=(a=null!=t?t.content:t)?a[0]:a,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.author,"                ","author",null!=(a=null!=t?t.content:t)?a[0]:a,void 0,e,n,i),null!=a&&(r+=a),r},12:function(t,e,n,i){var a,r=e.helperMissing,o="                ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+="\n",a=this.invokePartial(n.author,"                ","author",null!=(a=null!=t?t.content:t)?a[0]:a,void 0,e,n,i),null!=a&&(o+=a),o+="                ",a=(e.margin||t&&t.margin||r).call(t,"0pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+"\n"},14:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='            <card\n                data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n                class="view-detail connect-bottom ';return a=e["if"].call(t,i&&i.last,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='"\n                ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n                ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=">\n\n",a=e.unless.call(t,i&&i.first,{name:"unless",hash:{},fn:this.program(19,i),inverse:this.program(21,i),data:i}),null!=a&&(c+=a),a=this.invokePartial(n.post,"                ","post",t,void 0,e,n,i),null!=a&&(c+=a),c+="            </card>\n",a=e.unless.call(t,i&&i.last,{name:"unless",hash:{},fn:this.program(24,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c},15:function(t,e,n,i){return"connect-last"},17:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"'},19:function(t,e,n,i){var a,r=e.helperMissing,o="                    ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+="\n",a=this.invokePartial(n.author,"                    ","author",t,void 0,e,n,i),null!=a&&(o+=a),o},21:function(t,e,n,i){var a,r="";return a=e["if"].call(t,(a=i&&i.root)&&a.isProfilePage,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},22:function(t,e,n,i){var a,r=e.helperMissing,o="                        ";return a=(e.margin||t&&t.margin||r).call(t,"16pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+="\n",a=this.invokePartial(n.author,"                        ","author",t,void 0,e,n,i),null!=a&&(o+=a),o},24:function(t,e,n,i){var a,r='                <divider class="post-divider" ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(25,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"/>\n"},25:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; border-color:"+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.3,{name:"getHighContrastColor",hash:{},data:i}))+';"'},27:function(t,e,n,i){var a,r="";return a=e.unless.call(t,(a=i&&i.root)&&a.endOfFeed,{name:"unless",hash:{},fn:this.program(28,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},28:function(t,e,n,i){var a,r="";return a=e.unless.call(t,(a=i&&i.root)&&a.isProfilePage,{name:"unless",hash:{},fn:this.program(29,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},29:function(t,e,n,i){return'                    <activityIndicator class="bottom-loader"></activityIndicator>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<pullToRefresh class="refresh"/>\n\n';return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],107:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'    <button type="imageText" id="post" class="post-button align-right"><img class="social-icon" src="resource://post" width="13" height="19" /></button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c="<title>"+s((r=null!=(r=e.name||(null!=t?t.name:t))?r:l,typeof r===o?r.call(t,{name:"name",hash:{},data:i}):r))+"</title>\n";return a=e["if"].call(t,null!=t?t.hasPostPermission:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c},useData:!0})},{"hbsfy/runtime":300}],108:[function(t,e,n){var i=t("./feed"),a=t("./coldstart"),r=t("./low_signal"),o=t("../base/tab"),l=t("../common").traits.DataProvider,s=t("../../util"),c=s.loc,u=function(t){t=t||{},this.model=new l,this.name=t.name||c.loc("FUSE.NavBar.Connect"),this.eventDelegates.push("getConnectFeed","showRecommendations","showConnectFeed","showLowSignalView"),this.controller=itms.accountInfo.DSID?this.getLoadingController():this.getConnectColdstartController(),o.call(this,t),this.addEventListener("getConnectFeed",this.getConnectFeed.bind(this)),this.addEventListener("showRecommendations",this.showRecommendations.bind(this)),this.addEventListener("showConnectFeed",this.showConnectFeed.bind(this)),this.addEventListener("showLowSignalView",this.showLowSignalView.bind(this)),itms.accountInfo.DSID&&this.makeConnectFeedRequest()};s.inherit(u,o),u.prototype.getConnectFeedController=function(t){return new i({name:this.name,data:t})},u.prototype.getConnectColdstartController=function(t){return new a({name:this.name,data:t})},u.prototype.getConnectLowSignalController=function(t){return new r({name:this.name,data:t})},u.prototype.showRecommendations=function(t){var e=s.keypath(t,"detail.data");if(e){var n=this.getConnectColdstartController(e);this.replaceDocument({detail:{document:n}})}},u.prototype.showLowSignalView=function(t){var e=s.keypath(t,"detail.data"),n=this.getConnectLowSignalController(e);this.replaceDocument({detail:{document:n}})},u.prototype.showConnectFeed=function(t){var e=s.keypath(t,"detail.data");if(e){var n=this.getConnectFeedController(e);this.replaceDocument({detail:{document:n}})}},u.prototype.getConnectFeed=function(){var t=this.getLoadingController();this.replaceDocument({detail:{document:t}}),this.makeConnectFeedRequest()},u.prototype.makeConnectFeedRequest=function(){var t=s.urls.build("activityFeed",{limit:10});this.model.fetchData({url:t,method:"GET",success:this.requestComplete.bind(this),failure:this.requestFailure.bind(this)})},u.prototype.requestComplete=function(t){this.errorTitle=null,this.errorMessage=null;var e,n=localStorage.getItem("Music.Connect.Onboarding"),i=t||{};return e=i.activities?this.getConnectFeedController(i):i.recommendedEntities?"complete"===n?this.getConnectLowSignalController(i):this.getConnectColdstartController(i):this.getConnectFeedController(),this.replaceDocument({detail:{document:e}}),[]},u.prototype.requestFailure=function(t,e,n){s.log.error("Connect Activity Request Failure: ",t),this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.controller.render()},e.exports=u},{"../../util":267,"../base/tab":75,"../common":80,"./coldstart":95,"./feed":105,"./low_signal":109}],109:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("../recommendations/element"),o=i.controller.DocumentController,l=t("../../common").traits.TabComponent,s=t("./template.hbs"),c=a.loc,u=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=t.name||c.loc("FUSE.NavBar.Connect");var n=t.data||{};n.bgImageName="resource://WelcomeBg-"+a.screen.getScreenDimensions().height+"h.jpg",t.controllers.length||(this.controller=new r({data:n,template:s}),t.controllers.push(this.controller)),o.call(this,t,e),l.call(this),this.addEventDelegates(this.controller,["getConnectFeed"])};a.inherit(u,o),a.inherit(u,l,!0),u.prototype.documentType="panelTemplate",e.exports=u},{"../../../util":267,"../../common":80,"../recommendations/element":133,"./template.hbs":110,itml:317}],110:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='<background>\n    <img class="welcome-bg" src="'+o(r(null!=(a=null!=t?t.data:t)?a.bgImageName:a,t))+'" />\n</background>\n';return a=this.invokePartial(n.coldstartStatus,"","coldstartStatus",t,void 0,e,n,i),null!=a&&(l+=a),a=this.invokePartial(n.coldstartCTA,"","coldstartCTA",t,void 0,e,n,i),null!=a&&(l+=a),l},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],111:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        <img\n            disabled="true"\n            class="curator-avatar"\n            width="'+o(r(null!=(a=null!=(a=null!=t?t.author:t)?a.avatar:a)?a.width:a,t))+'"\n            height="'+o(r(null!=(a=null!=(a=null!=t?t.author:t)?a.avatar:a)?a.height:a,t))+'"\n            srcset="'+o(r(null!=(a=null!=(a=null!=t?t.author:t)?a.avatar:a)?a.url:a,t))+" "+o(r(null!=(a=null!=(a=null!=t?t.author:t)?a.avatar:a)?a.dpr:a,t))+'" />\n'},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='        <title\n            class="author-text owner-name"\n            data-content-id="'+o(r(null!=(a=null!=t?t.author:t)?a.id:a,t))+'"\n            ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='\n            maxLines="',a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.admin:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(l+=a),l+='"\n            >'+o(r(null!=(a=null!=t?t.author:t)?a.name:a,t)),a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.admin:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"</title>\n"},4:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';"'},6:function(t,e,n,i){return"2"},8:function(t,e,n,i){return"1"},10:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return"<br/>"+o(r(null!=(a=null!=t?t.author:t)?a.fromBand:a,t))},12:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <button><text\n            class="author-text time-since-post"\n            ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n            >",a=e["if"].call(t,null!=t?t.viewCount:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+s((r=null!=(r=e.timeSincePost||(null!=t?t.timeSincePost:t))?r:l,typeof r===o?r.call(t,{name:"timeSincePost",hash:{},data:i}):r))+"</text></button>\n"},13:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.4,{name:"getHighContrastColor",hash:{},data:i}))+';"'},15:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return l((a=null!=(a=e.viewCount||(null!=t?t.viewCount:t))?a:o,typeof a===r?a.call(t,{name:"viewCount",hash:{},data:i}):a))+" "+l((e.loc||t&&t.loc||o).call(t,"FUSE.Connect.Feed.PostViews",{name:"loc",hash:{},data:i}))+" &#8226; "},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='<lockup\n    selectable="true"\n    class="view-profile author-lockup"\n    data-content-id="'+o(r(null!=(a=null!=t?t.author:t)?a.id:a,t))+'"\n    ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n\n",a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.avatar:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.author:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.timeSincePost:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</lockup>\n\n"},useData:!0})},{"hbsfy/runtime":300}],112:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda;return'<background>\n    <img\n        class="gradient"\n        style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n        srcset="'+o(l(null!=(a=null!=t?t.heroImage:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.heroImage:t)?a.dpr:a,t))+'"\n        width="'+o(l(null!=(a=null!=t?t.heroImage:t)?a.width:a,t))+'"\n        height="'+o(l(null!=(a=null!=t?t.heroImage:t)?a.height:a,t))+'"/>\n</background>'},useData:!0})},{"hbsfy/runtime":300}],113:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; background-color: "+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='<badge\n    class="badge"\n    text="'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.badge:t,{name:"toUpperCase",hash:{},data:i}))+'"\n    ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+">\n</badge>\n"},useData:!0})},{"hbsfy/runtime":300}],114:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l="";return a=this.invokePartial(n.coldstartStatus,"","coldstartStatus",t,void 0,e,n,i),null!=a&&(l+=a),l+'<title class="coldstart-title top">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Connect.ColdStart.Title",{name:"loc",hash:{},data:i}))+'</title>\n\n<subtitle class="coldstart-subtitle bottom">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.Connect.ColdStart.SubTitle",{name:"loc",hash:{},data:i}))+"</subtitle>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],115:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<title class="lowsignal-title top">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.LowSignal.TitleLine1",{name:"loc",hash:{},data:i}))+"<br/>"+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.LowSignal.TitleLine2",{name:"loc",hash:{},data:i}))+'</title>\n<text class="lowsignal-subtitle bottom">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.LowSignal.SubTitleLine1",{name:"loc",hash:{},data:i}))+"<br/>"+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.LowSignal.SubTitleLine2",{name:"loc",hash:{},data:i}))+'</text>\n<button class="lowsignal-link-button bottom">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.LowSignal.SeeWhoYouAreFollowing",{name:"loc",hash:{},data:i}))+'</button>\n<text class="bottom-spacer bottom"></text>'},useData:!0})},{"hbsfy/runtime":300}],116:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<filterBar class="follow-bar" pin="1">\n    <text class="align-left">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.ColdStart.Status",{name:"loc",hash:{},data:i}))+'</text>\n    <button class="done-following align-right tint-color">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.ColdStart.DoneButton",{name:"loc",hash:{},data:i}))+"</button>\n</filterBar>\n"},useData:!0})},{"hbsfy/runtime":300}],117:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,(a=(a=(a=i&&i.root)&&a.post)&&a.heroImage)&&a.isDark,{name:"getHighContrastColor",hash:{},data:i}))+';"'},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return"@"+o(r(null!=(a=null!=t?t.owner:t)?a.handle:a,t))},5:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,(a=(a=(a=i&&i.root)&&a.post)&&a.heroImage)&&a.isDark,.7,{name:"getHighContrastColor",hash:{},data:i}))+';"'},7:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,o=e.helperMissing;return'        <actions>\n            <button\n                data-comment-id="'+r(a(null!=t?t.id:t,t))+'"\n                class="delete-comment"\n                >'+r((e.loc||t&&t.loc||o).call(t,"FUSE.Connect.Detail.DeleteSwipe",{name:"loc",hash:{},data:i}))+"</button>\n        </actions>\n"},9:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,o=e.helperMissing;return'        <actions>\n            <button\n                data-comment-id="'+r(a(null!=t?t.id:t,t))+'"\n                class="report-comment"\n                >'+r((e.loc||t&&t.loc||o).call(t,"FUSE.Connect.Detail.ReportSwipe",{name:"loc",hash:{},data:i}))+"</button>\n        </actions>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='<lockup id="'+o(r(null!=t?t.id:t,t))+'" class="comment-lockup">\n    <spacer/>\n    <spacer/>\n    ';return a=(e.margin||t&&t.margin||l).call(t,"2pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+='\n    <title\n        data-content-id="'+o(r(null!=(a=null!=t?t.owner:t)?a.entityId:a,t))+'"\n        class="comment-title view-profile"\n        ',a=e["if"].call(t,(a=(a=i&&i.root)&&a.post)&&a.heroImage,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n        ><b>"+o(r(null!=(a=null!=t?t.owner:t)?a.name:a,t))+"</b> ",a=e["if"].call(t,null!=(a=null!=t?t.owner:t)?a.handle:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="</title>\n    ",a=(e.margin||t&&t.margin||l).call(t,"3pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+='\n    <text\n        maxLines="20"\n        class="comment-text"\n        ',a=e["if"].call(t,(a=(a=i&&i.root)&&a.post)&&a.heroImage,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n        >"+o(r(null!=t?t.message:t,t))+'</text>\n\n    <spacer />\n    <label\n        class="comment-time"\n        ',a=e["if"].call(t,(a=(a=i&&i.root)&&a.post)&&a.heroImage,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n        >"+o(r(null!=t?t.timeSincePost:t,t))+"</label>\n\n",a=e["if"].call(t,null!=t?t.isOwner:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(s+=a),s+="    ",a=(e.margin||t&&t.margin||l).call(t,"2pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+"\n</lockup>\n\n"},useData:!0})},{"hbsfy/runtime":300}],118:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'<lockup class="more-comments">\n    <header>\n        <title class="comment-count">\n            <text id="count">'+l((a=null!=(a=e.remainingCountText||(null!=t?t.remainingCountText:t))?a:o,typeof a===r?a.call(t,{name:"remainingCountText",hash:{},data:i}):a))+"</text>\n        </title>\n    </header>\n</lockup>"},useData:!0})},{"hbsfy/runtime":300}],119:[function(t,e,n){var i=t("itml").utils.Handlebars,a={background:t("./background.hbs"),coldstart:t("./coldstart.hbs"),coldstartCTA:t("./coldstart_cta.hbs"),coldstartStatus:t("./coldstart_status.hbs"),comment:t("./comment.hbs"),post:t("./post.hbs"),author:t("./author.hbs"),badge:t("./badge.hbs"),message:t("./message.hbs"),social:t("./social.hbs"),track:t("./track.hbs"),playlist:t("./playlist.hbs"),product:t("./product.hbs"),profile:t("./profile.hbs"),video:t("./video.hbs"),photo:t("./photo.hbs"),postActions:t("./post_actions.hbs"),uploadedAudio:t("./uploaded_audio.hbs"),uploadedVideo:t("./uploaded_video.hbs"),commentCount:t("./comment_count.hbs"),editorialLockup:t("./lockup-editorial.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./author.hbs":111,"./background.hbs":112,"./badge.hbs":113,"./coldstart.hbs":114,"./coldstart_cta.hbs":115,"./coldstart_status.hbs":116,"./comment.hbs":117,"./comment_count.hbs":118,"./lockup-editorial.hbs":120,"./message.hbs":121,"./photo.hbs":122,"./playlist.hbs":123,"./post.hbs":124,"./post_actions.hbs":125,"./product.hbs":126,"./profile.hbs":127,"./social.hbs":128,"./track.hbs":129,"./uploaded_audio.hbs":130,"./uploaded_video.hbs":131,"./video.hbs":132,itml:317}],120:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return"view-profile"},3:function(t,e,n,i){return"action-lockup"},5:function(t,e,n,i){return'selectable="true"'},7:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.background:t)?a.bgColorComplement:a,{name:"hexToRgb",hash:{},data:i}))+';"'},9:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'data-connect-id="'+l((a=null!=(a=e.connectId||(null!=t?t.connectId:t))?a:o,typeof a===r?a.call(t,{name:"connectId",hash:{},data:i}):a))+'"'},11:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,"","curator-avatar",{name:"productArtwork",hash:{},data:i}))+"\n"},13:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.track:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.program(16,i),data:i}),null!=a&&(r+=a),r},14:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"            "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},16:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"            "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+"\n"},18:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <title\n            class="editorial-title"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"\n            >"+s((r=null!=(r=e.title||(null!=t?t.title:t))?r:l,typeof r===o?r.call(t,{name:"title",hash:{},data:i}):r))+"</title>\n"},19:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';"'},21:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"\n            >"+s((r=null!=(r=e.line1||(null!=t?t.line1:t))?r:l,typeof r===o?r.call(t,{name:"line1",hash:{},data:i}):r))+"</subtitle>\n"},22:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},24:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"\n            >"+s((r=null!=(r=e.line2||(null!=t?t.line2:t))?r:l,typeof r===o?r.call(t,{name:"line2",hash:{},data:i}):r))+"</subtitle>\n"},26:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"\n            >"+s((r=null!=(r=e.line3||(null!=t?t.line3:t))?r:l,typeof r===o?r.call(t,{name:"line3",hash:{},data:i}):r))+"</subtitle>\n"},28:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"\n            >"+o((e.getYearFromDate||t&&t.getYearFromDate||r).call(t,null!=t?t.date:t,{name:"getYearFromDate",hash:{},data:i}))+"</subtitle>\n"},30:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"\n            >"+o((e.first||t&&t.first||r).call(t,null!=t?t.list:t,{name:"first",hash:{},data:i}))+"</subtitle>\n"},32:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l='        <badge\n            class="badge"\n            text="'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.badge:t,{name:"toUpperCase",hash:{},data:i}))+'"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(33,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+">\n        </badge>\n"},33:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; background-color: "+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},35:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='        <button\n            type="image"\n            selectable="true"\n            big-hit="true"\n            data-content-id="'+o(r(null!=t?t.id:t,t))+'"\n            class="editorial-button action-button">\n            <img\n                class="editorial-button-image"\n                ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(36,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'\n                src="resource://UniversalActionControl">\n            </img>\n        </button>\n'},36:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="itml-img-mask-color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},38:function(t,e,n,i,a){var r,o='        <button\n            type="image"\n            big-hit="true"\n            class="editorial-button view-profile">\n            <img\n                class="editorial-button-image"\n                ';return r=e["if"].call(t,null!=t?t.background:t,{name:"if",hash:{},fn:this.program(39,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+'\n                src="resource://chevronRight">\n            </img>\n        </button>\n'},39:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="itml-img-mask-color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[1]?a[1].background:a[1])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c='\n<lockup\n    type="editorial"\n    class="editorial-lockup ';return r=e["if"].call(t,null!=t?t.profile:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.program(3,i,a),data:i}),null!=r&&(c+=r),c+='"\n    data-content-id="'+l(o(null!=t?t.id:t,t))+'"\n    ',r=e["if"].call(t,null!=t?t.selectable:t,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n    ",r=e["if"].call(t,null!=(r=null!=t?t.background:t)?r.bgColorComplement:r,{name:"if",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n    ",r=e["if"].call(t,null!=t?t.connectId:t,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n    ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+=">\n\n",r=e["if"].call(t,null!=t?t.profile:t,{name:"if",hash:{},fn:this.program(11,i,a),inverse:this.program(13,i,a),data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(18,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(21,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.line2:t,{name:"if",hash:{},fn:this.program(24,i,a),
inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.line3:t,{name:"if",hash:{},fn:this.program(26,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.date:t,{name:"if",hash:{},fn:this.program(28,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.list:t,{name:"if",hash:{},fn:this.program(30,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.badge:t,{name:"if",hash:{},fn:this.program(32,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.track:t,{name:"if",hash:{},fn:this.program(35,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n\n",r=e["if"].call(t,null!=t?t.profile:t,{name:"if",hash:{},fn:this.program(38,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"\n</lockup>"},useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],121:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'"0"'},3:function(t,e,n,i){return'"10"'},5:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o="<text\n    maxLines=";return a=e["if"].call(t,(a=i&&i.root)&&a.postDetail,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(o+=a),o+='\n    class="message-text"\n    ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="\n    >",a=(e.formatMentionsAndUrls||t&&t.formatMentionsAndUrls||r).call(t,null!=t?t.message:t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,{name:"formatMentionsAndUrls",hash:{},data:i}),null!=a&&(o+=a),o+="</text>\n",a=(e.margin||t&&t.margin||r).call(t,"4pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+"\n\n\n"},useData:!0})},{"hbsfy/runtime":300}],122:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c=this.lambda,u='<lockup\n    type="editorial"\n    selectable="true"\n    data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n    class="view-detail"\n    ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(u+=a),u+'>\n\n    <img\n        class="view-detail align-center"\n        data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        width="'+s(c(null!=(a=null!=(a=null!=t?t.photo:t)?a.image:a)?a.width:a,t))+'"\n        height="'+s(c(null!=(a=null!=(a=null!=t?t.photo:t)?a.image:a)?a.height:a,t))+'"\n        srcset="'+s(c(null!=(a=null!=(a=null!=t?t.photo:t)?a.image:a)?a.url:a,t))+" "+s(c(null!=(a=null!=(a=null!=t?t.photo:t)?a.image:a)?a.dpr:a,t))+'">\n    </img>\n</lockup>\n'},useData:!0})},{"hbsfy/runtime":300}],123:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c='    <lockup\n        class="action-lockup"\n        selectable="true"\n        data-content-id="'+l(o(null!=(r=null!=a[1]?a[1].target:a[1])?r.id:r,t))+'">\n        '+l((e.heroArtwork||t&&t.heroArtwork||s).call(t,t,{name:"heroArtwork",hash:{},data:i}))+'\n    </lockup>\n    <lockup\n        type="caption"\n        selectable="true"\n        class="action-lockup"\n        data-content-id="'+l(o(null!=(r=null!=a[1]?a[1].target:a[1])?r.id:r,t))+'"\n        ';return r=e["if"].call(t,null!=(r=null!=a[1]?a[1].heroImage:a[1])?r.bgColorComplement:r,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n        ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+='>\n        <title\n            class="caption-title playlist-title lockup-subtitle"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n            >"+l((e.capitalize||t&&t.capitalize||s).call(t,null!=t?t.name:t,{name:"capitalize",hash:{},data:i}))+'</title>\n\n        <subtitle\n            maxLines="1"\n            class="caption-subtitle playlist-subtitle lockup-subtitle"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"\n            >"+l(o(null!=t?t.playlistBy:t,t))+'</subtitle>\n\n        <button\n            type="play"\n            class="play-button cover-button editorial-button"\n            data-content-id="'+l(o(null!=t?t.id:t,t))+'">\n            <title>'+l((e.loc||t&&t.loc||s).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n        </button>\n    </lockup>\n"},2:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.bgColorComplement:r,{name:"hexToRgb",hash:{},data:i}))+';"'},4:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,{name:"getHighContrastColor",hash:{},data:i}))+';"'},6:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],124:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a;return a=this.invokePartial(n.photo,"","photo",t,void 0,e,n,i),null!=a?a:""},3:function(t,e,n,i){var a;return a=this.invokePartial(n.track,"","track",t,void 0,e,n,i),null!=a?a:""},5:function(t,e,n,i){var a;return a=this.invokePartial(n.product,"","product",t,void 0,e,n,i),null!=a?a:""},7:function(t,e,n,i){var a;return a=this.invokePartial(n.playlist,"","playlist",t,void 0,e,n,i),null!=a?a:""},9:function(t,e,n,i){var a;return a=this.invokePartial(n.profile,"","profile",t,void 0,e,n,i),null!=a?a:""},11:function(t,e,n,i){var a;return a=this.invokePartial(n.video,"","video",t,void 0,e,n,i),null!=a?a:""},13:function(t,e,n,i){var a;return a=this.invokePartial(n.uploadedVideo,"","uploadedVideo",t,void 0,e,n,i),null!=a?a:""},15:function(t,e,n,i){var a;return a=this.invokePartial(n.uploadedAudio,"","uploadedAudio",t,void 0,e,n,i),null!=a?a:""},17:function(t,e,n,i){var a,r=e.helperMissing,o="    ";return a=(e.margin||t&&t.margin||r).call(t,"2",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+"\n"},19:function(t,e,n,i){var a,r=e.helperMissing,o="    ";return a=(e.margin||t&&t.margin||r).call(t,"20pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.message,"","message",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.photo:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.track:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.song:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.album:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.radioStation:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.playlist:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.brand:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.curator:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.artist:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.genre:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.video:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.musicVideo:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.uploadedVideo:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.uploadedAudio:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=this.invokePartial(n.social,"","social",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.playlist:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.program(19,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],125:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='<button big-hit="true" data-connect-id="'+o(r(null!=(a=null!=t?t.postActions:t)?a.id:a,t))+'"\n    ';return a=e["if"].call(t,null!=(a=null!=t?t.post:t)?a.heroImage:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'\n    class="message-text '+o(r(null!=(a=null!=t?t.postActions:t)?a.className:a,t))+' post-action-text">'+o(r(null!=(a=null!=t?t.postActions:t)?a.text:a,t))+"</button>"},useData:!0})},{"hbsfy/runtime":300}],126:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=t?t.playlist:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.program(4,i,a),data:i}),null!=r&&(o+=r),o},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        "+r((e.heroArtwork||t&&t.heroArtwork||a).call(t,t,{name:"heroArtwork",hash:{},data:i}))+"\n"},4:function(t,e,n,i,a){var r,o="";return r=this.invokePartial(n.editorialLockup,"        ","editorialLockup",t,{product:"true",date:null!=t?t.releaseDate:t,line1:null!=t?t.albumOrStationBy:t,title:null!=t?t.name:t,connectId:null!=a[1]?a[1].id:a[1],background:null!=a[2]?a[2].heroImage:a[2],selectable:"true"},e,n,i),null!=r&&(o+=r),o},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],127:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o="";return r=this.invokePartial(n.editorialLockup,"    ","editorialLockup",t,{profile:"true",list:null!=t?t.genreNames:t,title:null!=t?t.name:t,connectId:null!=a[1]?a[1].id:a[1],background:null!=a[1]?a[1].heroImage:a[1],selectable:"true"},e,n,i),null!=r&&(o+=r),o+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],128:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="itml-img-mask-color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},3:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},5:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return" "+r((e.numberWithCommas||t&&t.numberWithCommas||a).call(t,null!=t?t.messageCount:t,{name:"numberWithCommas",hash:{},data:i}))+" "},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return" "+r((e.numberWithCommas||t&&t.numberWithCommas||a).call(t,null!=t?t.shareCount:t,{name:"numberWithCommas",hash:{},data:i}))+" "},9:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c=this.lambda,u='        <button\n            type="imagetext"\n            data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n            data-target-id="'+s(c(null!=(a=null!=t?t.target:t)?a.id:a,t))+'"\n            class="share-button social-button">\n            <text\n                class="social-text"\n                ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+"\n                >"+s((r=null!=(r=e.playCount||(null!=t?t.playCount:t))?r:l,typeof r===o?r.call(t,{name:"playCount",hash:{},data:i}):r))+"</text>\n        </button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o=this.escapeExpression,l="function",s=e.helperMissing,c=this.lambda,u='<list class="social-list">\n    <button\n        type="imagetext"\n        sub-type="toggle"\n        big-hit="true"\n        auto-increment-count="true"\n        toggled="'+o(e.lookup.call(t,(a=i&&i.root)&&a.likesData,null!=t?t.id:t,{name:"lookup",hash:{},data:i}))+'"\n        toggle-id="'+o((r=null!=(r=e.id||(null!=t?t.id:t))?r:s,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        data-connect-id="'+o((r=null!=(r=e.id||(null!=t?t.id:t))?r:s,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        class="like-button social-button">\n        <img\n            class="social-icon"\n            width="17" height="15"\n            ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='\n            src="resource://LoveHateControlNeutral">\n        </img>\n        <img\n            class="social-icon"\n            width="17" height="15"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='\n            src="resource://LoveHateControlLoved">\n        </img>\n        <text\n            class="social-text"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+="\n            >"+o((r=null!=(r=e.likeCount||(null!=t?t.likeCount:t))?r:s,typeof r===l?r.call(t,{name:"likeCount",hash:{},data:i}):r))+'</text>\n    </button>\n\n    <button\n        type="imagetext"\n        selectable="true"\n        big-hit="true"\n        data-connect-id="'+o((r=null!=(r=e.id||(null!=t?t.id:t))?r:s,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        data-show-keyboard="false"\n        class="comment-button social-button">\n        <img\n            class="social-icon"\n            width="19" height="17"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='\n            src="resource://comment">\n        </img>\n        <text\n            class="social-text"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+="\n            >",a=e["if"].call(t,null!=t?t.messageCount:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='</text>\n    </button>\n\n    <button\n        type="imagetext"\n        selectable="true"\n        big-hit="true"\n        data-connect-id="'+o((r=null!=(r=e.id||(null!=t?t.id:t))?r:s,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        data-target-id="'+o(c(null!=(a=null!=t?t.target:t)?a.id:a,t))+'"\n        class="share-button social-button">\n        <img\n            class="social-icon"\n            width="13" height="19"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='\n            src="resource://socialShare">\n        </img>\n        <text\n            class="social-text"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+="\n            >",a=e["if"].call(t,null!=t?t.shareCount:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+="</text>\n    </button>\n\n",a=e["if"].call(t,null!=t?t.playCount:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+"</list>\n"},useData:!0})},{"hbsfy/runtime":300}],129:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o="";return r=this.invokePartial(n.editorialLockup,"    ","editorialLockup",t,{track:"true",line1:null!=t?t.artistName:t,title:null!=t?t.name:t,connectId:null!=a[1]?a[1].id:a[1],background:null!=a[1]?a[1].heroImage:a[1],selectable:"true"},e,n,i),null!=r&&(o+=r),o+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],130:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o="";return r=this.invokePartial(n.editorialLockup,"    ","editorialLockup",t,{badge:null!=a[1]?a[1].badge:a[1],track:"true",line2:null!=a[1]?a[1].ownerName:a[1],line1:null!=t?t.description:t,title:null!=t?t.name:t,connectId:null!=a[1]?a[1].id:a[1],background:null!=a[1]?a[1].heroImage:a[1],selectable:"true"},e,n,i),null!=r&&(o+=r),o},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],131:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o,l=this.lambda,s=this.escapeExpression,c=e.helperMissing,u="function",h='    <lockup\n        type="shelf"\n        selectable="true"\n        class="play-media"\n        ';return r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+='\n        data-content-id="'+s(l(null!=t?t.id:t,t))+'"\n        data-connect-id="'+s(l(null!=a[1]?a[1].id:a[1],t))+'"\n        ',r=(e["data-metrics"]||t&&t["data-metrics"]||c).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(h+=r),h+=">\n\n",r=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+='    </lockup>\n\n    <title maxLines="2"\n        class="align-center"\n        ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+"\n        >"+s((o=null!=(o=e.name||(null!=t?t.name:t))?o:c,typeof o===u?o.call(t,{name:"name",hash:{},data:i}):o))+"</title>\n"},2:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="background-color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.1,{name:"getHighContrastColor",hash:{},data:i}))+';"'},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return'            <img\n                width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'">\n                    <button\n                        type="play"\n                        class="play-media cover-button"\n                        data-content-id="'+o(r(null!=t?t.id:t,t))+'">\n                        <title>'+o((e.loc||t&&t.loc||l).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n                    </button>\n            </img>\n"},6:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],132:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c='    <lockup\n        type="editorial"\n        selectable="true"\n        class="editorial-lockup bottom"\n        ';return r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n        data-content-id="'+l(o(null!=t?t.id:t,t))+'"\n        data-connect-id="'+l(o(null!=a[1]?a[1].id:a[1],t))+'"\n        ',r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+=">\n\n",r=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='    </lockup>\n\n    <lockup\n        type="caption"\n        class="caption-lockup bottom"\n        ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='>\n\n        <title\n            class="caption-title video-title"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(8,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n            >"+l(o(null!=t?t.name:t,t))+'</title>\n\n        <subtitle\n            maxLines="1"\n            class="caption-subtitle video-subtitle"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(10,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"\n            >"+l(o(null!=t?t.artistName:t,t))+'</subtitle>\n\n        <button\n            type="play"\n            class="play-media cover-button"\n            data-content-id="'+l(o(null!=t?t.id:t,t))+'">\n            <title>'+l((e.loc||t&&t.loc||s).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n        </button>\n    </lockup>\n\n\n"},2:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="background-color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.1,{name:"getHighContrastColor",hash:{},data:i}))+';"'},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'            <img\n                width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'">\n            </img>\n'},6:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.bgColorComplement:r,{name:"hexToRgb",hash:{},data:i}))+';"'},8:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,{name:"getHighContrastColor",hash:{},data:i}))+';"'},10:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],133:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),o=t("../element"),l=t("../../common").traits.DataProvider,s=i.event.Event,c=a.loc,u=function(t,e){t=t||{},t.styles=t.styles||[],o.call(this,t,e),this.viewModel=[],this.data=t.data,this.params=t.params,this.followText=t.followText||c.loc("FUSE.Connect.Coldstart.Follow"),this.followingText=t.followingText||c.loc("FUSE.Connect.Coldstart.Following"),this.toggled=t.toggled,this.api=t.api||"recommendedEntities",this.pullToRefreshEnabled="false"!==t.pullToRefreshEnabled,this.model=new l({data:this.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.data?(this.model.fetchData({success:this.requestSuccess.bind(this),failure:this.requestFailure.bind(this)}),this.model.data&&delete this.model.data):this.get()};a.inherit(u,o),u.prototype.template=r,u.prototype.get=function(){var t=a.bag(),e=this.params||{},n=a.keypath(t,"musicConnect."+this.api);this.model.fetchData({url:n+a.query.build(e),retries:1,method:"GET",success:this.requestSuccess.bind(this),failure:this.requestFailure.bind(this)})},u.prototype.requestSuccess=function(t){if(this.viewModel=[],t.activities)return this.showConnectFeed(t),[];for(var e=t.recommendedEntities||t.follows||[],n=0;n<e.length;n++){var i=this.lookupNode(e[n]);this.viewModel.push(i)}return this.viewModel},u.prototype.requestFailure=function(t,e){a.log.warn(this.api+" Request Failure: ",t),this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},u.prototype.showConnectFeed=function(t){var e={data:t};this.dispatchEvent(new s("showConnectFeed",{detail:e}))},u.prototype.lookupNode=function(t){var e=t.entityId||t.targetEntityId,n=this.model.lookupContent(e,this.processNode.bind(this,t));return n},u.prototype.processNode=function(t,e){var n=this.getArtwork(e,"follower"),i=t.entityType||t.targetEntityType;return n.entityId=t.entityId||t.targetEntityId,n.entityType=i,n[i]=!0,n},u.prototype.handleDataReady=function(t){this.loading=!1,a.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},e.exports=u},{"../../../util":267,"../../common":80,"../element":103,"./template.hbs":135,itml:317}],134:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./element"),o=i.controller.DocumentController,l=t("../../common").traits.TabComponent,s=a.loc,c=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=s.loc("FUSE.Connect.Recommended"),t.controllers.length||(this.controller=new r,t.controllers.push(this.controller)),o.call(this,t,e),l.call(this)};a.inherit(c,o),a.inherit(c,l,!0),c.prototype.documentType="stackTemplate",e.exports=c},{"../../../util":267,"../../common":80,"./element":133,itml:317}],135:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'    <pullToRefresh class="refresh"/>\n'},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(9,i),data:i}),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},7:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.recommendation,"            ","recommendation",t,void 0,e,n,i),null!=a&&(r+=a),r},9:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.noContent,"        ","noContent",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.pullToRefreshEnabled:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],136:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n"},3:function(t,e,n,i){return"        color: rgb(0,0,0);\n"},5:function(t,e,n,i){return"        background-color:rgba(255,255,255,0.15);\n"},7:function(t,e,n,i){return"        background-color:rgba(0,0,0,0.2);\n"},9:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,"0.6",{name:"hexToRgb",hash:{},data:i}))+"\n"},11:function(t,e,n,i){return"        color: rgb(0,0,0);\n        background-color:rbga(0,0,0,0.6);\n"},13:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+"\n"},15:function(t,e,n,i){return"        itml-img-mask-color:rgba(0,0,0);\n"},17:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,"0.4",{name:"hexToRgb",hash:{},data:i}))+"\n"},19:function(t,e,n,i){return"        background-color: rgba(0, 0, 0, 0.4);\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=".author-lockup {\n    margin: -5.0 0 0 0;\n}\n.author-text {\n";return a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="}\n.coldstart-bg {\n    itml-img-fill: scale-to-fill;\n}\n.lowsignal-bg {\n    itml-img-fill: scale-to-fill;\n}\n\n.activity-card {\n    itml-card-type: activity;\n}\n\n.bottom-loader {\n    max-height: 30;\n    padding: 0 0 12pt 0;\n}\n\n.connect-top {\n    padding:0 0 0 0;\n}\n.connect-bottom {\n    padding:0 0 0 0;\n}\n.connect-last {\n    padding:0 0 1pt 0;\n}\n.social-list {\n    padding: 5pt 0 0 0;\n}\n.social-lockup {\n    itml-align: center;\n}\n.social-button {\n    itml-align:center;\n}\n.social-icon {\n    itml-img-mask-color:rgb(0,0,0);\n}\n.social-text {\n",a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="}\n.like-button {\n    padding: 0 40 0 0;\n}\n.comment-button {\n    padding: 0 0 0 0;\n}\n.share-button {\n    padding: 0 0 0 40;\n}\n\n.message-text {\n    text-align: left;\n    font-size:16pt;\n",a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="}\n.editorial-lockup {\n    itml-lockup-type: editorial;\n",a=e["if"].call(t,null!=t?t.isDark:t,{
name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(r+=a),r+="}\n.editorial-title {\n",a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="    background-color: rbga(0,0,0,0);\n}\n.editorial-subtitle {\n",a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(r+=a),r+="}\n.editorial-button {\n    padding: 0 15pt 0 0;\n    itml-position:center;\n}\n.editorial-button-image {\n    padding: 10pt 10pt 10pt 10pt;\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(15,i),data:i}),null!=a&&(r+=a),r+="}\n.caption-lockup {\n    itml-lockup-type: caption;\n    background-color:rgb(192,192,192);\n}\n.caption-title {\n    color:rgb(0,0,0);\n    font-size: 16pt;\n    itml-position:center;\n}\n.caption-subtitle {\n    color:rgba(0,0,0,0.7);\n    font-size:16pt;\n    itml-position:center;\n}\n.caption-button {\n    padding:0 15pt 0 0;\n    itml-position:center;\n}\n\n.playlist-title {\n    itml-text-max-lines: 1;\n}\n\n.playlist-subtitle {\n    itml-font-style: caption2;\n    font-size: 13pt;\n    itml-text-max-lines: 1;\n}\n\n.badge {\n    font-size: 11pt;\n    font-weight: medium;\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.program(19,i),data:i}),null!=a&&(r+=a),r+"    color: white;\n    itml-badge-treatment: rounded;\n    itml-position: top-right;\n}\n.coldstart-title {\n    itml-text-max-lines: 5;\n    font-weight: light;\n    font-size: 28pt;\n    text-align: center;\n    max-width: 300pt;\n}\n.coldstart-subtitle {\n    itml-text-max-lines: 0;\n    max-width: 300pt;\n    font-size: 15pt;\n    text-align: center;\n    color: rgb(150,150,150);\n}\n.lowsignal-title {\n    itml-text-max-lines: 5;\n    font-weight: light;\n    font-size: 27pt;\n    text-align: center;\n}\n.lowsignal-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 16pt;\n    text-align: center;\n    color: rgba(0,0,0,0.6);\n}\n.lowsignal-cta-button {\n    font-size: 13pt;\n    font-weight: bold;\n    background-color: tint-color;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: rgb(255,255,255);\n    padding: 10 35 10 35;\n    border-radius: circle-caps;\n}\n.lowsignal-link-button {\n    color: tint-color;\n    font-weight: bold;\n    font-size: 16pt;\n}\n.no-followers-title {\n   font-size: 20pt;\n   text-align: center;\n   itml-text-max-lines: 0;\n}\n.follow-button {\n    font-size: 12pt;\n    color: tint-color;\n    border-color: rgba(0, 0, 0, 0.5);\n    border-width: 1pt;\n    border-radius: 13t;\n}\n.unfollow {\n    background-color: rgba(0, 0, 0, 0.5);\n}\n.arrow {\n\n}\n.arrow-light {\n\n}\n\n.post-action-text {\n    text-align: center;\n}\n\n.top-right {\n    itml-position: top-right;\n}\n\n.comment-title {\n    itml-text-align:left;\n    font-size: 14pt\n\n}\n\n.comment-text {\n    font-size: 14pt;\n    itml-text-align:left;\n\n}\n\n.comment-time {\n    itml-align: top;\n    itml-position: top-right;\n}\n\n.comment-lockup {\n    background-color: rgba(0,0,0,0);\n}\n.comment-count {\n    itml-text-align:center;\n    text-align: center;\n    itml-align: center;\n    color:tint-color;\n}\n\n.follow-bar {\n    background-color: rgba(255,255,255,0.0);\n}\n.report-comment {\n    background-color:rgb(243,163,63);\n}\n.gradient {\n    itml-img-treatment:radial-gradient;\n    padding: 0pt, 0pt, 0pt, 0pt;\n    itml-img-fill:1;\n}\n.owner-name {\n    font-weight: bold;\n    font-size: 16pt;\n}\n.attribution-text {\n    font-weight:regular;\n}\n.view-recommended {\n    padding: 15pt 0pt 15pt 0;\n}\n.top-spacer {\n    margin: 0 0 15 0;\n}\n.bottom-spacer {\n    margin: 0 0 75pt 0;\n}\n.post-divder {\n    padding: 0 0 0 0;\n}"},useData:!0})},{"hbsfy/runtime":300}],137:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../sharing"),o=t("../../util"),l=t("../common/traits/data_provider"),s=function(t,e){this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("select",this.handleSelect.bind(this))};s.prototype.handleSelect=function(t){var e=t.buttonIdentifier;e.indexOf("share")>-1?this.handleShare(t):"header"===e&&this.handleSelectHeader(t)},s.prototype.handleSelectHeader=function(t){var e=o.keypath(t,"entityValueProvider"),n=e.valueForEntityProperty("albumStoreID"),i=new l;if(n&&"0"!==n){var r,s=i.lookup(n);if(r=s?s.url:o.urls.build("album",{id:n})){var c={data:{url:r},navigationDocument:this.nativeViewController.navigationDocument};this.eventHandlers.tabPush(new a("tabPush",{detail:c}))}else o.log.error("ContextualActionsController:: no url for id",n)}},s.prototype.handleShare=function(t){this.shareController=new r({data:{event:t}}),this.nativeViewController.presentShareDocument(this.shareController.el,{animated:!0})},s.prototype.handleShareSubmit=function(){},e.exports=s},{"../../util":267,"../common/traits/data_provider":90,"../sharing":246,itml:317}],138:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=t("../base").style,o=t("./style.hbs"),l=t("../common").traits.EventMap,s=i.controller.MultiElementController,c=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new r({styleTemplate:o})),t.events=t.events||[],t.events.push("select"),this.filters=t.filters,this.selectedFilter=t.selectedFilter,this.selectCallback=t.selectCallback,s.call(this,t,e),l.call(this,t),a.extend(this.onSelect,{"filter-lockup":this.selectFilter.bind(this)})};a.inherit(c,s),a.inherit(c,l,!0),c.prototype.template=t("./template.hbs"),c.prototype.selectFilter=function(t){this.selectCallback(t)},e.exports=c},{"../../util":267,"../base":72,"../common":80,"./style.hbs":140,"./template.hbs":141,itml:317}],139:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=t("./element.js"),o=t("./title.hbs"),l=i.controller.DocumentController,s=function(t,e){t=t||{},t.filters=t.filters||[],t.controllers=t.controllers||[],t.selectedFilter=t.selectedFilter||"",t.name="Genres",0===t.controllers.length&&t.controllers.push(new r({filters:t.filters,selectedFilter:t.selectedFilter,selectCallback:t.selectCallback})),l.call(this,t,e),this.cancelCallback=t.cancelCallback,this.el.getElementById("cancel").addEventListener("select",this.cancel.bind(this))};a.inherit(s,l),s.prototype.documentType="stackTemplate",s.prototype.titleTemplate=o,s.prototype.cancel=function(){this.cancelCallback()},e.exports=s},{"../../util":267,"./element.js":138,"./title.hbs":142,itml:317}],140:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".filter-lockup {\n    itml-padding: 15pt 15pt 15pt 0;\n    itml-align: left;\n}\n.filter-title {\n    font-size: 17pt;\n    color: rgb(51,51,51);\n}\n.filter-selected {\n    color: rgb(255,0,0);\n}"},useData:!0})},{"hbsfy/runtime":300}],141:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o=e.helperMissing,l="        ";return r=(e.selectorLockupItem||t&&t.selectorLockupItem||o).call(t,t,null!=a[1]?a[1].selectedFilter:a[1],{name:"selectorLockupItem",hash:{},data:i}),null!=r&&(l+=r),l+'\n        <divider class="filter-divider"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="<grid>\n";return r=e.each.call(t,null!=t?t.filters:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"</grid>"},useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],142:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"<title>"+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+'</title>\n<button type="cancel" id="cancel" class="align-right filter-selected">Cancel</button>\n'},useData:!0})},{"hbsfy/runtime":300}],143:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=t("./element"),l=t("../common").traits.TabComponent,s=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=a.loc.loc("FUSE.NavBar.ForYou"),t.classes=t.classes||[],t.classes.push("fu-page"),this.controller=new o,t.controllers.push(this.controller),r.call(this,t,e),l.call(this),this.addEventDelegates(this.controller,["replaceDocument"]),this.addEventListener("appear",this.controller.handleAppear.bind(this.controller)),this.el.addEventListener("needsmore",this.controller.handleNeedsMore.bind(this.controller)),this.controller.addEventListener("scrollToTop",this.scrollToTop.bind(this))};a.inherit(s,r),a.inherit(s,l,!0),s.prototype.documentType="stackTemplate",s.prototype.scrollToTop=function(){this.el.scrollToTop()},e.exports=s},{"../../util":267,"../common":80,"./element":144,itml:317}],144:[function(t,e,n){var i=t("itml"),a=i.utils.keypath,r=i.event.Event,o=t("../../util"),l=o.loc,s=o.pubSub,c=t("./template.hbs"),u=t("../common").traits.DataProvider,h=t("../account/onboarding/genre"),d=t("./partials"),p=i.controller.MultiElementController,m=t("../common").traits.EventMap,f=t("../common").traits.TabComponent,g=t("../base").style,b=t("./style.hbs"),v=function(t,e){t=t||{},t.styles=t.styles||[],t.entityProviders=t.entityProviders||[],t.classes=t.classes||[],t.classes.push("shelfGrid"),t.styles.push(new g({styleTemplate:b})),this.controllerName="for-you",d(),t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),t.events.push("change"),this.loading=!0,p.call(this,t,e),m.call(this,t),f.call(this),this.retries=2,this.retryTTL=3600,this.appearTTL=6e4,this.lastAppearSuccess=Date.now(),this.doRefresh=!1,this.doMore=!1,o.extend(this.onSelect,{"more-link":this.pushUrl,"playlist-card":this.pushProduct,"play-button":this.playFromRecommendation,"sign-in-button":this.signIn}),o.extend(this.onHoldSelect,{"playlist-card":this.showActionMenu}),o.extend(this.onChange,{refresh:this.handleRefresh}),this.model=new u,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get(),s.subscribe("tasteProfileUpdated",this.handleTasteProfileUpdated.bind(this))};o.inherit(v,p),o.inherit(v,m,!0),o.inherit(v,f,!0),v.prototype.template=c,v.prototype.artworkMap={hero:{xs:[320,193],s:[375,226],m:[414,240],l:[320,193],xl:[578,289]},grid:{xs:[163,163],s:[200,200],m:[256,256],l:[256,256],xl:[256,256]},product:{xs:[154,154],s:[163,163],m:[196,196],l:[127,127],xl:[127,127]}},v.prototype.get=function(t){var e=this.params||{};("next"!==t||this.lastId)&&(this.requestInFlight=!0,"next"===t&&this.lastId&&(e.offsetId=this.lastId),"refresh"===t&&this.firstId&&(e.refreshOffsetId=this.firstId),this.model.fetchData({url:o.urls.build("justForYou",e),success:this.handleSuccessfulFetch.bind(this),failure:this.handleFailedFetch.bind(this),retries:this.retries,eventType:t}),t&&"tasteupdate"!==t||this.render())},v.prototype.resetLoading=function(){this.loading=!1,this.requestInFlight=!1,this.doRefresh?(this.doRefresh=!1,this.get("refresh")):this.doMore&&(this.doMore=!1,this.get("next"))},v.prototype.handleSuccessfulFetch=function(t,e){if(t.status&&"error"===t.status||t.error)return t.serviceErrorCode&&453===t.serviceErrorCode?(this.resetLoading(),this.showOnBoarding()):this.retries>0?(this.retries--,setTimeout(function(){this.model.retry()}.bind(this),this.retryTTL)):this.handleFailedFetch(t),null;if(this.resetLoading(),t.ttl&&(this.retryTTL=t.ttl),t.labels)return this.showOnBoarding(),null;if("appear"===e.eventType&&(this.lastAppearSuccess=Date.now()),!this.viewModel||"tasteupdate"===e.eventType)return this.firstId=t.recommendations[0].id,this.viewModel=this.createView(t),this.lastId=this.getLastId(t),this.viewModel.lastId=this.lastId,this.viewModel;var n=this.createView(t);return"refresh"!==e.eventType&&"appear"!==e.eventType||!a(t,"recommendations")||t.recommendations[0].id===this.firstId?"next"===e.eventType?(this.viewModel=this.viewModel.concat(n),this.lastId=this.getLastId(t),this.viewModel.lastId=this.lastId,this.viewModel):null:(this.firstId=t.recommendations[0].id,this.viewModel=n,this.lastId=this.getLastId(t),this.viewModel.lastId=this.lastId,this.dispatchEvent(new r("scrollToTop")),this.viewModel)},v.prototype.showOnBoarding=function(){var t=new h;t.addEventListener("handleOnboardingDone",this.handleOnboardingDone.bind(this)),this.dispatchEvent(new r("replaceDocument",{detail:{document:t}}))},v.prototype.getLastId=function(t){if(t.recommendations){var e=t.recommendations.length-1;if(t.recommendations[e].hasMore)return t.recommendations[e].id}return null},v.prototype.handleOnboardingDone=function(){var t=this.el.ownerDocument.navigationDocument;t.clear();var e={dataType:"for_you_page",navigationDocument:t};this.dispatchEvent(new r("tabPush",{detail:e}))},v.prototype.createView=function(t){this.errorTitle=null,this.errorMessage=null;var e=[];if(t.recommendations&&t.recommendations.length>0&&(e="object"==typeof t.recommendations[0].content?this.parseRecommendationsSet(t.recommendations):this.parseRecommendations(t.recommendations)),t.nfa){var n=this.parseNewFromYourArtists(t.nfa.content);e.push({newFromYourArtists:!0,title:l.loc("FUSE.ForYou.NFYA.SwooshTitle"),content:n,numColumns:2})}return e},v.prototype.parseRecommendationsSet=function(t){for(var e=[],n={},i=0;i<t.length;i++)n.content=this.parseRecommendations(t[i].content),n.recoId=t[i].id,e.push(n);return e},v.prototype.parseRecommendations=function(t){for(var e,n,i=t.length,a=[],r=[],l=o.screen.sizeForScreenDimension(),s="l"===l||"xl"===l?!0:!1,c=0;i>c;c++){var u=t[c],h=t[c+1],d=u.contentType.type;if(n={id:u.id,params:{type:"grid"}},"Album"!==d){e=this.model.lookupContent(n,this.processContent.bind(this)),a.length>0&&(r.push({albumGrid:!0,grid:!0,content:a}),a=[]);var p=h&&"Album"!==o.keypath(h,"contentType.type");e.playlist=!0,e.isEven=c%2===0,e.isOdd=c%2!==0,e.columns=s,e.showBorder=p,r.push(e)}else e=this.model.lookupContent(n,this.processContent.bind(this)),a.push(e),c===parseInt(i-1)&&(r.push({albumGrid:!0,grid:!0,content:a}),a=[])}return r},v.prototype.parseNewFromYourArtists=function(t){var e=o.screen.sizeForScreenDimension(),n={xs:4,s:4,m:4,l:5,xl:6},i=n[e];t.length>i&&(t=t.slice(0,i));for(var a,r,l=t.length,s=[],c=0;l>c;c++){var u=t[c];r={id:u.id,params:{type:"product"}},a=this.model.lookupContent(r,this.processContent.bind(this)),s.push(a)}return s},v.prototype.handleFailedFetch=function(t,e,n){this.resetLoading(),502===t?this.showOnBoarding():(this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady())},v.prototype.handleDataReady=function(t){a(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},v.prototype.handleRefresh=function(){this.requestInFlight?this.doRefresh=!0:this.get("refresh")},v.prototype.handleTasteProfileUpdated=function(){this.get("tasteupdate")},v.prototype.handleAppear=function(){!this.requestInFlight&&Date.now()-this.lastAppearSuccess>this.appearTTL&&this.get("appear")},v.prototype.processContent=function(t,e){var n=o.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:e}),i=o.lockup.setArtworks(t,n,this.artworkMap);if(i.isExplicit=o.lockup.isExplicit(t),i[t.kind]=!0,i.playlist){i.description=o.lockup.getDescription(t);var a=t.curatorName||t.artistName||"APPLE MUSIC";i.artistName=a?l.loc("FUSE.ForYou.PlaylistBy",{artistName:a}):null;var r="D9D9D9",s=!1,c=i.artworkTracks||i.children,u=c&&Object.keys(c).length>0;if(i.hero=i.hero||i.cover,i.hero)r=i.hero.bgColor,s=i.hero.isDark;else if(c&&u){var h,d=i.artworkTrackIds,p=d.length;if(d&&p>0)for(var m=0;p>m;m++){var f=c[d[m]];if(f){r=f.artwork.bgColor,h=new o.color(r),s=h.isDark();break}}else{var g=Object.keys(c);g.length>0&&c[g[0]].artwork.bgColor&&(r=c[g[0]].artwork.bgColor,h=new o.color(r),s=h.isDark())}}i.cardColor={bgColor:r,isDark:s}}return i},v.prototype.handleNeedsMore=function(t){this.model&&"stackTemplate"===t.target.tagName&&(this.requestInFlight?this.doMore=!0:this.get("next"))},v.prototype.playFromRecommendation=function(t){for(var e,n=t,i=t.target;i.parentNode&&(!i.getAttribute||!(e=i.getAttribute("data-reco-id")));)i=i.parentNode;n.recoId=e,this.playMedia(n)},e.exports=v},{"../../util":267,"../account/onboarding/genre":35,"../base":72,"../common":80,"./partials":147,"./style.hbs":150,"./template.hbs":151,itml:317}],145:[function(t,e,n){var i=t("itml").event.Event,a=t("../../util"),r=a.pubSub,o=t("./document"),l=t("../account/welcome/document"),s=t("../loading"),c=t("../base/tab"),u=t("../account/carrier_bundling/account_linking"),h=t("../account/migration/getting_favorites"),d=function(t){t=t||{},this.loading=!0,c.call(this,t),r.subscribe("serviceChange",this.checkCurrentAccountStatus.bind(this)),r.subscribe("importingFavorites",this.showGettingFavorites.bind(this)),r.subscribe("migrationComplete",this.migrationComplete.bind(this)),this.authTries=0;var e=a.account.subscribed();e?this.handleServiceEligibility(1,{}):this.checkCurrentAccountStatus()};a.inherit(d,c),d.prototype.checkCurrentAccountStatus=function(){a.log.warn("For You checkCurrentAccountStatus"),a.account.getSubscriptionStatus({partialResults:!0},this.handleServiceEligibility.bind(this))},d.prototype.showGettingFavorites=function(t){a.log.warn("showGettingFavorites"),t=t||{},this.handleServiceEligibility(1,{migrating:!0})},d.prototype.migrationComplete=function(){this._migrating=!1},d.prototype.handleServiceEligibility=function(t,e){e=e||{},a.log.warn("For You handleServiceEligibility "+t),a.log.warn(e),r.publish("eligibilityCheckComplete",{eligible:t,data:e});var n=this.getDocumentController(t,e);this.dispatchEvent(new i("replaceDocument",{detail:{document:n}}))},d.prototype.getDocumentController=function(t,e){var n;return e=e||{},this.loading?(n=new s,this.loading=!1):1===t&&e&&"unlinked"===e.carrierBundle?(a.log.warn("Unlinked carrier bundle"),n=new u({name:TabBar.selectedTab.title})):e&&e.migrating?(this._migrating=!0,n=new h({name:TabBar.selectedTab.title})):1!==t||this._migrating?this._migrating||(n=new l({name:TabBar.selectedTab.title,data:{mode:"upsell",upsellIdentifier:"ForYou"},eligibilityData:{eligible:t,data:e}})):n=new o({name:TabBar.selectedTab.title}),n},e.exports=d},{"../../util":267,"../account/carrier_bundling/account_linking":3,"../account/migration/getting_favorites":20,"../account/welcome/document":63,"../base/tab":75,"../loading":176,"./document":143,itml:317}],146:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="        <lockup ";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' type="caption" class="nfya-lockup action-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" data-content-kind="'+o(r(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n            "+o((e.productArtwork||t&&t.productArtwork||l).call(t,t,"play","caption",{name:"productArtwork",hash:{},data:i}))+"\n            <title \n",a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                 maxLines="1" class="title">',a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(s+=a),s+="</title>\n            <subtitle \n",a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                 class="subtitle-1">'+o(r(null!=t?t.artistName:t,t))+"</subtitle>\n            <subtitle \n",a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'                 class="subtitle-2">'+o((e.getGenreName||t&&t.getGenreName||l).call(t,null!=t?t.genres:t,{name:"getGenreName",hash:{},data:i}))+o((e.getYearFromDate||t&&t.getYearFromDate||l).call(t,null!=t?t.releaseDate:t,{name:"getYearFromDate",hash:{},data:i}))+"</subtitle>\n        </lockup>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return' style="background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" '},4:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';"\n'},6:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/>'},8:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))},10:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"\n'},12:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,.3,{name:"getHighContrastColor",hash:{},data:i}))+';"\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o='<grid class="album-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"</grid>"},useData:!0})},{"hbsfy/runtime":300}],147:[function(t,e,n){var i=t("itml").utils.Handlebars,a={albumGrid:t("./albumGrid.hbs"),newFromYourArtists:t("./newFromYourArtists.hbs"),playlistCard:t("./playlistCard.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./albumGrid.hbs":146,"./newFromYourArtists.hbs":148,"./playlistCard.hbs":149,itml:317}],148:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <lockup type="shelf" class="action-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n                "+o((e.productArtwork||t&&t.productArtwork||l).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+'\n                <title class="" maxLines="1">\n                    <text>',a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(s+=a),s+='</text>\n                </title>\n                <subtitle class="nfya-subtitle-1">'+o(r(null!=t?t.artistName:t,t))+'</subtitle>\n                <subtitle class="nfya-subtitle-2">'+o((e.getYearFromDate||t&&t.getYearFromDate||l).call(t,null!=t?t.releaseDate:t,{name:"getYearFromDate",hash:{},data:i}))+"</subtitle>\n                ",a=(e.margin||t&&t.margin||l).call(t,"10pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+"\n            </lockup>\n"},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/>'},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='<section>\n    <header class="nfya-header">\n        <title class="nfya-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n    </header>\n    <grid class="nfya-grid" style="column-count: '+o(l(null!=t?t.numColumns:t,t))+';" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </grid>\n</section>"},useData:!0})},{"hbsfy/runtime":300}],149:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='    <row class="playlist-row" style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';">\n';return a=e["if"].call(t,null!=t?t.isOdd:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='        <column class="playlist-column" span="1">\n            <card class="playlist-card" data-content-id="'+o(l(null!=t?t.id:t,t))+'" style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';">\n                <lockup>\n                    <img src="" width="0" height="210" />\n                    <title style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="4" class="hero-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.name:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n",a=e["if"].call(t,null!=t?t.description:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="                </lockup>\n                <lockup>\n",a=e["if"].call(t,null!=t?t.artistName:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                    <button class="play-button cover-button" data-content-id="'+o(l(null!=t?t.id:t,t))+"\" type='play'>\n                        <title>"+o((e.loc||t&&t.loc||r).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n                    </button>\n                </lockup>\n            </card>\n        </column>\n",a=e["if"].call(t,null!=t?t.isEven:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </row>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='            <column class="playlist-column" span="2">\n                <card class="playlist-card" style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" data-content-id="'+o(l(null!=t?t.id:t,t))+'" data-content-kind="'+o(l(null!=t?t.kind:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+">\n                    "+o((e.heroArtwork||t&&t.heroArtwork||r).call(t,t,{name:"heroArtwork",hash:{},data:i}))+"\n                </card>\n            </column>\n"},4:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l="                        ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+='\n                        <description style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="4" class="hero-description subtitle-1">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.description:t,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+"</description>\n"},6:function(t,e,n,i){var a,r=e.helperMissing,o="                        ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+="\n",a=e["if"].call(t,null!=t?t.artistName:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(o+=a),o},7:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                            <subtitle style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="1" class="subtitle-2">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.artistName:t,{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},9:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                            <subtitle style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="1" class="subtitle-2">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,"Playlist by Apple Music",{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},11:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='    <card style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" class="playlist-card ';return a=e["if"].call(t,null!=t?t.showBorder:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" data-content-id="'+o(l(null!=t?t.id:t,t))+'" data-content-kind="'+o(l(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n        "+o((e.heroArtwork||t&&t.heroArtwork||r).call(t,t,{name:"heroArtwork",hash:{},data:i}))+'\n        <lockup class="hero-lockup">\n            <title style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="2" class="hero-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.name:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n",a=e["if"].call(t,null!=t?t.description:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="            ",a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.artistName:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.program(18,i),data:i}),null!=a&&(s+=a),s+'            <button class="play-button cover-button" data-content-id="'+o(l(null!=t?t.id:t,t))+"\" type='play'>\n                <title>"+o((e.loc||t&&t.loc||r).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n            </button>\n        </lockup>\n    </card>\n"},12:function(t,e,n,i){return"show-border"},14:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l="                ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+='\n                <subtitle style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="2" class="hero-description subtitle-1">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.description:t,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+"</subtitle>\n"},16:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                <subtitle style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="1" class="subtitle-2">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.artistName:t,{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},18:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                <subtitle style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,.6,{
name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="1" class="subtitle-2">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,"Playlist by Apple Music",{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.columns:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(11,i),data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":300}],150:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* common styles */\n.no-light-art {\n    itml-img-treatment: none;\n}\n\n/*for you*/\n.playlist-title {\n    color: rgb(255, 255, 255);\n    font-size: 30pt;\n    font-weight: ultra-light;\n    itml-text-max-lines: 1;\n}\n\n.playlist-subtitle {\n    itml-font-style: caption2;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 13pt;\n    itml-text-max-lines: 2;\n}\n\n.playlist-description {\n    itml-font-style: caption2;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 12pt;\n    itml-text-max-lines: 2;\n}\n\n.action-lockup {\n    itml-position: bottom;\n    itml-align: left;\n    itml-padding: 0 0 0 0;\n}\n\n.title {\n    color: rgba(255, 255, 255, 1.0);\n    font-size: 13pt;\n    itml-padding: 0pt 16pt 0pt 16pt;\n}\n\n.subtitle-1 {\n    color: rgba(255, 255, 255, 0.6);\n    font-size: 11pt;\n}\n\n.subtitle-2 {\n    color: rgba(255, 255, 255, 0.3);\n    font-size: 10pt;\n}\n\n.new-release-badge {\n    background-color: rgba(0, 0, 0, 0.4);\n    color: white;\n    itml-badge-treatment: rounded;\n    itml-position: left;\n}\n\n.playlist-card {\n    padding: 0pt 0pt 0pt 0pt;\n}\n\n/*\n// TODO this is a hack. We are using background color and padding to get a border. Border color is the background\n// color of the document .fu-page. Need client support for this.\n*/\n.show-border {\n    padding: 0pt 0pt 1pt 0pt;\n}\n\n.fu-page {\n    background-color: rgb(255,255,255);\n}\n\n/* this is properly using a border color */\n.album-grid {\n    border-color: rgb(255,255,255);\n    padding: 0;\n}\n\n.tune-taste-button {\n    color: tint-color;\n    border-color: tint-color;\n    text-align: center;\n    font-size 20pt;\n}\n\n.card-border {\n    itml-divider-type: full;\n    itml-padding: 0pt;\n    margin: 0pt;\n    background-color: transparent;\n}\n\n.4up-grid {\n    border-color: rgba(255,255,255,0.2);\n    border-width: 1pt;\n}\n\n.nfya-grid {\n    padding: 0 16pt 0 16pt;\n    border-color: rgba(0,0,0,0);\n    itml-divider-type: borderless;\n}\n\n.nfya-lockup {\n    padding: 0;\n}\n\n.nfya-title {\n    letter-spacing: 3;\n    font-size: 13pt;\n    font-weight: medium;\n    color: rgb(0,0,0);\n    text-align: center;\n}\n\n.nfya-subtitle-1 {\n    color: rgba(0,0,0,0.6);\n}\n\n.nfya-subtitle-2 {\n    color: rgba(0,0,0,0.3);\n}\n\n.playlist-row {\n    padding: 20pt 20pt 20pt;\n}\n\n.playlist-column {\n    padding: 0 20pt 0 20pt;\n}\n\n.bottom-loader {\n    max-height: 30;\n    padding: 0 0 12pt 0;\n}\n\n.nfya-header {\n    padding: 16pt 0pt 16pt 0pt;\n}\n\n@media (max-width: 767pt) {\n    .album-grid {\n        column-count: 2;\n    }\n    .nfya-grid {\n        column-count: 2;\n    }\n}\n\n@media (width: 768pt) {\n    .album-grid {\n        column-count: 3;\n    }\n    .nfya-grid {\n        column-count: 5;\n    }\n    .playlist-card {\n        padding: 20pt 20pt 20pt 20pt;\n    }\n}\n\n@media (width: 1024pt) {\n    .album-grid {\n        column-count: 3;\n    }\n    .nfya-grid {\n        column-count: 6;\n    }\n    .playlist-card {\n        padding: 20pt 20pt 20pt 20pt;\n    }\n}"},useData:!0})},{"hbsfy/runtime":300}],151:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="	\n",a=e["if"].call(t,null!=t?t.lastId:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='	    	<section data-reco-id="'+o(r(null!=t?t.recoId:t,t))+'">\n';return a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"	        </section>\n"},3:function(t,e,n,i){var a,r="		        ";return a=e["if"].call(t,null!=t?t.playlist:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		        ",a=e["if"].call(t,null!=t?t.albumGrid:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		        ",a=e["if"].call(t,null!=t?t.newFromYourArtists:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},4:function(t,e,n,i){var a,r=" ";return a=this.invokePartial(n.playlistCard,"","playlistCard",t,void 0,e,n,i),null!=a&&(r+=a),r+" "},6:function(t,e,n,i){var a,r=" ";return a=this.invokePartial(n.albumGrid,"","albumGrid",t,void 0,e,n,i),null!=a&&(r+=a),r+" "},8:function(t,e,n,i){var a,r=" ";return a=this.invokePartial(n.newFromYourArtists,"","newFromYourArtists",t,void 0,e,n,i),null!=a&&(r+=a),r+" "},10:function(t,e,n,i){return'    	<activityIndicator class="bottom-loader"></activityIndicator>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<pullToRefresh class="refresh"/>\n';return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],152:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.pubSub,o=i.utils.keypath,l=t("./template.hbs"),s=t("./partials"),c=i.controller.MultiElementController,u=i.event.Event,h=t("../base").style,d=t("./style.hbs"),p=t("../common").traits.DataProvider,m=t("../common").traits.EventMap,f=t("../common").traits.TabComponent,g=t("../filter"),b=a.loc,v=function(t,e){t=t||{},t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styleTemplate=d,t.styles.push(new h(t)),this.controllerName="grouping",s(),c.call(this,t,e),m.call(this,t),f.call(this),this.name="Grouping",this.hasPersonalizedFCs=!1,this.hasGradient=t.hasGradient,r.subscribe("serviceChange",this.checkForPersonalizedFCs.bind(this)),this.pageUrl=t.url,a.extend(this.onSelect,{"play-button":this.playMedia,link:this.pushUrl,song:this.playMedia,carousel:this.pushProduct,"more-link":this.pushUrl,"top-charts-more-link":this.goToTopCharts,copperRecentRadioMarker:this.showMoreRecents,"brick-lockup":this.pushUrl}),this.artworkMap={recent:{crop:"bb",xs:[88,88],s:[123,123],m:[137,137],l:[152,152],xl:[168,168]},featuredProduct:{xs:[150,150],s:[163,163],m:[256,256],l:[256,256],xl:[256,256]},heroContent:{xs:[88,88],s:[90,90],m:[90,90],l:[120,120],xl:[120,120]},heroTall:{crop:"sr",xs:[320,320],s:[375,375],m:[410,410],l:[120,120],xl:[120,120]},product:{xs:[88,88],s:[123,123],m:[137,137],l:[152,152],xl:[168,168]},trackShelf:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},brick:{crop:"sr",xs:[320,82],s:[375,97],m:[414,107],l:[353,96],xl:[312,96]},brickShelf:{crop:"sr",xs:[320,82],s:[375,97],m:[414,107],l:[252,160],xl:[341,160]}},this.typesForKey={recent:["recentRadioStation"],featuredProduct:["featuredRadioStation"],heroContent:["heroContent"],heroTall:["heroTall"],brickShelf:["brickShelf"]},this.model=new p({data:t.data,pageProfile:"lockup"}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.addEventListener("dataFailed",this.handleDataFailed.bind(this)),this.get()};a.inherit(v,c),a.inherit(v,m,!0),a.inherit(v,f,!0),v.prototype.template=l,v.prototype.get=function(){this.loading=!0,this.errorTitle=null,this.errorMessage=null,this.model.fetchData({url:this.pageUrl,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this),retries:1}),this.render()},v.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},v.prototype.goToTopCharts=function(t){var e=t.target,n=this.model.getData("top-charts-side-pack"),i="top_charts_page",a={data:n,dataType:i,navigationDocument:e.ownerDocument.navigationDocument};this.dispatchEvent(new u("tabPush",{detail:a}))},v.prototype.createView=function(t){function e(t,e,n){var i=t.link&&t.link.contentId||t.adamId||t.contentId;if(s[e])return s[e](t);var a={id:i,params:{parentLabel:n}},r=s.model.lookupContent(a,s.processContent.bind(s));return r}function n(t,i){if(t){var u,h,d,p,m,f,g,b=t.length,v=!0,y=[];for(u=0;b>u;u++)if(h=t[u],r[h.contentId])a.log.warn(h.contentId+" is in unAvailableContentIds.");else if(d=h.content||h.children,p=h.fcKind,p&&(m=c[p]||a.log.warn("fcKindId "+p+" is not configured.",h)),"content"===h.type||"content"===o(h,"link.type")){if(h=e(h,m,i))if("playlist"===h.kind&&v){var w=!1;h.artworkTrackIds&&h.artworkTrackIds.length>0?w=!0:(h.image||h.logo||h.cover)&&(w=!0),w&&y.push(h)}else y.push(h)}else d&&(f=n(d,m)),s[m]&&(g=s[m](h,f,l,d),g&&y.push(g));return y}}this.errorTitle=null,this.errorMessage=null,this.data=t;var i=t.pageData.fcStructure.model.children,r=t.pageData.unAvailableContentIds||{},l=this.gridMaxItems(),s=this;this.markerRequests=[];var c={315:"copperMusicRoot",316:"copperHeroList",317:"copperHero",318:"copperHeroCover",319:"copperHeroSwipe",320:"copperHeroCustom",321:"copperHeroHLSStream",322:"copperLinkStack",323:"copperChartSet",324:"copperBrickBlock",325:"copperBrick",326:"copperSwoosh",327:"copperTrackSwoosh",328:"copperNotesSwoosh",329:"copperPlaylistMarker",330:"copperHeroRadioMarker",331:"copperFeaturedRadioMarker",332:"copperRecentRadioMarker",347:"playlistBlock"},u=n(i);return u},v.prototype.processContent=function(t,e){e=e||{};var n=e.type;e.parentLabel&&"copperTrackSwoosh"===e.parentLabel&&(n="song"!==t.kind?"list":n);var i=a.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,artworkKeys:this.typesForKey,params:{type:n}}),r=a.lockup.setArtworks(t,i,this.artworkMap,n);return r.line1=a.lockup.line1(t),r.isExplicit=a.lockup.isExplicit(t),r},v.prototype.copperTrackSwoosh=function(t,e){var n={xs:5,s:5,m:5,l:6,xl:6},i=a.screen.sizeForScreenDimension(),r=n[i],o=e.slice(0,r),l=e.length>o.length&&t.seeAllUrl?t.seeAllUrl:!1;return{trackShelf:!0,seeAllUrl:l,moreClass:"more-link",content:o,title:t.name||t.title,showGradient:this.hasGradient}},v.prototype.copperHeroSwipe=function(t,e){return{shelf:!0,content:e,title:t.title||t.name,displayType:"shelf",showGradient:this.hasGradient}},v.prototype.copperNotesSwoosh=function(t,e,n){var i=a.screen.sizeForScreenDimension();n="xl"===i?3:2;var r=e.slice(0,n),o=e.length>r.length&&t.seeAllUrl?t.seeAllUrl:!1,l="xs"===i?"subtitle":"description";return{copperNotesSwoosh:!0,content:r,title:t.title||t.name,seeAllUrl:o,moreClass:"more-link",displayType:"copperNotesSwoosh",showGradient:this.hasGradient,descriptionTag:l}},v.prototype.copperHeroList=function(t,e){return{copperHeroList:!0,content:e}},v.prototype.copperChartSet=function(t,e,n){n=5;var i;e=[];var r=[],o=[],l=0,s=0,c=1,u=!1,h=a.screen.sizeForScreenDimension();for(this.moreTopChartsString=b.loc("FUSE.MoreTopCharts"),("xl"===h||"l"===h)&&(c=2,u=!0),l=0;l<t.children.length&&(r.push(t.children[l].seeAllUrl),o.push(t.children[l].name),i=t.children[l].links,!(l>=c));l++)for(e[l]={},e[l].content=[],e[l].title=t.children[l].name,s=0;s<i.length&&n>s;s++)e[l].content.push(this.model.lookupContent(i[s].contentId,this.processContent.bind(this)));u||(e=e[0]),this.model.setData("top-charts-side-pack",{topChartsSidePack:t.children,seeAllUrls:r,names:o});var d={seeAllUrl:r[0],moreClass:"more-link",content:e,showGradient:this.hasGradient,useMultiColumn:u,moreTopChartsString:b.loc("FUSE.MoreTopCharts")};return d.trackShelfOrdered=!0,d},v.prototype.getDesignBadgeContent=function(t,e){return(t.designBadge||t.designTag)&&(e.designBadge=t.designBadge||t.designTag),e},v.prototype.copperBrick=function(t){return t=this.processContent(t,{type:"brickShelf"})},v.prototype.copperBrickBlock=function(t,e,n){return n=3,e=e.slice(0,n),{copperBrickBlock:!0,content:e,title:b.loc("FUSE.FindRightMusic"),showGradient:this.hasGradient}},v.prototype.playlistBlock=function(t){for(var e,n=t.content.slice(0,8),i=[],a=0;a<n.length;a++){var r={id:n[a].contentId,params:{type:"featuredRadioStation"}};i.push(this.model.lookupContent(r,this.processContent.bind(this)))}return{playlistBlock:!0,seeAllUrl:e,moreClass:"featuredContent",title:t.name||"Featured Stations",content:i}},v.prototype.copperFeaturedRadioMarker=function(t){this.hasPersonalizedFCs=!0;var e,n,i=a.screen.sizeForScreenDimension(),r="m"===i?9:8;if(itms.accountInfo.DSID){var o=function(t){n=t.contentIds&&t.contentIds.slice(0,8)||[];for(var e=0;e<n.length;e++){var i={id:n[e].id,params:{type:"featuredRadioStation"}};n[e]=this.model.lookupContent(i,this.processContent.bind(this))}return this.handleMarkers(n,"copperFeaturedRadioMarker",r),t}.bind(this),l=function(t){return this.featuredRadioData=t,o(t),this.viewModel}.bind(this),s=function(){this.model.fetchData({url:a.urls.radioFeatured(),success:l.bind(this),failure:this.handleFailedFetch.bind(this)})}.bind(this),c={copperFeaturedRadioMarker:!0,seeAllUrl:e,moreClass:"featuredContent",title:t.title||"Featured Stations"};return this.featuredRadioData?(l(this.featuredRadioData),c.content=this.featuredRadioData):this.markerRequests.push(s),c}n=this.data.pageData.unpersonalizedFeaturedStations;for(var u=0;u<n.length;u++)n[u]=this.model.lookupContent(n[u],this.processContent.bind(this));return{copperFeaturedRadioMarker:!0,seeAllUrl:e,moreClass:"featuredContent",title:t.title||"Featured Stations",content:n}},v.prototype.copperRecentRadioMarker=function(){this.hasPersonalizedFCs=!0;var t={xs:3,s:3,m:3,l:5,xl:6},e=a.screen.sizeForScreenDimension(),n=t[e];if(itms.accountInfo.DSID){var i=function(){var t={recentRadio:{results:{}}},e={},i=function(i){if(i)for(var a=0;a<i.length;a++){i[a].kind="radioStation";var r=i[a].id;e[r]=i[a],i[a]=this.processContent(i[a],{type:"recentRadioStation"})}t.recentRadio.results=e,this.model.cacheContent(t),this.handleMarkers(i,"copperRecentRadioMarker",n)}.bind(this);if(this.personalizedRadioData){var a=this.personalizedRadioData;i(a)}else RecentStationsManager.getRecentStations(null,function(t){this.personalizedRadioData=t,i(t)}.bind(this))}.bind(this);this.markerRequests.push(i)}return{copperRecentRadioMarker:!0,title:"Recently Played",hideDivider:!0}},v.prototype.copperHeroCover=function(t){var e={id:t.link.contentId,params:{type:"heroTall"}},n=this.model.lookupContent(e,this.processContent.bind(this));return n.coverHero=!0,n.hero=n.image,t.content=[],n=this.getDesignBadgeContent(t,n),t.content.push(n),t},v.prototype.copperHeroCustom=function(t){return t.type="hero",t.custom=!0,t=this.processContent(t)},v.prototype.copperHero=function(t){var e={id:t.link.contentId,params:{type:"heroContent"}},n=this.model.lookupContent(e,this.processContent.bind(this));return t.content=[],n=this.getDesignBadgeContent(t,n),t.content.push(n),t},v.prototype.copperLinkStack=function(t){var e=[{url:"",label:"All Genres"}];return this.genres=e.concat(t.links),{genresStack:!0,genres:this.genres}},v.prototype.copperSwoosh=function(t,e,n){var i=n,r=a.screen.sizeForScreenDimension();this.firstSwoosh||(i="l"===r?5:6,this.firstSwoosh=!0);var o=t.id,l={sectionId:o,title:t.name||t.title,displayType:"shelf",showGradient:this.hasGradient};if(e&&e[0])switch(e[0].kind){case"curator":l.curatorSwoosh=!0;break;case"musicVideo":i="l"===r||"xl"===r?n:n-1,l.musicVideoSwoosh=!0;break;case"radioStation":l.radioSwoosh=!0;break;default:l.copperSwoosh=!0}var s=e.slice(0,i),c=e.length>s.length&&t.seeAllUrl?t.seeAllUrl:!1;return l.content=s,l.seeAllUrl=c,l.moreClass="more-link",l},v.prototype.copperPlaylistMarker=function(t){for(var e,n=t.content,i=[],r=0;r<n.length;r++){var o={id:n[r].contentId,params:{type:"brick"}};i.push(this.model.lookupContent(o,this.processContent.bind(this)))}var l=a.screen.sizeForScreenDimension(),s={xs:"brick-list",s:"brick-list",m:"brick-list",l:"brick-grid",xl:"brick-grid"},c={xs:!0,s:!0,m:!0,l:!1,xl:!1},u=s[l],h=c[l];return{playlistMarker:!0,seeAllUrl:e,title:t.name||"Featured Stations",content:i,brickListType:u,shouldHaveChevron:h}},v.prototype.handleDataFailed=function(){this.loading=!1,this.render()},v.prototype.handleDataReady=function(t){if(this.loading=!1,o(t,"detail.view")&&(this.viewModel=t.detail.view),this.markerRequests&&this.markerRequests.length>0){var e=this.markerRequests.shift();e.call(this)}else this.render()},v.prototype.handleMarkers=function(t,e,n){if(t){this.markerCallbacked=!0;var i=t.length>n;i&&(t=t.slice(0,n),this.model.setData(e,t));for(var a=0;a<this.viewModel.length;a++)this.viewModel[a][e]&&(this.viewModel[a].content=t,this.viewModel[a].seeAllUrl=i,this.viewModel[a].moreClass=e)}this.handleDataReady()},v.prototype.showMoreRecents=function(t){var e;RecentStationsManager.getRecentStationGroups(null,function(n){e={dataType:"recents",stations:n,navigationDocument:t.target.ownerDocument.navigationDocument},this.dispatchEvent(new u("tabPush",{detail:e}))}.bind(this))},v.prototype.authenticate=function(t){var e={button:"Sign in",reason:"Sign in to listen to Radio",headline:"Sign in to listen to Radio",callback:this.playRadioStation.bind(this,t)},n={data:e,dataType:"login",navigationDocument:modal};this.dispatchEvent(new u("tabPush",{detail:n}))},v.prototype.gridMaxItems=function(){var t=a.screen.sizeForScreenDimension(),e={xs:3,s:3,m:3,l:5,xl:6};return e[t]},v.prototype.checkForPersonalizedFCs=function(){this.hasPersonalizedFCs&&(this.hasPersonalizedFCs=!1,this.get())},v.prototype.showGenreFilter=function(){this.filterModal=new g({filters:this.genres,selectedFilter:this.selectedFilter,selectCallback:this.handleFilterSelection.bind(this),cancelCallback:this.handleFilterCancellation.bind(this)}),modal.pushDocument(this.filterModal.el,{})},v.prototype.handleFilterSelection=function(t){var e=t.target,n=e.getAttribute("data-link-url")||this.pageUrl,i=e.getAttribute("label"),a=i.replace("&","&amp;");this.selectedFilter=i;var r={selectedFilter:this.selectedFilter,name:a,url:n};this.loading=!0,this.model.fetchData({url:n,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this),retries:1}),this.dispatchEvent(new u("genre-selected",{detail:r})),this.render(),this.loading=!1,modal.popDocument()},v.prototype.handleFilterCancellation=function(){modal.popDocument()},v.prototype.handleRotation=function(){this.viewModel=this.createView(this.data),this.markerCallbacked?this.markerCallbacked=!this.markerCallbacked:this.render()},e.exports=v},{"../../util":267,"../base":72,"../common":80,"../filter":139,"./partials":160,"./style.hbs":168,"./template.hbs":169,itml:317}],153:[function(t,e,n){var i=t("../../util"),a=t("./controller"),r=t("../common").traits.TabComponent,o=t("../base/document"),l=function(t,e){t=t||{},t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new a({data:t.data,dataType:t.dataType}),n.addEventListener("dataReady",this.handleDataReady.bind(this)),t.controllers.push(n)),o.call(this,t,e),r.call(this)};i.inherit(l,o),i.inherit(l,r,!0),l.prototype.documentType="stackTemplate",l.prototype.handleDataReady=function(){},e.exports=l},{"../../util":267,"../base/document":71,"../common":80,"./controller":152}],154:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c='    <grid class="brick-border '+l(o(null!=t?t.brickListType:t,t))+'" ';return r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+=">\n",r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"    </grid>\n"},2:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.lambda,s=this.escapeExpression,c='        <lockup type="brick"\n';return r=e["if"].call(t,null!=(r=null!=t?t.link:t)?r.url:r,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.program(5,i,a),data:i}),null!=r&&(c+=r),c+="            ",r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"brick",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+='>\n\n            <img class="brick-linear-gradient"\n                width="'+s(l(null!=(r=null!=t?t.cover:t)?r.width:r,t))+'"\n                height="'+s(l(null!=(r=null!=t?t.cover:t)?r.height:r,t))+'"\n                srcset="'+s(l(null!=(r=null!=t?t.cover:t)?r.url:r,t))+" "+s(l(null!=(r=null!=t?t.cover:t)?r.dpr:r,t))+'"\n                alt="'+s(l(null!=t?t.name:t,t))+'">\n\n                <text class="brick-title-wrapper brick-title">\n                    <span class="brick-title">'+s((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.name:t,{name:"toUpperCase",hash:{},data:i}))+"</span>\n                </text>\n",r=e["if"].call(t,null!=a[1]?a[1].shouldHaveChevron:a[1],{name:"if",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"            </img>\n\n        </lockup>\n"},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                class="brick-lockup" data-link-url="'+o(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'"\n'},5:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                class="action-lockup" data-content-id="'+r(a(null!=t?t.id:t,t))+'"\n'},7:function(t,e,n,i){return'                    <decorationImage class="brick-arrow" src="resource://arrow"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o},useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],155:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="brick-list" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"    </grid>\n"},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <lockup type="brick" style="padding: 0 0 0 8pt;" class="brick-lockup" data-link-url="'+o(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"brick",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'>\n                <background data-link-url="'+o(r(null!=t?t.url:t,t))+'">\n                    <img class="brick-linear-gradient"\n                    width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                    height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                    srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'"\n                    alt="'+o(r(null!=t?t.name:t,t))+'" />\n                </background>\n                <title class="brick-title">'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=t?t.name:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                <title data-link-url="'+o(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" class="brick-title">'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                <description data-link-url="'+o(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" class="brick-description">'+o(r(null!=t?t.Description:t,t))+'</description>\n                <decorationImage class="brick-arrow" src="resource://arrow"/>\n            </lockup>\n\n\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":300}],156:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="edge-3col-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(o+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'    </grid>\n    <lockup class="ghost-divider"></lockup>\n'},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <lockup type="shelf" class="curator-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" data-content-kind="'+o(r(null!=t?t.kind:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'>\n                <img class="curator-avatar" width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+o(r(null!=t?t.name:t,t))+'" />\n                <title maxLines="2" class="lockup-title">\n                    <text>'+o(r(null!=t?t.name:t,t))+'</text>\n                </title>\n                <subtitle maxLines="1">\n                    <text>'+o((e.first||t&&t.first||l).call(t,null!=t?t.genreNames:t,{name:"first",hash:{},data:i}))+"</text>\n                </subtitle>\n            </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],157:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='        <button type="imagetext" class="'+o(r(null!=t?t.moreClass:t,t))+'" data-link-url="'+o(r(null!=t?t.seeAllUrl:t,t))+'" data-link-title="'+o(r(null!=t?t.title:t,t))+'">\n';return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(l+=a),l+'            <img class="edge-chevron" src="resource://ChevronTerms"/>\n        </button>\n'},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},4:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,"More",{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<header class="edge-header">\n';return a=e["if"].call(t,null!=t?t.seeAllUrl:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(6,i),data:i}),null!=a&&(r+=a),r+"</header>"},useData:!0})},{"hbsfy/runtime":300}],158:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="album-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(o+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'    </grid>\n    <lockup class="ghost-divider"></lockup>\n'},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="            <lockup ";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' type="caption" class="action-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+' disabled="'+o((e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n                <img class="radio-art" width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+o(r(null!=t?t.name:t,t))+'">\n                    <button class="cover-button play-button" data-content-id="'+o(r(null!=t?t.id:t,t))+'" type=\'play\'/>\n                </img>\n                <title maxLines="2" class="caption-title">\n                    <text>'+o(r(null!=t?t.name:t,t))+"</text>\n                </title>\n                <subtitle><text>"+o(r(null!=(a=null!=t?t.description:t)?a.standard:a,t))+"</text></subtitle>\n            </lockup>\n"},3:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],159:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <carousel displayInterval="30" class="carousel" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"carousel",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"    </carousel>\n"},2:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.custom:t,{name:"if",hash:{},fn:this.program(26,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"            </card>\n"},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='                <card class="action-lockup" data-content-id="'+o(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'" data-content-kind="'+o(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.kind:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+">\n"},5:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='                <card class="link" data-link-url="'+o(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" data-content-kind="'+o(r(null!=(a=null!=t?t.link:t)?a.kind:a,t))+'" data-link-title="'+o(r(null!=(a=null!=t?t.link:t)?a.label:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+">\n"},7:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},8:function(t,e,n,i){var a,r="                        <background>\n";return a=e["if"].call(t,null!=t?t.coverHero:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(r+=a),r+="                        </background>\n\n",a=e["if"].call(t,null!=t?t.designBadge:t,{name:"if",
hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.coverHero:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.program(17,i),data:i}),null!=a&&(r+=a),r},9:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                                <img style="itml-img-fill: 1;" width="'+o(r(null!=(a=null!=t?t.hero:t)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=t?t.hero:t)?a.height:a,t))+'" srcset="'+o(r(null!=(a=null!=t?t.hero:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.hero:t)?a.dpr:a,t))+'" />\n'},11:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda;return'                                <img class="gradient" style="itml-img-fill:1; background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n                                width="'+o(l(null!=(a=null!=t?t.hero:t)?a.width:a,t))+'" height="'+o(l(null!=(a=null!=t?t.hero:t)?a.height:a,t))+'" srcset="'+o(l(null!=(a=null!=t?t.hero:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.hero:t)?a.dpr:a,t))+'" />\n'},13:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                            <badge style="color: rgb(255,255,255); background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor2:a,{name:"hexToRgb",hash:{},data:i}))+';"\n                            class="badge" text="'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.designBadge:t,{name:"toUpperCase",hash:{},data:i}))+'"/>\n'},15:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='                            <lockup style="itml-position: center; itml-align: center; text-align: center;" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'>\n                                <button style="itml-position: center; itml-align: center; text-align: center; color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.hero:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+'; itml-align: center;" class="radio-hero-button">LISTEN NOW</button>\n                                <text style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.hero:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+'; itml-align: center;" class="hero-text" maxLines="2">'+o(l(null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,t))+"</text>\n                            </lockup>\n"},17:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s='                            <lockup type="list" class="hero-lockup hero-top album" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=' disabled="'+o((e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n                                <title style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-title" maxLines="2">',a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.program(20,i),data:i}),null!=a&&(s+=a),s+='</title>\n                                <subtitle style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor2:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-subtitle" maxLines="2">'+o(l(null!=t?t.artistName:t,t))+'</subtitle>\n                                <text style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-text" maxLines="2">',a=l(null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,t),null!=a&&(s+=a),s+='</text>\n                                <img class="',a=e["if"].call(t,null!=(a=null!=t?t.hero:t)?a.isDark:a,{name:"if",hash:{},fn:this.program(22,i),inverse:this.program(24,i),data:i}),null!=a&&(s+=a),s+'" width="'+o(l(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" height="'+o(l(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" srcset="'+o(l(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'">\n                                    <button data-content-id="'+o(l(null!=t?t.id:t,t))+'" type=\'play\' class="play-button cover-button">\n                                    </button>\n                                </img>\n                            </lockup>\n'},18:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/>'},20:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))},22:function(t,e,n,i){return" dark-art "},24:function(t,e,n,i){return" light-art "},26:function(t,e,n,i){var a,r=e.helperMissing,o=this.lambda,l=this.escapeExpression,s='                    <lockup class="hero-lockup custom" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'>\n                        <text style="color: '+l(o(null!=(a=null!=t?t.themeColors:t)?a.textColor:a,t))+';" class="hero-text" maxLines="2">'+l(o(null!=t?t.blurb:t,t))+"</text>\n                    </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":300}],160:[function(t,e,n){var i=t("itml").utils.Handlebars,a={heroList:t("./heroList.hbs"),edgeHeader:t("./edgeHeader.hbs"),shelf:t("./shelf.hbs"),featuredShelf:t("./featuredShelf.hbs"),trackShelf:t("./trackShelf.hbs"),trackShelfOrdered:t("./trackShelfOrdered.hbs"),curatorSwoosh:t("./curatorSwoosh.hbs"),notesSwoosh:t("./notesSwoosh.hbs"),brickShelf:t("./brickShelf.hbs"),radioSwoosh:t("./radioSwoosh.hbs"),playlistList:t("./playlistList.hbs"),musicVideoSwoosh:t("./musicVideoSwoosh.hbs"),brickGrid:t("./brickGrid.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./brickGrid.hbs":154,"./brickShelf.hbs":155,"./curatorSwoosh.hbs":156,"./edgeHeader.hbs":157,"./featuredShelf.hbs":158,"./heroList.hbs":159,"./musicVideoSwoosh.hbs":161,"./notesSwoosh.hbs":162,"./playlistList.hbs":163,"./radioSwoosh.hbs":164,"./shelf.hbs":165,"./trackShelf.hbs":166,"./trackShelfOrdered.hbs":167,itml:317}],161:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="video-grid" ';return a=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(o+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'    </grid>\n    <lockup class="ghost-divider"></lockup>\n'},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'"'},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"            ","shelfLockup",t,{line1:null!=t?t.artistName:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],162:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o=e.helperMissing,l='<grid class="track-list notes-swoosh" ';return r=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=r&&(l+=r),l+=">\n",r=this.invokePartial(n.edgeHeader,"    ","edgeHeader",t,void 0,e,n,i),null!=r&&(l+=r),r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"</grid>\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'" '},4:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c='        <lockup type="editorial"\n';return r=e["if"].call(t,null!=(r=null!=t?t.artwork:t)?r.bgColor:r,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.program(7,i,a),data:i}),null!=r&&(c+=r),c+='\n            class="action-lockup editorial-lockup '+l(o(null!=t?t.kind:t,t))+'"\n            data-content-id="'+l(o(null!=t?t.id:t,t))+'"\n            data-link-url="'+l(o(null!=t?t.url:t,t))+'"\n            ',r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+='\n            disabled="'+l((e.shouldDisable||t&&t.shouldDisable||s).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n\n            '+l((e.productArtwork||t&&t.productArtwork||s).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+"\n            <title ",r=e["if"].call(t,null!=(r=null!=t?t.artwork:t)?r.textColor1:r,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n            class="editorial-title">',r=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(11,i,a),inverse:this.program(13,i,a),data:i}),null!=r&&(c+=r),c+="</title>\n\n            <subtitle ",r=e["if"].call(t,null!=(r=null!=t?t.artwork:t)?r.textColor2:r,{name:"if",hash:{},fn:this.program(15,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n            class="editorial-subtitle">'+l(o(null!=t?t.artistName:t,t))+"</subtitle>\n\n            <"+l(o(null!=a[1]?a[1].descriptionTag:a[1],t)),r=e["if"].call(t,null!=(r=null!=t?t.artwork:t)?r.textColor3:r,{name:"if",hash:{},fn:this.program(17,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n            maxLines="2" >',r=o(null!=(r=null!=t?t.itunesNotes:t)?r["short"]:r,t),null!=r&&(c+=r),c+"</"+l(o(null!=a[1]?a[1].descriptionTag:a[1],t))+">\n        </lockup>\n"},5:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'                style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.artwork:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n'},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'                style="background-color: '+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,"EEEEEE",{name:"hexToRgb",hash:{},data:i}))+';"\n'},9:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return' style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.artwork:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';"'},11:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/>'},13:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))},15:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return' style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.artwork:t)?a.textColor4:a,{name:"hexToRgb",hash:{},data:i}))+';"'},17:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return' style="color: '+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.artwork:t)?a.textColor1:a,"0.80",{name:"hexToRgb",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"\n"},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],163:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <section class="content-section">\n        <grid ';return a=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=' class="track-list" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=this.invokePartial(n.edgeHeader,"            ","edgeHeader",t,void 0,e,n,i),null!=a&&(o+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"        </grid>\n    </section>\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'" '},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                ","listLockup",t,{line1:null!=t?t.featuredArtists:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],164:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="edge-3col-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(o+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'    </grid>\n    <lockup class="ghost-divider"></lockup>\n'},2:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"            ","listLockup",t,{line1:null!=(a=null!=t?t.genre:t)?a.name:a,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],165:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='    <lockup class="ghost-divider"></lockup>\n    <grid class="edge-grid" data-section-id="'+o(r(null!=t?t.sectionId:t,t))+'" ';return a=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(s+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </grid>\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'"'},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"            ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],166:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="track-list" ';return a=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(o+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="    </grid>\n    ",a=(e.margin||t&&t.margin||r).call(t,"16pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+"\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'" '},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <lockup style="track-lockup" type="list" class="action-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=' disabled="'+o((e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n',a=e["if"].call(t,null!=t?t.radioStation:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"            </lockup>\n"},5:function(t,e,n,i){return'                    <img src="resource://RadioButtonPlayIconWhite" />\n'},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                    "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},9:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <title class="title" maxLines="1">'+r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/></title>\n'},11:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <title maxLines="1">'+r(a(null!=t?t.name:t,t))+"</title>\n"},13:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <subtitle class="subititle one-line">\n                        <span fallbackValue="'+r(a(null!=t?t.line1:t,t))+'"/>\n                    </subtitle>\n'},15:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <button type="image" class="action-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'"><img src="resource://UniversalActionControl"/></button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],167:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=t?t.useMultiColumn:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.program(17,i,a),data:i}),null!=r&&(o+=r),o},2:function(t,e,n,i,a){var r,o="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(3,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"\n"},3:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.lambda,s=this.escapeExpression,c='            <split class="track-list-split">\n                <grid class="track-list-ordered" ';return r=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+='>\n                    <header class="edge-header">\n',r=e["if"].call(t,null!=a[1]?a[1].seeAllUrl:a[1],{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.program(8,i,a),data:i}),null!=r&&(c+=r),c+="                    </header>\n",r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(10,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+'                    <button class="top-charts-button top-charts-more-link" type="thin" data-link-url="'+s(l(null!=t?t.seeAllUrl:t,t))+'">\n                        <title>'+s(l(null!=a[1]?a[1].moreTopChartsString:a[1],t))+"</title>\n                    </button>\n                </grid>\n            </split> \n"},4:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'style="'+o((e.getColorGridStyle||t&&t.getColorGridStyle||r).call(t,null!=(a=null!=t?t.content:t)?a.content:a,{name:"getColorGridStyle",hash:{},data:i}))+'" '},6:function(t,e,n,i,a){var r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return'                            <button type="imagetext" class="top-charts-more-link" data-link-url="'+o(r(null!=a[1]?a[1].seeAllUrl:a[1],t))+'">\n                                <title class="edge-title" id=\'name\'>'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                                <img class="edge-chevron" src="resource://ChevronTerms"/>\n                            </button>\n'},8:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"                            <title class=\"edge-title\" id='name'>"+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.content:t)?a.title:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},10:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression,s=this.lambda,c='                        <lockup style="background-color: '+l((e.topChartsGetFirstBgColor||t&&t.topChartsGetFirstBgColor||o).call(t,null!=a[1]?a[1].content:a[1],i&&i.first,{name:"topChartsGetFirstBgColor",hash:{},data:i}))+';" type="list" class="top-charts-lockup track action-lockup" data-content-id="'+l(s(null!=t?t.id:t,t))+'" ';return r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+=' disabled="'+l((e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n                            <ordinal class="top-charts-ordinal">'+l((e.increment||t&&t.increment||o).call(t,i&&i.index,{name:"increment",hash:{},data:i}))+'</ordinal>\n                            <img class="light-art play-button" data-content-id="'+l(s(null!=t?t.id:t,t))+'" width="56" height="56" srcset="'+l(s(null!=(r=null!=t?t.image:t)?r.url:r,t))+" "+l(s(null!=(r=null!=t?t.image:t)?r.dpr:r,t))+'"/>\n',r=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(11,i,a),inverse:this.program(13,i,a),data:i}),null!=r&&(c+=r),c+='                            <subtitle class="one-line">\n                                <span fallbackValue="'+l(s(null!=t?t.artistName:t,t))+'"/>  <span fallbackValue="'+l(s(null!=t?t.collectionName:t,t))+'"/>\n                            </subtitle>\n',r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(15,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"                        </lockup>\n"},11:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                                <title maxLines="1">'+r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/></title>\n'},13:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                                <title maxLines="1">'+r(a(null!=t?t.name:t,t))+"</title>\n"},15:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                            <button type="image" class="action-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'"><img src="resource://UniversalActionControl"/></button>\n'},17:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.lambda,s=this.escapeExpression,c='        <grid class="track-list-ordered" ';return r=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+='>\n            <header class="edge-header">\n',r=e["if"].call(t,null!=t?t.seeAllUrl:t,{name:"if",hash:{},fn:this.program(18,i,a),inverse:this.program(20,i,a),data:i}),null!=r&&(c+=r),c+="            </header>\n",r=e.each.call(t,null!=(r=null!=t?t.content:t)?r.content:r,{name:"each",hash:{},fn:this.program(22,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+'            <button class="top-charts-button top-charts-more-link" type="thin" data-link-url="'+s(l(null!=t?t.seeAllUrl:t,t))+'">\n                <title>'+s(l(null!=t?t.moreTopChartsString:t,t))+"</title>\n            </button>\n        </grid>\n"},18:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return'                    <button type="imagetext" class="top-charts-more-link" data-link-url="'+o(r(null!=t?t.seeAllUrl:t,t))+'">\n                        <title class="edge-title" id=\'name\'>'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=(a=null!=t?t.content:t)?a.title:a,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                        <img class="edge-chevron" src="resource://ChevronTerms"/>\n                    </button>\n'},20:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"                    <title class=\"edge-title\" id='name'>"+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.content:t)?a.title:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},22:function(t,e,n,i,a){var r,o=e.helperMissing,l=this.escapeExpression,s=this.lambda,c='                <lockup style="background-color: '+l((e.topChartsGetFirstBgColor||t&&t.topChartsGetFirstBgColor||o).call(t,null!=a[1]?a[1].content:a[1],i&&i.first,{name:"topChartsGetFirstBgColor",hash:{},data:i}))+';" type="list" class="top-charts-lockup track action-lockup" data-content-id="'+l(s(null!=t?t.id:t,t))+'" ';return r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=r&&(c+=r),c+=' disabled="'+l((e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n                    <ordinal class="top-charts-ordinal">'+l((e.increment||t&&t.increment||o).call(t,i&&i.index,{name:"increment",hash:{},data:i}))+'</ordinal>\n                    <img class="light-art play-button" data-content-id="'+l(s(null!=t?t.id:t,t))+'" width="56" height="56" srcset="'+l(s(null!=(r=null!=t?t.image:t)?r.url:r,t))+" "+l(s(null!=(r=null!=t?t.image:t)?r.dpr:r,t))+'"/>\n',r=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(23,i,a),inverse:this.program(25,i,a),data:i}),null!=r&&(c+=r),c+='                    <subtitle class="one-line">\n                        <span fallbackValue="'+l(s(null!=t?t.artistName:t,t))+'"/>  <span fallbackValue="'+l(s(null!=t?t.collectionName:t,t))+'"/>\n                    </subtitle>\n',r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(27,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"                </lockup>\n"},23:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                        <title maxLines="1">'+r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/></title>\n'},25:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                        <title maxLines="1">'+r(a(null!=t?t.name:t,t))+"</title>\n"},27:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <button type="image" class="action-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'"><img class="top-charts-action-button" src="resource://UniversalActionControl"/></button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],168:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".hero-title {\n    /* TODO should be able to use itml-font-style only */\n    /* itml-font-style: body; */\n    font-size: 17pt;\n    font-weight: light;\n    letter-spacing: 0;\n    /* TODO will need to get client support for line-height / leading */\n    /* line-height: 22pt; */\n    itml-padding: 0pt 16pt 0pt 16pt;\n    padding: -5.0 1.0 0.0 16.0;\n}\n\n.hero-subtitle {\n    itml-font-style: caption1;\n    /*\n    font-size: 12pt;\n    font-weight: regular;\n    letter-spacing: 0;\n    */\n\n    /* TODO remove this red when we always get joe color values back */\n\n}\n\n.hero-text {\n    itml-font-style: caption1;\n    /*\n    font-size: 12pt;\n    font-weight: regular;\n    letter-spacing: 0;\n    */\n    color: rgb(255, 255, 255);\n}\n\n.badge {\n    font-size: 11pt;\n    font-weight: medium;\n    background-color: rgba(0, 0, 0, 0.4);\n    color: white;\n    itml-badge-treatment: rounded;\n    itml-position: left;\n\n    /* TODO client needs to implement padding and letter spacing on badge */\n    padding: 8pt;\n    letter-spacing: 3;\n}\n\n.filter-divider {\n    margin: 10.0 16.0 0.0 16.0;\n}\n\n.filter-divider-text {\n    font-size: 17pt;\n    padding: 0.0 1.0 0.0 16.0;\n}\n\n.filter-divider-image {\n    padding: 1.0 16.0 0.0 2.0;\n}\n\n.carousel {\n    /* background-color: rgb(195, 195, 195); */\n    background-color: rgb(204, 204, 204);\n    padding: 0;\n}\n\n.gradient {\n    itml-img-treatment:radial-gradient;\n    itml-img-fill:1;\n    padding: 0pt, 0pt, 56pt, 0pt;\n}\n\n.simple-gradient {\n    itml-img-treatment:radial-gradient;\n    itml-img-fill:1;\n    padding: 0pt;\n}\n\n/* editorial */\n.editorial-lockup {\n    itml-margin: 0pt 15pt 15pt 15pt;\n    itml-lockup-type: editorial;\n    background-color: rgba(0, 0, 0, 0.2);\n}\n\n.brick-linear-gradient {\n    itml-img-treatment: left-to-right-linear-gradient;\n    itml-img-fill:1;\n    padding: 0pt;\n    /* this was approved by design */\n    background-color: linear-gradient(left, rgba(0,0,0,0.5), rgba(0,0,0,0));\n}\n\n.brick-title-wrapper {\n    itml-text-max-lines: 3;\n    itml-position: left;\n    text-align: left;\n}\n\n.brick-title {\n    color: rgb(255,255,255);\n    text-shadow: 0pt 0pt 5pt rgba(0,0,0,0.5);\n    font-size: 14pt;\n    font-weight: medium;\n    letter-spacing: 3;\n    background-color: rgba(0, 0, 0, 0);\n}\n\n.brick-description-wrapper {\n    itml-text-max-lines: 2;\n    itml-position: left;\n    text-align: left;\n}\n\n.brick-description {\n    color: rgb(255, 255, 255);\n    text-shadow: 0pt 0pt 5pt rgba(0,0,0,0.5);\n    font-size: 11pt;\n    font-weight: regular;\n    itml-text-max-lines: 2;\n}\n\n.brick-arrow {\n    color: rgb(255, 255, 255);\n    itml-img-treatment: tint;\n    itml-position: right;\n}\n\n.brick-border {\n    border-width: 1pt;\n}\n\n/* curators */\n.curator-avatar {\n    itml-img-treatment: artist-circle;\n}\n\n.curator-lockup {\n    itml-position: bottom;\n    itml-align: center;\n    background-color: rgba(0, 0, 0, 0);\n    itml-padding: 0 0pt 12pt 0pt;\n}\n\n/* radio shelf */\n.radio-lockup {\n    itml-position: bottom;\n    itml-align: center;\n    background-color: rgba(0, 0, 0, 0);\n    itml-padding: 0 0pt 12pt 0pt;\n}\n\n.album-lockup {\n    itml-position: bottom;\n    itml-align: center;\n    background-color: rgba(0, 0, 0, 0);\n    padding: 0;\n}\n\n.hero-lockup {\n    itml-padding: 6pt 16pt 16pt 16pt;\n    itml-align: center;\n}\n\n.hero-top {\n    itml-position: top;\n}\n\n/* radio */\n.radio-art {\n    color:tint-color;\n}\n\n.recent-grid {\n    itml-padding:0;\n}\n\n.recent-header {\n    border-width: 0pt;\n    border-color: rgba(0,0,0,0);\n    itml-padding: 7pt 0 7pt 15pt;\n}\n\n.recent-text {\n    font-size:13pt;\n    color: rgb(102,102,102);\n    itml-text-max-lines: 1;\n}\n\n.recent-lockup {\n   border-width: 0pt;\n   border-color: rgba(0,0,0,0);\n   itml-padding: 8pt 0 8pt 0;\n}\n\n.live-color {\n    color: rgb(255, 0, 0);\n}\n\n.listen-button {\n    color: rgb(255, 255, 255);\n    background-color: rgba(0,0,0,0.5);\n    border-width: 1pt;\n    border-radius: 13t;\n}\n\n.two-col {\n    column-count: 2;\n    border-width: 0 0 0 0;\n}\n\n.show-more-recents {\n    color: tint-color;\n}\n\n.album-grid {\n    color: rgb(255, 255, 255);\n}\n\n.ghost-divider {\n    itml-padding: 0 0 1pt 0;\n}\n\n.top-charts-button {\n    font-size: 12pt;\n    color: rgb(0,0,0);\n    border-color: rgba(0, 0, 0, 0.5);\n    border-width: 1pt;\n    border-radius: 13pt;\n    buttonType: thin;\n    padding: 5 10 5 10;\n    margin: 0 0 0 0;\n    background-color: transparent;\n    itml-align: center;\n}\n\n.top-charts-lockup {\n    itml-padding: 0 0pt 0 0pt;\n    itml-item-height:56;\n    itml-divider-type: full;\n}\n\n.top-charts-lockup-button {\n    itml-align: center; \n}\n\n.top-charts-ordinal {\n    color: rgb(0, 0, 0);\n    font-size: 15pt;\n    font-weight: regular;\n}\n\n.top-charts-action-button {\n    font-size: 15pt;\n    font-weight: regular;\n}\n\n.caption-title {\n    color: rgb(255, 255, 255);\n    font-size: 13pt;\n    itml-padding: 0pt 16pt 0pt 16pt;\n}\n\n.edge-header {\n    background-color: rgba(0,0,0,0);\n}\n\n.track-list-ordered, .track-list {\n    padding: 0;\n    margin: 0;\n}\n\n.track-list-split {\n    itml-item-width: .5;\n}\n\n.track-lockup {\n    itml-padding: 0 0pt 0 0pt;\n    itml-item-height:48;\n}\n\n.video-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 0pt 0pt 4pt;\n    itml-align: center;\n    column-count: 2;\n}\n\n.radio-hero-button {\n    font-size: 12pt;\n    border-color: rgba(255, 255, 255, 0.5);\n    border-width: 1pt;\n    border-radius: circle-caps;\n    padding: 2 10 2 10;\n    margin: 0 0 0 0;\n    background-color: transparent;\n    /* y u no work */\n    itml-position: center;\n    itml-align: center;\n    text-align: center;\n}\n\n.brick-lockup {\n    padding: 0 0 1 0;\n    margin: 0 0 0 0;\n}\n\n.brick-grid {\n    padding: 0 0 0 0;\n    margin: 2 0 2 0;\n    column-count: 2;\n    itml-item-width: 100%; \n}\n\n.brick-list {\n    padding: 0 0 0 0pt;\n    margin: 0 0 0 0pt;\n    column-count: 1;\n    itml-item-width: 100%;\n}\n\n@media (max-width: 767pt) {\n    .edge-grid {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        itml-item-width: 100%;\n        itml-lockup-type: shelf;\n        itml-padding: 0pt 0pt 0pt 4pt;\n        itml-align: center;\n        column-count: 3;\n    }\n\n    .brick-grid-lockup {\n        padding: 0 0 1 0;\n        margin: 0 0 0 0;\n    }\n}\n\n@media (width: 768pt) {\n    .album-grid {\n        column-count: 4;\n    }\n    .edge-grid {\n        column-count: 5;\n    }\n    .video-grid {\n        column-count: 5;\n    }\n\n    .brick-list {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        itml-align: center;\n        column-count: 3;\n        padding: 0 8 0 8;\n        margin: 2 0 2 0;\n    }\n\n    .brick-lockup {\n        padding: 0 0 0 0;\n    }\n\n    .notes-swoosh {\n        itml-padding: 0pt 6pt 0pt 0pt;\n    }\n\n    .brick-grid-lockup {\n        padding: 16 0 16 16;\n        margin: 0 0 0 0;\n        border-radius: 13;\n    }\n\n    .brick-image {\n        itml-img-treatment: brick;\n    }\n\n    .brick-title-wrapper {\n        itml-position: center;\n        text-align: center;\n    }\n}\n\n@media (width: 1024pt) {\n    .album-grid {\n        column-count: 4;\n    }\n    .edge-grid {\n        column-count: 6;\n    }\n    .video-grid {\n        column-count: 6;\n    }\n\n    .brick-list {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        itml-item-width: 100%;\n        itml-align: center;\n        column-count: 3;\n        padding: 0 10 0 10;\n        margin: 2 0 2 0;\n    }\n\n    .brick-lockup {\n        padding: 0 0 0 0;\n    }\n\n    .brick-grid-lockup {\n        padding: 16 0 16 16;\n        margin: 0 0 0 0;\n        border-radius: 13;\n    }\n\n    .brick-image {\n        itml-img-treatment: brick;\n    }\n\n    .brick-title-wrapper {\n        itml-position: center;\n        text-align: center;\n    }\n}";

},useData:!0})},{"hbsfy/runtime":300}],169:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(30,i),data:i}),null!=a&&(r+=a),r},4:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="            ";return a=e["if"].call(t,null!=t?t.copperHeroList:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperSwoosh:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperRecentRadioMarker:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperFeaturedRadioMarker:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.playlistBlock:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.trackShelf:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.trackShelfOrdered:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.curatorSwoosh:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperNotesSwoosh:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperBrickBlock:t,{name:"if",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.radioSwoosh:t,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.playlistList:t,{name:"if",hash:{},fn:this.program(24,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.musicVideoSwoosh:t,{name:"if",hash:{},fn:this.program(26,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.playlistMarker:t,{name:"if",hash:{},fn:this.program(28,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},6:function(t,e,n,i){var a;return a=this.invokePartial(n.heroList,"","heroList",t,void 0,e,n,i),null!=a?a:""},8:function(t,e,n,i){var a;return a=this.invokePartial(n.shelf,"","shelf",t,void 0,e,n,i),null!=a?a:""},10:function(t,e,n,i){var a;return a=this.invokePartial(n.featuredShelf,"","featuredShelf",t,void 0,e,n,i),null!=a?a:""},12:function(t,e,n,i){var a;return a=this.invokePartial(n.trackShelf,"","trackShelf",t,void 0,e,n,i),null!=a?a:""},14:function(t,e,n,i){var a;return a=this.invokePartial(n.trackShelfOrdered,"","trackShelfOrdered",t,void 0,e,n,i),null!=a?a:""},16:function(t,e,n,i){var a;return a=this.invokePartial(n.curatorSwoosh,"","curatorSwoosh",t,void 0,e,n,i),null!=a?a:""},18:function(t,e,n,i){var a;return a=this.invokePartial(n.notesSwoosh,"","notesSwoosh",t,void 0,e,n,i),null!=a?a:""},20:function(t,e,n,i){var a;return a=this.invokePartial(n.brickShelf,"","brickShelf",t,void 0,e,n,i),null!=a?a:""},22:function(t,e,n,i){var a;return a=this.invokePartial(n.radioSwoosh,"","radioSwoosh",t,void 0,e,n,i),null!=a?a:""},24:function(t,e,n,i){var a;return a=this.invokePartial(n.playlistList,"","playlistList",t,void 0,e,n,i),null!=a?a:""},26:function(t,e,n,i){var a;return a=this.invokePartial(n.musicVideoSwoosh,"","musicVideoSwoosh",t,void 0,e,n,i),null!=a?a:""},28:function(t,e,n,i){var a;return a=this.invokePartial(n.brickGrid,"","brickGrid",t,void 0,e,n,i),null!=a?a:""},30:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(31,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},31:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"            ","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a?a:""},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],170:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,o=i.controller.MultiElementController,l=t("../common").traits.EventMap,s=t("../common").traits.TabComponent,c=t("../base").style,u=t("./style.hbs"),h=t("./template.hbs"),d=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],t.events.push("select"),o.call(this,t,e),l.call(this,t),s.call(this),a.extend(this.onSelect,{"open-url":this.openUrl});var n=t.data&&t.data.typeKey;n&&(this.learnMoreBlurb=r.locWithButtonSubstitution("FUSE.LearnMore."+n,{Link:null})),this.render()};a.inherit(d,o),a.inherit(d,l,!0),a.inherit(d,s,!0),d.prototype.template=h,e.exports=d},{"../../util":267,"../base":72,"../common":80,"./style.hbs":172,"./template.hbs":173,itml:317}],171:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,o=t("./title.hbs"),l=i.controller.DocumentController,s=t("../common").traits.TabComponent,c=t("./element"),u=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n=t.data&&t.data.typeKey;n&&(t.name=r.loc("FUSE.LearnMore."+n+".Title"));var i;0===t.controllers.length&&(i=new c(t),t.controllers.push(i)),l.call(this,t,e),s.call(this);var a=function(){var t=this.el.getElementById("dismissSheetButton");t&&t.addEventListener("select",this.dismissSheet.bind(this))};this.addEventListener("render",a.bind(this)),a.call(this)};a.inherit(u,l),a.inherit(u,s,!0),u.prototype.documentType="panelTemplate",u.prototype.titleTemplate=o,u.prototype.dismissSheet=function(){modal.popDocument()},e.exports=u},{"../../util":267,"../common":80,"./element":170,"./title.hbs":174,itml:317}],172:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".p-text {\n    itml-text-max-lines: 0;\n    font-size: 14pt;\n    margin: 20 0 20 0;\n}"},useData:!0})},{"hbsfy/runtime":300}],173:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s='<text class="p-text">';return r=null!=(r=e.learnMoreBlurb||(null!=t?t.learnMoreBlurb:t))?r:l,a=typeof r===o?r.call(t,{name:"learnMoreBlurb",hash:{},data:i}):r,null!=a&&(s+=a),s+"</text>\n"},useData:!0})},{"hbsfy/runtime":300}],174:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"<title>"+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+"</title>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l="";return a=e["if"].call(t,null!=t?t.name:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'\n<button id="dismissSheetButton" type="done" class="align-right done-button">'+o((e.loc||t&&t.loc||r).call(t,"FUSE.DoneButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":300}],175:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,o=t("./template.hbs"),l=i.controller.MultiElementController,s=function(t,e){t=t||{},t.styles=t.styles||[],t.entityProviders=t.entityProviders||[],t.classes=t.classes||[],t.title=t.title||r.loc("Fuse.Loading"),a.network.isOnline()?this.model={data:{title:t.title}}:(this.errorMessage=r.loc("FUSE.Error.YoureOffline.Reconnect"),this.errorTitle=r.loc("FUSE.Error.YoureOffline")),l.call(this,t,e)};a.inherit(s,l),s.prototype.template=o,e.exports=s},{"../../util":267,"./template.hbs":177,itml:317}],176:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=t("./element"),l=function(t,e){t=t||{},t.controllers=t.controllers||[],t.watchedAttributes=t.watchedAttributes||[],t.data=t.data||{};var n,i=t.data.url;0===t.controllers.length&&(n=new o(t),t.controllers.push(n)),i&&(t.watchedAttributes.push("loadUrl"),t.loadUrl=i),a.network.isOffline()&&(this.documentType="stackTemplate"),r.call(this,t,e),this.navigationBarController.watchedAttributes.push("hidesShadow"),this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController.hidesShadow="1",this.navigationBarController["class"]="hidden-bar",this.navigationBarController.render()};a.inherit(l,r),l.prototype.documentType="loadingTemplate",l.prototype.replaceDocument=function(t){this.tabController.navigationDocument.replaceDocument(t,this.el,{animated:!1})},e.exports=l},{"../../util":267,"./element":175,itml:317}],177:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"	","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return"	<activityIndicator>\n	    <title>"+o(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.title:a,t))+"</title>\n	</activityIndicator>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.model:t)?a.data:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],178:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=t("./template.hbs"),o=t("../common").traits.DataProvider,l=i.controller.MultiElementController,s=t("../common").traits.EventMap,c=t("../common").traits.TabComponent,u=t("../base").style,h=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new u),t.entityProviders=t.entityProviders||[],t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),this.loading=!0,l.call(this,t,e),s.call(this,t),c.call(this),a.extend(this.onSelect,{carousel:this.pushProduct,"play-button":this.playMedia}),this.model=new o({data:t.data}),this.model.addEventListener("dataReady",function(t){this.loading=!1,this.viewModel=t.detail.view,this.render()}.bind(this)),this.model.dataSuccess(this.model.data,{success:this.createView.bind(this)})};a.inherit(h,l),a.inherit(h,c,!0),a.inherit(h,s,!0),h.prototype.template=r,h.prototype.artworkMap={profile:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},track:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},product:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},productChild:{xs:[27,27],s:[27,27],m:[27,27],l:[60,60],xl:[60,60]},video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84]}},h.prototype.createView=function(t){for(var e=[],n=0;n<t.length;n++){var i={id:t[n]};e.push(this.model.lookupContent(i,this.processContent.bind(this)))}return e},h.prototype.processContent=function(t){var e=a.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap}),n=a.lockup.setArtworks(t,e,this.artworkMap);return n.line1=a.lockup.line1(t),n.isExplicit=a.lockup.isExplicit(t),n},e.exports=h},{"../../util":267,"../base":72,"../common":80,"./template.hbs":180,itml:317}],179:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=t("./element"),l=t("../common").traits.TabComponent,s=function(t,e){t=t||{},t.controllers=t.controllers||[];var n,i=t.data;0===t.controllers.length&&(n=new o({data:i}),t.controllers.push(n)),r.call(this,t,e),l.call(this)};a.inherit(s,r),a.inherit(s,l,!0),s.prototype.documentType="stackTemplate",e.exports=s},{"../../util":267,"../common":80,"./element":178,itml:317}],180:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r=e.helperMissing,o="<grid ";return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"</grid>\n"},4:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"            ","listLockup",t,{line1:null!=t?t.artistName:t,title:null!=t?t.title:t},e,n,i),null!=a&&(r+=a),r},7:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"            ","listLockup",t,{line1:null!=t?t.artistName:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],181:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../util"),o=r.loc,l=t("./template.hbs"),s=t("../common").traits.DataProvider,c=i.controller.MultiElementController,u=t("../common").traits.EventMap,h=t("../common").traits.TabComponent,d=t("../base").style,p=t("./style.hbs"),m=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new d({styleTemplate:p})),t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),this.loading=!0,this.controllerName="music-video",c.call(this,t,e),u.call(this,t),h.call(this),r.extend(this.onSelect,{"play-button":this.playMedia,"artist-link":this.handleArtistLink,"more-link":this.pushMorePage}),this.productUrl=t.data.url,this.model=new s({data:t.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.fetchData({url:this.productUrl,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})};r.inherit(m,c),r.inherit(m,h,!0),r.inherit(m,u,!0),m.prototype.template=l,m.prototype.artworkMap={video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84]},header:{crop:"h",xs:[320,180],s:[375,210],m:[414,233],l:[768,305],xl:[1024,305]}},m.prototype.typesForKey={video:["grid"],header:["header"]},m.prototype.createView=function(t){return this.errorTitle=null,this.errorMessage=null,this.viewModel=this.viewModel||{},t.pageData?this.viewModel.content=this.processRelatedData(t):this.viewModel.product=this.processContent(t,{type:"header"}),this.viewModel},m.prototype.processRelatedData=function(t){for(var e,n,i=[],a=["moreMusicVideosByArtist","moreMusicVideosInGenre"],l={moreMusicVideosByArtist:"FUSE.Product.MoreByArtist",moreMusicVideosInGenre:"FUSE.Product.YouMayAlsoLike"},s={moreMusicVideosByArtist:"releaseDate",moreMusicVideosInGenre:"artistName"},c=r.screen.sizeForScreenDimension(),u=!!c.match(/xs|s|m/g),h=function(t,e,n,i){t=t.slice(0,100);for(var a=[],r=[],o=0;o<t.length;o++){var l=t[o];if(r.push(l),e>o){var s={id:l,params:i};a.push(this.model.lookupContent(s,this.processContent.bind(this)))}}return this.model.setData(n,r),a}.bind(this),d={xs:3,s:3,m:3,l:5,xl:6},p=d[c],m=this.model.lookup(t.pageData.id)||{},f=m.artistName,g=0;g<a.length;g++){var b=t.pageData[a[g]];if(b){b.length>p&&(e=a[g]),n={type:"grid",line2:s[a[g]]};var v=l[a[g]],y={title:o.loc(v,{artistName:f}),list:u,content:h(b,p,e,n),sectionId:e};i.push(y)}}return i},m.prototype.processContent=function(t,e){var n=r.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,artworkKeys:this.typesForKey,params:e}),i=r.lockup.setArtworks(t,n,this.artworkMap);if(i.isExplicit=r.lockup.isExplicit(i),i[t.kind]=!0,"header"===e.type){var a={genre:t.genres[0].name,year:t.releaseDate.split("-")[0],time:r.lockup.formatDuration(t,"FUSE.Time.MinutesSeconds")};i.metaData=o.loc("FUSE.MusicVideo.GenreYearTime",a)}return e.line2&&(i.line1="releaseDate"===e.line2?t[e.line2].split("-")[0]:t[e.line2]),i},m.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},m.prototype.handleDataReady=function(t){this.loading=!1,r.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},m.prototype.handleArtistLink=function(t){var e=t.target,n=e.getAttribute("data-link-url"),i=e.getAttribute("data-link-title"),r="artist",o={data:{url:decodeURIComponent(n),title:i},dataType:r,navigationDocument:e.ownerDocument.navigationDocument};this.dispatchEvent(new a("tabPush",{detail:o}))},e.exports=m},{"../../util":267,"../base":72,"../common":80,"./style.hbs":183,"./template.hbs":184,itml:317}],182:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=t("./element"),l=t("../common").traits.TabComponent,s=function(t,e){t=t||{},t.controllers=t.controllers||[];var n,i=t.data;0===t.controllers.length&&(n=new o({data:i}),t.controllers.push(n)),r.call(this,t,e),l.call(this)};a.inherit(s,r),a.inherit(s,l,!0),s.prototype.documentType="productTemplate",e.exports=s},{"../../util":267,"../common":80,"./element":181,itml:317}],183:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".product-title {\n    font-size: 22pt;\n    itml-text-max-lines: 2;\n}\n.artist-link {\n    font-size: 16pt;\n}"},useData:!0})},{"hbsfy/runtime":300}],184:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,s="<section ";return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n    <card ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n        <background>\n        "+o((e.productArtwork||t&&t.productArtwork||r).call(t,null!=(a=null!=t?t.viewModel:t)?a.product:a,"play",{name:"productArtwork",hash:{},data:i}))+'\n        </background>\n    </card>\n    <lockup pin="alone" type="list" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+='>\n        <title class="product-title">'+o(l(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.name:a,t)),a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.isExplicit:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'</title>\n        <subtitle class="artist-link">\n            <button class="artist-link" data-link-url="'+o(l(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.artistUrl:a,t))+'" data-link-title="'+o(l(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.artistName:a,t))+'" type="link">'+o(l(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.artistName:a,t))+'</button>\n        </subtitle>\n        <subtitle class="product-metadata">'+o(l(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.metaData:a,t))+'</subtitle>\n        <button type="image" class="action"><img src="resource://UniversalActionControl"/></button>\n    </lockup>\n</section>\n<divider type="full"/>\n'},2:function(t,e,n,i){return' <badge class="explict-badge" src="resource://explicit"/>'},4:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.content:a,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r='        <header class="edge-header">\n';return a=e["if"].call(t,null!=t?t.sectionId:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(r+=a),r+="        </header>\n",a=e["if"].call(t,null!=t?t.list:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.program(13,i),data:i}),null!=a&&(r+=a),r},6:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,o=e.helperMissing;return'                <button type="imagetext" class="more-link" data-section-id="'+r(a(null!=t?t.sectionId:t,t))+'">\n                    <title class="edge-title" id=\'name\'>'+r((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                    <img class="edge-chevron" src="resource://ChevronTerms"/>\n                </button>\n'},8:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},10:function(t,e,n,i){var a,r=e.helperMissing,o="            <grid ";return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"            </grid>\n"},11:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                ","listLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},13:function(t,e,n,i){var a,r=e.helperMissing,o='            <grid class="shelf-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"            </grid>\n"},14:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"                ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},16:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.product:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.content:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(16,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],185:[function(t,e,n){var i=t("../../util"),a=t("../base/document"),r=t("../grouping/controller"),o=t("../loading/element"),l=t("../common").traits.TabComponent,s=t("./title.hbs"),c=i.loc,u=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=c.loc("FUSE.New.AllGenres");var n;0===t.controllers.length&&i.urls.browse()?(n=new r({url:i.urls.browse(),hasGradient:!0}),t.controllers.push(n)):(n=new o,t.controllers.push(n)),t.classes=t.classes||[],t.classes.push("template"),a.call(this,t,e);var s=this.el.getElementById("genre-selector");s&&n instanceof r&&s.addEventListener("select",n.showGenreFilter.bind(n)),n&&n.addEventListener("genre-selected",function(e){t.name=e.detail.name,t.url=e.detail.url,this.el.getElementById("name").innerHTML=t.name}.bind(this)),l.call(this)};i.inherit(u,a),i.inherit(u,l,!0),u.prototype.documentType="stackTemplate",u.prototype.titleTemplate=s,e.exports=u},{"../../util":267,"../base/document":71,"../common":80,"../grouping/controller":152,"../loading/element":175,"./title.hbs":187}],186:[function(t,e,n){var i=t("./document"),a=t("../base/tab"),r=t("../../util"),o=function(t){t=t||{},a.call(this,t)};r.inherit(o,a),o.prototype.getDocumentController=function(){return new i({name:this.name})},e.exports=o},{"../../util":267,"../base/tab":75,"./document":185}],187:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'<button type="imagetext" class="selector" id="genre-selector">\n    <text id=\'name\'>'+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+'</text>\n    <img class="selector-chevron" src="resource://UniversalSortingChevron"/>\n</button>\n'},useData:!0})},{"hbsfy/runtime":300}],188:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=t("../common/traits/data_provider"),l=function(t,e){if(void 0!==t){t.watchedAttributes=t.watchedAttributes||[],t.watchedAttributes.push("type");var n,i,l=t.data||{};l.pageData?(n=l,this.model=new o({data:l}),i=this.model.lookup(l.pageData.id)):i=l,t.type=i.kind,r.call(this,t,e),this.handleLockupData(i,n)}else a.log.warn("ProductDocumentController received no attributes")};a.inherit(l,r),l.prototype.documentType="productTemplate",l.prototype.handleLockupData=function(t,e){var n=t.kind,i={};if("album"===n){var a=t.releaseDate||"",r=a.substring(0,a.indexOf("-"));i={albumStoreID:""+t.id,albumName:t.name,albumYear:r,albumGenre:t.genres&&t.genres[0]&&t.genres[0].name,albumItemsCount:t.trackCount,albumArtistName:t.artistName,albumArtistStoreID:""+t.artistId}}else if("playlist"===n){var o=[];if(t.artworkTracks)for(var l=t.artworkTracks,s=t.artworkTrackIds,c=0;c<s.length;c++){var u=s[c],h=l[u];if(h){var d=h.artwork;d&&o.push([d])}}i={playlistStoreID:""+t.id,playlistName:t.name,playlistItemsCount:o.length,trackArtworks:o}}var p=e||t;i.metadata=t,i.sidePackData=p;var m=this.el.getElementsByTagName("productTemplate").item(0),f=m.getFeature("ProductNativeViewController");f.setProductEntityValueProvider(i),t.uber&&f.setUberParameters(t.uber)},e.exports=l},{"../../util":267,"../common/traits/data_provider":90,itml:317}],189:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../util"),o=r.log,l=t("./related_content"),s=t("../common/traits/data_provider"),c=t("../sharing"),u=function(t,e){if(void 0!==t){var n=t.entityValueProvider.valueForEntityProperty("sidePackData");this.tintInfo=t.tintInfo,this.eventHandlers={};for(var i in e)e.hasOwnProperty(i)&&(this.eventHandlers[i]=e[i]);this.eventData=n,this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("select",this.selectHandler.bind(this)),"itml"===t.source&&r.account.isAppleMusicEnabled()?n&&(this.pageProfile="playlist"===n.kind?"playlist-product":"product-dv",this.model=new s({pageProfile:this.pageProfile}),this.model.addEventListener("dataReady",this.updatePage.bind(this)),n.pageData?this.model.dataSuccess(n,{success:this.createView.bind(this),failure:this.handleFetchingDataFailure.bind(this)}):this.model.fetchData({url:n.url,success:this.createView.bind(this),failure:this.handleFetchingDataFailure.bind(this)})):this.nativeViewController.addEventListener("needscontent",this.needsRelatedContentForMyMusicProductView.bind(this)),setTimeout(function(){this.nativeViewController.setNumberOfLikes(85)}.bind(this),1500)}else o.warn("ProductController was passed an undefined event")};u.prototype.createView=function(t){this.model.setData("pageData",t.pageData);var e={id:t.pageData.id,profile:this.pageProfile};return this.viewModel=this.model.lookupContent(e),this.viewModel},u.prototype.handleFetchingDataFailure=function(){r.keypath(this,"eventData.artworkTracks")&&this.updateTracklistWithChildren(this.eventData.artworkTracks,this.eventData.artworkTrackIds,null)},u.prototype.needsRelatedContentForMyMusicProductView=function(t){var e=t.entityValueProvider;this.tintInfo=t.tintInfo;var n,i=e.valueForEntityProperty("albumStoreID"),a=e.valueForEntityProperty("cloudStoreID");i&&"0"!==i?(n=r.urls.build("album",{id:i}),this.pageProfile="product-dv"):a&&"0"!==a&&(n=r.urls.build("playlist",{id:a}),this.pageProfile="playlist-product"),n&&r.account.isAppleMusicEnabled()&&(this.model=new s({pageProfile:this.pageProfile}),this.model.addEventListener("dataReady",this.updateRelatedContent.bind(this)),this.model.fetchData({url:n,success:this.createView.bind(this)}))},u.prototype.selectHandler=function(t){if("artistName"===t.buttonIdentifier)this.pushArtist();else if("shareButton"===t.buttonIdentifier){this.model||(this.model=new s);var e,n=this.model.getData("pageData");n&&(e=this.model.lookup(n.id)),this.shareController=new c({data:{event:t,content:e}}),this.nativeViewController.presentShareDocument(this.shareController.el,{animated:!0})}},u.prototype.pushArtist=function(){var t=this.model.getData("pageData");if(t&&t.hasPrimaryArtist){var e=this.viewModel.artistUrl,n=""+this.viewModel.artistId,i=t.artistName,r={navigationDocument:this.nativeViewController.navigationDocument},o=this.model.lookup(n);o?(r.data=o,r.dataType="artist_page"):r.data={id:n,url:decodeURIComponent(e),title:i},this.eventHandlers.tabPush(new a("tabPush",{detail:r}))}},u.prototype.updatePage=function(t){this.viewModel=t.detail.view,this.updateTracklist(),this.updateRelatedContent(),this.viewModel.description&&this.updateDescription()},u.prototype.updateTracklist=function(){var t,e=[];this.viewModel&&(t=this.viewModel.children,e=this.viewModel.childrenIds),this.updateTracklistWithChildren(t,e)},u.prototype.updateTracklistWithChildren=function(t,e){if(t){for(var n,i=[],a=!1,r=Object.keys(t),o=0;o<r.length;o++){var l=t[r[o]].artistId;if(n){if(l!==n){a=!0;break}}else n=l}for(var s=0;s<e.length;s++){var c=e[s];if(t.hasOwnProperty(c)){var u=t[c],h=null;h=[u.artwork];var d=null,p=u.offers[0].assets;p&&p.length>0&&(d=p[0].duration);var m={trackStoreID:""+u.id,trackName:u.name,trackNumber:u.trackNumber,trackDuration:d,artistName:u.artistName,artistStoreID:""+u.artistId,collectionName:u.collectionName,collectionStoreID:""+u.collectionId,isCompilation:a,trackKind:u.kind,artwork:h,metadata:u,isFullMetadata:!0};i.push(m)}}this.nativeViewController.setTracklistItems(i)}},u.prototype.updateRelatedContent=function(){var t=new l({data:this.model.getData("pageData"),tintInfo:this.tintInfo});this.nativeViewController.setRelatedContentDocument(t.el),t.addEventListener("tabPush",this.eventHandlers.tabPush.bind(this))},u.prototype.updateDescription=function(){},e.exports=u},{"../../util":267,"../common/traits/data_provider":90,"../sharing":246,"./related_content":191,itml:317}],190:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,o=i.controller.MultiElementController,l=t("../../common").traits.EventMap,s=t("../../common").traits.TabComponent,c=t("../../base").style,u=t("./style.hbs"),h=t("../../common").traits.DataProvider,d=function(t,e){t=t||{},t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styleTemplate=u,t.styles.push(new c(t)),t.events=t.events||[],t.events.push("select"),this.loading=!0,this.controllerName="product",o.call(this,t,e),s.call(this),l.call(this,t),a.extend(this.onSelect,{"cover-button":this.playMedia,"more-link":this.pushMorePage}),this.model=new h(t),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get()};a.inherit(d,o),a.inherit(d,s,!0),a.inherit(d,l,!0),d.prototype.template=t("./template.hbs"),d.prototype.artworkMap={grid:{xs:[88,88],s:[125,125],m:[125,125],l:[83,83],xl:[83,83]}},d.prototype.typesForKey={grid:["grid"]},d.prototype.relatedKeys={featuredArtists:"FUSE.Product.FeaturedArtists",topAlbumsByArtist:"FUSE.Product.MoreByArtist",moreByThisProvider:"FUSE.Product.MoreByProvider",moreInGenre:"FUSE.Product.YouMayAlsoLike"},d.prototype.get=function(){this.model.dataSuccess(this.model.data,{success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})},d.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},d.prototype.createView=function(t){this.errorTitle=null,this.errorMessage=null;

for(var e,n=this.model.lookup(t.id)||{},i=n.artistName,o=n.curatorName,l=[],s=a.screen.sizeForScreenDimension(),c="xl"===s?4:3,u=Object.keys(this.relatedKeys),h=u.length,d=0;h>d;d++){var p=u[d];if(t[p]){var m=h-1>d,f=t[p];f.length>c&&(e=p,this.model.setData(p,f));var g=this.lookupContentIds(t[p].slice(0,c)),b=this.relatedKeys[p],v=r.loc(b,{artistName:i,curatorName:o});g.length>0&&l.push({title:v,content:g,sectionId:e,gridClass:"xl"===s?"edge-4col-grid":"edge-3col-grid",divider:m})}}return l},d.prototype.lookupContentIds=function(t){for(var e=[],n=0;n<t.length;n++){var i={id:t[n],params:{type:"grid"}};e.push(this.model.lookupContent(i,this.processContent.bind(this)))}return e},d.prototype.processContent=function(t,e){var n=a.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,artworkKeys:this.typesForKey,params:e}),i=a.lockup.setArtworks(t,n,this.artworkMap);return i.releaseDate&&(i.line1=i.releaseDate.split("-")[0]),i.isExplicit=a.lockup.isExplicit(i),i[t.kind]=!0,i},d.prototype.handleDataReady=function(t){this.loading=!1,this.viewModel=t.detail.view,this.render()},e.exports=d},{"../../../util":267,"../../base":72,"../../common":80,"./style.hbs":192,"./template.hbs":193,itml:317}],191:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.DocumentController,o=t("./element"),l=function(t,e){t=t||{},t.controllers=t.controllers||[];var n=new o(t);t.controllers.push(n),t.classes=t.classes||[],t.classes.push("template"),r.call(this,t,e),this.addEventDelegates(n,["tabPush"])};a.inherit(l,r),l.prototype.documentType="stackTemplate",e.exports=l},{"../../../util":267,"./element":190,itml:317}],192:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return".link-color {\n    color: tint-color;\n    itml-img-treatment: tint;\n}\n\n.related-header {\n    padding: 15pt 0pt 15pt 0pt;\n}\n\n.related-grid {\n    padding: 0pt 0pt 0pt 0pt;\n}\n\n.lockup-subtitle {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,"0.4",{name:"hexToRgb",hash:{},data:i}))+";\n}"},useData:!0})},{"hbsfy/runtime":300}],193:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='        <header class="edge-header related-header">\n';return a=e["if"].call(t,null!=t?t.sectionId:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=a&&(s+=a),s+='        </header>\n        <grid class="'+o(r(null!=t?t.gridClass:t,t))+' related-grid" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"        </grid>\n"},3:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,o=e.helperMissing;return'                <button type="imagetext" class="more-link" data-section-id="'+r(a(null!=t?t.sectionId:t,t))+'">\n                    <title class="edge-title" id=\'name\'>'+r((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                    <img class="edge-chevron" src="resource://ChevronTerms"/>\n                </button>\n'},5:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},7:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"            ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],194:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("../../base").style,o=t("../../common").traits.DataProvider,l=i.controller.MultiElementController,s=t("../../common").traits.EventMap,c=t("../../common").traits.TabComponent,u=function(t,e){t=t||{};var n=t.entityValueProvider;t.data=n.valueForEntityProperty("metadata"),t.data||(t.data={id:n.valueForEntityProperty("artistStoreID")}),t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styles.push(new r(t)),t.events=t.events||[],t.events.push("select"),this.loading=!0,this.controllerName="profile-all",l.call(this,t,e),s.call(this,t),c.call(this),a.extend(this.onSelect,{carousel:this.pushProduct,"play-button":this.playMedia,"more-link":this.pushMorePage}),this.model=new o({pageProfile:"lockup"}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get(t)};a.inherit(u,l),a.inherit(u,c,!0),a.inherit(u,s,!0),u.prototype.template=t("./template.hbs"),u.prototype.artworkMap={product:{xs:[55,55],s:[55,55],m:[55,55],l:[125,125],xl:[120,120]},video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84]}},u.prototype.get=function(t){var e=t.data.id,n=t.data.url;!n&&e&&(n=a.urls.build("artist",{id:e})),this.model.fetchData({url:n,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})},u.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},u.prototype.createView=function(t){this.errorTitle=null,this.errorMessage=null;var e,n,i,r,o,l=[],s=a.screen.sizeForScreenDimension(),c=!!s.match(/xs|s|m/g),u="xl"===s?4:3;if(a.keypath(t,"pageData.content"))for(var h=0;h<t.pageData.content.length;h++)o=t.pageData.content[h],o.adamIds.length>u?(i=o.adamIds.slice(0,u),n=o.title,this.model.setData(n,o.adamIds)):i=o.adamIds,r=this.lookupContentIds(i),e=r[0].kind&&"song"===r[0].kind?"list":"shelf",l.push({title:o.title,grid:!0,list:c||"list"===e,sectionId:n,content:r});else a.log.error("missing content for artist",t);return l},u.prototype.lookupContentIds=function(t){for(var e=[],n=0;n<t.length;n++)e.push(this.model.lookupContent(t[n],this.processContent.bind(this)));return e},u.prototype.processContent=function(t,e){var n=a.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:e}),i=a.lockup.setArtworks(t,n,this.artworkMap);return i.kind&&("album"===i.kind?i.releaseDate&&(i.line1=i.releaseDate.split("-")[0]):"song"===i.kind&&(i.line1=i.collectionName)),i.isExplicit=a.lockup.isExplicit(i),i[t.kind]=!0,i},u.prototype.handleDataReady=function(t){this.loading=!1,this.viewModel=t.detail.view,this.render()},e.exports=u},{"../../../util":267,"../../base":72,"../../common":80,"./template.hbs":196,itml:317}],195:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.DocumentController,o=t("./element"),l=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name="All";var n={};n.entityValueProvider=t.entityValueProvider,n.tintInfo=t.tintInfo;var i=new o(n);t.controllers.push(i),this.suppressNavigationController=!0,t.classes=t.classes||[],t.classes.push("template"),r.call(this,t,e),this.addEventDelegates(i,["tabPush"])};a.inherit(l,r),l.prototype.documentType="stackTemplate",e.exports=l},{"../../../util":267,"./element":194,itml:317}],196:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.list:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(11,i),data:i}),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r='            <header class="edge-header">\n';return a=e["if"].call(t,null!=t?t.sectionId:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=a&&(r+=a),r+"            </header>\n"},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,o=e.helperMissing;return'                    <button type="imagetext" class="more-link" data-section-id="'+r(a(null!=t?t.sectionId:t,t))+'">\n                        <title class="edge-title" id=\'name\'>'+r((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                        <img class="edge-chevron" src="resource://ChevronTerms"/>\n                    </button>\n'},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                    <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},8:function(t,e,n,i){var a,r=e.helperMissing,o='            <grid class="grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"            </grid>\n"},9:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                ","listLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},11:function(t,e,n,i){var a,r=e.helperMissing,o='            <grid class="shelf-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"            </grid>\n"},12:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"                ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],197:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("../../connect/feed/element"),o=i.controller.DocumentController,l=t("../../common").traits.TabComponent,s=a.loc,c=function(t,e){t=t||{},t.entityValueProvider=t.entityValueProvider||{},t.controllers=t.controllers||[],t.name=s.loc("FUSE.NavBar.Connect");var n=t.entityValueProvider.valueForEntityProperty("artistStoreID"),i=t.tintInfo;t.controllers.length||(this.controller=new r({api:"activities",params:{artist:n},tintInfo:i}),t.controllers.push(this.controller)),t.classes=t.classes||[],t.classes.push("template"),o.call(this,t,e),l.call(this),this.controller&&(this.el.addEventListener("needsmore",this.controller.handleNeedsMore.bind(this.controller)),this.addEventDelegates(this.controller,["showRecommendations","getConnectFeed"]),a.account.getSubscriptionStatus({service:"AppleMusic"},function(){a.account.hasAdminPermission()&&a.account.getProfilePermissions({success:this.handlePermissions.bind(this),failure:this.handlePermissions.bind(this)})}.bind(this)))};a.inherit(c,o),a.inherit(c,l,!0),c.prototype.documentType="stackTemplate",c.prototype.handlePermissions=function(t){this.permissions=t||[]},e.exports=c},{"../../../util":267,"../../common":80,"../../connect/feed/element":104,itml:317}],198:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,o=t("../common/traits/data_provider"),l=i.controller.DocumentController,s=function(t,e){var n,i=t.data||{},s="connect"===TabBar.selectedTab.identifier;if(i.storePlatformData){this.model=new o({data:i});var c=a.keypath(i,"pageData.id");n=this.model.lookup(c)}else n=i;var u=n.kind,h=u&&u.match(/iTunesBrand|brand|activity/g),d=u&&"activity"===u,p=n;t=t||{},t.watchedAttributes=t.watchedAttributes||[],t.watchedAttributes.push("type"),t.type=h?"curator":"artist",l.call(this,t,e);var m={artistStoreID:n.id+"",artistName:n.shortName||n.name,metadata:p,sidePackData:n},f=this.el.getElementsByTagName("profileTemplate").item(0),g=f.getFeature("ProfileNativeViewController");if(h){var b=[];t.data.groupingId&&b.push({identifier:"editors_picks",title:r.loc("FUSE.Profile.EditorsPicks")}),d||b.push({identifier:"playlists",title:r.loc("FUSE.Profile.Playlists")}),t.data.hasSocialPosts?b.push({identifier:"connect",title:r.loc("FUSE.Profile.Connect")}):g.setSocialHidden(!0),g.setVisibleSegments(b)}else{var v={all:!0,connect:t.data.hasSocialPosts,biography:!1};g.setAvailableContentFlags(v),s&&g.setSelectedSegment("connect")}g.setProfileEntityValueProvider(m)};a.inherit(s,l),s.prototype.documentType="profileTemplate",e.exports=s},{"../../util":267,"../common/traits/data_provider":90,itml:317}],199:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.MultiElementController,o=t("../../common").traits.DataProvider,l=t("../../base").style,s=t("./style.hbs"),c=t("./template.hbs"),u=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new l({styleTemplate:s})),t.events=t.events||[],t.data=t.data||[],this.model=new o({data:t.data}),this.viewModel=this.model.lookup(t.data.id,"artist"),r.call(this,t,e),this.render()};a.inherit(u,r),u.prototype.template=c,e.exports=u},{"../../../util":267,"../../base":72,"../../common":80,"./style.hbs":201,"./template.hbs":202,itml:317}],200:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.DocumentController,o=t("./element"),l=t("./title.hbs"),s=t("./toolbar.hbs"),c=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new o(t),t.controllers.push(n)),r.call(this,t,e)};a.inherit(c,r),c.prototype.documentType="editorTemplate",c.prototype.titleTemplate=l,c.prototype.toolbarTemplate=s,e.exports=c},{"../../../util":267,"./element":199,"./title.hbs":203,"./toolbar.hbs":204,itml:317}],201:[function(t,e,n){e.exports=t(47)},{"hbsfy/runtime":300}],202:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"    "+r(a(t,t))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<dialogTemplate>\n  	<title>Reset Biography</title>\n   	<text>Resetting your biography will remove any changes you have made. Your default Apple Music biography will be displayed on your artist profile.</text>\n   	<button type="destructive">Reset</button>\n   	<button type="cancel">Cancel</button>\n</dialogTemplate>\n<text>\n';return a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.artistBio:a,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"</text>"},useData:!0})},{"hbsfy/runtime":300}],203:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return'<button id="cancelButton" class="align-left" action="close">Cancel</button>\n<title>Biography</title>\n<button class="align-right done-button" type="done">Done</button>'},useData:!0})},{"hbsfy/runtime":300}],204:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<button>Reset</button>"},useData:!0})},{"hbsfy/runtime":300}],205:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("../../grouping/controller"),o=t("../../common").traits.TabComponent,l=i.controller.DocumentController,s=function(t,e){t=t||{},t.controllers=t.controllers||[],t.entityValueProvider=t.entityValueProvider||{};var n,i,s=t.entityValueProvider.valueForEntityProperty("metadata"),c=t.tintInfo;s.groupingId&&(i=a.urls.build("grouping",{id:s.groupingId}),n=new r({url:i,tintInfo:c}),t.controllers.push(n)),t.classes=t.classes||[],t.classes.push("template"),l.call(this,t,e),o.call(this)};a.inherit(s,l),a.inherit(s,o,!0),s.prototype.documentType="stackTemplate",e.exports=s},{"../../../util":267,"../../common":80,"../../grouping/controller":152,itml:317}],206:[function(t,e,n){var i=t("./all"),a=t("./editors_picks"),r=t("./playlists"),o=t("./connect"),l=t("../sharing"),s=t("../common/traits/data_provider"),c=t("./edit"),u=t("../../util"),h=function(t,e){var n=t.entityValueProvider,i=n.valueForEntityProperty("metadata"),a=i&&i.hasSocialPosts;this.eventHandlers={};for(var r in e)e.hasOwnProperty(r)&&(this.eventHandlers[r]=e[r]);if(this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.handleNeedsContent.bind(this)),this.nativeViewController.addEventListener("select",this.handleSelect.bind(this)),this.nativeViewController.addEventListener("change",this.handleChange.bind(this)),this.setFollowerCount(t),"activity"===i.kind&&this.nativeViewController.setSocialHidden(!0),"native"===t.source&&u.account.isAppleMusicEnabled()){var o={all:!0,connect:!!a,biography:!1};this.nativeViewController.setAvailableContentFlags(o)}};h.prototype.handleNeedsContent=function(t){var e,n={all:i,editors_picks:a,playlists:r,connect:o},l=t.segmentIdentifier,s=n[l],c={};if(s){c.entityValueProvider=t.entityValueProvider,c.tintInfo=t.tintInfo;var u=c.entityValueProvider;this.data=u.valueForEntityProperty("metadata"),this.data||(this.data={id:u.valueForEntityProperty("artistStoreID")}),e=new s(c),e.addEventListener("tabPush",this.eventHandlers.tabPush),this.nativeViewController.setSegmentDocument(l,e.el)}else"biography"===t.documentIdentifier&&(s=o,c.entityValueProvider=t.entityValueProvider,c.tintInfo=t.tintInfo,e=new s(c),e.name="Joellog Test",e.addEventListener("tabPush",this.eventHandlers.tabPush),this.nativeViewController.setBiographyDocument(e.el))},h.prototype.handleSelect=function(t){var e=t.buttonIdentifier;switch(e){case"shareButton":var n=this.data.id;this.model=new s;var i=this.model.lookup(n);this.shareController=new l({data:{event:t,content:i}}),this.nativeViewController.presentShareDocument(this.shareController.el,{animated:!0});var a=this.shareController.el.getElementsByTagName("shareTemplate").item(0);a&&a.addEventListener("submit",this.handleShareSubmit.bind(this));break;case"editButton":this.editProfileController=new c({data:this.data}),this.nativeViewController.presentBiographyEditorDocument(this.editProfileController.el,{animated:!0});var r=this.editProfileController.el.getElementsByTagName("editorTemplate").item(0);r&&r.addEventListener("submit",this.handleEditProfileSubmit.bind(this))}},h.prototype.handleChange=function(t){var e=t.itemIdentifier;switch(e){case"following":t.following===!0?this.nativeViewController.numberOfFollowers+=1:this.nativeViewController.numberOfFollowers-=1,this.nativeViewController.setNumberOfFollowers(this.nativeViewController.numberOfFollowers)}},h.prototype.handleEditProfileSubmit=function(t){var e=t.buttonIdentifier;switch(e){case"doneButton":break;case"cancelButton":}},h.prototype.handleShareSubmit=function(){},h.prototype.setFollowerCount=function(t){var e=t.entityValueProvider.valueForEntityProperty("artistStoreID"),n=u.urls.build("followerCount",{artist:e});u.xhr({method:"GET",url:n,success:function(t){try{var e=JSON.parse(t);this.nativeViewController.numberOfFollowers=e.count,this.nativeViewController.setNumberOfFollowers(this.nativeViewController.numberOfFollowers)}catch(n){u.log.error(n)}}.bind(this),failure:function(){u.log.error("failed request for follower count")}})},e.exports=h},{"../../util":267,"../common/traits/data_provider":90,"../sharing":246,"./all":195,"./connect":197,"./edit":200,"./editors_picks":205,"./playlists":208}],207:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),o=t("../../common").traits.DataProvider,l=i.controller.MultiElementController,s=t("../../common").traits.EventMap,c=t("../../common").traits.TabComponent,u=t("../../base").style,h=function(t,e){t=t||{},t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styles.push(new u(t)),t.entityProviders=t.entityProviders||[],t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),this.loading=!0,this.controllerName="profile-playlists",l.call(this,t,e),s.call(this,t),c.call(this),a.extend(this.onSelect,{carousel:this.pushProduct,"play-button":this.playMedia}),this.model=new o,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.fetchData({url:t.data.url,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})};a.inherit(h,l),a.inherit(h,c,!0),a.inherit(h,s,!0),h.prototype.template=r,h.prototype.artworkMap={profile:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},track:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},product:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},productChild:{xs:[27,27],s:[27,27],m:[27,27],l:[60,60],xl:[60,60]},video:{xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84]}},h.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},h.prototype.createView=function(t){var e=[],n=t.pageData.id,i=this.model.lookup(n,"product");if(i&&i.playlistIds){for(var a=0;a<i.playlistIds.length;a++){var r={id:i.playlistIds[a]};e.push(this.model.lookupContent(r,this.processContent.bind(this)))}return e}this.handleFailedFetch(null,"","Missing Playlists for Curator")},h.prototype.processContent=function(t){var e=a.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap}),n=a.lockup.setArtworks(t,e,this.artworkMap);return n.line1=a.lockup.line1(t),n.isExplicit=a.lockup.isExplicit(t),n},h.prototype.handleDataReady=function(t){this.loading=!1,this.viewModel=t.detail.view,this.render()},e.exports=h},{"../../../util":267,"../../base":72,"../../common":80,"./template.hbs":209,itml:317}],208:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./element"),o=t("../../common").traits.TabComponent,l=i.controller.DocumentController,s=function(t,e){t=t||{},t.controllers=t.controllers||[],t.entityValueProvider=t.entityValueProvider||{};var n,i=t.entityValueProvider.valueForEntityProperty("metadata"),s=t.tintInfo;i?(n=new r({data:i,tintInfo:s}),t.controllers.push(n)):a.log.error("no playlists associated with curator",i),t.classes=t.classes||[],t.classes.push("template"),l.call(this,t,e),o.call(this)};a.inherit(s,l),a.inherit(s,o,!0),s.prototype.documentType="stackTemplate",e.exports=s},{"../../../util":267,"../../common":80,"./element":207,itml:317}],209:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='<grid class="grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"</grid>\n"},2:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"        ","listLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],210:[function(t,e,n){var i=t("../../util"),a=t("../grouping/controller"),r=t("../loading/element"),o=t("../common").traits.EventMap,l=t("../common").traits.TabComponent,s=t("../common").traits.DataProvider,c=t("../base/document"),u=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=t.name||"Radio";var n,u=t.url;if(0===t.controllers.length&&i.urls.radio()?(n=new a({url:i.urls.radio()}),t.controllers.push(n)):(n=new r,t.controllers.push(n)),c.call(this,t,e),l.call(this),o.call(this),u){var h=u.match(/ra\.[0-9]+/g);h&&(this.stationId=h[0],this.model=new s({pageProfile:"lockup"}),this.model.fetchContent({profile:"lockup",contentIds:[this.stationId],onSuccess:function(){this.authAndPlay.call(this,this.stationId)}.bind(this)}))}};i.inherit(u,c),i.inherit(u,l,!0),i.inherit(u,o,!0),u.prototype.documentType="stackTemplate",e.exports=u},{"../../util":267,"../base/document":71,"../common":80,"../grouping/controller":152,"../loading/element":175}],211:[function(t,e,n){var i=t("./document"),a=t("../base/tab"),r=t("../../util"),o=function(t){t=t||{},this.url=t.url,a.call(this,t)};r.inherit(o,a),o.prototype.getDocumentController=function(){return new i({name:this.name,url:this.url})},e.exports=o},{"../../util":267,"../base/tab":75,"./document":210}],212:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.event.Event,o=t("./template.hbs"),l=t("./style.hbs"),s=t("./partials"),c=t("../../common").traits.DataProvider,u=t("../../base").style,h=t("../../common").traits.EventMap,d=t("../../common").traits.TabComponent,p=i.controller.MultiElementController,m=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.styles.push(new u({styleTemplate:l})),s(),this.loading=!0,p.call(this,t,e),h.call(this,t),d.call(this),this.model=new c,this.unavailableShowIds=[],a.extend(this.onSelect,{"link-button":this.handleLink,"play-media":this.authAndPlay,"request-button":this.handleUserRequest}),this.getCmsData()};a.inherit(m,p),a.inherit(m,h,!0),a.inherit(m,d,!0),m.prototype.template=o,m.prototype.getCmsData=function(){a.xhr({url:"https://uic.itunes.apple.com/live-stations/beats1/feed.json",method:"GET",success:this.cmsSuccess.bind(this),failure:this.cmsFailure.bind(this)})},m.prototype.cmsSuccess=function(t){this.cmsData=JSON.parse(t),this.cmsData.stationId?this.getStoreData():this.handleRender()},m.prototype.cmsFailure=function(t){a.log.error("BeatsOne: CMS Request Failure: ",t),this.renderView()},m.prototype.getStoreData=function(){var t=[];t.push(this.cmsData.stationId),this.cmsData.curatorIds instanceof Array&&t.push.apply(t,this.cmsData.curatorIds),this.model.fetchContent({profile:"lockup",contentIds:t,onSuccess:this.storeDataSuccess.bind(this),onFailure:this.storeDataFailure.bind(this)})},m.prototype.storeDataSuccess=function(){var t=this.model.lookup(this.cmsData.stationId);t?(this.stationData=t,this.createView()):(a.log.error("LiveStation: No station data found for ID: ",this.cmsData.stationId),this.handleRender())},m.prototype.storeDataFailure=function(t){a.log.error("LiveStation: Store request failed: ",t),this.renderView()},m.prototype.createView=function(){this.errorTitle=null,this.errorMessage=null,this.viewModel={},this.viewModel.stationId=this.cmsData.stationId,this.strings={},this.cmsData.details&&(this.viewModel.requestAddress=this.cmsData.details.requestAddress,this.viewModel.links=this.cmsData.details.links,this.viewModel.defaultShowImageUrl=this.cmsData.details.defaultShowImageUrl,this.strings={description:this.cmsData.details.description,liveNowTitle:this.cmsData.details.liveNowTitle,aboutTitle:this.cmsData.details.aboutTitle,upcomingShowsTitle:this.cmsData.details.upcomingShowsTitle,featuredShowsTitle:this.cmsData.details.featuredShowsTitle,listenNowActionText:this.cmsData.details.listenNowActionText,requestActionText:this.cmsData.details.requestActionText});var t=a.keypath(this.stationData,"editorialArtwork.subscriptionCover");t&&(this.viewModel.uber=t),this.setUpcomingShows(),this.setCurrentShow(),this.setFeaturedShows(),this.handleRender()},m.prototype.setUpcomingShows=function(){function t(t){var e;return t&&t instanceof Date&&(e=formatDate(t,"hm"),e=e.replace(" ","").replace(":00AM","AM").replace(":00PM","PM")),e}var e,n,i,a=Date.now(),r=new Date(a+828e5);this.viewModel.upcomingShows=[],this.cmsData.upcomingShows instanceof Array&&this.cmsData.upcomingShows.forEach(function(o){e=new Date(o.startTime),n=new Date(o.endTime),o.formattedStartTime=t(e),o.formattedEndTime=t(n),a<n.getTime()&&e.getTime()<r&&(o.curatorId&&(i=this.model.lookup(o.curatorId),i?o.storeData=i:this.unavailableShowIds.push(o.curatorId)),a>e.getTime()?this.viewModel.currentShow=o:this.viewModel.upcomingShows.push(o))},this)},m.prototype.setCurrentShow=function(){if(this.viewModel.currentShow){var t=a.keypath(this.viewModel,"currentShow.storeData.editorialArtwork.brandLogo");t?this.viewModel.currentShow.artwork=t:a.keypath(this.cmsData,"details.genericShowDetails.artworkUrl")&&(this.viewModel.currentShow.artwork={url:this.cmsData.details.genericShowDetails.artworkUrl})}else{var e={};this.cmsData.details.genericShowDetails&&(e.title=this.cmsData.details.genericShowDetails.title,e.description=this.cmsData.details.genericShowDetails.description,e.artwork={url:this.cmsData.details.genericShowDetails.artworkUrl}),this.viewModel.currentShow=e}},m.prototype.setFeaturedShows=function(){var t;this.viewModel.featuredShows=[],this.cmsData.featuredShows instanceof Array&&this.cmsData.featuredShows.forEach(function(e){e.curatorId&&(t=this.model.lookup(e.curatorId),t&&a.keypath(t,"editorialArtwork.brandLogo")?(e.storeData=t,e.artwork=t.editorialArtwork.brandLogo,this.viewModel.featuredShows.push(e)):this.unavailableShowIds.push(e.curatorId))},this)},m.prototype.handleLink=function(t){var e=t.target.getAttribute("data-link-url"),n=t.target.getAttribute("data-page-target");e&&("external"===n?openURL(e):this.pushUrl(t))},m.prototype.handleUserRequest=function(t){var e=t.target.getAttribute("data-request-address");e&&openURL("sms:"+e)},m.prototype.shouldUseWideLayout=function(){return["l","xl"].indexOf(a.screen.sizeForScreenDimension())>-1},m.prototype.handleRender=function(){this.loading=!1,this.unavailableShowIds.length>0&&(this.unavailableShowIds=this.unavailableShowIds.filter(function(t,e,n){return n.indexOf(t)===e}),a.log.error("LiveStation: Unavailable show Ids: ",this.unavailableShowIds)),this.viewModel&&this.viewModel.uber&&this.dispatchEvent(new r("updateDocumentStyles",{detail:{style:new u({styleTemplate:l,tintInfo:this.viewModel.uber})}})),this.renderView()},m.prototype.handleRotation=function(){this.renderView()},m.prototype.renderView=function(){this.viewModel&&(this.viewModel.wideLayout=this.shouldUseWideLayout(),this.viewModel.narrowLayout=!this.shouldUseWideLayout(),this.viewModel.screenSize=a.screen.sizeForScreenDimension(),this.setProperArtwork()),this.render()},m.prototype.setProperArtwork=function(){this.viewModel.uber&&(this.viewModel.uber.image=this.getProperArtwork("uber",this.viewModel.uber)),this.viewModel.currentShow.image=this.getProperArtwork("live",this.viewModel.currentShow.artwork),this.viewModel.featuredShows.forEach(function(t){t.image=this.getProperArtwork("featured",t.artwork)},this)},m.prototype.getProperArtwork=function(t,e){var n,i,r;return t&&e&&(r={content:{artwork:e},params:{type:t}},this.artworkMap&&(r.artworkMap=this.artworkMap),i=a.artwork.getArtworkForContent(r),i&&i.image&&(n=i.image)),n},m.prototype.artworkMap={uber:{crop:"h",xs:[320,180],s:[375,240],m:[414,240],l:[768,305],xl:[1024,305]},live:{crop:"cc",xs:[88,88],s:[104,104],m:[130,130],l:[123,123],xl:[123,123]},featured:{crop:"cc",xs:[138,138],s:[165,165],m:[184,184],l:[123,123],xl:[123,123]}},e.exports=m},{"../../../util":267,"../../base":72,"../../common":80,"./partials":217,"./style.hbs":219,"./template.hbs":220,itml:317}],213:[function(t,e,n){var i=t("../../../util"),a=t("./element"),r=t("../../common").traits.TabComponent,o=t("../../base/document"),l=function(t,e){t=t||{},t.name="Live Station",t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("live-station-document"),t.controllers=t.controllers||[],this.controller=new a,this.controller.addEventListener("updateDocumentStyles",this.updateDocumentStyles.bind(this)),
t.controllers.push(this.controller),o.call(this,t,e),r.call(this)};i.inherit(l,o),i.inherit(l,r,!0),l.prototype.dataReady=function(){},l.prototype.updateDocumentStyles=function(t){t&&t.detail&&(this.stylesController.addStyle(t.detail.style),this.render())},l.prototype.documentType="stackTemplate",e.exports=l},{"../../../util":267,"../../base/document":71,"../../common":80,"./element":212}],214:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l="";return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.liveNowTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n    <grid>\n",a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=a&&(l+=a),l+='            <lockup>\n                <img width="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.height:a,t))+'" srcset="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.url:a,t))+" "+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.dpr:a,t))+'" alt="'+o(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.name:a,t))+'" />\n            </lockup>\n            <lockup>\n',a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedStartTime:a,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='                <title maxLines="0" class="show-title"><text>'+o(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.title:a,t))+'</text></title>\n                <subtitle class="current-show-description" maxLines="0"><text>'+o(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.description:a,t))+"</text></subtitle>\n",a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.listenNowActionText:a,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(l+=a),a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.allowRequests:a,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"            </lockup>\n        </card>\n    </grid>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'        <header class="edge-header current-show-header">\n            <title class="edge-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.strings:t)?a.liveNowTitle:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n        </header>\n"},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='        <card class="action-lockup editorial-card" data-content-id="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.id:a,t))+'" data-content-kind="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.kind:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+">\n"},6:function(t,e,n,i){return'        <card class="editorial-card">\n'},8:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedEndTime:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},9:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'                        <text maxLines="0" class="timestamp">'+o(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedStartTime:a,t))+" - "+o(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedEndTime:a,t))+"</text>\n"},11:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return'                    <button type="thin" class="station-button play-media" data-content-id="'+o(r(null!=(a=null!=t?t.viewModel:t)?a.stationId:a,t))+'"><title>'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=(a=null!=t?t.strings:t)?a.listenNowActionText:a,{name:"toUpperCase",hash:{},data:i}))+"</title></button>\n"},13:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.requestAddress:a,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},14:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.requestActionText:a,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},15:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return'                            <button type="thin" class="request-button station-button" data-request-address="'+o(r(null!=(a=null!=t?t.viewModel:t)?a.requestAddress:a,t))+'"><title>'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=(a=null!=t?t.strings:t)?a.requestActionText:a,{name:"toUpperCase",hash:{},data:i}))+"</title></button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.currentShow:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":300}],215:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.aboutTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'        <header class="edge-header about-header">\n           <title class="edge-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.strings:t)?a.aboutTitle:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n        </header>\n"},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l='    <grid>\n        <card class="editorial-card">\n            <lockup>\n                <text maxLines="0">'+o(r(null!=(a=null!=t?t.strings:t)?a.description:a,t))+"</text>\n";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.links:a,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"            </lockup>\n        </card>\n    </grid>\n"},5:function(t,e,n,i){var a,r='                    <list class="link-list">\n';return a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.links:a,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"                    </list>\n"},6:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},7:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.label:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},8:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                                    <button type="link" data-link-url="'+r(a(null!=t?t.url:t,t))+'" data-page-target="'+r(a(null!=t?t.target:t,t))+'" class="link-button">\n                                        <title>'+r(a(null!=t?t.label:t,t))+'</title>\n                                        <img src="resource://arrow"/>\n                                    </button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.wideLayout:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.description:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":300}],216:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s="";return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.featuredShowsTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='\n    <grid class="featured-grid featured-grid-'+o(r(null!=(a=null!=t?t.viewModel:t)?a.screenSize:a,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=" ",a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.narrowLayout:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.featuredShows:a,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </grid>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'        <header class="edge-header featured-shows-header">\n           <title class="edge-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.strings:t)?a.featuredShowsTitle:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n        </header>\n"},4:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'style="itml-item-width: '+o(r(null!=(a=null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.featuredShows:a)?a[1]:a)?a.image:a)?a.width:a,t))+'"'},6:function(t,e,n,i){var a,r,o=this.lambda,l=this.escapeExpression,s=e.helperMissing,c="function",u='            <lockup class="action-lockup featured-show shelf-lockup" data-content-id="'+l(o(null!=(a=null!=t?t.storeData:t)?a.id:a,t))+'" data-content-kind="'+l(o(null!=(a=null!=t?t.storeData:t)?a.kind:a,t))+'" type="shelf" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(u+=a),u+'>\n                <img width="'+l(o(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+l(o(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+l(o(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+l(o(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+l((r=null!=(r=e.name||(null!=t?t.name:t))?r:s,typeof r===c?r.call(t,{name:"name",hash:{},data:i}):r))+'" />\n                <title maxLines="2" class="lockup-title">'+l(o(null!=(a=null!=t?t.storeData:t)?a.name:a,t))+"</title>\n            </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.featuredShows:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":300}],217:[function(t,e,n){var i=t("itml").utils.Handlebars,a={description:t("./description.hbs"),currentShow:t("./currentShow.hbs"),upcomingShows:t("./upcomingShows.hbs"),featuredShows:t("./featuredShows.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./currentShow.hbs":214,"./description.hbs":215,"./featuredShows.hbs":216,"./upcomingShows.hbs":218,itml:317}],218:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.upcomingShowsTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n    <grid class="shows-grid">\n',a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.upcomingShows:a,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"    </grid>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return'        <header class="edge-header upcoming-shows-header">\n           <title class="edge-title">'+o((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.strings:t)?a.upcomingShowsTitle:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n        </header>\n"},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <card class="editorial-card">\n                <lockup disabled="true">\n                    <text maxLines="0" class="timestamp"><date>'+r(a(null!=t?t.formattedStartTime:t,t))+"</date> - <date>"+r(a(null!=t?t.formattedEndTime:t,t))+'</date></text>\n                    <title maxLines="2" class="show-title"><text>'+r(a(null!=t?t.title:t,t))+'</text></title>\n                    <subtitle maxLines="0">\n                        <text>'+r(a(null!=t?t.description:t,t))+"</text>\n                    </subtitle>\n                </lockup>\n            </card>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.upcomingShows:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":300}],219:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return" .live-station-document {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.9,{name:"hexToRgb",hash:{},data:i}))+";\n    background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n }\n\n .editorial-card {\n    itml-card-type: editorial;\n }\n\n.section-divider {\n    padding: 0 0 15pt 0;\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.4,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.edge-title {\n    font-size: 12pt;\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.about-header {\n    padding: 0 0 0 0;\n}\n\n.upcoming-shows-header {\n    padding: 0pt 0 3pt 0;\n}\n\n.featured-shows-header {\n    padding: 15pt 0 15pt 0;\n}\n\n.current-show-header {\n    padding: 0 0 5pt 0;\n}\n\n.current-show-description {\n    padding: 0 0 5pt 0\n}\n\n.link-list {\n    padding: 5pt 0 0 0;\n}\n\n.link-button {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.show-title {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n    font-size: 16pt;\n    padding: 5 0 0 0;\n}\n\n.timestamp {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor2:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.shows-grid {\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.4,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.featured-grid {\n    border-width: 0;\n}\n\n.featured-grid-xs {\n    column-count: 2;\n}\n\n.featured-grid-s {\n    column-count: 2;\n}\n\n.featured-grid-m {\n    column-count: 2;\n}\n\n.featured-grid-l {\n    column-count: 3;\n}\n\n.featured-grid-xl {\n    column-count: 4;\n}\n\n.featured-show {\n    padding: 0 0 15pt 0;\n}\n\n.station-button {\n    color: rgba(0,0,0,1);\n    border-color: rgba(0,0,0,1);\n    border-radius: 13pt;\n    padding: 5 10 5 10;\n}\n\n.station-button {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n"},useData:!0})},{"hbsfy/runtime":300}],220:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.wideLayout:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression,l=this.lambda;return'        <img disabled="true" class="" style="itml-img-treatment: uber;background-color:'+o((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" width="'+o(l(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.width:a,t))+'" height="'+o(l(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.height:a,t))+'" srcset="'+o(l(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.url:a,t))+" "+o(l(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.dpr:a,t))+'" />\n'},4:function(t,e,n,i){var a,r='        <divider class="section-divider" />\n        <split>\n';return a=this.invokePartial(n.currentShow,"            ","currentShow",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.featuredShows,"            ","featuredShows",t,void 0,e,n,i),null!=a&&(r+=a),r+="        </split>\n        <split>\n",a=this.invokePartial(n.description,"            ","description",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.upcomingShows,"            ","upcomingShows",t,void 0,e,n,i),null!=a&&(r+=a),r+"        </split>\n"},6:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.description,"        ","description",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.currentShow,"        ","currentShow",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.upcomingShows,"        ","upcomingShows",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.featuredShows,"        ","featuredShows",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],221:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("../../base").style,o=t("./style.hbs"),l=t("./template.hbs"),s=i.controller.MultiElementController,c=t("../../common").traits.EventMap,u=t("../../common").traits.TabComponent,h=t("../../common").traits.DataProvider,d=function(t,e){t=t||{},t.styles=t.styles||[],t.events=t.events||[],t.events.push("select"),t.styles.push(new r({styleTemplate:o})),s.call(this,t,e),c.call(this,t),u.call(this),a.extend(this.onSelect,{"play-button":this.authAndPlay,"recent-lockup":this.authAndPlay}),this.model=new h,this.artworkMap={list:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]}};var n=this.createView(t.stations);this.onDataReady(n)};a.inherit(d,s),a.inherit(d,c,!0),a.inherit(d,u,!0),d.prototype.template=l,d.prototype.createView=function(t){if(this.errorTitle=null,this.errorMessage=null,t)for(var e=function(t){for(var e=0;e<t.length;e++)t[e]=this.processContent(t[e]);return t}.bind(this),n=0;n<t.length;n++){var i=t[n];i.stations=e(i.stations)}return t},d.prototype.processContent=function(t){var e=a.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:{type:"list"}}),n=t;return n[t.kind]=!0,e&&(n.image=e.image,n.hero=e.hero),n},d.prototype.onDataReady=function(t){t&&(this.viewModel=t),this.loading=!1,this.render()},d.prototype.refreshComplete=function(t){var e=t.detail,n=e.result;"hasNewContent"===n&&this.render()},e.exports=d},{"../../../util":267,"../../base":72,"../../common":80,"./style.hbs":223,"./template.hbs":224,itml:317}],222:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./element"),o=t("../../common").traits.TabComponent,l=i.controller.DocumentController,s=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name="Recents",0===t.controllers.length&&t.controllers.push(new r(t)),l.call(this,t,e),o.call(this)};a.inherit(s,l),a.inherit(s,o,!0),s.prototype.documentType="stackTemplate",e.exports=s},{"../../../util":267,"../../common":80,"./element":221,itml:317}],223:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".recent-grid {\n    itml-padding:0;\n}\n.recent-header {\n    border-width: 0pt;\n    border-color: rgba(0,0,0,0);\n    itml-padding: 12pt 0 0 15pt;\n}\n.recent-text {\n    font-size: 15pt;\n    color: rgb(102,102,102);\n    itml-text-max-lines: 1;\n}\n.recent-lockup {\n    border-width: 0pt;\n    border-color: rgba(0,0,0,0);\n    itml-padding: 8pt 0 8pt 0;\n}\n.lockup-title {\n    itml-font-style: super-headline-1;\n    font-size: 17pt;\n}"},useData:!0})},{"hbsfy/runtime":300}],224:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="\n";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},4:function(t,e,n,i){var a,r=e.helperMissing,o='        <grid class="recent-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n\n",a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="\n",a=e.each.call(t,null!=t?t.stations:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"\n        </grid> \n\n"},5:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'            <header class="recent-header" pin="alone">\n                <text class="edge-title">'+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</text>\n            </header>\n"},7:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <lockup class="recent-lockup" data-content-id="'+o(r(null!=t?t.id:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+'>\n                <img data-content-id="'+o(r(null!=t?t.id:t,t))+'" class="radio-art" width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+o(r(null!=t?t.name:t,t))+'">\n                    <button class="play-button cover-button" data-content-id="'+o(r(null!=t?t.id:t,t))+'" type="play"/>\n                </img>\n                <title maxLines="2" class="lockup-title"><text>'+o(r(null!=t?t.name:t,t))+'</text></title>\n                <subtitle maxLines="2" class="lockup-subtitle"><text>'+o(r(null!=t?t.description:t,t))+"</text></subtitle>\n            </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],225:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=t("./template.hbs"),o=t("./style.hbs"),l=t("./partials"),s=t("../common").traits.DataProvider,c=t("../base").style,u=t("../common").traits.EventMap,h=t("../common").traits.TabComponent,d=i.controller.MultiElementController,p=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),this.controllerName="room";var n=t.data,i=a.keypath(n,"pageData.uber.masterArt")||{};t.styles.push(new c({styleTemplate:o,styleData:i})),l(),this.loading=!0,d.call(this,t,e),u.call(this,t),h.call(this),a.extend(this.onSelect,{"more-link":this.pushUrl,"play-button":this.playMedia}),this.model=new s({data:t.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.fetchData({success:this.createView.bind(this),failure:this.requestFailure.bind(this)})};a.inherit(p,d),a.inherit(p,u,!0),a.inherit(p,h,!0),p.prototype.template=r,p.prototype.requestFailure=function(t){a.log.error("RoomElementController: Store request failed: ",t),this.renderView()},p.prototype.createView=function(t){var e={children:[]};return t.pageData&&t.pageData.uber&&(e.uber=t.pageData.uber),t.pageData&&t.pageData.segments?(this.isMultiroom=!0,t.pageData.segments.forEach(function(t){e.children.push(this.processRoomPreData(t))},this)):t.pageData&&t.pageData.adamIds instanceof Array&&(this.isMultiroom=!1,e.children.push(this.processRoomPreData(t.pageData))),e},p.prototype.processRoomPreData=function(t){var e={content:[]},n={326:"Shelf",327:"List",328:"Grid+ShortCopy",329:"Grid"};if(t.title&&(e.title=t.title),t.fcMetadata&&t.fcMetadata.lockupStyle)e.layoutConfig=this.layouts[t.fcMetadata.lockupStyle];else{var i=t.fcKind,a=n[i]||"List";e.layoutConfig=this.layouts[a]}this.isMultiroom&&t.seeAllUrl&&(e.seeAllUrl=t.seeAllUrl);for(var r=0;r<t.adamIds.length&&(!this.isMultiroom||10!==r);r++)e.content.push(this.model.lookupContent({id:t.adamIds[r]},this.processContent.bind(this)));return e},p.prototype.processContent=function(t){function e(t){var n,i,a;if(!t||"object"!=typeof t)return t;if(t instanceof Array){for(n=[],i=0,a=t.length;a>i;i++)n[i]=e(t[i]);return n}if(t instanceof Object){n=Object.create(t.constructor.prototype);for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]))}return n}return e(t)},p.prototype.handleDataReady=function(t){this.viewModel=t.detail.view;for(var e=this.viewModel.children,n=e.length-1;n>=0;n--)e[n].content.length>0?this.processRoomPostData(e[n]):e.splice(n,1);this.loading=!1,this.renderView()},p.prototype.processRoomPostData=function(t){var e=["musicVideo","uploadedVideo"];t.firstChildKind=t.content[0].kind,e.indexOf(t.firstChildKind)>-1?(t.isVideoType=!0,t.productType="video"):(t.isAlbumType=!0,t.productType="album"),t.layoutConfig||(t.layoutConfig=this.layouts.List,this.isMultiroom&&"song"!==t.firstChildKind&&(t.layoutConfig=this.layouts.Shelf)),t[t.layoutConfig.id]=!0,t.layout=t.layoutConfig.id,t.layoutConfig.hasOwnProperty("showDescription")&&(t.showDescription=t.layoutConfig.showDescription)},p.prototype.renderView=function(){this.viewModel&&this.setProperLayout(),this.render()},p.prototype.setProperLayout=function(){function t(t,e){var n;switch(t){case"song":n="list"===e?"track":"album_"+e;break;case"playlist":n="list"===e?"list":"album_"+e;break;case"uploadedVideo":case"musicVideo":n="video_"+e;break;default:n="album_"+e}return n}var e,n,i,r,o,l,s,c=a.screen.sizeForScreenDimension();this.viewModel.uber&&(this.viewModel.uber.image=a.artwork.getArtworkForContent({content:{artwork:this.viewModel.uber.masterArt},artworkMap:this.artworkMap,params:{type:"uber"}}).image),this.viewModel.children.forEach(function(u,h){for(u.screenSize=c,o=u.content.length,["l","xl"].indexOf(c)>-1?u.isLargeScreen=!0:u.isSmallScreen=!0,u.layoutConfig.numColumns&&(u.numColumns=u.layoutConfig.numColumns[u.productType][c]),h<this.viewModel.children.length-1&&(u.showDivider=!0),u.visibleContent=[],this.isMultiroom&&(l=u.layoutConfig.multiroomMax[u.productType][c],u.content.length>l?(o=l,u.showSeeAll=!0):u.showSeeAll=!1),s=0;o>s;){if(r=u.content[s],e=t(r.kind,u.layout),n=a.artwork.getArtworkForContent({content:r,artworkMap:this.artworkMap,params:{type:e}}),r.title=r.title||r.name,r.line1=a.lockup.line1(r),u.showDescription&&r.itunesNotes&&r.itunesNotes["short"]&&(r.lineDescription=r.itunesNotes["short"]),r.isExplicit=a.lockup.isExplicit(r),"playlist"===u.content[s].kind){var d=a.extend(a.artwork.artworkMap,this.artworkMap);i=d[e][c],this.artworkMap[e+"Child"]={crop:"cc"},this.artworkMap[e+"Child"][c]=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)]}u.visibleContent.push(a.lockup.setArtworks(u.content[s],n,this.artworkMap,e)),s++}},this)},p.prototype.handleRotation=function(){this.renderView()},p.prototype.layouts={Grid:{id:"grid",multiroomMax:{album:{xs:6,s:6,m:6,l:8,xl:6},video:{xs:6,s:6,m:6,l:8,xl:6}},numColumns:{album:{xs:2,s:2,m:2,l:4,xl:6},video:{xs:2,s:2,m:2,l:4,xl:6}}},"Grid+ShortCopy":{id:"gridWithCopy",showDescription:!0,multiroomMax:{album:{xs:6,s:6,m:6,l:6,xl:6},video:{xs:6,s:6,m:6,l:6,xl:6}},numColumns:{album:{xs:1,s:1,m:1,l:2,xl:2},video:{xs:1,s:1,m:1,l:3,xl:4}}},Spotlight:{id:"spotlight",multiroomMax:{album:{xs:1,s:1,m:1,l:1,xl:1},video:{xs:1,s:1,m:1,l:1,xl:1}},numColumns:{album:{xs:1,s:1,m:1,l:1,xl:1},video:{xs:1,s:1,m:1,l:1,xl:1}}},"Spotlight+ShortCopy":{id:"spotlight",showDescription:!0,multiroomMax:{album:{xs:1,s:1,m:1,l:1,xl:1},video:{xs:1,s:1,m:1,l:1,xl:1}},numColumns:{album:{xs:1,s:1,m:1,l:1,xl:1},video:{xs:1,s:1,m:1,l:1,xl:1}}},Shelf:{id:"shelf",multiroomMax:{album:{xs:6,s:6,m:6,l:5,xl:6},video:{xs:6,s:6,m:6,l:5,xl:6}},numColumns:{album:{xs:3,s:3,m:3,l:5,xl:6},video:{xs:3,s:3,m:3,l:5,xl:6}}},List:{id:"list",multiroomMax:{album:{xs:6,s:6,m:6,l:8,xl:8},video:{xs:6,s:6,m:6,l:8,xl:8}}}},p.prototype.artworkMap={uber:{crop:"h",xs:[640,260],s:[750,304],m:[750,304],l:[1024,260],xl:[1024,260]},album_list:{crop:"cc",xs:[55,55],s:[55,55],m:[80,80],l:[100,100],xl:[100,100]},video_list:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84]},album_shelf:{crop:"cc",xs:[105,105],s:[123,123],m:[137,137],l:[152,152],xl:[168,168]},video_shelf:{crop:"h",xs:[105,60],s:[123,70],m:[137,78],l:[152,86],xl:[170,96]},album_grid:{crop:"cc",xs:[158,158],s:[187,187],m:[207,207],l:[190,190],xl:[200,200]},video_grid:{crop:"h",xs:[158,90],s:[187,105],m:[207,116],l:[190,108],xl:[170,96]},album_gridWithCopy:{crop:"cc",xs:[130,130],s:[130,130],m:[150,150],l:[130,130],xl:[150,150]},video_gridWithCopy:{crop:"h",xs:[144,82],s:[152,86],m:[180,102],l:[224,125],xl:[224,125]},album_spotlight:{crop:"cc",xs:[158,158],s:[187,187],m:[207,207],l:[185,185],xl:[185,185]},video_spotlight:{crop:"h",xs:[320,182],s:[375,210],m:[414,232],l:[356,202],xl:[356,202]}},e.exports=p},{"../../util":267,"../base":72,"../common":80,"./partials":231,"./style.hbs":237,"./template.hbs":238,itml:317}],226:[function(t,e,n){var i=t("../../util"),a=t("../base/document"),r=t("./element"),o=t("../common").traits.TabComponent,l=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("room-document");var n=t.data;this.controller=new r({data:n}),t.controllers.push(this.controller),a.call(this,t,e),o.call(this)};i.inherit(l,a),i.inherit(l,o,!0),l.prototype.documentType="stackTemplate",e.exports=l},{"../../util":267,"../base/document":71,"../common":80,"./element":225}],227:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'    <divider class="room-divider" />\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.showDivider:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":300}],228:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing;return'        <button type="imagetext" class="more-link" data-link-url="'+o(r(null!=(a=null!=t?t.seeAllUrl:t)?a.url:a,t))+'" data-link-title="'+o(r(null!=t?t.title:t,t))+'">\n            <title class="edge-title title-color">'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n            <img class="edge-chevron title-chevron" src="resource://ChevronTerms"/>\n        </button>\n'},3:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <title class="edge-title title-color">'+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<header class="edge-header">\n';return a=e["if"].call(t,null!=t?t.showSeeAll:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+"</header>"},useData:!0})},{"hbsfy/runtime":300}],229:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),r+'<lockup class="ghost-divider"></lockup>'},3:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"edge-"+l((a=null!=(a=e.numColumns||(null!=t?t.numColumns:t))?a:o,
typeof a===r?a.call(t,{name:"numColumns",hash:{},data:i}):a))+"col-grid"},5:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"        ","shelfLockup",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='\n\n<grid class="',a=e["if"].call(t,null!=t?t.numColumns:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="</grid>\n\n",a=this.invokePartial(n.roomDivider,"","roomDivider",t,void 0,e,n,i),null!=a&&(o+=a),o},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],230:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),r+'<lockup class="ghost-divider-s"></lockup>'},3:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"grid-"+l((a=null!=(a=e.numColumns||(null!=t?t.numColumns:t))?a:o,typeof a===r?a.call(t,{name:"numColumns",hash:{},data:i}):a))+"-col"},5:function(t,e,n,i){return"grid-no-border"},7:function(t,e,n,i){return"grid-with-border"},9:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=a[1]?a[1].isAlbumType:a[1],{name:"if",hash:{},fn:this.program(10,i,a),inverse:this.program(12,i,a),data:i}),null!=r&&(o+=r),o},10:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='            <lockup type="editorial" class="action-lockup '+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===o?r.call(t,{name:"kind",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-link-url="'+s((r=null!=(r=e.url||(null!=t?t.url:t))?r:l,typeof r===o?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=' disabled="'+s((e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n',a=this.invokePartial(n.lockupArtwork,"                ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"            </lockup>\n"},12:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=a[2]?a[2].isLargeScreen:a[2],{name:"if",hash:{},fn:this.program(13,i,a),inverse:this.program(15,i,a),data:i}),null!=r&&(o+=r),o},13:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='                <lockup type="shelf" class="action-lockup '+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===o?r.call(t,{name:"kind",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-link-url="'+s((r=null!=(r=e.url||(null!=t?t.url:t))?r:l,typeof r===o?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"                    ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                    ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"                </lockup>\n"},15:function(t,e,n,i){var a,r,o=e.helperMissing,l=this.escapeExpression,s="function",c='                <lockup type="editorial" style="itml-item-height: '+l((e.multiply||t&&t.multiply||o).call(t,null!=(a=null!=t?t.image:t)?a.height:a,1.15,{name:"multiply",hash:{},data:i}))+'" class="action-lockup '+l((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:o,typeof r===s?r.call(t,{name:"kind",hash:{},data:i}):r))+'" data-content-id="'+l((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===s?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-link-url="'+l((r=null!=(r=e.url||(null!=t?t.url:t))?r:o,typeof r===s?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=' disabled="'+l((e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n',a=this.invokePartial(n.lockupArtwork,"                    ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                    ","lockupDetails",t,{"class":"video-description"},e,n,i),null!=a&&(c+=a),c+"                </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o=e.helperMissing,l="";return r=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+='\n\n<grid class="',r=e["if"].call(t,null!=t?t.numColumns:t,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+=" ",r=e["if"].call(t,null!=t?t.isLargeScreen:t,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.program(7,i,a),data:i}),null!=r&&(l+=r),l+='" ',r=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=r&&(l+=r),l+=">\n",r=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="</grid>\n\n",r=this.invokePartial(n.roomDivider,"","roomDivider",t,void 0,e,n,i),null!=r&&(l+=r),l},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],231:[function(t,e,n){var i=t("itml").utils.Handlebars,a={roomEdgeHeader:t("./edgeHeader.hbs"),lockupArtwork:t("./lockupArtwork.hbs"),lockupDetails:t("./lockupDetails.hbs"),roomDivider:t("./divider.hbs"),roomList:t("./list.hbs"),roomShelf:t("./shelf.hbs"),roomGrid:t("./grid.hbs"),roomGridWithCopy:t("./gridWithCopy.hbs"),roomSpotlight:t("./spotlight.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./divider.hbs":227,"./edgeHeader.hbs":228,"./grid.hbs":229,"./gridWithCopy.hbs":230,"./list.hbs":232,"./lockupArtwork.hbs":233,"./lockupDetails.hbs":234,"./shelf.hbs":235,"./spotlight.hbs":236,itml:317}],232:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),r+'<lockup class="ghost-divider-s"></lockup>'},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"        ","listLockup",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='\n\n<grid class="track-list" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"</grid>"},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],233:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},3:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.song:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":300}],234:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'    <title maxLines="2" class="lockup-title">'+l((a=null!=(a=e.title||(null!=t?t.title:t))?a:o,typeof a===r?a.call(t,{name:"title",hash:{},data:i}):a))+' <badge class="explict-badge" src="resource://explicit"/></title>\n'},3:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'    <title maxLines="2" class="lockup-title">'+l((a=null!=(a=e.title||(null!=t?t.title:t))?a:o,typeof a===r?a.call(t,{name:"title",hash:{},data:i}):a))+"</title>\n"},5:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'    <subtitle class="lockup-subtitle">'+l((a=null!=(a=e.line1||(null!=t?t.line1:t))?a:o,typeof a===r?a.call(t,{name:"line1",hash:{},data:i}):a))+"</subtitle>\n"},7:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'    <subtitle class="lockup-subtitle-2">'+l((a=null!=(a=e.line2||(null!=t?t.line2:t))?a:o,typeof a===r?a.call(t,{name:"line2",hash:{},data:i}):a))+"</subtitle>\n"},9:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'    <subtitle class="lockup-subtitle-3">'+l((a=null!=(a=e.line3||(null!=t?t.line3:t))?a:o,typeof a===r?a.call(t,{name:"line3",hash:{},data:i}):a))+"</subtitle>\n"},11:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s='    <description class="lockup-description ';return a=e["if"].call(t,null!=t?t["class"]:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='">',r=null!=(r=e.lineDescription||(null!=t?t.lineDescription:t))?r:l,a=typeof r===o?r.call(t,{name:"lineDescription",hash:{},data:i}):r,null!=a&&(s+=a),s+"</description>\n"},12:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return l((a=null!=(a=e["class"]||(null!=t?t["class"]:t))?a:o,typeof a===r?a.call(t,{name:"class",hash:{},data:i}):a))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.line2:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.line3:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.lineDescription:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":300}],235:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),r+'<lockup class="ghost-divider"></lockup>'},3:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"edge-"+l((a=null!=(a=e.numColumns||(null!=t?t.numColumns:t))?a:o,typeof a===r?a.call(t,{name:"numColumns",hash:{},data:i}):a))+"col-grid"},5:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='        <lockup type="shelf" class="shelf-lockup action-lockup '+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===o?r.call(t,{name:"kind",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-link-url="'+s((r=null!=(r=e.url||(null!=t?t.url:t))?r:l,typeof r===o?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=' disabled="'+s((e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n',a=this.invokePartial(n.lockupArtwork,"            ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"            ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"        </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='\n\n<grid class="',a=e["if"].call(t,null!=t?t.numColumns:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="</grid>\n\n",a=this.invokePartial(n.roomDivider,"","roomDivider",t,void 0,e,n,i),null!=a&&(o+=a),o+"]\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],236:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"    ","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.isAlbumType:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){return'        <lockup class="ghost-divider"></lockup>\n'},4:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isLargeScreen:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){return'            <lockup class="ghost-divider"></lockup>\n'},7:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"grid-"+l((a=null!=(a=e.numColumns||(null!=t?t.numColumns:t))?a:o,typeof a===r?a.call(t,{name:"numColumns",hash:{},data:i}):a))+"-col"},9:function(t,e,n,i){return"grid-full-width"},11:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=a[1]?a[1].isVideoType:a[1],{name:"if",hash:{},fn:this.program(12,i,a),inverse:this.program(17,i,a),data:i}),null!=r&&(o+=r),o},12:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=a[2]?a[2].isSmallScreen:a[2],{name:"if",hash:{},fn:this.program(13,i,a),inverse:this.program(15,i,a),data:i}),null!=r&&(o+=r),o},13:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='                <card class="action-lockup" style="itml-card-type:billboard;" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-kind="'+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===o?r.call(t,{name:"kind",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"card",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=' disabled="'+s((e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n                    <lockup type="editorial">\n',a=this.invokePartial(n.lockupArtwork,"                        ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),c+='                    </lockup>\n                    <lockup type="caption" class="transparent-bar top">\n',a=this.invokePartial(n.lockupDetails,"                        ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"                    </lockup>\n                </card>\n"},15:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='                <lockup type="editorial" class="action-lockup shelf-lockup" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-kind="'+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===o?r.call(t,{name:"kind",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=' disabled="'+s((e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n',a=this.invokePartial(n.lockupArtwork,"                    ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                    ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"                </lockup>\n"},17:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c='            <lockup type="editorial" class="action-lockup shelf-lockup" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-kind="'+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===o?r.call(t,{name:"kind",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(c+=a),c+=' disabled="'+s((e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},data:i}))+'">\n',a=this.invokePartial(n.lockupArtwork,"                ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"            </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='\n<grid class="grid-no-border ',r=e["if"].call(t,null!=t?t.numColumns:t,{name:"if",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+=" ",r=e["if"].call(t,null!=t?t.isSmallScreen:t,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='" style="padding: 0 0 0 0;">\n',r=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='</grid>\n\n<lockup class="ghost-divider-s"></lockup>\n',r=this.invokePartial(n.roomDivider,"","roomDivider",t,void 0,e,n,i),null!=r&&(o+=r),o},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],237:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    .room-document {\n        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,{name:"hexToRgb",hash:{},data:i}))+";\n        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n     }\n\n    .uber-image {\n        itml-img-treatment: uber;\n        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n    }\n\n     .title-color {\n        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor3:t,{name:"hexToRgb",hash:{},data:i}))+";\n     }\n\n    .title-chevron {\n        itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor3:t,{name:"hexToRgb",hash:{},data:i}))+";\n     }\n\n    .track-list {\n        border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,.15,{name:"hexToRgb",hash:{},data:i}))+" ;\n    }\n\n    .room-divider {\n        border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.15,{name:"hexToRgb",hash:{},data:i}))+";\n    }\n\n    .grid-with-border {\n        border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.15,{name:"hexToRgb",hash:{},data:i}))+";\n    }\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=" .edge-header {\n    padding: 5pt 0 0 15pt;\n }\n\n .editorial-card {\n    itml-card-type: editorial;\n }\n\n.grid-copy-large-screen {\n    border-width: 0;\n}\n\n.ghost-divider {\n    itml-padding: 0 0 15pt 0;\n}\n\n.ghost-divider-s {\n    itml-padding: 0 0 7pt 0;\n}\n\n.grid-no-border {\n    border-width: 0;\n}\n\n.grid-full-width {\n    itml-item-width: 100%;\n}\n\n.grid-1-col {\n    column-count: 0;\n}\n\n.grid-2-col {\n    column-count: 2;\n}\n\n.grid-3-col {\n    column-count: 3;\n}\n\n.grid-4-col {\n    column-count: 4;\n}\n\n.grid-5-col {\n    column-count: 5;\n}\n\n.grid6col {\n    column-count: 6;\n}\n\n.grid-lockup-title {\n    itml-font-style: super-headline-1;\n    font-size: 14pt;\n    padding: 0 0 0 0;\n}\n\n.lockup-description {\n    padding: 5pt 0 0 0;\n    itml-text-max-lines: 3;\n}\n\n.video-description {\n    itml-text-max-lines: 2;\n}\n\n.artist-artwork {\n    itml-img-treatment: artist-circle;\n}\n\n";return a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":300}],238:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.uber:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.children:a,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.description:a,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression;return'        	<img class="uber-image" width="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.height:a,t))+'" srcset="'+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.url:a,t))+" "+o(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.dpr:a,t))+'" />\n'},5:function(t,e,n,i){var a,r=this.lambda,o='        	<description maxLines="3">';return a=r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.description:a,t),null!=a&&(o+=a),o+"</description>\n"},7:function(t,e,n,i){var a,r="		";return a=e["if"].call(t,null!=t?t.list:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.shelf:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.grid:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.gridWithCopy:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.spotlight:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},8:function(t,e,n,i){var a;return a=this.invokePartial(n.roomList,"","roomList",t,void 0,e,n,i),null!=a?a:""},10:function(t,e,n,i){var a;return a=this.invokePartial(n.roomShelf,"","roomShelf",t,void 0,e,n,i),null!=a?a:""},12:function(t,e,n,i){var a;return a=this.invokePartial(n.roomGrid,"","roomGrid",t,void 0,e,n,i),null!=a?a:""},14:function(t,e,n,i){var a;return a=this.invokePartial(n.roomGridWithCopy,"","roomGridWithCopy",t,void 0,e,n,i),null!=a?a:""},16:function(t,e,n,i){var a;return a=this.invokePartial(n.roomSpotlight,"","roomSpotlight",t,void 0,e,n,i),null!=a?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],239:[function(t,e,n){var i=t("./store"),a=t("../../util"),r=function(t,e){this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);this.searchContext=t.searchContext,this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.handleNeedsContent.bind(this)),this.nativeViewController.addEventListener("submit",this.handleSubmit.bind(this)),this.nativeViewController.addEventListener("change",this.handleChange.bind(this))};r.prototype.handleNeedsContent=function(t){var e={};e.name=t.storeSearchSegmentTitle,e.context=this.searchContext,this.storeSearchResultsDocumentController=new i(e),a.metrics.track(this.storeSearchResultsDocumentController,{tabIdentifier:TabBar.selectedTab.identifier,entityType:"search"}),this.storeSearchResultsDocumentController.addEventListener("tabPush",this.eventHandlers.tabPush),this.storeSearchResultsDocumentController.addEventListener("trendingTermSelect",this.handleTrendingTermSelect.bind(this)),this.storeSearchResultsDocumentController.addEventListener("selectMediaPickerItem",this.handleSelectMediaPickerItem.bind(this)),this.nativeViewController.setStoreSearchResultsDocument(this.storeSearchResultsDocumentController.el)},r.prototype.handleSubmit=function(t){if(a.pubSub.publish("search",{event:t}),this.storeSearchResultsDocumentController){var e=t.term||"",n=t.url;this.storeSearchResultsDocumentController.updateSearchTerm(e,n)}},r.prototype.handleChange=function(t){""===t.term&&this.handleNeedsContent(t)},r.prototype.handleTrendingTermSelect=function(t){this.nativeViewController.setSearchTerm(t.detail.term)},r.prototype.handleSelectMediaPickerItem=function(t){var e=t.detail.productData;this.nativeViewController.selectMediaPickerItem(e)},e.exports=r},{"../../util":267,"./store":241}],240:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=i.controller.MultiElementController,o=t("../../../util/"),l=o.loc,s=t("../../common").traits.DataProvider,c=t("./template.hbs"),u=t("../../common/traits/event_map"),h=t("../../common/traits/tab_component"),d=function(t,e){t=t||{},t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),this.loading=!0,this.pickerMode=t.context&&"media-picker"===t.context,this.largeScreen=!0,this.controllerName="search";var n=o.screen.sizeForScreenDimension();("xs"===n||"s"===n||"m"===n)&&(this.largeScreen=!1),r.call(this,t,e),u.call(this,t),h.call(this),o.extend(this.onSelect,{"play-button":this.playMedia,"more-link":this.pushMorePage,"add-button":this.setSelectedItem,"action-lockup":this.handleActionLockup}),this.model=new s,this.model.addEventListener("dataReady",this.handleDataReady.bind(this))};o.inherit(d,r),o.inherit(d,u,!0),o.inherit(d,h,!0),d.prototype.template=c,d.prototype.artworkMap={product:{xs:[40,40],s:[40,40],m:[40,40],l:[55,55],xl:[55,55]},productChild:{xs:[20,20],s:[20,20],m:[20,20],l:[20,20],xl:[20,20]},video:{xs:[40,30],s:[40,30],m:[40,30],l:[73,55],xl:[73,55]},profile:{xs:[40,40],s:[40,40],m:[40,40],l:[55,55],xl:[55,55]},track:{xs:[40,40],s:[40,40],m:[40,40],l:[55,55],xl:[55,55]}},d.prototype.get=function(t){this.loading=!0,this.model.fetchData({url:t,success:this.handleDataSuccess.bind(this),failure:this.handleFailedFetch.bind(this)}),this.render()},d.prototype.search=function(t,e){this.loading=!0,this.term=t,e||(e=o.urls.build("search",{term:encodeURIComponent(t)})),this.get(e)},d.prototype.handleDataSuccess=function(t){return this.model.data=t,this.createView(t)},d.prototype.createView=function(t){this.errorTitle=null,this.errorMessage=null;var e=t.pageData.bubbles;if(!e)return[];this.term=t.pageData.term;var n=3;this.largeScreen&&(n=6);var i,a=[],r=["album","artist","topResults","song","station","musicVideo","musicPlaylist","brand","activity","auc"],s=o.screen.sizeForScreenDimension();this.pickerMode&&(r=["album","song","musicVideo","musicPlaylist"]);var c=function(t,e,n){t=t.slice(0,100);for(var i=[],a=[],r=0;r<t.length;r++){var o=t[r];a.push(o.id),e>r&&i.push(this.model.lookupContent(o.id,this.processContent.bind(this)))}return this.model.setData(n,a),i}.bind(this);if(e.length>0){this.noresults=!1;for(var u=0;u<e.length;u++){var h,d=e[u].results,p=e[u].name,m=d.length,f={},g=n;if(i=m>n?p:null,r.indexOf(p)>-1){if("topResults"===p&&"xl"===s?g=3:"topResults"===p&&"l"===s&&(g=2),h=c(d,g,i),"topResults"===p)for(var b=0;b<h.length;b++)h[b]=this.setSubtitleForContent(h[b]),h[b].isTopResult=!0;f.title=l.loc("FUSE.Search.BubbleHeader."+p),f.sectionId=i,f.content=h,a.push(f)}}}else this.noresults=!0;return a},d.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.noresults=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},d.prototype.processContent=function(t){var e=o.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap}),n=o.lockup.setArtworks(t,e,this.artworkMap);return n.line1=o.lockup.line1(n),n.isExplicit=o.lockup.isExplicit(n),n[t.kind]=!0,"playlist"===t.kind&&t.itunesNotes&&(n.line1=t.itunesNotes["short"]||t.itunesNotes["long"]),n},d.prototype.setSubtitleForContent=function(t){var e="";switch(t.kind){case"album":e="Album by "+t.artistName;break;case"artist":e="Artist";break;case"playlist":e="Playlist";break;case"station":e="Station";break;case"song":e="Song by "+t.artistName;break;case"musicVideo":e="Music Video by "+t.artistName;break;default:e=t.artistName}return t.line1=e,t},d.prototype.handleDataReady=function(t){this.loading=!1,o.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},d.prototype.updateSearchTerm=function(t,e){this.term!==t&&""!==t&&(this.search(t,e),this.render())},d.prototype.handleLink=function(t){var e=t.target.getAttribute("data-link-url");e&&(this.get(e),this.render())},d.prototype.getDocumentType=function(){return"stackTemplate"},d.prototype.handleActionLockup=function(t){if(this.pickerMode){var e=t.target,n=e.getAttribute("data-content-id"),i=this.model.lookupContent(n);this.dispatchEvent(new a("selectMediaPickerItem",{detail:{productData:i}}))}else this.handleLockup(t)},d.prototype.handleRotation=function(){this.viewModel=this.createView(this.model.data),this.render()},e.exports=d},{"../../../util/":267,"../../common":80,"../../common/traits/event_map":91,"../../common/traits/tab_component":93,"./template.hbs":242,itml:317}],241:[function(t,e,n){var i=t("../../../util/"),a=t("../../base").style,r=t("../style.hbs"),o=t("../../base/document"),l=t("./element"),s=t("./trending"),c=t("../../common/traits/tab_component"),u=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("search-template"),t.styles=t.styles||[],t.styles.push(new a({styleTemplate:r})),t.context=t.context,this.trendingController=new s,this.trendingController.addEventListener("trendingTermSelect",this.handleTrendingTermSelect.bind(this)),this.resultsController=new l(t),t.controllers=t.controllers||[],this.controller=this.trendingController,t.controllers.push(this.controller),this.documentType=this.controller.getDocumentType(),o.call(this,t,e),c.call(this),this.addEventDelegates(this.resultsController,["selectMediaPickerItem"])};i.inherit(u,o),i.inherit(u,c,!0),u.prototype.handleTrendingTermSelect=function(t){this.removeController(this.trendingController),this.resultsController.get(t.detail.url),this.addController(this.resultsController),this.controllers=[this.resultsController],this.controller=this.resultsController,this.documentType=this.controller.getDocumentType(),this.render(),this.dispatchEvent(t)},u.prototype.updateSearchTerm=function(t,e){this.controller instanceof l||(this.removeController(this.trendingController),this.controller=this.resultsController,this.addController(this.controller),this.controllers=[this.resultsController],this.documentType=this.controller.getDocumentType(),this.render()),this.controller.updateSearchTerm(t,e)},e.exports=u},{"../../../util/":267,"../../base":72,"../../base/document":71,"../../common/traits/tab_component":93,"../style.hbs":244,"./element":240,"./trending":243}],242:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='    <title class="trending-title">'+o(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.header:a)?a.label:a,t))+"</title>\n    <section ";

return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"section",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.trendingSearches:a,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </section>\n"},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <button class="align-center link tint-color" data-link-url="'+o(r(null!=t?t.url:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"button",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+">"+o(r(null!=t?t.label:t,t))+"</button>\n"},4:function(t,e,n,i){return"    <section></section>\n"},6:function(t,e,n,i,a){var r,o="";return r=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(7,i,a),inverse:this.program(14,i,a),data:i}),null!=r&&(o+=r),o},7:function(t,e,n,i){var a,r=e.helperMissing,o='        <grid class="search-results-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+='>\n            <header class="grid-section-header">\n',a=e["if"].call(t,null!=t?t.sectionId:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(10,i),data:i}),null!=a&&(o+=a),o+='            </header>\n        </grid>\n        <grid class="search-results-grid" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"        </grid>\n"},8:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <button type="imagetext" class="more-link" data-section-id="'+r(a(null!=t?t.sectionId:t,t))+'" data-link-title="'+r(a(null!=t?t.title:t,t))+'">\n                        <title class="edge-title" id=\'name\'>'+r(a(null!=t?t.title:t,t))+'</title>\n                        <img class="edge-chevron" src="resource://ChevronTerms"/>\n                    </button>\n'},10:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <title class="edge-title">'+r(a(null!=t?t.title:t,t))+"</title>\n"},12:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                ","listLockup",t,{line2:null!=t?t.line2:t,line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},14:function(t,e,n,i,a){var r,o="";return r=e["if"].call(t,null!=t?t.noresults:t,{name:"if",hash:{},fn:this.program(15,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o},15:function(t,e,n,i,a){var r,o='            <card class="no-results-card">\n                <img width="124" height="128" class="no-results-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXQAAAGACAMAAACKvmluAAADAFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzMPSIAAABAHRSTlMABR86U2h+kqKyws/b4O/0//Lp39FSEF6ApMbk/V04DQQujbr+3a+CVigDF4v494pRFilmoNrZXJ9bFTF9yMd8MDOH3DIt1xp6GE2x+0wi5eJAs7A9WcvKVw5zcQzreHQJBm/o5m0BVMPBLxSX/JUS7WIsxCoHg/r51NI0iITQznC4tERB8PGqu5tlSzclJp291VjzmWweIEKcySECjqV3OwgKP/UThb4RHdY8aTbhR6hGHGQLwEhQbk+RzOok3q4bVWCQiTW8ttOBqw+57nlOOZNF9pSpPsUZhqGPKyOMdb/jnmpfmEPne2N2zbdKZ2HstSdrln+ao6etWqZJrNhyQ5gd9wAAEWVJREFUeAHt3fl/VdW9//F3EsJMeAMaAkQIcghwMEGMRWQSQQElgFQUgSQkDEcQTolWIGIFoQzKpBAN0xElhkkRFSlai0CtAwpaBeXaohY6qC22tlW/6te29/aXO/SHez9r5+y9zt5rr+c/wOPxYj32WVnD3vCLtPSMBpkNGzVu0rRZ8xZZWS1Jtspq3abNec2aNmncqGHm+RnpaXCJlZ3RNqdd+w65FOV2aN8u54KOnVB/Vl7nthd26UCnIl3zu3XvEYVTVs/zL2pfwCQUtu91cW9Yqi4puvQ7dEWfS4t6QGL1vuzSDnRVh76X94MgzPoPGJhLD+QOumIwwklw5ZCh9NDQIVfB+hdXdxtKzw3rdjXCQzB8xDBqMmzENbAQvXZkMTUqzh8VRbiN7jaG2l3XLR3hNfa7uUyJ3OvHIZTybriRKTT+pjyEzYSJLZhibSZ1Qphk52TRB7JyshEWJVdk0SdKy0rCkbyslD5SOrkcpquYMpU+M216GkwWu3kofajPxTBX/xn0qZm3wEyzZufSt+LfmwPzxIoq6Wult8ZgmNu+T9+beTtMMnfefAZAVU4ajNHxDgbEgjthhrk/iDMwiu9KgwFuWchAWXQbgi42uYABU3h3DIHWczEDaEk/BNgPpzKQxixFUMXK4gyo4skxBNKEfHplWdbUNv/UOms5vbKiEwLotj50VVXze+4dsXLV6jX90vA/pPVe2/HaogH33d91Pl217hIEzvpquqVV+wceHFsThSBvw8Ypmza3pFtaNUCwxObRFQXtezXYEoMDiTXdH9o8n26IDIghQOZuZfKqv/vwI9tQL7WPjlhcx+RdWoHA2N6UyVq449EKJGXbxl7rmKyduxAQa/owKfH7p++GK0ZPnJHLpDy2BYHweCmTEGm6pzdcNHzKQCaj9RMIgFF1rL+hDdPhujXz9rL+6p6E711exfqqempsDJ5IPJ1fzPqq6g6f2xNhPU1t2Bse2ndXJespXgRfu7u+zdc9sw0e2//gUNZPZA98rIz186NVMWiQaDContUnGte86Vhoc+BG1stEs5oPOgCdYs8u8vcTRsNv6GOrUnCgsiudi2TCh9pG6Fjlc3lIgbkPL6dj8RvgOz+O06ni5+cgRa65L5dOVa2Cz4wroFNNb0cKXfkTOlWXAV/pUUmHlmfGkFJ5E+vo0MEX4CO9D9Ghw0eQcqO70KE+s+AbtZvpTOlP4QsvLqczM7bBJ6L5dGbxcPjElu/TmRUx+MPPAnxsLTqgmI68BF+4lY4s6AxfWT2UjlwOH3i5kE602w+fyW5CJ+o6I+X6taADVc/Bf2ID4nSg6y6kWPQVOjDmEfjSk5V04NUEUuslOjDoGvjUhqN04DWkVIMI1b1eC986dpzqIqOQQrvfoLpeCfhY2r1UVzocKRP9EZXFM+Fzb0aorEsMqTKCygp/Dt+7bD6VTUaKPDGfquo2IgCuraOqgv5IiZLmVLXsLQTCRvXq68qRCvdR1cGrEBBvLaOqt5ECJyLKza9GYKxWrh5ZCu1qD1HRsjsRIB3rqOhQCXR7iIrqViNQNtb59gHzRDyg8xbZz+dTTW5HaJW2gGrioyAI8Ame89Kg0xVUtAcB9DAVPQyN0k/q3NzS7x2qabkb+jyldRtXv+irVPMutDlFNf+2DQE14SjVbIQmiUVUMu09BNYLWVSyIAo9iqik6hEE2KgIlRRBi2OtqWQ6Ai2HSqZ2gg6/oJJfItgSS6ikGzR4r5oqFpQj4Ha1oIrqnvDeaaqoex+BNy5OFc/Dc7tPUkURDDCPKqpq4LXZVDESJsgbRBWz4bEtVVQwtR+M8EErXwz1vlTRAIbY44ehXlNMBYdhilhTKqgaDi99SAVZw2GMHoVUcBE8dGx5aGYujnYOqrPhnV9RwZkYDJJ2HhWMgGcqzlJW/D6McipCWYcKeOUCKngbhnkqtTeRFlJWOQeGUdqb3AyPZFDBgzDOa1Twcgr/MDqaB+PsP0vZr+GJCXWUPQsDraSsbg688BvKBsVgoLzmlD0HLzSj7ACM9FvKFsEDL1PWFGZKrKPsKrjvd5SNhaFuouxncN3cN8wd6LLYYxRNjcJtF1N2LYz1DGUfwW0rKBqWgLHmfpyCvYySkxSthME+oag0De5aT9HUbTDY9pb6J8zvUtQQRnuHok1wVXk1JfPfg9EGU/RGBdw0iqLXYbjNFJ3QfcToBAz3e81/H8XOUtIiAcN1akXJIc3Ps9dgvAcougTu+QNFPWC8cRRNgXteoeQczJcYQ0kTuKa8kJIyhMCHlFRXwC0/pOgDhEBHih6HW7pRMhBhENtLySdwyxlKJiMULqTkU7hkWyElaxEKGympzoM73qKkD8KhohUl/eGOSZRciJDIp2SPthOUf0RI/EnbneU2FBTUIiRqKBkGV8yh5AxCYxgF8Vq44SNKchAa91Jyp6Y7Lz9EaHxGye/hhl9SULwfobGWktNwwzkKziFEWlOwEy5I1FHwPYTIYQr+DBeMpuRWhMgISo4geasouQUhMkrLkcYpFBSkIUTSKclE8hpR0AyhkkVBLyTvLxS0Q6jM1PEOkMco+ASh8raOGXQ1Bd0RKs9RcFDHctfLCJVRlJQjWZ0pmYVQuY2SvyJZT1JQjXApoeSU968bOQ8h09r7H7k/UDASIbOZgs+9/8rrFwiZwxTM836r5EuEzP/z/t1Or1OQiZAZQsFX3p+Svhkh8ysKliBZP7EbpE63SWciWXdQcCVCZpT3y65tKHgBITPW+/NGBymoQcg8QUEb79fssxEygyl4w0Z3XWcKspAsShA2G2x0Gz0UaihohWRV6Y9uR3oWBXkImdEUVNrZi+sGez9Pb0HBLrjNRm9DwQaETAYFR72/ZNPDrr24vuDVjILVCJkGFIxHsgZScAAhU+T9ZcPFFKxHyLxJwfVI1tcUTEfIXERBX+9fDrgDIXOp9/frdlBwL0JmCQVXeH/75ThC5jwK/uT966S/g5BZ7v1nhzZSUJVAqGyn5C0kqwcl+xAqd1KSjmTVUnIKoXIzBfE0JK2UgrYIlT9Q0AHJW0TBXQiVvhQMQvK+oSAfoXJOx73aXiGbMwryCinopuO7kLmdECK3U/JbLW/dfAQhchMlGUjee5RMR4jsoJad+koKvkKI3E9BCz2vfWiO8MhrSUETTZ/b6YfQeJl69hcyKTkfoTGFkpvghtWUnEZovKvpqzvlxRQ0Q2hMo6AwD644SkGkN0KiMyXjdd3L5v9HSJRR8ra27yv3RUjM1Db+3qfkYAKhkF1MXddqE5WK6w1214gfwy3XUzIEoXApJV/DLZMp6RpDCMxdRsmDGjfA2REhcC1FtwH6HuofIgQaUzItBtesoGRvAsYrr6akMdyzkqJx9gqGy8dRaih6AMZrQknkGrhoISXLa2G4I3FKxmveGWRbGG4ARV/CTRkUfR9mS7SgqL/uD4nzFhjtAEWHYnDVF6H/Kc2n9sWQjyg62RsGW5tL0ZVwV7Q1Rd1gsNmk/kOd71BUWgtj9TuZikGXQdnnMFYOZVfDbbGuFA3Ng6HKSylal6L/6xdhqDLKRsB96bkUda2AkUpKKYrvgwf+QlkmjPQlZZ/CC89StncbDJSdRdlP4YW8jym7GwbaQdnHFan7tw/ugnF211E2D94YnUvZaRjnW8riNfDIEsqKL4FhMiKUHYZXllLBpzBL4kYqeBSeuZEKVsEon1HBOXjnBio4tB8GmXWQCi6Ad/JaUMFDMMhXVLA3DR6aRAXxJ2CMv1HFc/BSSRYVLEiDIUr2UkHpfi3ryoIBMMTzVFEGb00opYKq/jDCiQgVlJZoWlkW3LENBpg1RtdAF5RMo4pGMMD11DbQBXdTReTHCLxMKrkb3iu/jioq0xFw79dRxd650KCISsZvQ6BN6EMlL0KH6HlUch+CLHY9lTRLQIuxVJNpxMFowUZo8ncqqVqNwPpbnEpGQpcthVQypgYB1eMNKin4QP9OreToMQTSrOZUcxf0KelANfdUIIDKm1LN3lpodDMV9Y0hcKJ/p6JnodVhKspB4LxDRYeh1/AsKipDwMyjouX7oFkRFUX2IFAepqrPoVvsjHL1zxAgeyJUtDMG7dYUUlH8chObt9yCFJhEVfFbERDTI1T1G6RCbDFVRaYjEMqorEkMKfHeQSp7E/4X20Fl0/ohRa6NUFmvGHwu+gCVRZ5EynyP6rbOha+VLKG6h5A65euobsZ2+NiRRVS3cC5S6OqWVNdnLXxr8Fmqa/VXpNR6OlC6FD7141ZUF7kYKXYhHYj/KgYfis6L0IFfINXydtKJv3eC72w/TieOR5FyPc/SiWG3w2fubEEn2myHD6wuoBPVRfCT2MQCOnHyKvhC2wgdyZ8F3zjShY5E1sMn7qIzY56GT5z/ZzpzBfwi9hSdiTTqBB+Y05cOfRWDb8ydSYf2rkLK3TSVDnWpgI9kH6VTX/dEStU0oVPNjsFX9p2lU38uSiBl0ia1olNV6fCZtQfpWLOxSJE//oP1MLICPtN/GZ37ZjRS4JJXSZpRPaOOzhX0mgXN3mtUTBpTfWMd66F6yC5o1PP0SYrMr86snGxoMmtINZNzvNaQ6sx6aR802PJ8NZN2v++qj1vG+qn6ajA8tnpFnKSJ1VdXsr7ueTYPnqnoPoOCAFe/ugPr7bqcDfDEmh1TSRpc/YPmrL/cey4ogcuO/X5mhKTZ1XsPYjJOft2gHK4pWf9NAQVGVK99ncmpfv2y7XBBzxdHnqTAmOqJXkxWfMaAt6JIQtq4nIG5FBhVHZlxJm/Zq58srUU9lJz48ng1BQZWP7Ccrije/LPPriyHsv1PPPP2uTgFplZfewddE//HioaXPb4vgf9DtOZU25xvmudSYHb1kqfosqrmx7c2avj5+hOPDh68dkNN+oa/Dh489ukbHsx5+9t7us6nLATVMamY2tnqpz621fUbvtNW1y86othW1++toQyY79zorHoJ/KfkdxEGSOSd2mMD6cTAY/ChVR0YGHufBGBE9exNEQZC5IEJgCnV8XRXBsDQpQAMql77i/n0uap52wCzquP9mfS1+y8BYFz12A0d6FvX3QTAxOoo2XGSvlT3Wi1ganXsbpxL38ntewSAwdXR/1P6SyR/MADDq6Ojr7J/2hH/u2ODjKmOR8/QJ3Z2FGa695tTHWN30gdeGQuBWdVx57fFTKn57a6CwLzqSP9wOVNmWa/dEJhZHccmd2VKdP33ThCYWx2JE+9WUbOCrz+KQWB2dWDWxHXUaN2kWZAlVX18PwTA47NbU4vWszMgS7r6gn4IgrwDmyrpscpNH0UhMK66IC3Z7kLxA2kQGFpdED310h30wNEfjItCYHZ1we5btx6ki1pv/Ww3BLY6ELs98+vr6IK9WzN7xPBfbHXJ8PN/8Eol6+3jLkMuHg5ZGKsLap79pF2zQjpy8ie/nvRRb8jCXV2QSN+4csi3TQ9VCZv5h5p+O2Tl0vQEvFP7XfOqC7b3ONXgmcnzTm9qnJ9//Mw/Hc/Pb7zp9LzJzzQ41WMOdKgY6bS6Zavb6patbqtbtrqt7lO2uq3eZx8s7dWb2+q2uq1u2eohrG4JKg7rr25F29nqtrrP2Oq2umWr2+qWrW6rW7a6rS6w1TfA0l797AvwM1vdstVtdSv6O/3VrdgXtrqt7jO2uq1u2eq2umWr2+qWrW6rC2z14bC0Vx9fC0t79SZRWNqrN47BSl7seTrxRQwusIbY6rZ6OKsLLoJ+tvqb0M5Wj/wU2tnqdZ2hna3eLA3a2epl0M5Wz8qGdrb6AGhnq7eBfrZ6Z2hnqxdBO1v9C2hnqx+Ge6wRVHIGLrLKqOJVaGerb4V2tnoOtLPVR0E3W72wBLrZ6iugna0+DrrZ6iOhm62+bAs0s9WXrYYGtrrG5ra6/ubWnmr9za0tXfivZrwPy3OP5BfwP8UX/xFaWMe691q8sM3CV965oCf+238AluL5xRThNTgAAAAASUVORK5CYII="/>\n            </card>\n            <card class="no-results-header">\n                <header>\n';return r=e["if"].call(t,null!=a[1]?a[1].term:a[1],{name:"if",hash:{},fn:this.program(16,i,a),inverse:this.program(18,i,a),data:i}),null!=r&&(o+=r),o+"                </header>\n            </card>\n"},16:function(t,e,n,i,a){var r=this.lambda,o=this.escapeExpression;return'                        <title class="no-results-title">No results found for "'+o(r(null!=a[1]?a[1].term:a[1],t))+'"</title>\n'},18:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.term:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.program(21,i),data:i}),null!=a&&(r+=a),r},19:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return'                            <title class="no-results-title">No results found for "'+l((a=null!=(a=e.term||(null!=t?t.term:t))?a:o,typeof a===r?a.call(t,{name:"term",hash:{},data:i}):a))+'"</title>\n'},21:function(t,e,n,i){return'                            <title class="no-results-title">No results found.</title>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o="";return r=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=r&&(o+=r),o+="\n",r=e["if"].call(t,null!=(r=null!=t?t.viewModel:t)?r.trendingSearches:r,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),r=e["if"].call(t,null!=(r=null!=t?t.viewModel:t)?r.blank:r,{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.program(6,i,a),data:i}),null!=r&&(o+=r),o},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],243:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=i.controller.MultiElementController,o=t("../../../util/"),l=t("../../common").traits.DataProvider,s=t("./template.hbs"),c=t("../../common/traits/event_map"),u=t("../../common/traits/tab_component"),h=function(t,e){t=t||{},t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),this.loading=!0,r.call(this,t,e),c.call(this,t),u.call(this),o.extend(this.onSelect,{link:this.handleLink}),this.model=new l,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get()};o.inherit(h,r),o.inherit(h,c,!0),o.inherit(h,u,!0),h.prototype.template=s,h.prototype.get=function(){this.loading=!0;var t=o.urls.trendingSearches();this.model.fetchData({url:t,success:this.createTrendingSearchesView.bind(this),failure:this.handleFailedFetch.bind(this)})},h.prototype.createTrendingSearchesView=function(t){return this.errorTitle=null,this.errorMessage=null,t.trendingSearches&&0===t.trendingSearches.length?{blank:!0}:t},h.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},h.prototype.handleDataReady=function(t){this.loading=!1,o.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},h.prototype.getDocumentType=function(){return"trendingSearchTemplate"},h.prototype.handleLink=function(t){var e=t.target.getAttribute("data-link-url");if(e){var n=e.lastIndexOf("term=")+5,i=e.slice(n).indexOf("&");i=0>i?e.length-n:i;var r=decodeURIComponent(e.substr(n,i));o.pubSub.publish("search",{url:e,term:r,type:"trending",element:t.target}),this.dispatchEvent(new a("trendingTermSelect",{detail:{url:e,term:r}}))}},e.exports=h},{"../../../util/":267,"../../common":80,"../../common/traits/event_map":91,"../../common/traits/tab_component":93,"./template.hbs":242,itml:317}],244:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* search */ \n.search-template {\n    itml-align: center;\n    text-align: center;\n}\n.trending-grid {\n    padding: 9, 0, 0, 0;\n    border-color: rgba(0, 0, 0, 0);\n    itml-align: center;\n    text-align: center;\n}\n.search-results-grid {\n    itml-align: left;\n    text-align: left;\n    padding: 0, 0, 0, 0;\n    itml-item-height: 36;\n    border-color: rgb(235, 235, 235);\n    itml-item-border-margin: 0pt 0pt 0pt 64pt;\n    itml-item-width:100%;\n}\n.trending-header {\n    background-color: rgb(255, 255, 255);\n    padding: 40.0, 16.0, 8.0, 16.0;\n    border-width: 0, 0, 0.5, 0;\n    border-color: rgba(0, 0, 0, 0.2);\n    itml-item-border-margin: 0, 0, 0, 16;\n}\n.trending-title {\n    color: rgb(0, 0, 0);\n    font-size: 22pt;\n    font-weight: light;\n}\n.search-lockup {\n    itml-item-height: 36;\n    font-size: 15pt;\n    padding: 8pt 0 8pt 0;\n}\n.line1 {\n    font-size: 11pt;\n    color: rgb(142, 142, 147);\n}\n.results-divider {\n    font-size: 2pt;\n    padding: 0 0 0 0;\n    itml-margin: 0;\n}\n.no-results-card {\n    padding: 80% 0 20 0;\n}\n.no-results-icon {\n    itml-img-mask-color: rgba(83,83,83,1);\n}\n.no-results-header {\n    color: rgba(83,83,83,1);\n    itml-text-max-lines: 2;\n}\n.grid-section-header {\n    text-align: left;\n    itml-align: left;\n    background-color: rgb(255, 255, 255);\n    padding: 17.5, 16.0, 4.0, 16.0;\n    itml-item-border-margin: 0pt 0pt 0pt 16pt;\n}\n.edge-title {\n    color: rgb(102,102,102);\n    font-size: 12pt;\n}\n\n.action-lockup {\n    itml-item-height: 48;\n    padding: 0pt 16pt 0pt 16pt;\n}\n\n@media (min-width: 768pt) {\n    .action-lockup {\n        itml-item-height: 71;\n        padding: 0pt 16pt 0pt 16pt;\n    }\n}\n\n.light-art {\n    margin: 0pt 8pt 0pt 0pt;\n}"},useData:!0})},{"hbsfy/runtime":300}],245:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.keypath,o=a.loc,l=i.controller.MultiElementController,s=t("../common").traits.DataProvider,c=t("./template.hbs"),u=function(t,e){t=t||{},t.data=t.data||{},t.events=t.events||[],this.viewModel=[],this.loading=!0,this.shareType="content",t.data.content?(this.data=t.data.content,this.shareType=t.data.shareType||this.shareType):t.data.event&&(this.data=this.getShareDataFromEvent(t.data.event),this.shareType=this.data.shareType||this.shareType),l.call(this,t,e),this.data&&(this.model=new s({data:this.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.fetchData({success:this.handleData.bind(this),failure:this.handleFailedFetch.bind(this)}))};a.inherit(u,l),u.prototype.template=c,u.prototype.getShareDataFromEvent=function(t){var e,n,i,r={},o=t.entityValueProvider,l=o.valueForEntityProperty("metadata")||o.valueForEntityProperty("sidePackData");if(o&&(e=o.valuesForEntityProperties(["storeItemAdamID","albumStoreID","artistStoreID","musicRadioStationStationStringID","playlistStoreID"])||{},i=e.playlistStoreID,n=o.valuesForEntityProperties(["url","name"])||{}),l)r=l;else if(i)r={id:i,url:a.urls.build("playlist",{id:i}),shareType:"playlist",name:n.name};else if(e)for(var s in e)if(e[s]){r={id:e[s]};break}return r},u.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},u.prototype.handleData=function(t){this.errorTitle=null,this.errorMessage=null;var e=this.model.lookup(t.id);if("connect-post"===this.shareType)e=this.processPost(t);else if(e||"playlist"!==this.shareType)t.id&&(e=this.model.lookupContent(t.id,this.processContent.bind(this,t)));else{var n=itms.accountInfo.firstName;e={url:t.url,title:this.getShareText("ConnectPost.Playlist",{author:n})}}return e&&this.viewModel.push(e),this.viewModel},u.prototype.processContent=function(t,e){var n,i,r={},l=e||{},s=l.kind||"default",c=a.artwork.getArtworkForContent({content:l}),u=l.artistName||l.curatorName||l.brandName||o.loc("FUSE.AppleMusic"),h=c&&c.image&&c.image.url,d=l.shortUrl||l.url||t.url,p=l.collectionName,m=l.title||t.name,f=l.name||t.name,g=l.postId;switch(h&&(r.image=h),d&&(r.url=d),g&&(r.url=a.urls.build("post",{id:g})),s){case"brand":n="Brand",i={brand:u};break;case"curator":n="Curator",i={curator:u};break;case"artist":n="Artist",i={artist:u};break;case"track":case"song":n="Song",i={name:f,collection:p,artist:u};break;case"video":case"musicVideo":n="Video",i={name:f,artist:u};break;case"playlist":n="Playlist",i={name:f,artist:u};break;case"album":n="Album",i={name:f,artist:u};break;case"radioStation":case"station":n="RadioStation",i={name:f};break;case"uploadedAudio":n="ArtistUploadedAudio",i={name:m,artist:u};break;case"uploadedVideo":n="ArtistUploadedVideo",i={name:m,artist:u};break;case"default":n="Default",i={name:f||m};break;default:n="Default",i={name:f||m}}return r.title=this.getShareText("Content."+n,i),r},u.prototype.processPost=function(t){var e,n={},i={},l=t.message||"",s=t.content&&t.content[0]||{},c=t.target&&t.target.type||"default",u=r(t,"author.image.url"),h=r(t,"author.fullName")||r(t,"owner.name"),d=s.image&&s.image.url,p=a.urls.build("post",{id:t.id}),m=s.aucType||o.loc("FUSE.UserSharing.ConnectPost.DefaultAudioAUC");switch(h&&(n.author=h),l&&(n.message=l),u&&(i.image=d||u),p&&(i.url=p),c){case"artist":case"brand":case"curator":e="Artist";break;case"track":case"song":e="Song";break;case"video":case"musicVideo":e="Video";break;case"playlist":e="Playlist";break;case"album":e="Album";break;case"radioStation":e="RadioStation";break;case"uploadedAudio":e="ArtistUploadedAudio",n.aucType=m;break;case"uploadedVideo":e="ArtistUploadedVideo";break;case"default":e="Default"}return i.title=this.getShareText("ConnectPost."+e,n),i},u.prototype.getShareText=function(t,e){var n={mail:o.loc("FUSE.UserSharing."+t+".Mail",e),message:o.loc("FUSE.UserSharing."+t+".Message",e),facebook:o.loc("FUSE.UserSharing."+t+".Facebook",e),twitter:o.loc("FUSE.UserSharing."+t+".Twitter",e),"default":o.loc("FUSE.UserSharing."+t+".Default",e)};return n},u.prototype.handleDataReady=function(t){this.viewModel=r(t,"detail.view"),this.loading=!1,this.render()},e.exports=u},{"../../util":267,"../common":80,"./template.hbs":247,itml:317}],246:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,o=t("./element"),l=function(t,e){t=t||{},t.data=t.data||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[],0===t.controllers.length&&(this.controller=new o({data:t.data}),t.controllers.push(this.controller)),r.call(this,t,e)};a.inherit(l,r),l.prototype.documentType="shareTemplate",e.exports=l},{"../../util":267,"./element":245,itml:317}],247:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="    \n";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},2:function(t,e,n,i){var a,r="\n";return a=e["if"].call(t,i&&i.first,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},3:function(t,e,n,i){var a,r='\n            <activity type="message">\n                ';return a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a.message:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="mail">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a.mail:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="twitter">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a.twitter:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="facebook">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a.facebook:a,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="more">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a["default"]:a,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="airdrop">\n                ',a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a["default"]:a,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="*">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a["default"]:a,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n            </activity>\n\n"},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'<img src="'+r(a(null!=t?t.image:t,t))+'"/>'},6:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"<text>"+o((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a.message:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},8:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"<url>"+r(a(null!=t?t.url:t,t))+"</url>"},10:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"<text>"+o((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a.mail:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},12:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"<text>"+o((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a.twitter:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},14:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"<text>"+o((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a.facebook:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},16:function(t,e,n,i){var a,r=e.helperMissing,o=this.escapeExpression;return"<text>"+o((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a["default"]:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],248:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='        <lockup class="top-charts-lockup-column action-lockup" type="list" data-url="'+o(r(null!=t?t.url:t,t))+'" data-content-id="'+o(r(null!=t?t.id:t,t))+'" data-content-kind="'+o(r(null!=t?t.kind:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+='> \n            <ordinal class="top-charts-ordinal">'+o((e.increment||t&&t.increment||l).call(t,i&&i.index,{name:"increment",hash:{},data:i}))+"</ordinal>\n            "+o((e.productArtwork||t&&t.productArtwork||l).call(t,t,{name:"productArtwork",hash:{},data:i}))+'\n            <title maxLines="1" class="lockup-title">\n                <text>'+o(r(null!=t?t.name:t,t))+"</text>\n            </title>\n",a=e["if"].call(t,null!=t?t.collectionName:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(s+=a),s+'            <button type="image" class="action-button" data-content-id="'+o(r(null!=t?t.id:t,t))+'"><img src="resource://UniversalActionControl"/></button>\n        </lockup>\n'},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                <subtitle class="one-line">\n                    <span fallbackValue="'+r(a(null!=t?t.artistName:t,t))+'"/>  <span fallbackValue="'+r(a(null!=t?t.collectionName:t,t))+'"/>\n                </subtitle>\n'},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                <subtitle class="one-line">\n                    <span fallbackValue="'+r(a(null!=t?t.artistName:t,t))+'"/>\n                </subtitle>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,o=this.lambda,l=this.escapeExpression,s='<column class="no-borders-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"column",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+="> \n    <header>\n        <title>"+l(o(null!=t?t.title:t,t))+"</title>\n    </header>\n\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</column>\n"},useData:!0})},{"hbsfy/runtime":300}],249:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),o=t("../../common").traits.DataProvider,l=i.controller.MultiElementController,s=t("../../common").traits.TabComponent,c=t("../../common").traits.EventMap,u=t("../../base").style,h=t("../style.hbs"),d=t("itml").utils.Handlebars,p=i.event.Event,m=a.artwork,f=t("../../filter"),g=function(e,n){e=e||{},e.styles=e.styles||[],e.styles.push(new u({styleTemplate:h})),e.events=e.events||[],e.events.push("holdselect","select"),e.entityProviders=e.entityProviders||[],e.classes=e.classes||[],d.registerPartial("chart_partial",t("../chart_partial.hbs")),this.loading=!0,this.controllerName="top-charts",this.artworkMap={track:{xs:[42,42],s:[42,42],m:[42,42],l:[42,42],xl:[42,42]},product:{xs:[42,42],s:[42,42],m:[42,42],l:[42,42],xl:[42,42]},video:{xs:[56,32],s:[56,32],m:[56,32],l:[56,32],xl:[56,32]}},l.call(this,e,n),c.call(this,e),s.call(this,e),this.chartTitles=e.chartTitles,a.extend(this.onSelect,{"play-button":this.playMedia}),this.model=new o({maxContentSize:150}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.fetchData({url:e.data.seeAllUrls[0],success:this.handleDataFetchSuccess.bind(this),failure:this.handleFailedFetch.bind(this)})};a.inherit(g,l),a.inherit(g,c,!0),a.inherit(g,s,!0),g.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},g.prototype.handleDataReady=function(){this.loading=!1,this.render()},g.prototype.processData=function(t){var e=t.pageData&&t.pageData.topCharts||[],n=[],i=0,a=0;for(i=0;i<e.length;i++)for(n[i]={},n[i].content=[],n[i].title=e[i].shortTitle,a=0;a<e[i].adamIds.length;a++)n[i].content.push(this.model.lookupContent(e[i].adamIds[a],this.processContent.bind(this)));return n},g.prototype.showGenreFilter=function(){this.model.data&&this.model.data.pageData.categoryList&&this.model.data.pageData.categoryList.children&&(this.filterModal=new f({filters:this.model.data.pageData.categoryList.children,selectedFilter:this.selectedFilter,selectCallback:this.handleFilterSelection.bind(this),cancelCallback:this.handleFilterCancellation.bind(this)}),modal.pushDocument(this.filterModal.el,{}))},g.prototype.handleFilterSelection=function(t){var e=t.target,n=e.getAttribute("data-link-url");this.currentUrl=n,this.selectedFilter=e.getAttribute("label");var i={selectedFilter:this.selectedFilter,url:n};this.dispatchEvent(new p("genre-selected",{detail:i})),modal.popDocument(),this.hasData=!1,this.model.data=null,this.model.viewModel=null,this.loading=!0,this.render(),this.model.fetchData({url:n,success:this.handleDataFetchSuccess.bind(this),failure:this.handleFailedFetch.bind(this)})},g.prototype.handleFilterCancellation=function(){modal.popDocument()},g.prototype.processContent=function(t){var e=m.setArtworkForContent(t,this.artworkMap);return e.isExplicit=a.lockup.isExplicit(e),e},g.prototype.handleDataFetchSuccess=function(t){return this.errorTitle=null,this.errorMessage=null,this.model.data=t,this.processData(t)},g.prototype.template=r,e.exports=g},{"../../../util":267,"../../base":72,"../../common":80,"../../filter":139,"../chart_partial.hbs":248,"../style.hbs":257,"./template.hbs":250,itml:317}],250:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.model:t)?a.viewModel:a,{name:"if",hash:{},
fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},4:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=(a=null!=t?t.model:t)?a.viewModel:a,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.chart_partial,"            ","chart_partial",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.model:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],251:[function(t,e,n){var i=t("../../util"),a=t("../base/document"),r=t("./column_chart/element"),o=t("./menu_bar/element"),l=t("../common").traits.TabComponent,s=t("./title.hbs"),c=t("../base").style,u=i.loc,h=function(t,e){t=t||{},t.controllers=t.controllers||[],t.styles=t.styles||[],t.styles.push(new c),t.name="Top Charts";var n,h=i.screen.sizeForScreenDimension();"xs"===h||"s"===h||"m"===h?(t.documentType="menuBarTemplate",n=new o(t),t.controllers.push(n)):(t.documentType="chartsTemplate",t.watchedAttributes=t.watchedAttributes||[],t.watchedAttributes.push("type"),t.type="modern",n=new r(t),t.controllers.push(n)),this.titleTemplate=s,a.call(this,t,e),l.call(this,t),this.navigationBarController.shouldShowSearchButton=!1,this.genreName=u.loc("FUSE.TopCharts.Genres"),this.el.getElementById("genreName").innerHTML=this.genreName;var d=this.el.getElementById("genre-selector");d&&d.addEventListener("select",n.showGenreFilter.bind(n)),n&&n.addEventListener("genre-selected",function(e){t.name=e.detail.selectedFilter,t.url=e.detail.url,this.el.getElementById("genreName").innerHTML=t.name}.bind(this))};i.inherit(h,a),i.inherit(h,l,!0),e.exports=h},{"../../util":267,"../base":72,"../base/document":71,"../common":80,"./column_chart/element":249,"./menu_bar/element":252,"./title.hbs":258}],252:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.BaseController,o=i.controller.MenuBarController,l=t("../segmented_chart"),s=t("../../common").traits.DataProvider,c=t("../../common").traits.TabComponent,u=t("./template.hbs"),h=i.event.Event,d=a.artwork,p=t("../../filter"),m=function(t){t=t||{},t.controllers=t.controllers||[],this.data=t.data,this.loading=!0,this.index=0,this.hasData=!!this.data.topChartsSidePack,this.currentUrl=this.data.seeAllUrls[0],this.menuItemDocumentControllers=[],this.template=u,this.menuItems=[],this.artworkMap={track:{xs:[40,40],s:[40,40],m:[40,40],l:[40,40],xl:[40,40]},product:{xs:[54,54],s:[54,54],m:[54,54],l:[54,54],xl:[54,54]},video:{xs:[100,56],s:[100,56],m:[100,56],l:[100,56],xl:[100,56]}},this.model=new s,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),r.call(this,t),o.call(this,t),c.call(this,t),this.addEventListener("needscontent",this.menuBarNeedsContent.bind(this)),this.get(this.currentUrl)};a.inherit(m,r),a.inherit(m,o),a.inherit(m,c,!0),m.prototype.showGenreFilter=function(){this.model.data&&this.model.data.pageData.categoryList&&this.model.data.pageData.categoryList.children&&(this.filterModal=new p({filters:this.model.data.pageData.categoryList.children,selectedFilter:this.selectedFilter,selectCallback:this.handleFilterSelection.bind(this),cancelCallback:this.handleFilterCancellation.bind(this)}),modal.pushDocument(this.filterModal.el,{}))},m.prototype.handleFilterSelection=function(t){var e=t.target,n=e.getAttribute("data-link-url");this.currentUrl=n,this.selectedFilter=e.getAttribute("label");var i={selectedFilter:this.selectedFilter,url:n};modal.popDocument(),this.hasData=!1,this.model.data=!1;var a=0;for(a=0;a<this.menuItemDocumentControllers.length;a++){var r=this.menuItemDocumentControllers[a];r&&r.controller.clearViewData()}this.dispatchEvent(new h("genre-selected",{detail:i})),this.menuItemDocumentControllers=[],this.menuItems=[],this.get(n)},m.prototype.handleFilterCancellation=function(){modal.popDocument()},m.prototype.getIndexForMenuItem=function(t){var e,n=this.el.getElementsByTagName("menuItem");for(e=0;e<n.length&&n.item(e)!==t;e++);return e},m.prototype.processContent=function(t){var e=d.setArtworkForContent(t,this.artworkMap);return e.isExplicit=a.lockup.isExplicit(e),e},m.prototype.processData=function(t){var e=0,n=0,i=[],a=t.pageData&&t.pageData.topCharts||[];for(e=0;e<a.length;e++)for(i[e]={},i[e].content=[],this.menuItems[e]={},this.menuItems[e].title=t.pageData.topCharts[e].shortTitle,n=0;n<t.pageData.topCharts[e].adamIds.length;n++)i[e].content.push(this.model.lookupContent(t.pageData.topCharts[e].adamIds[n],this.processContent.bind(this)));return i},m.prototype.handleDataFetchSuccess=function(t){return this.errorTitle=null,this.errorMessage=null,this.model.data=t,this.processData(t)},m.prototype.handleDataReady=function(t){var e=0,n={};for(e=0;e<this.model.data.pageData.topCharts.length;e++){n.index=e,n.data=t.detail.view[e];var i=this.createDocumentController(n);this.menuItemDocumentControllers[e]=i}this.loading=!1,this.render()},m.prototype.setDataForDocumentControllers=function(t){var e=0;for(e=0;e<this.menuItemDocumentControllers.length;e++)this.menuItemDocumentControllers[e].handleDataReady(t)},m.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},m.prototype.get=function(t){this.model.fetchData({url:t,success:this.handleDataFetchSuccess.bind(this),failure:this.handleFailedFetch.bind(this)})},m.prototype.createDocumentController=function(t){var e=new l(t);return this.addEventDelegates(e,c.prototype.tabDelegatedEvents),e},m.prototype.menuBarNeedsContent=function(t){this.currentMenuItem=t.target;var e=this.getIndexForMenuItem(this.currentMenuItem);this.setDocumentForItem(this.menuItemDocumentControllers[e].el,this.currentMenuItem),this.dispatchEvent(new h("menuBarChangedContent",{detail:{index:e}}))},e.exports=m},{"../../../util":267,"../../common":80,"../../filter":139,"../segmented_chart":255,"./template.hbs":253,itml:317}],253:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s="    <menuItem>\n        <title>";return r=null!=(r=e.title||(null!=t?t.title:t))?r:l,a=typeof r===o?r.call(t,{name:"title",hash:{},data:i}):r,null!=a&&(s+=a),s+"</title>\n    </menuItem>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e.each.call(t,null!=t?t.menuItems:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],254:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),o=i.controller.MultiElementController,l=t("../../common").traits.TabComponent,s=t("../../common").traits.EventMap,c=t("../../base").style,u=t("../../common").traits.DataProvider,h=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new c),t.events=[],t.events.push("holdselect","select"),t.entityProviders=t.entityProviders||[],this.menuItemIndex=t.index,t.classes=t.classes||[],this.model=new u({data:t.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.viewModel=this.model.data.content,o.call(this,t,e),s.call(this,t),a.extend(this.onSelect,{"play-button":this.playMedia}),l.call(this,t)};a.inherit(h,o),a.inherit(h,s,!0),a.inherit(h,l,!0),h.prototype.setViewData=function(t){this.loading=!1,this.viewModel=t.view[this.menuItemIndex]?t.view[this.menuItemIndex].content:null,this.model.data=t,this.render()},h.prototype.handleDataReady=function(t){this.viewModel=t.detail.view,this.model.data=t.detail,this.loading=!1,this.render()},h.prototype.clearViewData=function(){this.viewModel=null,this.loading=!0,this.render()},h.prototype.template=r,e.exports=h},{"../../../util":267,"../../base":72,"../../common":80,"./template.hbs":256,itml:317}],255:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.DocumentController,o=t("./element"),l=t("../../common").traits.TabComponent,s=i.event.EventDelegate,c=function(t,e){t=t||{},t.controllers=[],this.documentType="stackTemplate",this.controller=new o(t),t.controllers.push(this.controller),s.call(this,t,e),r.call(this,t,e),l.call(this,t,e)};a.inherit(c,r),a.inherit(c,l,!0),c.prototype.handleDataReady=function(t){this.controller.setViewData(t)},e.exports=c},{"../../../util":267,"../../common":80,"./element":254,itml:317}],256:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,o='    <grid class="track-list-ordered" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,"grid",{name:"data-metrics",hash:{},data:i}),null!=a&&(o+=a),o+="> \n",a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"    </grid>\n"},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,s='            <lockup class="'+o(r(null!=t?t.kind:t,t))+' action-lockup" type="list" data-url="'+o(r(null!=t?t.url:t,t))+'" data-content-id="'+o(r(null!=t?t.id:t,t))+'" data-content-kind="'+o(r(null!=t?t.kind:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,"lockup",{name:"data-metrics",hash:{},data:i}),null!=a&&(s+=a),s+=' style="itml-padding: 5pt 0pt 5pt 0pt;">\n                <ordinal style="color: rgb(142,142,147); font-size: 15pt; font-weight: regular;">'+o((e.increment||t&&t.increment||l).call(t,i&&i.index,{name:"increment",hash:{},data:i}))+'</ordinal>\n                <img class="light-art play-button" width="'+o(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" data-content-id="'+o(r(null!=t?t.id:t,t))+'" src="'+o(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+'" alt="'+o(r(null!=t?t.name:t,t))+'" />\n\n',a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.collectionName:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(s+=a),s+'                <button type="image" class="action-button" data-content-id="'+o(r(null!=t?t.id:t,t))+'"><img src="resource://UniversalActionControl"/></button>\n            </lockup>\n'},3:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <title maxLines="2" class="lockup-title">'+r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/></title>\n'},5:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <title maxLines="2" class="lockup-title">'+r(a(null!=t?t.name:t,t))+"</title>\n"},7:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <subtitle class="one-line">\n                        <span fallbackValue="'+r(a(null!=t?t.artistName:t,t))+'"/>  <span fallbackValue="'+r(a(null!=t?t.collectionName:t,t))+'"/>\n                    </subtitle>\n'},9:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <subtitle class="one-line">\n                        <span fallbackValue="'+r(a(null!=t?t.artistName:t,t))+'"/>\n                    </subtitle>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":300}],257:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".song {\n	itml-item-height: 60;\n}\n\n.album {\n	itml-item-height: 54;\n}\n\n.top-charts-lockup-column {\n    itml-item-height: 46;\n    itml-padding: 2pt 0 2pt 0;\n}\n\n.top-charts-ordinal {\n    color: rgb(142,142,147);\n    font-size: 15pt;\n    font-weight: regular;\n}\n\n.caption-title {\n    color: rgba(255, 255, 255, 1.0);\n    font-size: 13pt;\n    itml-padding: 0pt 16pt 0pt 16pt;\n}"},useData:!0})},{"hbsfy/runtime":300}],258:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression,s=this.lambda;return'<title id="name" class="align-center">'+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+'</title>\n<button type="imagetext" class="align-right" id="genre-selector">\n    <text id=\'genreName\'>'+l(s(null!=t?t.genreTitle:t,t))+"</text>\n</button>\n"},useData:!0})},{"hbsfy/runtime":300}],259:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("./app/for_you/"),o=t("./app/new/"),l=t("./app/connect"),s=t("./app/radio/"),c=t("./app/loading"),u=i.controller.TabbedApplication,h=t("./app/account/migration"),d=t("./app/account/carrier_bundling/carrier_verification"),p=t("./app/product/"),m=t("./app/profile/"),f=t("./app/search/"),g=t("./app/account/settings"),b=t("./app/account/welcome"),v=t("./app/contextual_actions"),y=t("./util"),w=y.loc,k=y.pubSub,x=t("./app/common/controller_helper"),A=t("./app/common"),C=A.traits.ControllerCache,S=function(t){itms.log("ITMLJS: Music init: "+UpdatableAssets.currentManifestVersion()),t=t||{},u.call(this,t),C.call(this),this.tabControllers={for_you:r,"new":o,connect:l,radio:s},this.didAskForTab=!1,this.addEventListener("ready",this.readyApp.bind(this)),this.addEventListener("resume",this.resumeApp.bind(this)),this.tabBar.addEventListener("needscontent",this.handleTabNeedsContent.bind(this)),this.addEventListener("pageResponse",x.onPageResponse.bind(x)),this.registerGlobalEventCallbacks(),this.setDeviceCookies()};y.inherit(S,u),y.inherit(S,C,!0),S.prototype.registerGlobalEventCallbacks=function(){itms.onPageResponse=this.onPageResponse.bind(this),itms.onAccountChange=this.onAccountChange.bind(this),itms.onBuy=this.onBuyHandler.bind(this),itms.onSubscriptionRequired=this.handleSubscriptionRequired.bind(this),this.addEventListener("error",this.handleError.bind(this)),k.subscribe("showModal",this.handleTabPush.bind(this)),k.subscribe("setSelectedTab",this.handleSetSelectedTab.bind(this)),Settings.onRestrictionsChange=this.setDeviceCookies.bind(this)},S.prototype.setDeviceCookies=function(){y.cookie.restrictExplicit(Settings.Restrictions.allowsExplicit?!1:!0),y.account.enableAppleMusic(y.account.isEligibleForAppleMusic()||y.account.isAppleMusicEnabled()?!0:!1)},S.prototype.resumeApp=function(t){var e=y.keypath(t,"detail.options.url");e&&this.parseDeepLink(e),this.setDeviceCookies(),y.loc.update()},S.prototype.parseDeepLink=function(t){var e,n,i;if(t.match(/subscribe/))return void(y.account.isEligibleForAppleMusic()||this.showDeepLinkWelcomePage());if(t.match(/station/))this.handleSetSelectedTab("radio"),e=new s({tab:TabBar.selectedTab,name:TabBar.selectedTab.title,url:t}),n=TabBar.selectedTab.navigationDocument;else if(t.match(/beatsMigrationInfoSrv/))e=new h({deepLink:t}),n=modal;else if(t.match(/carrier/))e=new d({},{reason:"deepLink"}),n=modal;else for(var r=0;r<TabBar.tabs.length;r++){var o=TabBar.tabs[r],l=o.identifier.replace("_","");if(t.match(l))return i={target:o},this.handleTabNeedsContent({detail:i}),void this.handleSetSelectedTab(o.identifier)}e?setTimeout(function(){n.pushDocument(e.el,{}),e.addEventListener("tabPush",this.handleTabPush.bind(this))}.bind(this),10):(i={data:{url:t},navigationDocument:TabBar.transientTab.navigationDocument},TabBar.selectedTab=TabBar.transientTab,this.handleTabPush(new a("tabPush",{detail:i})))},S.prototype.handleTabNeedsContent=function(t){this.didAskForTab=!0;var e=t.detail.target,n=function(){var n=t.detail.url,i=e.identifier,a=this.tabControllers[i],r=this.getCachedControllerForKey(i);if(e.navigationDocument.clear(),!r){if(!a)return;r=new a({tab:e,name:e.title,url:n}),r.addEventListener("tabPush",this.handleTabPush.bind(this)),r.addEventListener("checkLocalManifestVersion",this.checkLocalManifestVersion.bind(this)),this.setCachedControllerForKey(i,r)}}.bind(this);this.versionCheckComplete?n():this.checkLocalManifestVersion({detail:{callback:n,showLoading:!0,tab:e}})},S.prototype.handlePrepareForTabPush=function(t){var e=t.detail.tab;if(e){if(0===e.navigationDocument.documents.length){var n={target:e};this.handleTabNeedsContent({detail:n})}t.detail.switchToTab&&(TabBar.selectedTab=e)}},S.prototype.handleTabPush=function(t){var e=t.detail.options||{},n=x.getControllerDocument(t);n.addEventListener("tabPush",this.handleTabPush.bind(this));var i,a=y.keypath(t,"detail.navigationDocument"),r=modal.documents;a||(y.log.error("Trying to push from JavaScript without specifiying a navigation document to push onto. Falling back to the old and racy method for finding the navigation document. This is really bad, please file a radar. Originating tabPush event: ",t),r.length>0?(i=r[r.length-1],a=i.navigationDocument):a=TabBar.selectedTab.navigationDocument),0===r.length&&y.metrics.track(n,{tabIdentifier:TabBar.selectedTab.identifier,entityType:t.detail.entityType||t.detail.dataType}),n instanceof c&&y.keypath(t,"detail.data.url")&&(e={url:t.detail.data.url}),a.pushDocument(n.el,e)},S.prototype.handleSetSelectedTab=function(t){if(t!==TabBar.selectedTab.identifier)for(var e,n=0;n<TabBar.tabs.length;n++)if(e=TabBar.tabs[n],e.identifier===t)return void(TabBar.selectedTab=e)},S.prototype.onPageResponse=function(t,e){var n={callerDocument:t,response:e,pushFunction:this.handleTabPush};this.dispatchEvent(new a("pageResponse",{detail:n}))},S.prototype.onAccountChange=function(){k.publish("serviceChange",{}),y.metrics.recordAccountChange(),this.setDeviceCookies()},S.prototype.onBuyHandler=function(t){t.result?(k.publish("serviceChange",{}),k.publish("buyConfirmed",{buyInfo:t})):k.publish("buyFailed",{buyInfo:t})},S.prototype.handleSubscriptionRequired=function(){y.account.showPlayUpsell()},S.prototype.handleError=function(t){itms.log("ITMLJS: App.onError: "+t)};var D=function(t,e,n,i){var a=new t[e](i,n);itms.log("ITMLJS: init native view: "+a)},M=function(t,e){for(var n in t)t.hasOwnProperty(n)&&NativeViewEventRegistry.addNativeViewAppearanceListener(n,"load",D.bind(this,t,n,e))};S.prototype.readyApp=function(t){var e=y.keypath(t,"detail.options")||{},n={tabPush:this.handleTabPush.bind(this),prepareForTabPush:this.handlePrepareForTabPush.bind(this),checkLocalManifestVersion:this.checkLocalManifestVersion.bind(this)},i={"contextual-actions":v,product:p,profile:m,search:f,account:g,welcome:b};M(i,n),y.metrics.init(this,e),e.url&&(this.parseDeepLink(e.url),this.updateAffiliateCookie(e.url))},S.prototype.showDeepLinkWelcomePage=function(){if(UserInterfaceStatusController.hasUserAcknowledgedWelcomeScreen()===!0){var t={detail:{data:{mode:"intro",sheetType:"js"},dataType:"welcome_page",navigationDocument:modal,options:{animated:!1}}};this.handleTabPush(t)}},S.prototype.updateAffiliateCookie=function(t){var e=y.urls.affiliateCookie();if(!e)return void y.log.error("No util.bag().affiliateCookie: skipping trying to update affiliate cookie");var n=y.query.parse(t);if(n.at){n.appType=1;var i={url:e+y.query.build(n),method:"GET",success:function(t){var e=JSON.parse(t),n=Object.keys(e)[0],i=new Date;i.setDate(i.getDate()+30);var a=i.toUTCString();y.cookie.set({name:n,path:"/",value:e[n],expires:a,domain:".apple.com"})}.bind(this),failure:function(){itms.log("Failed to get affiliate cookie string. URL: "+t+" :: at:"+n.at+" :: ct:"+n.ct)}};y.xhr(i)}},S.prototype.checkLocalManifestVersion=function(t){var e=y.keypath(t,"detail.callback"),n=y.keypath(t,"detail.tab"),i=y.keypath(t,"detail.showLoading"),a=this,r="8.4.0.1.0.0",o=UpdatableAssets.currentManifestVersion(),l=function(){a.versionCheckComplete=!0,e.call(this,a.versionCheckComplete)},s=setTimeout(function(){l()},6e5);if(itms.log("ITMLJS: currentManifestVersion: "+o),itms.log("ITMLJS: releaseManifestVersion: "+r),y.string.compareNumerically(o,r)<0){if(itms.log("ITMLJS: we have a lower version"),i){var u=new c({title:w.loc("FUSE.Updating")}),h=n&&n.navigationDocument||TabBar.selectedTab.navigationDocument;h.pushDocument(u.el)}UpdatableAssets.refreshCachedManifest(function(){itms.log("ITMLJS: manifest was refreshed");try{clearTimeout(s);var t=UpdatableAssets.newestCachedManifestVersion();itms.log("ITMLJS: currentManifestVersion: "+o),itms.log("ITMLJS: newestManifestVersion: "+t),y.string.compareNumerically(o,t)<0?(itms.log("ITMLJS: RESTART"),App.restart()):(itms.log("ITMLJS: ALL GOOD"),l())}catch(e){itms.log("ITMLJS: error trying to string compare compareNumerically:"+e),l()}})}else itms.log("ITMLJS: we are up to date"),l()},e.exports=S},{"./app/account/carrier_bundling/carrier_verification":8,"./app/account/migration":23,"./app/account/settings":44,"./app/account/welcome":65,"./app/common":80,"./app/common/controller_helper":76,"./app/connect":108,"./app/contextual_actions":137,"./app/for_you/":145,"./app/loading":176,"./app/new/":186,"./app/product/":189,"./app/profile/":206,"./app/radio/":211,"./app/search/":239,"./util":267,itml:317}],260:[function(t,e,n){var i=t("itml").utils.keypath,a=t("./urls"),r=t("./xhr"),o=t("./cookie"),l=t("./bag"),s=t("./pub_sub"),c=!1,u=!1,h=!1,d=[],p=!1,m=!1,f=!1,g=function(){return itms.accountInfo&&itms.accountInfo.DSID},b=function(t){t=t||{},t.options=t.options||{};var e=function(){var e=itms.accountInfo.DSID;e?t.success&&t.success.call(this,e):t.failure&&t.failure.call(this,e,t.options)};itms.authenticate(t.options,e.bind(this))},v=function(t){var e=a.profilePermissions();e&&r({method:"GET",url:e+"?user="+itms.accountInfo.DSID,success:function(e){var n=JSON.parse(e);d=[],d=n&&n.permissions||[],t.success&&t.success(d)},failure:function(e){t.failure&&t.failure(JSON.parse(e))}})},y=function(t){var e=a.profile();e&&r({method:"GET",url:e+"?user="+itms.accountInfo.DSID,success:function(e){var n=JSON.parse(e);p={},p=n&&n.profile||{},t.success&&t.success(p)},failure:function(e){t.failure&&t.failure(JSON.parse(e))}})},w=function(){return p},k=function(){return d},x=function(){return c},A=function(){return m},C=function(){return h},S=function(){return u},D=function(){return itms.eligibilityForService({service:"AppleMusic"})},M=function(){var t=D();return t?t.subscribed===!0||"unlinked"===t.carrierBundle||"eligible"===t.carrierBundle:!1},E=function(t,e){t=t||{service:"AppleMusic"};var n=[],a=function(t,n){e.call(this,t,n)};itms.getServiceEligibility(t,function(t,e){n=e&&e.permissions||[],c=1===t,m=c&&"unlinked"===i(e,"carrierBundle"),h=n.indexOf("post")>-1,u=n.indexOf("admin")>-1,e&&"needsAuthentication"===i(e,"accountStatus")?b({success:function(){a(t,e)},failure:function(){a(t,e)}}):a(t,e)})},T=function(){var t=["Telstra"];return Telephony&&t.indexOf(Telephony.providerName)>-1},P=function(t){o.hideSubscription(!t),UserInterfaceStatusController.setHasUserRequestedSubscriptionHidden(!t)},F=function(){return!UserInterfaceStatusController.hasUserRequestedSubscriptionHidden()},I=function(){var t=l();return t&&typeof("undefined"!==t.musicSubscription)},L=function(){var t=l();return t&&typeof("undefined"!==t.musicConnect)},_=function(){return f},R=function(t){f=t},U=function(){R(!1),modal.popDocument()},B=function(){if(!_()){R(!0);var t={data:{mode:"upsell",upsellIdentifier:"Generic",sheetType:"js"},dataType:"welcome_page",navigationDocument:modal,options:{animated:!0}};s.publish("showModal",{detail:t})}};e.exports={auth:b,subscribed:x,unlinked:A,hasPostPermission:C,hasAdminPermission:S,getSubscriptionStatus:E,isOnCarrierBundlingNetwork:T,getProfilePermissions:v,profilePermissions:k,getProfile:y,profile:w,getDSID:g,enableAppleMusic:P,isAppleMusicEnabled:F,getCachedSubscriptionStatus:D,isAppleMusicEnabledForStorefront:I,isConnectEnabledForStorefront:L,isEligibleForAppleMusic:M,showPlayUpsell:B,setShowingPlayUpsell:R,closePlayUpsell:U}},{"./bag":263,"./cookie":265,"./pub_sub":274,"./urls":281,"./xhr":282,itml:317}],261:[function(t,e,n){function i(t,e,n){n=n||l;var i,a=o.screen.sizeForScreenDimension(),r=n[t][a],s=n[t].crop||"sr";if(r){var c,u,h={width:r[0]*Device.pixelRatio,height:r[1]*Device.pixelRatio},d=o.clone(e);if(e instanceof Array){for(var p={width:1e4,height:1e4},m={width:0,height:0},f=!1,g=0;g<e.length;g++){var b=e[g];if(b.height===h.height&&b.width===h.width)return b.width=Math.round(b.width/Device.pixelRatio),b.height=Math.round(b.height/Device.pixelRatio),b.dpr=Device.pixelRatio+"x",b;b.height>h.height||b.width>h.width?(b.height<p.height||b.width<p.width)&&(p=b,f=!0):(b.height>m.height||b.width>m.width)&&(m=b)}d=f?p:m,c=d.width,u=d.height,"bb"===s&&(i=Math.min(h.width/c,h.height/u),c=Math.round(c*i),u=Math.round(u*i))}else d.url&&("bb"===s?(c=d.width,u=d.height,i=Math.min(h.width/c,h.height/u),c=Math.round(c*i),u=Math.round(u*i),d.url=d.url.replace("{w}",c).replace("{h}",u).replace("{c}",s).replace("{f}","jpeg")):(d.url="hero"===t?d.url.replace("{h}bb","{h}fa"):d.url.replace("{h}bb","{h}"+s),d.url=d.url.replace("{w}",h.width).replace("{h}",h.height).replace("{c}",s).replace("{f}","jpeg"),c=h.width,u=h.height));if(d.width=Math.round(c/Device.pixelRatio),d.height=Math.round(u/Device.pixelRatio),d.dpr=Device.pixelRatio+"x",d.bgColor){var v=new o.color(d.bgColor);d.isDark="brick"===t?v.isDarkBrick():v.isDark(),d.bgColorComplement=d.isDark?v.lighten(.1):v.darken(.1)}return d}o.log.error("No size defined for type:",t)}function a(t,e,n){if(t){if(!t.artwork)return t;var a=o.clone(l),r=o.clone(s);o.extend(a,e),o.extend(r,n);for(var c=t.type||t.kind||"product",u=Object.keys(r),h="product",d=0;d<u.length;d++){var p=u[d];r[p].indexOf(c)>-1&&(h=p)}if(t.hasOwnProperty("artwork")&&(t.image=i(h,t.artwork,a)),t.hasOwnProperty("editorialArtwork")){if(t.editorialArtwork&&t.editorialArtwork.subscriptionHero){var m=t.editorialArtwork.subscriptionHero||t.editorialArtwork.subscriptionCover;t.hero=i("hero",m)}t.editorialArtwork&&t.editorialArtwork.brandLogo&&(t.logo=i(h,t.editorialArtwork.brandLogo))}else t.hasOwnProperty("uber")&&t.uber&&t.uber.masterArt&&(t.hero=i("hero",t.uber.masterArt,a));return t}}function r(t){var e=t.content;if(e&&(e.artwork||e.editorialArtwork)){var n=t.params,a=o.clone(l),r=o.clone(s);o.extend(a,t.artworkMap),o.extend(r,t.artworkKeys);var c=e.kind||"product";n&&n.type&&(c=n.type);for(var u=Object.keys(r),h=c,d=0;d<u.length;d++){var p=u[d];r[p].indexOf(c)>-1&&(h=p)}var m={},f=h||"hero";if(e.hasOwnProperty("artwork")&&(m.image=i(h,e.artwork,a)),e.hasOwnProperty("uber")&&e.uber&&e.uber.masterArt&&(m.legacyUber=i(f,e.uber.masterArt,a)),e.hasOwnProperty("editorialArtwork")){var g;e.editorialArtwork.subscriptionHero&&(g="brick"!==c?"hero":"brick",m.hero=i(g,e.editorialArtwork.subscriptionHero,a)),e.editorialArtwork.subscriptionCover&&(g="brick"!==c?"cover":"brick",m.image||(m.image=i(h,e.editorialArtwork.subscriptionCover,a)),m.cover=i(g,e.editorialArtwork.subscriptionCover,a)),e.editorialArtwork.brandLogo&&(m.logo=i(h,e.editorialArtwork.brandLogo,a)),e.editorialArtwork.bannerUber&&(m.uber=i(f,e.editorialArtwork.bannerUber,a))}return Object.keys(m).length>0?m:void 0}}var o=t("itml").utils;o.screen=t("./screen"),o.log=t("./logger");var l={hero:{crop:"fa",xs:[320,240],s:[375,240],m:[414,240],l:[768,288],xl:[1024,288]},cover:{crop:"sr",xs:[320,240],s:[375,240],m:[414,293],l:[768,305],xl:[1024,305]},social:{crop:"h",xs:[320,193],s:[375,184],m:[414,240],l:[320,193],xl:[578,289]},heroChild:{xs:[88,88],s:[125,125],m:[125,125],l:[250,250],xl:[250,250]},brick:{crop:"sr",xs:[320,82],s:[375,97],m:[414,107],l:[251,160],xl:[336,160]},product:{xs:[88,88],s:[123,123],m:[137,137],l:[150,150],xl:[144,144]},productChild:{crop:"sr",xs:[44,44],s:[62,62],m:[62,62],l:[75,75],xl:[72,72]},video:{xs:[136,136],s:[185,105],m:[185,105],l:[148,84],xl:[164,93]},profile:{xs:[88,88],s:[115,115],m:[125,125],l:[110,110],xl:[110,110]},sharing:{xs:[100,100],s:[100,100],m:[100,100],l:[100,100],xl:[100,100]},track:{xs:[56,56],s:[56,56],m:[56,56],l:[56,56],xl:[56,56]},list:{crop:"sr",xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120]},listChild:{xs:[27,27],s:[27,27],m:[27,27],l:[60,60],xl:[60,60]}},s={track:["song","uploadedAudio","UploadedAudio"],video:["video","musicVideo","uploadedVideo","UploadedVideo"],product:["album","playlist","radioStation"],profile:["artist","iTunesBrand","brand","activity"],social:["social","connect","post"],brick:["brick","link"],sharing:["sharing"],hero:["hero"]};e.exports={setArtworkForContent:a,getArtworkForContent:r,bestArtwork:i,artworkMap:l,typesForKey:s}},{"./logger":270,"./screen":276,itml:317}],262:[function(t,e,n){var i=t("./logger"),a=t("./account"),r=function(t,e){var n=t.productData,i=(TabBar.selectedTab.identifier+"").replace(" ","-").toLowerCase(),a=t.selectedFilter?(t.selectedFilter+"").toLowerCase():"none",r=t.controllerName,o=i+":"+a+" / "+r,l={items:[],featureName:o};t.recoId&&(l.recommendationData=t.recoId);var s={};if(n){var c=n.kind;"album"===c||"playlist"===c?(s={id:n.id,url:n.url,metadata:n},n.children&&n.children.length>0&&(s.isFullMetadata=!0)):s={id:n.id,url:n.url,isFullMetadata:!0,metadata:n},l.items.push(s)}e.call(this,l)},o=function(t){return t&&t.indexOf("radioStation")>-1?!1:!0},l=function(t){var e=t.productData,n=o(e.kind);n&&!a.isEligibleForAppleMusic()?a.showPlayUpsell():r(t,function(t){itms.playMedia(t,function(e){e?(i.log("playback success",t),(-1!==t.items[0].metadata.kind.indexOf("musicVideo")||-1!==t.items[0].metadata.kind.indexOf("uploadedVideo"))&&NowPlayingController.presentNowPlayingView()):i.error("Error during playback",t)})})},s={play:l,determineTrackInfo:r};e.exports=s},{"./account":260,"./logger":270}],263:[function(t,e,n){var i={},a=function(t){return Object.keys(i).length>0&&!t?i:i=itms.getBag()||{}};itms.onBagChange=function(){var e=t("./network"),n=t("./pub_sub");n.publish("appRefresh"),e.handleNetworkChange()},e.exports=a},{"./network":273,"./pub_sub":274}],264:[function(t,e,n){var i=function(){var t,e,n,i=[],r=95.0456,o=100,l=108.9058,c=function(t){if("string"==typeof t)return t.indexOf("%")>0?parseFloat(t)/100:parseFloat(t);if("number"==typeof t)return t;throw{error:"InvalidFormat",message:"Argument "+t+" is not a number."}},u=function(t){return t=c(t),t>1||-1>t?t/100:t},d=function(t,e,n){return Math.max(Math.min(c(t),c(n)),c(e))},p=function(t){return t===+t&&t===(0|t)},m=function(a,r,o){return a=c(a),r=c(r),o=c(o),p(a)&&p(r)&&p(o)?(a=d(a,0,255),r=d(r,0,255),o=d(o,0,255),t=a/255,e=r/255,n=o/255):(t=d(a,0,1),e=d(r,0,1),n=d(o,0,1),a=Math.round(255*t),r=Math.round(255*e),o=Math.round(255*n)),i=[a,r,o],{r:a,g:r,b:o}},f=function(t){return"undefined"==typeof t||null==t||""===t?t=1:(t=u(t),t=d(t,0,1)),t},g=function(t){return/(^#?[0-9A-F]{6}$)|(^#?[0-9A-F]{3}$)/i.test(t)},b=function(t){return t.match(/[\d.]{1,3}/gi)};return{parseColor:function(t,e){var n,i;return null==t?(n=m(0,0,0),i=f(e)):t instanceof a?(n=m(t.rgb.r.color.rgb.g,t.rgb.b),i=f(t.alpha)):null!=t.r?(n=m(t.r,t.g,t.b),i=f(t.alpha||1)):Array.isArray(t)&&t.length>=3?(n=m(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):!g(t)&&(t.indexOf("rgb")>-1||null!=t.match(/[\d.]{1,3}/gi)&&t.match(/[\d.]{1,3}/gi).length>=3)?(t=t.match(/[\d.]{1,3}/gi),n=m(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):t.indexOf("hsv")>-1?(t=t.match(/[\d.%]{1,3}/gi),n=this.HSVtoRGB(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):t.indexOf("hsl")>-1?(t=b(t),n=this.HSLtoRGB(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):g(t)&&(n=this.HEXtoRGB(t),i=f(e)),{rgb:n,alpha:i}},setOpacity:function(t){return f(t)},getHue:function(i,a,r){var o=0;null!=i&&m(i,a,r);var l=Math.max(t,e,n),s=Math.min(t,e,n),c=l-s;switch(l){
case t:o=(e-n)/c+(n>e?6:0);break;case e:o=(n-t)/c+2;break;case n:o=(t-e)/c+4;break;default:o=0}return o=60*o,0>o&&(o+=360),o},RGBtoHEX:function(t,e,n){null!=t&&m(t,e,n);var a=i.map(function(t){return t=t.toString(16),1===t.length?"0"+t:t}).join("");return a},HEXtoRGB:function(t){if(g(t)){0===t.indexOf("#")&&(t=t.substr(1));var e=0,n=0,i=0;return 3===t.length?(t=t.split("").map(function(t){return parseInt(t+t,16)}),e=t[0],n=t[1],i=t[2],rgb=m(e,n,i)):t.length>=6&&(e=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),i=parseInt(t.substr(4,2),16),rgb=m(e,n,i)),{r:e,g:n,b:i}}throw{error:"InvalidFormat",message:t+" is not a valid hex value."}},RGBtoHSL:function(i,a,r){null!=i&&m(i,a,r);var o=Math.max(t,e,n),l=Math.min(t,e,n),c=(o+l)/2,u=o-l;return 0===u?h=s=0:(s=c>0?u/(1-Math.abs(2*c-1)):0,h=this.getHue()),{h:h,s:s,l:c}},HSLtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){"string"==typeof t&&t.indexOf("%")>0&&(t=360*c(t)),t=d(t,0,360),e=u(Math.abs(e)),n=u(Math.abs(n));var i=0,a=0,r=0;if(0!==e||0!==n){var o=.5>=n?n*(1+e):n+e-n*e,l=n+n-o,s=function(t){t=0>t?t+1:t>1?t-1:t;var e;return e=1>6*t?l+6*(o-l)*t:.5>t?o:2>3*t?l+(o-l)*(2/3-t)*6:l};i=s(t+1/3),a=s(t),r=s(t-1/3)}return m(i,a,r)}throw{error:"InvalidFormat",message:"NULL is not a valid argument."}},RGBtoHSV:function(i,a,r){null!=i&&m(i,a,r);var o=Math.max(t,e,n),l=Math.min(t,e,n),c=o-l,u=o;return 0===c?h=s=0:(s=c/u,h=this.getHue()),{h:h,s:s,v:u}},HSVtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){"string"==typeof t&&t.indexOf("%")>0&&(t=360*c(t)),t=d(c(t),0,360),e=u(Math.abs(e)),n=u(Math.abs(n));var i=0,a=0,r=0;if(0===e&&0!==n)i=a=r=Math.round(255*n);else if(0!==e&&0!==n){var o=t/60,l=0|o,s=n*e,h=n-s,p=s*(1-Math.abs(o%2-1))+h;switch(s+=h,l){case 0:i=s,a=p,r=h;break;case 1:i=p,a=s,r=h;break;case 2:i=h,a=s,r=p;break;case 3:i=h,a=p,r=s;break;case 4:i=p,a=h,r=s;break;case 5:i=s,a=h,r=p;break;default:i=0,a=0,r=0}}return m(i,a,r)}throw{error:"InvalidFormat",message:"NULL is not a valid argument."}},RGBtoXYZ:function(i,a,r){null!=i&&m(i,a,r);var o=0,l=0,s=0;return i=100*(t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92),a=100*(e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92),r=100*(n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92),o=.412453*i+.35758*a+.180423*r,l=.212671*i+.71516*a+.072169*r,s=.019334*i+.119193*a+.950227*r,{x:o,y:l,z:s}},XYZtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){t=d(Math.abs(t),0,r)/100,e=d(Math.abs(e),0,o)/100,n=d(Math.abs(n),0,l)/100;var i=3.240479*t+-1.53715*e+n*-.498535,a=t*-.969256+1.875992*e+.041556*n,s=.055648*t+e*-.204043+1.057311*n,c=function(t){return t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t};return i=c(i),a=c(a),s=c(s),m(i,a,s)}throw{error:"InvalidFormat",message:"NULL is not a valid argument"}},RGBtoLab:function(t,e,n){null!=t&&m(t,e,n);var i=this.RGBtoXYZ(),a=i.x/r,s=i.y/o,c=i.z/l,u=0,h=0,d=0,p=7.787037037037035,f=function(t){return t>.008856?Math.pow(t,1/3):p*t+.13793103448275862};return a=f(a),s=f(s),c=f(c),u=116*s-16,h=500*(a-s),d=200*(s-c),{L:u,a:h,b:d}},LABtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){t=d(t,0,100),e=d(e,-128,128),n=d(n,-128,128);var i=(t+16)/116,a=e/500+i,s=i-n/200,c=7.787037037037035,u=function(t){var e=Math.pow(t,3);return e>.008856?e:(t-.13793103448275862)/c};return a=u(a),i=u(i),s=u(s),a*=r,i*=o,s*=l,this.XYZtoRGB(a,i,s)}throw{error:"InvalidFormat",message:"NULL is not a valid argument"}},changeHue:function(t,e,n,i){if("string"==typeof t&&t.indexOf("%")>0&&(t=3.6*parseFloat(t)),null!=e&&m(e,n,i),t=d(t,0,360),0===t)return this;t%=360;var a=this.RGBtoHSL(),r=(a.h+t)%360;return 0>r&&(r+=360),this.HSLtoRGB(r,a.s,a.l)},changeBrightness:function(t,e,n,i){null!=e&&m(e,n,i),t=this.number(t),t=t>1||-1>t?t/100:t;var a=this.RGBtoHSV(),r=a.v+t;return r=d(r,0,1),this.HSVtoRGB(a.h,a.s,r,a.a)},changeLightness:function(t,e,n,i){null!=e&&m(e,n,i),t=c(t),t=.99>=t&&t>=-.99?100*t:t;var a=this.RGBtoLab(),r=a.L+t;return r=d(r,0,100),this.LABtoRGB(r,a.a,a.b)},changeSaturation:function(t,e,n,i){null!=e&&m(e,n,i),t=c(t),t=t>1||-1>t?t/100:t;var a=this.RGBtoHSV(),r=a.s+t;return r=d(r,0,1),this.HSVtoRGB(a.h,r,a.v,a.a)}}}(),a=function(t,e){this.rgb={},this.alpha=1,this.init(t,e)};a.prototype.init=function(t,e){var n=i.parseColor(t,e);this.rgb=n.rgb,this.alpha=n.alpha},a.prototype.getAlpha=function(){return this.alpha},a.prototype.setAlpha=function(t){return t>=0&&1>=t&&(this.alpha=t),this},a.prototype.getRGB=function(){return this.rgb},a.prototype.getHEX=function(){return this.hex||(this.hex=i.RGBtoHEX(this.rgb.r,this.rgb.g,this.rgb.b)),this.hex},a.prototype.getHSL=function(){return this.hsl||(this.hsl=i.RGBtoHSL(this.rgb.r,this.rgb.g,this.rgb.b)),this.hsl},a.prototype.getHSV=function(){return this.hsv||(this.hsv=i.RGBtoHSV(this.rgb.r,this.rgb.g,this.rgb.b)),this.hsv},a.prototype.getXYZ=function(){return this.xyz||(this.xyz=i.RGBtoXYZ(this.rgb.r,this.rgb.g,this.rgb.b)),this.xyz},a.prototype.getLab=function(){return this.lab||(this.lab=i.RGBtoLab(this.rgb.r,this.rgb.g,this.rgb.b)),this.lab},a.prototype.getHue=function(){return this.hue||(this.hue=i.getHue(this.rgb.r,this.rgb.g,this.rgb.b)),this.hue},a.prototype.lighten=function(t){var e=i.changeLightness(t,this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.darken=function(t){var e=i.changeLightness(-1*Math.abs(t),this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.saturate=function(t){var e=i.changeSaturation(t,this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.desaturate=function(t){var e=i.changeSaturation(-1*Math.abs(t),this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.greyscale=function(){var t=i.changeSaturation(-1,this.rgb.r,this.rgb.g,this.rgb.b),e=new a(t,this.alpha);return e},a.prototype.toString=function(t,e){"undefined"!=typeof t&&(t=t.toLowerCase()),e="undefined"!=typeof e?e+2:2;{var n,i;Math.pow(10,Number(e))}switch(t){case"rgb":case"rgba":var a=this.rgb.r+","+this.rgb.g+","+this.rgb.b;n=this.alpha<1?"rgba("+a+","+this.alpha+")":"rgb("+a+")";break;case"hex":n="#"+this.getHEX();break;case"hsl":case"hsla":i=this.getHSL(),n=i.h.toFixed(e-2)+", "+(100*i.s).toFixed(e-2)+"%, "+(100*i.l).toFixed(e-2)+"%",n=i.a<1?"hsla("+n+", "+i.a+")":"hsl("+n+")";break;case"hsv":case"hsva":i=this.getHSV(),n=i.h.toFixed(e-2)+", "+(100*i.s).toFixed(e-2)+"%, "+(100*i.v).toFixed(e-2)+"%",n=i.a<1?"hsva("+n+", "+i.a+")":"hsv("+n+")";break;default:n=this.alpha<1?"rgba("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+", "+this.alpha+")":"#"+this.getHEX()}return n},a.prototype.isDark=function(){var t=this.getLab();return t.L<50?!0:!1},a.prototype.isDarkBrick=function(){var t=this.getLab();return t.L<80?!0:!1},a.prototype.getDarknessRange=function(){var t=this.getLab();return t.L>=0&&t.L<=39?"dark":t.L>=40&&t.L<=59?"mediumdark":t.L>=60&&t.L<=79?"mediumlight":t.L>=80&&t.L<=100?"light":!1},e.exports=a},{}],265:[function(t,e,n){var i=t("its-util"),a=i.cookie;a.restrictExplicit=function(t){var e=t?1:0;this.set({name:"itre",value:e,domain:".apple.com"})},a.hideSubscription=function(t){var e=t?1:0;this.set({name:"itst",value:e,domain:".apple.com"})},e.exports=a},{"its-util":348}],266:[function(t,e,n){var i=t("moment"),a=t("./loc"),r="en",o={en:{relativeTime:{future:"in %s",past:"%s",s:a.loc("FUSE.Dates.FromNow.OneSecond"),ss:a.loc("FUSE.Dates.FromNow.MultipleSeconds",{timeUnit:"%d"}),m:a.loc("FUSE.Dates.FromNow.OneMinute"),mm:a.loc("FUSE.Dates.FromNow.MultipleMinutes",{timeUnit:"%d"}),h:a.loc("FUSE.Dates.FromNow.OneHour"),hh:a.loc("FUSE.Dates.FromNow.MultipleHours",{timeUnit:"%d"}),d:a.loc("FUSE.Dates.FromNow.OneDay"),dd:a.loc("FUSE.Dates.FromNow.MultipleDays",{timeUnit:"%d"}),M:a.loc("FUSE.Dates.FromNow.OneMonth"),MM:a.loc("FUSE.Dates.FromNow.MultipleMonths",{timeUnit:"%d"}),y:a.loc("FUSE.Dates.FromNow.OneYear"),yy:a.loc("FUSE.Dates.FromNow.MultipleYears",{timeUnit:"%d"})}}};i.locale(r,o[r]);var l={timeSince:function(t){return i(t).fromNow(!0)}};e.exports=l},{"./loc":268,moment:357}],267:[function(t,e,n){function i(t){var e=!1,n=function(){};return"function"!=typeof t?void l.error("once must be passed a function"):function(){return e||(n=t.apply(this,arguments),e=!0),n}}function a(t,e){for(var n={},i=0;i<t.length;i++){var a=e?e(t[i]):t[i];n[a]?t.splice(i--,1):n[a]=!0}return t}function r(t){var e={data:{type:"error",title:t||"!!!",buttons:[{title:"OK",className:"cancel-button"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};h.publish("showModal",{detail:e})}var o=t("itml"),l=t("./logger"),s=t("./loc"),c=t("./lockup"),u=t("./metrics"),h=t("./pub_sub"),d=t("./audio"),p=t("./xhr.js"),m=t("./native.js"),f=t("./bag.js"),g=t("./network.js"),b=t("./string"),v=t("./account.js"),y=t("./screen"),w=t("./artwork"),k=t("./date"),x=t("./color"),A=t("./query_string"),C=t("./cookie"),S=t("./urls"),D=t("./tabs"),M=t("./template_helpers"),E=t("./template_partials"),T=o.utils;M(T.Handlebars),E(T.Handlebars);var P={bag:f,color:x,cookie:C,log:l,loc:s,lockup:c,metrics:u,"native":m,network:g,query:A,pubSub:h,audio:d,xhr:p,once:i,account:v,screen:y,artwork:w,date:k,prune:a,alert:r,urls:S,tabs:D,string:b};T.extend(P,b),T.extend(T,P),e.exports=T},{"./account.js":260,"./artwork":261,"./audio":262,"./bag.js":263,"./color":264,"./cookie":265,"./date":266,"./loc":268,"./lockup":269,"./logger":270,"./metrics":271,"./native.js":272,"./network.js":273,"./pub_sub":274,"./query_string":275,"./screen":276,"./string":277,"./tabs":278,"./template_helpers":279,"./template_partials":280,"./urls":281,"./xhr.js":282,itml:317}],268:[function(t,e,n){var i,a=t("itml").utils,r=t("./logger"),o=t("./xhr"),l=t("./urls"),s=t("its-localization").its,c={ca:"ca-ca",da:"da-dk",de:"de-de",el:"el-gr",en:"en-us",en_AU:"en-au",en_GB:"en-uk",es:"es-es",es_MX:"es-mx",fi:"fi-fi",fr:"fr-fr",fr_CA:"fr-ca",id:"id-id",it:"it-it",ja:"ja-jp",ko:"ko-kr",nl:"nl-nl",no:"no-no",pl:"pl-pl",pt:"pt-br",pt_PT:"pt-pt",ro:"ro-ro",ru:"ru-ru",sk:"sk-sk",sv:"sv-se",th:"th-th",tr:"tr-tr",uk:"uk-uk",vi:"vi-vi",zh_CN:"zh-cn",zh_HK:"zh-tw",zh_TW:"zh-tw"};s.update=function(){var t,e=itms.getBag();t=e?e.language.toLowerCase():c[Settings.language];var n=UpdatableAssets.loadResource("resources/localization/"+t+".json"),u={};n&&(u=JSON.parse(n),s.updateLocale(u)),o({method:"GET",url:l.loc(),success:function(t){var e=JSON.parse(t),n=e.loc;i=e.timestamp,a.extend(u,n),s.updateLocale(u)},failure:function(t){r.error("failed to update localization",t)}})},s.update(),s.locWithButtonSubstitution=function(t,e){if(e){var n,i,a,r,o;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],null===n&&(r=t+"."+l+".Url",o=t+"."+l+".Name",i=s.loc(r),a=s.loc(o),i!==r&&a!==o?e[l]='<button class="open-url embedded-link" data-link-url="'+i+'">'+a+"</button>":delete e[l]))}return s.loc(t,e)},e.exports=s},{"./logger":270,"./urls":281,"./xhr":282,itml:317,"its-localization":343}],269:[function(t,e,n){var i=t("./artwork"),a=t("itml").utils,r=t("./loc");e.exports={line1:function(t){var e="";switch(t.kind){case"playlist":var n=t.curatorName||"Apple Music";e=r.loc("FUSE.New.ByCuratorName",{curatorName:n});break;case"song":e=t.artistName+" - "+t.collectionName;break;default:e=t.artistName}return e},getDescription:function(t){var e=a.keypath(t,"description.short")||a.keypath(t,"description.standard");return e},isExplicit:function(t){return"Explicit"===a.keypath(t,"contentRatingsBySystem.riaa.name")?!0:!1},formatDuration:function(t,e){var n,i;try{n=t.offers[0].assets[0].duration}catch(a){}if(n){var o={},l=parseInt(n,10);o.h=Math.floor(l/3600),o.m=Math.floor((l-3600*o.h)/60),o.s=l-3600*o.h-60*o.m,i=r.loc(e,o)}return i},setArtworks:function(t,e,n,r){r=r||"product";var o=a.clone(i.artworkMap);if(a.extend(o,n),t.kind&&(t[t.kind]=!0),t.name=t.shortName||t.name,e)t.image=e.image,t.hero=e.hero,t.cover=e.cover,t.logo=e.logo,t.uber=e.uber;else{if(t.artworkTracks)for(var l=Object.keys(t.artworkTracks),s=0;s<l.length;s++){var c=t.artworkTracks[l[s]],u=r?r+"Child":"productChild";o[u]||(u=r);var h=i.getArtworkForContent({content:c,artworkMap:o,params:{type:u}});t.artworkTracks[l[s]].image=h.image}var d=a.screen.sizeForScreenDimension(),p=o[r]&&o[r][d];p&&(t.image={width:p[0],height:p[1]})}return t}}},{"./artwork":261,"./loc":268,itml:317}],270:[function(t,e,n){var i=t("lager");e.exports=i},{lager:351}],271:[function(t,e,n){var i,a=t("metrics-base"),r=t("fuse-metrics"),o=t("./pub_sub"),l=t("./bag"),s=t("itml").utils.keypath,c={topic:"xp_its_music_main",eventBase:r.createEventBase,eventFields:r.eventFields,recordEvent:function(t,e){itms.recordEvent(e,t)},pubsub:o,resources:{bag:l,itms:itms,Settings:Settings,Device:Device,UpdatableAssets:UpdatableAssets,TabBar:TabBar},addSecondaryBaseFields:function(t,e,n){var a=s(e,"doc"),o=a?s(a,"controllers")&&a.controllers[0]:{},l=s(o,"data.pageData"),c=s(r,"util.toUpperCamelCase"),u="function"==typeof c?c(TabBar.selectedTab.identifier):TabBar.selectedTab.identifier,h=s(o,"name")||s(o,"api")||s(a,"name");h="string"==typeof h?h.split(" ").join(""):h;var d,p=s(l,"metricsBase"),m=s(l,"metrics.fields");if("impressions"===n?d=i||h:(d=u,i=d),a){if(p)for(var f in p)null!==p[f]&&(t[f]=p[f]);else t.pageType=h;if("page"===n&&m)for(var g in m)null!==m[g]&&m.hasOwnProperty(m[g])&&(t[g]=m[g])}return s(o,"pageUrl")&&(t.pageUrl=o.pageUrl),t.pageContext=d,t}},u=function(t,e){var n,i,a=[],r=[],o=Object.keys(t),l={type:"section",timestamps:[e.pageLoadTime],index:0,children:[]};if(r.push(l),Array.isArray(t))a=t.slice(0,e.artistIndexCap);else if("object"==typeof t)for(var s=0;s<o.length;++s)a.push(t[o[s]]);for(var c=0;c<a.length;++c){n={},i=Object.keys(a[c]);for(var u=0;u<i.length;++u){var h=i[u];n[h]=a[c][h]}n.type="circle",n.kind=e.kind,n.timestamps=[e.pageLoadTime],n.index=c,n.parent=l,l.children.push(n)}return r},h=function(t){var e,n=s(t,"controller.model");return s(n,"data.genres")?e=u(n.data.genres,{pageLoadTime:s(n,"pageLoadTime"),kind:"genre"}):s(n,"data.artists")&&(e=u(n.data.artists,{artistIndexCap:s(n,"data.artistsDisplayIndexEnd")||0,pageLoadTime:s(n,"pageLoadTime"),kind:"artist"})),e},d=function(t,e){var n=function(){var e=s(t,"controller.model");e&&(e.pageLoadTime=Date.now())},i=function(n){var i=s(n,"target.tagName");"physicalCirclesTemplate"===i?o.publish("impressions",{doc:t,impressions:h(t)}):i&&i.search(/template/i)>=0&&o.publish("impressions",{doc:t,impressions:e.recordedImpressions()})};s(t,"el.addEventListener")&&(t.el.addEventListener("appear",n),t.el.addEventListener("disappear",i))},p=function(t){var e=function(e){var n=s(t,"controllers")[0]||s(t,"controller"),i=s(n,"model.data.offersById"),a=e.target.getAttribute("data-content-index"),r=i&&i[a]&&i[a].buyParams,l=t.el.snapshotImpressions();l=l.length?l:h(t),o.publish("click",{doc:t,impressions:l,element:e.target,details:{buyParams:r}})}.bind(this);t.el.addEventListener("select",e)},m=function(t,e){var n=s(t,"controllers")&&t.controllers[0]&&t.controllers[0].model||s(t,"controller.model"),i=function(i){var a,r=s(i,"type"),l=s(n,"data")||s(n,"viewModel"),c=s(n,"xhrMetrics"),u=s(i,"target.tagName");"appear"===r?(a=u&&u.search(/template/i)>=0&&(n.dataLoaded||l&&Object.keys(l)&&Object.keys(l).length),n.metricsPageAppeared=!0):"dataReady"===r&&(a=n.metricsPageAppeared&&getActiveDocument()===t.el&&!n.dataLoaded,n.dataLoaded=!0),a&&o.publish("page",{doc:t,event:i,options:e,xhrMetrics:c})},a=function(t){n.xhrMetrics=t.detail.xhrMetrics};s(t,"el.addEventListener")&&s(n,"addEventListener")&&(t.el.addEventListener("appear",i),n.addEventListener("xhrMetrics",a),n.addEventListener("dataReady",i))},f=function(){o.publish("account")},g=function(){o.publish("exit"),itms.flushUnreportedEvents()},b=function(t){var e=t&&t.detail&&t.detail.options||{};o.publish("enter",{type:"taskSwitch",refUrl:e.refUrl,refApp:e.refApp})},v=function(t,e){"loadingTemplate"!==s(t,"documentType")&&(p(t),m(t,e),d(t,t.el))},y=function(t,e){c.resources.launchData=e,a.init(c),t.addEventListener("suspend",g),t.addEventListener("resume",b),o.publish("enter",{type:"launch"})},w={init:y,addClickEvent:p,addImpressionsEvent:d,addPageEvent:m,track:v,recordAccountChange:f,recordExit:g,recordResume:b,metricsLibrary:a,configuration:c};e.exports=w},{"./bag":263,"./pub_sub":274,"fuse-metrics":283,itml:317,"metrics-base":352}],272:[function(t,e,n){var i=t("itml"),a=t("native-ios"),r=i.utils,o={itms:void 0};"undefined"!=typeof itms&&(o.itms=itms),r.extend(a,o),e.exports=a},{itml:317,"native-ios":358}],273:[function(t,e,n){var i=t("./bag"),a=t("./pub_sub"),r={isOnline:function(){return Object.keys(i()).length>0&&""!==itms.networkConnectionType},isOffline:function(){return 0===Object.keys(i()).length||""===itms.networkConnectionType},handleNetworkChange:function(){if(a.publish("networkChange"),""!==itms.networkConnectionType&&0===Object.keys(i()).length){if(a.publish("appRefresh"),modal.documents&&modal.documents.length>0)for(;modal.documents.length;)modal.popDocument();App.reload()}else if(""!==itms.networkConnectionType){var e=t("./loc");i(!0),e.update()}}};Device.onNetworkChange=function(){r.handleNetworkChange()},e.exports=r},{"./bag":263,"./loc":268,"./pub_sub":274}],274:[function(t,e,n){var i=t("itml").utils.PubSub;e.exports=new i},{itml:317}],275:[function(t,e,n){var i={build:function(t){t=t||{};var e=[],n="";if(Object.keys(t).length){for(var i in t)t[i]&&e.push(i+"="+t[i]);n="?"+e.join("&")}return n},parse:function(t){var e={},n=decodeURIComponent(t||""),i=n.indexOf("?")>-1?n.split("?")[1]:n,a=i.split("&");if(t&&""!==n.trim())for(var r=0;r<a.length;r++){var o=a[r].split("=");e[o[0]]=o[1]}return e}};e.exports=i},{}],276:[function(t,e,n){function i(t){t&&t.height&&t.width&&(l=t)}function a(){return"undefined"==typeof l&&i(Settings.Screen),l}function r(){var t=a();return t.width<=320?"xs":t.width<=375?"s":t.width<=414?"m":t.width<=768?"l":t.width>=1024?"xl":void 0}function o(){var t=a();return t.width>t.height?"landscape":"portrait"}var l=Settings.Screen;e.exports={getScreenDimensions:a,setScreenDimensions:i,sizeForScreenDimension:r,getCurrentOrientation:o}},{}],277:[function(t,e,n){function i(t){return t.length>0?t.charAt(0).toUpperCase()+t.slice(1):t}function a(t,e){for(var n="0123456789",i=e;i<t.length&&!(n.indexOf(t[i])<0);i++);return t.substring(e,i)}function r(t,e){if(!t&&!e)return 0;if(!t)return-1;if(!e)return 1;for(var n="0123456789",i=0,r=0;i<t.length||r<e.length;){var o=t[i],l=e[r];if(!l)return 1;if(!o)return-1;var s=n.indexOf(o)>=0,c=n.indexOf(l)>=0;if(s&&c){var u=a(t,i),h=a(e,r);if(parseInt(u,10)<parseInt(h,10))return-1;if(parseInt(u,10)>parseInt(h,10))return 1;i+=u.length,r+=h.length}else{if(l>o)return-1;if(o>l)return 1;i++,r++}}return 0}e.exports={capitalizeString:i,compareNumerically:r}},{}],278:[function(t,e,n){var i=function(t){if(t===TabBar.selectedTab.identifier)return TabBar.selectedTab;for(var e,n=0;n<TabBar.tabs.length;n++)if(e=TabBar.tabs[n],e.identifier===t)return e},a=function(t){if(t===TabBar.selectedTab.identifier)return TabBar.selectedTab;var e=i(t);return e?(TabBar.selectedTab=e,e):void 0};e.exports={setSelectedTab:a,getTab:i}},{}],279:[function(t,e,n){var i=t("./string"),a=t("./bag"),r=t("./loc"),o=t("./logger"),l=t("./artwork"),s=t("./screen"),c=t("./color"),u=t("fuse-metrics").util,h="rgb(217,217,217)",d=function(t,e){e="object"!=typeof e?e:null;var n="",i="rgb";if(!t)return n;var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),r=a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:null;return e&&(r.push(e),i="rgba"),r&&(n=i+"("+r.join(",")+")"),n},p=function(t,e,n){var i;return e&&"object"!=typeof e?e+="":e="1.0",i=n?t?e?"rgba(0,0,0,"+e+")":"rgb(0,0,0)":e?"rgba(255,255,255,"+e+")":"rgb(255,255,255)":t?e?"rgba(255,255,255,"+e+")":"rgb(255,255,255)":e?"rgba(0,0,0,"+e+")":"rgb(0,0,0)"},m=function(t){var e;if(t.length){var n,i,a=t.length||0;for(e=0;a>e;e++)if(i=t[e].artwork,i&&i.bgColor){n=i;break}return n||o.warn("No color object in array: ",t),n}},f=function(t,e){var n,i=new c(t),a=i.lighten(e);return a&&(n="rgb("+a.rgb.r+","+a.rgb.g+","+a.rgb.b+")"),n},g=function(t){var e=new c(t),n=e.isDark();return n},b=function(t,e){var n=new RegExp(/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g);return t.replace(n,function(t){return'<button data-url="'+t+'" class="open-url tint-color" style="color:'+p(e)+'">'+t+"</button>"})},v=function(t,e){var n=t.split("{")[1].split("}")[0].replace(/&quot;/g,"").split(":")||[];return n.length&&(t='<button class="view-mention tint-color" style="color:'+p(e)+'" data-mention-type="'+n[0]+'" data-content-id="'+n[1]+'">'+n[2]+"</button>"),t},y=function(t){var e=t.split("{")[1].split("}")[0].replace(/&quot;/g,"").split(":")||[];return e.length&&(t="@"+e[2]),t},w=function(t,e){return t.replace(/@{(.*?)}/g,function(t){return v(t,e)})},k=function(t){return t.replace(/@{(.*?)}/g,function(t){return y(t)})},x=function(t){var e=[];switch(t){case"iTunesBrand":e.push("artist-art");break;case"artist":e.push("light-art"),e.push("artist-artwork");break;case"caption":e.push("no-light-art");break;default:e.push("light-art")}return e},A=function(t,e){if(t.image||t.logo){var n=e&&e.type?e.type:null,i=e&&e.className?e.className:null,a=e&&e.playlistId?e.playlistId:t.id,r=[],o=t.logo||t.image,l=o.bgColor?d(o.bgColor):h,s=i?i:t.kind,c=o.width,u=o.height;return r.push(a?'<img data-content-id="'+a+'" style="itml-img-placeholder-background-color:'+l+';" class="play-button '+x(s)+'" width="'+c+'" height="'+u+'" srcset="'+o.url+" "+o.dpr+'">':'<img style="itml-img-placeholder-background-color:'+l+';" class="'+x(s)+'" width="'+c+'" height="'+u+'" srcset="'+o.url+" "+o.dpr+'">'),r.push("play"===n&&"artist"!==s?'<button class="play-button cover-button" data-content-id="'+a+'" type="play"/>':'<button show-on-demand="true" class="play-button cover-button" data-content-id="'+a+'" type="play"/>'),r.push("</img>"),r.join("")}};e.exports=function(t){t.registerHelper("data-metrics",function(e){var n=this.artist||this,i=a(),r=u.getFieldMappedData(n,i,"impressions"),o=u.getFieldMappedData(n,i,"single");return"string"==typeof e&&(r.type=e),r=JSON.stringify(r),r=t.Utils.escapeExpression(r),o=JSON.stringify(o),o=t.Utils.escapeExpression(o),new t.SafeString("data-metrics='"+r+"' click-metrics='"+o+"'")}),t.registerHelper("capitalize",function(t){return t&&"string"==typeof str?i.capitalizeString(t):t}),t.registerHelper("toUpperCase",function(t){return t&&"string"==typeof t?t.toUpperCase():t}),t.registerHelper("encode",function(t){return encodeURIComponent(t)}),t.registerHelper("debug",function(t){o.log("HB DEBUG: ",t)}),t.registerHelper("equal",function(t,e,n){return t!=e?n.inverse(this):n.fn(this)}),t.registerHelper("increment",function(t){return parseInt(t,10)+1}),t.registerHelper("first",function(t){return t[0]}),t.registerHelper("multiply",function(t,e){return t*e}),t.registerHelper("getYearFromDate",function(t){return t=t||"",t.split("-")[0]}),t.registerHelper("getGenreName",function(t){var e=t.length>0?t[0].name+"  ":"";return e}),t.registerHelper("shouldDisable",function(t){return t.kind&&t.kind.match(/album|playlist|artist|brand|activity/g)?"false":t.isExplicit&&!Settings.Restrictions.allowsExplicit?"true":"false"}),t.registerHelper("arrayPrettify",function(t,e){var n,i=e.count?e.count:2,a="",r=e.append?e.append:", & more";for(n=0;i>n;n++)a+=t[n],n!==i-1&&(a+=", ");return a+=r}),t.registerHelper("numberWithCommas",function(t){return t=t||0,t.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}),t.registerHelper("hexToRgb",function(t,e){return d(t,e)}),t.registerHelper("getHighContrastColor",function(t,e){return p(t,e)}),t.registerHelper("getColorGridStyle",function(t){var e,n,i,a,r="top",o="rgb(255,255,255)",l="",s=m(t),c=s&&s.bgColor?s.bgColor:l;return c&&(a=g(c)),n=a?d(c,"0.15"):d(c,"0.65"),i=d(c,"0"),e="background-color: linear-gradient("+r+", "+o+", "+n+", "+i+");"}),t.registerHelper("heroArtwork",function(e){var n=[],i=h,a=e.cardColor?d(e.cardColor.bgColor):i,r=4,o=e.artworkTracks;if(e.hero)n.push("<background>"),n.push('<img class="gradient" style="background-color:'+d(e.hero.bgColor)+'" width="'+e.hero.width+'" height="'+e.hero.height+'" srcset="'+e.hero.url+" "+e.hero.dpr+'" />'),n.push("</background>");else if(e.cover)n.push("<background>"),n.push('<img class="gradient" style="background-color:'+d(e.cover.bgColor)+'" width="'+e.cover.width+'" height="'+e.cover.height+'" srcset="'+e.cover.url+" "+e.cover.dpr+'" />'),n.push("</background>");else if(o){var s=Object.keys(o).length>0,c=0,u=e.artworkTrackIds,p=u.length,m=0;if(s&&p>0){for(n.push("<background></background><imageDeck>");r>c;){var f=o[u[m]];if(f){var g=l.getArtworkForContent({content:f,params:{type:"heroChild"}});n.push('<img style="itml-img-placeholder-background-color: '+a+';" class="light-art 4up-grid" width="'+g.image.width+'" height="'+g.image.height+'" srcset="'+g.image.url+" "+g.image.dpr+'" />'),c++}m++,m===p&&(m=0)}n.push("</imageDeck>")}}var b=n.join("");return new t.SafeString(b)}),t.registerHelper("topChartsGetFirstBgColor",function(t,e){var n,i,a,r=m(t),o=r&&r.bgColor?r.bgColor:null;if(o){var l=new c(o),s=l.getDarknessRange();switch(s){case"dark":i="0.8",a="0.8";break;case"mediumdark":i="0.8",a="0.9";break;case"mediumlight":i="0.8",a="0.9";break;case"light":i="0.9",a="0.9";break;default:i="",a=""}return n=r?e?f(r.bgColor,i):"transparent":""}}),t.registerHelper("getFirstBgColor",function(t,e){var n,i=m(t);return n=i?e?f(i.bgColor,e):d(i.bgColor):""}),t.registerHelper("productArtwork",function(e,n,i){var a,r={};if(n&&(r.type=n),i&&(r.className=i),e.artworkTracks&&e.artworkTrackIds){var o,l,s=[],c=0,u=Object.keys(e.artworkTracks).length>0,h=e.artworkTrackIds,d=h.length,p=0,m=4;if(u&&d>0){for(r.className=r.className+" img-fill",e.image&&(o=e.image.width,l=e.image.height),s.push('<imageGrid width="'+o+'" height="'+l+'" class="four-up-grid">');m>c;){var f=e.artworkTracks[h[p]];f&&("play"===n&&c===m-1?(r.playlistId=e.id,r.type=n,s.push(A(f,r))):(r.type="",s.push(A(f,r))),c++),p++,p===d&&(p=0)}s.push("</imageGrid>"),a=s.join("")}}else a=A(e,r);return new t.SafeString(a)}),t.registerHelper("getColumnClass",function(){var t,e=s.sizeForScreenDimension();switch(e){case"xl":t="edge-6col-grid";break;case"l":t="edge-5col-grid";break;default:t="edge-3col-grid"}return t}),t.registerHelper("getLikeImageByLikesData",function(e,n){var i=e&&e[n]?"resource://LoveHateControlLoved":"resource://LoveHateControlNeutral";return new t.SafeString(i)}),t.registerHelper("formatUrls",function(e,n){var i=t.Utils.escapeExpression(e);return new t.SafeString(b(i,n))}),t.registerHelper("formatMentionsAndUrls",function(e,n){var i=t.Utils.escapeExpression(e),a=b(w(i,n),n);return a}),t.registerHelper("formatPlainTextMentions",function(e){var n=t.Utils.escapeExpression(e),i=k(n);return new t.SafeString(i)}),t.registerHelper("loc",function(t){return r.loc(t)}),t.registerHelper("classesForKind",function(e){var n=x(e);return new t.SafeString(n.join(" "))}),t.registerHelper("margin",function(t){var e=t?t:"1pt",n='<divider style="itml-divider-type:borderless;itml-item-height:'+e+';"/>';return n}),t.registerHelper("escapeText",function(t){return t&&""!==t&&(t=t.replace("&amp;","&"),t=t.replace("&","&amp; ")),t}),t.registerHelper("selectorLockupItem",function(t,e){var n,i=[],a=t.label?t.label:t.name;a=a.replace(/&/g,"&amp;");var r=encodeURI(t.url)||"";r=r.replace(/&/g,"&amp;"),e=e.replace(/&/g,"&amp;");var o=a===e?!0:!1;return i.push('<lockup class="filter-lockup" data-link-url="'+r+'" label="'+a+'">'),i.push('<title class="filter-title'),o&&i.push(" filter-selected"),i.push('">'+a+"</title>"),o&&i.push('<decorationImage src="resource://checkmark"/>'),i.push("</lockup>"),n=i.join("")})}},{"./artwork":261,"./bag":263,"./color":264,"./loc":268,"./logger":270,"./screen":276,"./string":277,"fuse-metrics":283}],280:[function(t,e,n){var i={loading:t("../app/common/partials/loading.hbs"),recommendation:t("../app/common/partials/recommendation.hbs"),errorMessage:t("../app/common/partials/error_message.hbs"),commonStates:t("../app/common/partials/common_states.hbs"),noContent:t("../app/common/partials/no_content.hbs"),listLockup:t("../app/common/partials/list_lockup.hbs"),shelfLockup:t("../app/common/partials/shelf_lockup.hbs")};e.exports=function(t){for(var e in i)i[e]&&t.registerPartial(e,i[e])}},{"../app/common/partials/common_states.hbs":82,"../app/common/partials/error_message.hbs":83,"../app/common/partials/list_lockup.hbs":84,"../app/common/partials/loading.hbs":85,"../app/common/partials/no_content.hbs":86,"../app/common/partials/recommendation.hbs":87,"../app/common/partials/shelf_lockup.hbs":88}],281:[function(t,e,n){var i=t("./query_string"),a=t("./bag"),r={common:function(){return a().musicCommon||{}},subscription:function(){return a().musicSubscription||{}},connect:function(){return a().musicConnect||{}},radioTab:function(){return a().radioTab||{}},album:function(){return a().viewAlbum},artist:function(){return a().viewArtist},affiliateCookie:function(){return a().affiliateCookie},getSubscriptionOffersSrv:function(){return a().getSubscriptionOffersSrv},updateTastePreference:function(){return this.subscription().updateTastePreference},tastePreferenceLabels:function(){return this.subscription().tastePreferenceLabels},tastePreferenceArtists:function(){return this.subscription().tastePreferenceArtists},profile:function(){return this.common().profile},profilePermissions:function(){return this.connect().profilePermissions},likesData:function(){return this.connect().likesData},justForYou:function(){return this.subscription().justForYou},browse:function(){return this.subscription().browse},radio:function(){return this.radioTab().grouping},radioFeatured:function(){return this.radioTab().featured},comment:function(){return this.connect().comment},comments:function(){return this.connect().comments},deleteComment:function(){return this.connect().deleteComment},fuseSendSmsCode:function(){return a().fuseSendSmsCode},fuseVerifySmsCode:function(){return a().fuseVerifySmsCode},follow:function(){return this.connect().follow},unfollow:function(){return this.connect().unfollow},like:function(){return this.connect().like},unlike:function(){return this.connect().unlike},activityFeed:function(){return this.connect().activityFeed},carrierLinkSrv:function(){return a().carrierLinkSrv},deleteSocialPost:function(){return this.connect().deleteSocialPost},modifyAccount:function(){return a().modifyAccount},signup:function(){return a().signup},brand:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewBrand"},activity:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewActivity"},followerCount:function(){return this.connect().followerCount},migration:function(){return"https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/beatsMigrationStatusSrv"},loc:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/appLoc"},grouping:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewGrouping"},search:function(){return a().search},trendingSearches:function(){return"https://search.itunes.apple.com/WebObjects/MZSearchHints.woa/wa/trends"},iforgot:function(){return"https://iforgot.apple.com"},post:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSocialActivity"},playlist:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewPlaylist"},build:function(t,e){var n=this[t].call(this);if(n){var a=e;if(n.indexOf("?")>-1){var r=i.parse(n);for(var o in r)r.hasOwnProperty(o)&&(a[o]=r[o]);var l=n.slice(n.indexOf("?"),n.length);n=n.replace(l,"")}return n+=i.build(a)}}};e.exports=r},{"./bag":263,"./query_string":275}],282:[function(t,e,n){var i=t("./network"),a=function(t){var e,n=this,a=itms.makeStoreXMLHttpRequest(),r=new Date;if(!t.url||i.isOffline()){var o=i.isOnline()?400:418;return void t.failure.apply(n,[o,"cannot supply a null URL"])}a.timeout=3e4,a.onreadystatechange=function(){4===a.readyState&&200===a.status?"function"==typeof t.success&&t.success.apply(n,[a.response,a.metrics]):4===a.readyState&&"function"==typeof t.failure&&t.failure.apply(n,[a.status,a.response])},a.open(t.method,t.url,!0),
a.setRequestHeader("X-Time-Zone-Offset",r.getTimezoneOffset()),t.headers&&Object.keys(t.headers).forEach(function(e){a.setRequestHeader(e,t.headers[e])}),t.data&&(e=JSON.stringify(t.data)),t.params&&(e=t.params),a.send(e)};e.exports=a},{"./network":273}],283:[function(t,e,n){var i=t("./lib/event_base"),a=t("./lib/events"),r=t("./lib/events/util");e.exports={createEventBase:i,eventFields:a,util:r}},{"./lib/event_base":286,"./lib/events":288,"./lib/events/util":290}],284:[function(t,e,n){var i="	\n\f\r \u2028\u2029",a=new RegExp("^["+i+"]+"),r=new RegExp("["+i+"]+$"),o=function(t){var e=null;return e=t.trim?t.trim():t.replace(a,"").replace(r,"")},l=function(t,e){var n,i,a,r,l,s=null,c=e&&e.cookie;if(c&&t){n=c.split(";");for(var u=n.length-1;!s&&u>=0;u--)r=n[u],l=r.indexOf("="),l>0&&(i=o(r.substring(0,l)),a=r,i===t&&(('"'===a[0]||'"'===a[a.length-1])&&(a=a.substring(1,a.length-1)),s=o(a.substring(l+1))))}return s},s=function(t,e){var n=l(t,e);return n&&(n=unescape(n)),n};e.exports={get:s,getUnescaped:l}},{}],285:[function(t,e,n){var i=function(t){for(var e="ab:",n="string"==typeof t?t.split(" "):[],i=0;i<n.length;++i)if(0===n[i].search(e))return n[i].slice(e.length)};e.exports={getExperimentId:i}},{}],286:[function(t,e,n){var i,a=t("utils").keypath,r=t("./cookies"),o=t("./experimentid"),l=t("../events/util"),s=function(t){var e=t&&"function"==typeof t.bag&&t.bag()||{},n=t&&t.itms||{},s=t&&t.Device||{},c=t&&t.UpdatableAssets||{currentManifestVersion:function(){return void 0}},u=t&&t.TabBar||{selectedTab:{}},h=a(s,"prototype.capacity")||function(){return void 0},d=a(t,"Settings.Screen")||{},p=a(n,"accountInfo.DSID")||void 0,m=n.eligibilityForService&&n.eligibilityForService();m=a(m,"accountStatus");var f=n.storeFront,g=o.getExperimentId(f);if(i={clientId:r.get("xp_ci",n),baseVersion:1,dsId:p,eventTime:Date.now(),timezoneOffset:(new Date).getTimezoneOffset(),userAgent:n.userAgent,app:s.appIdentifier,pixelRatio:s.pixelRatio,screenHeight:d.height,screenWidth:d.width,capacitySystem:h("totalSystemCapacity"),capacitySystemAvailable:h("totalSystemAvailable"),capacityDisk:h("totalDiskCapacity"),capacityData:h("totalDataCapacity"),capacityDataAvailable:h("totalDataAvailable"),isSignedIn:p?!0:!1,connection:n.networkConnectionType,resourceRevNum:c.currentManifestVersion(),osVersion:s.systemVersion,userType:m,pageContext:l.toUpperCamelCase(u.selectedTab.identifier),xpSendMethod:"itms",xpPostFrequency:a(e,"metrics.postFrequency"),storeFrontHeader:f,experimentId:g,appVersion:s.appVersion},e&&e.metrics){if(e.metrics.metricsBase)for(var b in e.metrics.metricsBase)i[b]=e.metrics.metricsBase[b];if(e.metrics.blacklistedFields)for(var v=0;v<e.metrics.blacklistedFields.length;v++)delete i[e.metrics.blacklistedFields[v]]}return i};e.exports=s},{"../events/util":290,"./cookies":284,"./experimentid":285,utils:292}],287:[function(t,e,n){var i=t("./util"),a=t("utils").keypath,r=function(){return{getLocation:function(t,e){for(var n,a,r,o,l,s,c,u=t,h=[];u;){if(a={},s=0,n=u.parentNode,u.hasAttribute&&u.hasAttribute("data-metrics")&&(c=JSON.parse(u.getAttribute("data-metrics")),a=i.getFieldMappedData(c,e,"location"),c.type)){if(a.locationType=c.type,n){r=n.childNodes;for(var d=0;d<r.length;d++)if(o=r.item(d),l=o.hasAttribute("data-metrics")?JSON.parse(o.getAttribute("data-metrics")).type:void 0){if(o===u)break;l===a.locationType&&s++}}a.locationPosition=s,h.push(a)}u=n}return h},getActionContext:function(t){var e,n,i,a;if(t){n={navigate:["link","brick-lockup","playlist","album","track","carousel","more-link","hero-lockup","action-lockup","next-button","done-button","continue-button"],play:["play-button","radio","listen-button","cover-button"],subscription:["subscribe-buy-button"],connect:["view-detail","connect-card","share-button","like-button","comment-button"],onboarding:["genre-bubble","artist-bubble","more-artists","reset-button"]},i=Object.keys(n),a=function(e){for(var n=0;n<t.length;++n)if(e.indexOf(t[n])>-1)return t[n]};for(var r=0;r<i.length;++r)if(e=a(n[i[r]]))return{context:i[r],elementClass:e}}return{}},getActionType:function(t,e){switch(t){case"navigate":return"more-link"===e?"more":"next-button"===e?"next":"done-button"===e?"done":"forward";case"play":return"play";case"subscription":return"buy";case"connect":return"view-detail"===e?"view-detail":"share-button"===e?"share":"like-button"===e?"like":"comment-button"===e?"comment":"select";case"onboarding":return"genre-bubble"===e?"adjust-genre":"artist-bubble"===e?"adjust-artist":"more-artists"===e?"more-artists":"reset-button"===e?"reset":"select"}},getActionContextAndType:function(t){var e=this.getActionContext(t),n=a(e,"context")||"select",i=this.getActionType(n,a(e,"elementClass"));return{context:n,type:i}}}};e.exports=r()},{"./util":290,utils:292}],288:[function(t,e,n){var i=t("utils").keypath,a=t("lager"),r=t("./click"),o=t("./page"),l=t("./util"),s={account:function(t){var e=i(t,"eventBase")||{},n=i(t,"resources.itms")||{},a=(n&&n.accountInfo||{}).DSID?"signedIn":"signedOut";return e.eventType="account",e.eventVersion=1,e.type=a,e},buyConfirmed:function(t){var e=i(t,"eventBase")||{},n=i(t,"buyInfo"),a=i(n,"options.pageInfo");i(n,"options.clientBuyId")&&!a&&(n.metrics.detoured=!0),i(n,"metrics")&&a&&(n.metrics.pageUrl=a.url);for(var r in i(n,"metrics"))e[r]=n.metrics[r];for(var o in i(a,"metricsBase"))e[o]=a.metricsBase[o];return e.eventType="buyConfirmed",e.eventVersion=1,e},click:function(t){var e,n=i(t,"eventBase")||{},a=i(t,"resources.bag")||{},o="function"==typeof a&&a(),s=t.element,c=s.getAttribute("class"),u=s.hasAttribute("click-metrics")?JSON.parse(s.getAttribute("click-metrics")):{};n.eventType="click",n.eventVersion=3,n.impressions=l.flattenImpressions(t.impressions,o),n.location=r.getLocation(s,o),n.targetType=s.hasAttribute("data-metrics")?JSON.parse(s.getAttribute("data-metrics")).type:s.tagName;for(var h in u)n[h]=u[h];return c&&c.length>0&&(e=r.getActionContextAndType(c.split(" ")),n.actionContext=i(e,"context"),n.actionType=i(e,"type")),s.hasAttribute("data-link-url")&&(n.actionUrl=s.getAttribute("data-link-url")),t.details&&(n.actionDetails=t.details),n},enter:function(t){var e=i(t,"eventBase")||{};return e.eventType="enter",e.eventVersion=1,t?(e.refApp=t.refApp,e.refUrl=t.refUrl,"launch"===t.type?e.type="launch":"taskSwitch"===t.type&&(e.type=t.refApp||t.refUrl?"link":t.type)):a.warn("Fuse-Metrics: No event data provided to to enter"),e},exit:function(t){var e=i(t,"eventBase")||{};return e.eventType="exit",e.eventVersion=1,e.destinationUrl=void 0,e.type=void 0,e},impressions:function(t){var e,n=i(t,"eventBase")||{},a=i(t,"resources.bag")||{},r="function"==typeof a&&a();return t&&r&&(e=l.flattenImpressions(t.impressions,r)),n.eventType="impressions",n.eventVersion=3,n.impressions=e,n},media:function(){return{eventType:"media",eventVersion:1,type:void 0}},page:function(t){var e=i(t,"resources.bag")||{},n="function"==typeof e&&e(),a=i(t,"eventBase")||{},r=i(t,"resources.launchParams")||{},l=i(t,"options.pageDetails"),s=i(t,"xhrMetrics");return a.eventType="page",a.eventVersion=1,a.pageLoadTime=Date.now(),a.page=a.pageType,a.pageId&&(a.page+=(i(n,"metrics.compoundSeparator")||"")+a.pageId),i(r,"hostApp")&&(a.hostApp=r.hostApp),i(r,"refApp")&&(a.refApp=r.refApp),i(r,"refUrl")&&(a.extRefUrl=r.refUrl),s&&(a.requestStartTime=i(s,"requestStartTime"),a.responseEndTime=i(s,"responseEndTime"),a.responseStartTime=i(s,"responseStartTime")),l&&(a.pageDetails=l),i(t,"searchTerm")&&(a.searchTerm=t.searchTerm),a.page&&(a.pageHistory=o.getPageHistory(a.page)),a},search:function(t){var e=i(t,"eventBase")||{},n=i(t,"event"),a=i(t,"resources.bag")?t.resources.bag():void 0,o=i(t,"type");return e.eventType="search",e.eventVersion=2,e.term=i(n,"term")||i(t,"term"),e.location=r.getLocation(i(t,"element"),a),e.actionUrl=i(n,"url")||i(t,"url"),o&&(e.actionType=o),i(n,"searchHintOriginalTerm")&&(e.actionType="hint",e.actionDetails=n.searchHintOriginalTerm,e.location=[{locationPosition:n.searchHintIndex,locationType:"listItem"},{locationPosition:0,locationType:"hintList"}],e.targetType="listItem",e.targetId=n.searchHintIndex),e}};e.exports=s},{"./click":287,"./page":289,"./util":290,lager:291,utils:292}],289:[function(t,e,n){var i=t("lager"),a=(t("utils").keypath,[]),r=function(t){var e=a.slice(0);return"string"==typeof t?(a.length>=5&&a.shift(),a.push(t)):i.warn("fuse-metrics: getPageHistory was not provided a string input"),e};e.exports={getPageHistory:r}},{lager:291,utils:292}],290:[function(t,e,n){var i=t("utils").keypath,a=t("lager"),r=function(t,e,n){var r,o,l={};if(t)if(r=i(e,"metrics.fieldsMap")||{},o="single"===n?"single":"custom."+n,r=i(r,o)){for(var s in r)for(var c=0;c<r[s].length;c++)if(t[r[s][c]]){l[s]=t[r[s][c]];break}}else a.warn("Fuse-Metrics: unable to get fieldsMap from bag");else a.warn("Fuse-Metrics: No data provided to to getFieldMappedData");return l},o=function(t,e){var n="its",a="",r=t.indexOf("."),o=i(e,"metrics.compoundSeparator")||a,l=-1!==r?t.substring(0,r):n;return l+o+"id"},l=function(t,e){var n=i(e,"metrics.impressions.viewableThreshold")||1e3;return Array.isArray(t)?t.filter(function(t,e,n){return 0===e||t-n[e-1]>=this},n):(a.warn("Fuse-Metrics: filterImpressionTimestamps did not receive an array"),[])},s=function(t){if(t&&t[0]&&void 0!==t[0].index){for(var e,n={},i=[],a=0;a<t.length;++a)e=t[a].index,n[e]||(n[e]=!0,i.push(t[a]));return i}return t},c=function(t,e,n){var u,h,d,p,m=[],f=n||1;if(t){t=s(t);for(var g=0;g<t.length;g++)u=t[g],h="string"==typeof u.data?JSON.parse(u.data):u,p=i(h,"type"),h=r(h,e,"impressions"),h.impressionTimes=l(u.timestamps,e),h.impressionIndex=u.index,h.impressionType=p,h.id&&(h.idType=o(h.id.toString(),e)),u.parent&&void 0!==u.parent.impressionId&&(h.impressionParentId=u.parent.impressionId),h.impressionId=f,u.impressionId=f,++f,m.push(h),i(u,"children.length")>0&&(d=c(u.children,e,f),m=m.concat(d),f+=d.length)}else a.warn("Fuse-Metrics: No impressions provided to to flattenImpressions");return m},u=function(t){var e,n="";if(t){e=t.toLowerCase().split("_");for(var i=0;i<e.length;i++)n+=e[i][0].toUpperCase()+e[i].slice(1)+""}else a.warn("Fuse-Metrics: No source provided to to UpperCamelCase");return n};e.exports={flattenImpressions:c,getFieldMappedData:r,toUpperCamelCase:u}},{lager:291,utils:292}],291:[function(t,e,n){e.exports=function(){function t(){for(var t,i=1;i<o.length;i++)t=o[i],r[t]=r.level>=i?c.enabled?n(t):e(t):function(){return!1},r.log=r.info}function e(t){return console[t]?Function.prototype.bind.call(console[t],console):Function.prototype.bind.call(console.log,console)}function n(t){var n=Error;return n.prototype.log=function(){var n=e(t),i=this.stack.split("\n",19).splice(c.offset,c.lines);n.apply(console,arguments);for(var a=0;a<i.length;a++){var r=i[a];console.log(r)}},Function.prototype.bind.call(n().log,n())}function i(e){var n=r.level;"string"==typeof e&&l.hasOwnProperty(e)?(e.toLowerCase(),s=l[e]):"number"==typeof e&&e>=0&&4>=e&&(s=e),s!==n&&t()}function a(e){if((e===!0||e===!1)&&(c.enabled=e),"object"==typeof e){e=e||{};for(var n in e)c[n]=e[n]}t()}var r=Object.create(Object.prototype),o=["silent","error","warn","info","debug"],l={silent:0,error:1,warn:2,info:3,debug:4},s=0,c={enabled:!1,lines:1,offset:0};return Object.defineProperties(r,{level:{set:i,get:function(){return s}},trace:{set:a,get:function(){return c.enabled}}}),r.setDefaults=function(){s=3,t()},r.silent=function(){s=0,t()},r.setDefaults(),r}()},{}],292:[function(t,e,n){function i(t,e){var n;if("undefined"==typeof t)return t;for(n in e)t[n]=e[n];return t}function a(t){return i({},t)}function r(t,e,n){n?i(t.prototype,e.prototype):t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writeable:!0,configurable:!0}})}function o(t,e){if(!e)return t;for(var n=e.split("."),i=t,a=0,r=n.length;r>a&&"undefined"!=typeof i;a++)i=i[n[a]];return i}function l(t){setTimeout(t,1)}e.exports={clone:a,extend:i,inherit:r,keypath:o,nextTick:l}},{}],293:[function(t,e,n){"use strict";var i=t("./handlebars/base"),a=t("./handlebars/safe-string")["default"],r=t("./handlebars/exception")["default"],o=t("./handlebars/utils"),l=t("./handlebars/runtime"),s=function(){var t=new i.HandlebarsEnvironment;return o.extend(t,i),t.SafeString=a,t.Exception=r,t.Utils=o,t.escapeExpression=o.escapeExpression,t.VM=l,t.template=function(e){return l.template(e,t)},t},c=s();c.create=s,c["default"]=c,n["default"]=c},{"./handlebars/base":294,"./handlebars/exception":295,"./handlebars/runtime":296,"./handlebars/safe-string":297,"./handlebars/utils":298}],294:[function(t,e,n){"use strict";function i(t,e){this.helpers=t||{},this.partials=e||{},a(this)}function a(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse,a=n.fn;if(e===!0)return a(this);if(e===!1||null==e)return i(this);if(u(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var o=g(n.data);o.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:o}}return a(e,n)}),t.registerHelper("each",function(t,e){if(!e)throw new o("Must pass iterator to #each");var n,i,a=e.fn,l=e.inverse,s=0,c="";if(e.data&&e.ids&&(i=r.appendContextPath(e.data.contextPath,e.ids[0])+"."),h(t)&&(t=t.call(this)),e.data&&(n=g(e.data)),t&&"object"==typeof t)if(u(t))for(var d=t.length;d>s;s++)n&&(n.index=s,n.first=0===s,n.last=s===t.length-1,i&&(n.contextPath=i+s)),c+=a(t[s],{data:n});else for(var p in t)t.hasOwnProperty(p)&&(n&&(n.key=p,n.index=s,n.first=0===s,i&&(n.contextPath=i+p)),c+=a(t[p],{data:n}),s++);return 0===s&&(c=l(this)),c}),t.registerHelper("if",function(t,e){return h(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){h(t)&&(t=t.call(this));var n=e.fn;if(r.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var i=g(e.data);i.contextPath=r.appendContextPath(e.data.contextPath,e.ids[0]),e={data:i}}return n(t,e)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}var r=t("./utils"),o=t("./exception")["default"],l="2.0.0";n.VERSION=l;var s=6;n.COMPILER_REVISION=s;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=c;var u=r.isArray,h=r.isFunction,d=r.toString,p="[object Object]";n.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:m,log:f,registerHelper:function(t,e){if(d.call(t)===p){if(e)throw new o("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){d.call(t)===p?r.extend(this.partials,t):this.partials[t]=e},unregisterPartial:function(t){delete this.partials[t]}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(m.level<=t){var n=m.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};n.logger=m;var f=m.log;n.log=f;var g=function(t){var e=r.extend({},t);return e._parent=t,e};n.createFrame=g},{"./exception":295,"./utils":298}],295:[function(t,e,n){"use strict";function i(t,e){var n;e&&e.firstLine&&(n=e.firstLine,t+=" - "+n+":"+e.firstColumn);for(var i=Error.prototype.constructor.call(this,t),r=0;r<a.length;r++)this[a[r]]=i[a[r]];n&&(this.lineNumber=n,this.column=e.firstColumn)}var a=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,n["default"]=i},{}],296:[function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=h;if(e!==n){if(n>e){var i=d[n],a=d[e];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+a+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function a(t,e){if(!e)throw new u("No environment passed to template");if(!t||!t.main)throw new u("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var n=function(n,i,a,r,o,l,s,h,d){o&&(r=c.extend({},r,o));var p=e.VM.invokePartial.call(this,n,a,r,l,s,h,d);if(null==p&&e.compile){var m={helpers:l,partials:s,data:h,depths:d};s[a]=e.compile(n,{data:void 0!==h,compat:t.compat},e),p=s[a](r,m)}if(null!=p){if(i){for(var f=p.split("\n"),g=0,b=f.length;b>g&&(f[g]||g+1!==b);g++)f[g]=i+f[g];p=f.join("\n")}return p}throw new u("The partial "+a+" could not be compiled when running in runtime-only mode")},i={lookup:function(t,e){for(var n=t.length,i=0;n>i;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:c.escapeExpression,invokePartial:n,fn:function(e){return t[e]},programs:[],program:function(t,e,n){var i=this.programs[t],a=this.fn(t);return e||n?i=r(this,t,a,e,n):i||(i=this.programs[t]=r(this,t,a)),i},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=c.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler},a=function(e,n){n=n||{};var r=n.data;a._setup(n),!n.partial&&t.useData&&(r=s(e,r));var o;return t.useDepths&&(o=n.depths?[e].concat(n.depths):[e]),t.main.call(i,e,i.helpers,i.partials,r,o)};return a.isTop=!0,a._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,e.helpers),t.usePartial&&(i.partials=i.merge(n.partials,e.partials)))},a._child=function(e,n,a){if(t.useDepths&&!a)throw new u("must pass parent depths");return r(i,e,t[e],n,a)},a}function r(t,e,n,i,a){var r=function(e,r){return r=r||{},n.call(t,e,t.helpers,t.partials,r.data||i,a&&[e].concat(a))};return r.program=e,r.depth=a?a.length:0,r}function o(t,e,n,i,a,r,o){var l={partial:!0,helpers:i,partials:a,data:r,depths:o};if(void 0===t)throw new u("The partial "+e+" could not be found");return t instanceof Function?t(n,l):void 0}function l(){return""}function s(t,e){return e&&"root"in e||(e=e?p(e):{},e.root=t),e}var c=t("./utils"),u=t("./exception")["default"],h=t("./base").COMPILER_REVISION,d=t("./base").REVISION_CHANGES,p=t("./base").createFrame;n.checkRevision=i,n.template=a,n.program=r,n.invokePartial=o,n.noop=l},{"./base":294,"./exception":295,"./utils":298}],297:[function(t,e,n){"use strict";function i(t){this.string=t}i.prototype.toString=function(){return""+this.string},n["default"]=i},{}],298:[function(t,e,n){"use strict";function i(t){return c[t]}function a(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function r(t){return t instanceof s?t.toString():null==t?"":t?(t=""+t,h.test(t)?t.replace(u,i):t):t+""}function o(t){return t||0===t?m(t)&&0===t.length?!0:!1:!0}function l(t,e){return(t?t+".":"")+e}var s=t("./safe-string")["default"],c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,h=/[&<>"'`]/;n.extend=a;var d=Object.prototype.toString;n.toString=d;var p=function(t){return"function"==typeof t};p(/x/)&&(p=function(t){return"function"==typeof t&&"[object Function]"===d.call(t)});var p;n.isFunction=p;var m=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===d.call(t):!1};n.isArray=m,n.escapeExpression=r,n.isEmpty=o,n.appendContextPath=l},{"./safe-string":297}],299:[function(t,e,n){e.exports=t("./dist/cjs/handlebars.runtime")},{"./dist/cjs/handlebars.runtime":293}],300:[function(t,e,n){e.exports=t("handlebars/runtime")["default"]},{"handlebars/runtime":299}],301:[function(t,e,n){function i(t,e){this.dispatchEvent(new o(t,{detail:{options:e}}))}function a(t,e,n){i.call(this,"error",{msg:t,url:e,line:n})}var r=t("native"),o=t("dom-events").Event,l=t("./base"),s=t("../utils"),c=function(t,e){t=t||{},this.application=t.application||r.application,l.call(this,t,e),this.application.onLaunch=i.bind(this,"ready"),this.application.onExit=i.bind(this,"exit"),this.application.onSuspend=i.bind(this,"suspend"),this.application.onResume=i.bind(this,"resume"),this.application.onError=a.bind(this)};s.inherit(c,l),e.exports=c},{"../utils":328,"./base":302,"dom-events":332,"native":337}],302:[function(t,e,n){var i=t("dom-events").EventTarget,a=t("../utils"),r=function(){i.call(this)};a.inherit(r,i),e.exports=r},{"../utils":328,"dom-events":332}],303:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r='class="';return a=e.each.call(t,null!=(a=null!=t?t.self:t)?a.classes:a,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'"'},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=o(r(t,t));return a=e.unless.call(t,i&&i.last,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l},3:function(t,e,n,i){return" "},5:function(t,e,n,i,a){var r,o=e.helperMissing;return r=(e.ifValidAttribute||t&&t.ifValidAttribute||o).call(t,e.lookup.call(t,null!=a[1]?a[1].self:a[1],t,{name:"lookup",hash:{},data:i}),{name:"ifValidAttribute",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r?r:""},6:function(t,e,n,i,a){var r=this.lambda,o=this.escapeExpression;return" "+o(r(t,t))+'="'+o(e.lookup.call(t,null!=a[2]?a[2].self:a[2],t,{name:"lookup",hash:{},data:i}))+'" '},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o=this.lambda,l=this.escapeExpression,s="<head>\n</head>\n<"+l(o(null!=(r=null!=t?t.self:t)?r.documentType:r,t))+" ";return r=e["if"].call(t,null!=(r=null!=t?t.self:t)?r.classes:r,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+=" ",r=e.each.call(t,null!=(r=null!=t?t.self:t)?r.watchedAttributes:r,{name:"each",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+"></"+l(o(null!=(r=null!=t?t.self:t)?r.documentType:r,t))+">"},useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],304:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s='<?xml version="1.0" encoding="UTF-8"?>\n<document>\n';return r=null!=(r=e.content||(null!=t?t.content:t))?r:l,a=typeof r===o?r.call(t,{name:"content",hash:{},data:i}):r,null!=a&&(s+=a),s+"\n</document>"},useData:!0})},{"hbsfy/runtime":300}],305:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return"<title>"+l((a=null!=(a=e.name||(null!=t?t.name:t))?a:o,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+"</title>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.name:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":300}],306:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s=this.escapeExpression,c="    <"+s((r=null!=(r=e.providerType||(null!=t?t.providerType:t))?r:l,typeof r===o?r.call(t,{name:"providerType",hash:{},data:i}):r))+' id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"';return a=e["if"].call(t,null!=t?t.entityType:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(c+=a),a=e["if"].call(t,null!=t?t.prefetchedProperties:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=e["if"].call(t,null!=t?t.predicateList:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(c+=a),a=e["if"].call(t,null!=t?t.limitList:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"    </"+s((r=null!=(r=e.providerType||(null!=t?t.providerType:t))?r:l,typeof r===o?r.call(t,{name:"providerType",hash:{},data:i}):r))+">\n"},2:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return' entityType="'+l((a=null!=(a=e.entityType||(null!=t?t.entityType:t))?a:o,typeof a===r?a.call(t,{name:"entityType",hash:{},data:i}):a))+'"'},4:function(t,e,n,i){var a,r="function",o=e.helperMissing,l=this.escapeExpression;return' prefetchedProperties="'+l((a=null!=(a=e.prefetchedProperties||(null!=t?t.prefetchedProperties:t))?a:o,typeof a===r?a.call(t,{name:"prefetchedProperties",hash:{},data:i}):a))+'"'},6:function(t,e,n,i){var a,r="        <predicateList>\n";return a=e.each.call(t,null!=t?t.predicateList:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"        </predicateList>\n"},7:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <propertyPredicate property="'+r(a(null!=t?t.property:t,t))+'" value="'+r(a(null!=t?t.value:t,t))+'"/>\n'},9:function(t,e,n,i){var a,r="        <limitList>\n";return a=e.each.call(t,null!=t?t.limitList:t,{name:"each",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"        </limitList>\n"},10:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l="            <"+o(r(null!=t?t.limitType:t,t));return a=e["if"].call(t,null!=t?t.entityType:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+' value="'+o(r(null!=t?t.value:t,t))+'"/>\n'},11:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return' entityType="'+r(a(null!=t?t.entityType:t,t))+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e.each.call(t,null!=t?t.entityProviders:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":300}],307:[function(t,e,n){var i=t("../render"),a=t("../element"),r=t("../../utils"),o=t("parser"),l=t("dom-events").Event,s=t("../../mixins").ArrayPropertyFactory,c=new s(["controller"]),u=function(e,n){e=e||{},e.titleTemplate&&(this.titleTemplate=e.titleTemplate),e.documentType&&(this.documentType=e.documentType),this.name=e.name,this.suppressNavigationController=e.suppressNavigationController;var r=new a({elementType:"style",template:function(){return this.styles.map(function(t){return t.style}).join("\n")},styles:e.styles}),o=new a({elementType:"entityProviderList",template:t("./entity_provider.hbs"),entityProviders:e.entityProviders}),l=new a({elementType:"navigationBar",template:this.titleTemplate});l.name=this.name,this.stylesController=r,this.entityProviderListController=o,this.navigationBarController=l,c.createProperties(this),e.controllers&&e.controllers.forEach(function(t){this.addController(t),t.styles.forEach(function(t){this.stylesController.addStyle(t)},this),t.entityProviders.forEach(function(t){this.entityProviderListController.addEntityProvider(t)},this)},this),i.call(this,e,n),r.addEventListener("addStyle",function(){r.render()}),r.addEventListener("removeStyle",function(){r.render()}),o.addEventListener("addEntityProvider",function(){o.render()}),o.addEventListener("removeEntityProvider",function(){o.render()}),this.addEventListener("addController",function(t){var e=t.detail.controller;e.styles.forEach(function(t){this.stylesController.addStyle(t)},this),e.entityProviders.forEach(function(t){this.entityProviderListController.addEntityProvider(t)},this)}.bind(this)),this.addEventListener("removeController",function(t){var e=t.detail.controller;e.styles.forEach(function(t){this.stylesController.removeStyle(t)},this),e.entityProviders.forEach(function(t){this.entityProviderListController.removeEntityProvider(t)},this)}.bind(this)),this.addEventListener("addStyle",function(t){this.stylesController.addStyle(t.detail.style)}.bind(this)),this.addEventListener("removeStyle",function(t){this.stylesController.removeStyle(t.detail.style)}.bind(this)),this.addEventListener("addEntityProvider",function(t){this.entityProviderListController.addEntityProvider(t.detail.entityProvider)}.bind(this)),this.addEventListener("removeEntityProvider",function(t){this.entityProviderListController.removeEntityProvider(t.detail.entityProvider)}.bind(this))};r.inherit(u,i),c.mixin(u.prototype),u.prototype.delegateEvents=["load","unload","appear","disappear","update","didupdate"].concat(i.prototype.delegateEvents),u.prototype.tagTemplate=t("./document_tag.hbs"),u.prototype.titleTemplate=t("./document_title.hbs"),u.prototype.template=t("./document.hbs"),u.prototype.render=function(t){var e=o.parse(this.tagTemplate({content:this.template({self:this})}),this.el),n=this.el||e,i=e.documentElement||e,a=e.getElementsByTagName("head").item(0),r=e.getElementsByTagName(this.documentType).item(0);this.stylesController.render(n),this.entityProviderListController.render(n),this.navigationBarController.render(n),this.stylesController.insertInto(a),this.entityProviderListController.insertInto(a),this.suppressNavigationController||this.navigationBarController.insertInto(i,r),this.controllers.forEach(function(e){t&&e.render(n),e.insertInto(r)}),this.el?this.el.replaceChild(e,this.el.documentElement):this.el=e,this.dispatchEvent(new l("render"))},e.exports=u},{"../../mixins":319,"../../utils":328,"../element":308,"../render":314,"./document.hbs":303,"./document_tag.hbs":304,"./document_title.hbs":305,"./entity_provider.hbs":306,"dom-events":332,parser:338}],308:[function(t,e,n){var i=t("./render"),a=t("../utils"),r=a.parser,o=t("dom-events").Event,l=function(t,e){t=t||{},t.elementType&&(this.elementType=t.elementType),i.call(this,t,e)};a.inherit(l,i),l.prototype.render=function(t){!t&&this.el&&(t=this.el.ownerDocument);var e=r.parse(this.tagTemplate({self:this,content:this.template(this)}),t);this.el&&this.container&&this.container.replaceChild(e,this.el),this.el=t?e:e.documentElement,this.dispatchEvent(new o("render"))},l.prototype.insertInto=function(t,e){var n=this.el;t.ownerDocument!==n.ownerDocument&&(n=t.ownerDocument.adoptNode(n),this.el=n),t.insertBefore(this.el,e),this.container=t},e.exports=l},{"../utils":328,"./render":314,"dom-events":332}],309:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r='class="';return a=e.each.call(t,null!=(a=null!=t?t.self:t)?a.classes:a,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'"'},2:function(t,e,n,i){var a,r=this.lambda,o=this.escapeExpression,l=o(r(t,t));return a=e.unless.call(t,i&&i.last,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l},3:function(t,e,n,i){return" "},5:function(t,e,n,i,a){var r,o=e.helperMissing;return r=(e.ifValidAttribute||t&&t.ifValidAttribute||o).call(t,e.lookup.call(t,null!=a[1]?a[1].self:a[1],t,{name:"lookup",hash:{},data:i}),{name:"ifValidAttribute",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r?r:""},6:function(t,e,n,i,a){var r=this.lambda,o=this.escapeExpression;return" "+o(r(t,t))+'="'+o(e.lookup.call(t,null!=a[2]?a[2].self:a[2],t,{name:"lookup",hash:{},data:i}))+'" '},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,o,l=this.lambda,s=this.escapeExpression,c="function",u=e.helperMissing,h="<"+s(l(null!=(r=null!=t?t.self:t)?r.elementType:r,t))+" ";return r=e["if"].call(t,null!=(r=null!=t?t.self:t)?r.classes:r,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+=" ",r=e.each.call(t,null!=(r=null!=t?t.self:t)?r.watchedAttributes:r,{name:"each",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+=">",o=null!=(o=e.content||(null!=t?t.content:t))?o:u,r=typeof o===c?o.call(t,{name:"content",hash:{},data:i}):o,null!=r&&(h+=r),h+"</"+s(l(null!=(r=null!=t?t.self:t)?r.elementType:r,t))+">"},useData:!0,useDepths:!0})},{"hbsfy/runtime":300}],310:[function(t,e,n){
e.exports={BaseController:t("./base"),RenderableController:t("./render"),DocumentController:t("./document"),ElementController:t("./element"),MultiElementController:t("./multielement"),MenuBarController:t("./menu_bar"),Application:t("./application"),TabbedApplication:t("./tab_application")}},{"./application":301,"./base":302,"./document":307,"./element":308,"./menu_bar":311,"./multielement":313,"./render":314,"./tab_application":315}],311:[function(t,e,n){var i=t("../element"),a=t("../../utils"),r=function(t,e){t=t||{},this.menuItems=t.menuItems||[],i.call(this,t,e)};a.inherit(r,i),r.prototype.elementType="menuBar",r.prototype.template=t("./menu_bar.hbs"),r.prototype.delegateEvents=["needscontent","select"].concat(i.prototype.delegateEvents),r.prototype.setDocumentForItem=function(t,e){this.el.getFeature("MenuBarDocument").setDocument(t,e)},r.prototype.getDocumentForItem=function(t){this.el.getFeature("MenuBarDocument").getDocument(t)},r.prototype.getSelectedItem=function(){this.el.getFeature("MenuBarDocument").getActiveElement()},r.prototype.setSelectedItem=function(t){this.el.getFeature("MenuBarDocument").setSelectedItem(t)},e.exports=r},{"../../utils":328,"../element":308,"./menu_bar.hbs":312}],312:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r,o="function",l=e.helperMissing,s="    <menuItem>\n        <title>";return r=null!=(r=e.title||(null!=t?t.title:t))?r:l,a=typeof r===o?r.call(t,{name:"title",hash:{},data:i}):r,null!=a&&(s+=a),s+"</title>\n    </menuItem>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e.each.call(t,null!=t?t.menuItems:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":300}],313:[function(t,e,n){var i=t("./render"),a=t("../utils"),r=t("parser"),o=t("dom-events").Event,l=function(t,e){i.call(this,t,e)};a.inherit(l,i),l.prototype.tagTemplate=function(t){return"<stackTemplate>"+t.content+"</stackTemplate>"},l.prototype.render=function(t){!t&&this.el&&(t=this.el.ownerDocument);var e=r.parse(this.tagTemplate({content:this.template(this)}),t);e=t?e:e.documentElement;var n,i,a,l,s=e.childNodes,c=s.length,u=this.container;if(this.el&&this.container){if(n=this.elementArray.reduce(function(t,e){return s.length>0?(a=s.item(0),u.replaceChild(a,e),t.push(a)):u.removeChild(e),t},[]),n.length<c)for(l=n[n.length-1],i=n.length;c>i;i++)a=s.item(0),n.push(a),u.insertBefore(a,l.nextSibling),l=a}else for(n=[],i=0;c>i;i++)n.push(s.item(i));this.el=e,this.elementArray=n,this.dispatchEvent(new o("render"))},l.prototype.insertInto=function(t,e){this.elementArray=this.elementArray.reduce(function(n,i){var a=i;return a.ownerDocument!==t.ownerDocument&&(a=t.ownerDocument.adoptNode(a)),t.insertBefore(a,e),n.push(a),n},[]),this.el.ownerDocument!==t.ownerDocument&&(this.el=t.ownerDocument.adoptNode(this.el)),this.container=t},e.exports=l},{"../utils":328,"./render":314,"dom-events":332,parser:338}],314:[function(t,e,n){var i=t("./base"),a=t("dom-events").EventDelegate,r=t("dom-events").Event,o=t("../utils"),l=t("../mixins").ArrayPropertyFactory,s=t("../mixins").SetPropertyFactory,c=new l(["style","entityProvider"]),u=new s([{property:"class",plural:"classes"}]),h=function(t){i.call(this),a.call(this),t=t||{};var e;Object.defineProperty(this,"el",{get:function(){return e},set:function(t){var n=e;e=t,this.delegateEvents.length&&(n&&this.removeEventDelegates(n,this.delegateEvents),this.addEventDelegates(t,this.delegateEvents))},enumerable:!0,configurable:!0}),c.createProperties(this),u.createProperties(this),t.styles&&t.styles.forEach(function(t){this.addStyle(t)},this),t.entityProviders&&t.entityProviders.forEach(function(t){this.addEntityProvider(t)},this),t.classes&&t.classes.forEach(function(t){this.addClass(t)},this);var n=function(){this.render()}.bind(this);this.addEventListener("addClass",n),this.addEventListener("removeClass",n),t.template&&(this.template=t.template);var o=this.watchedAttributes;t.watchedAttributes||(t.watchedAttributes=[]),o=o.concat(t.watchedAttributes),this.watchedAttributes=o;var l=o.reduce(function(e,n){return e[n]=t[n],e},{});this.addEventListener("change",n),Object.defineProperties(this,o.reduce(function(t,e){return t[e]={enumerable:!0,get:function(){return l[e]},set:function(t){var n=l[e];l[e]=t,this.dispatchEvent(new r("change",{detail:{oldValue:n,newValue:t,name:e}}))}},t},{})),t&&t.el?this.el=t.el:this.render()};o.inherit(h,i),c.mixin(h.prototype),u.mixin(h.prototype),h.prototype.delegateEvents=[],h.prototype.tagTemplate=t("./element_tag.hbs"),h.prototype.watchedAttributes=["selected","disabled","accessibilityText"],h.prototype.template=function(){return""},h.prototype.render=function(){},e.exports=h},{"../mixins":319,"../utils":328,"./base":302,"./element_tag.hbs":309,"dom-events":332}],315:[function(t,e,n){var i=t("native-ios"),a=t("./application"),r=t("./tab_bar"),o=t("dom-events").EventDelegate,l=t("../utils"),s=function(t,e){t=t||{},t.tabBar=t.tabBar||i.tabBar,a.call(this,t,e),o.call(this),this.tabBar=new r({tabBar:t.tabBar}),this.addEventDelegates(this.tabBar,this.tabBar.delegatedEvents)};l.inherit(s,a),e.exports=s},{"../utils":328,"./application":301,"./tab_bar":316,"dom-events":332,"native-ios":334}],316:[function(t,e,n){function i(t){t||(t=new s("select",{detail:{target:this.tabBar.selectedTab}})),this.dispatchEvent(t)}function a(t){t||(t=new s("reload",{detail:{target:this.tabBar}})),this.dispatchEvent(t)}function r(t){var e=new s("needscontent",{detail:{target:t.detail.tab}});this.dispatchEvent(e)}var o=t("native-ios"),l=t("./base"),s=t("dom-events").Event,c=t("../utils"),u=function(t){l.call(this),t=t||{},t.tabBar=t.tabBar||o.tabBar,this.tabBar=t.tabBar,this.tabBar.onSelect=i.bind(this),this.tabBar.onReload=a.bind(this),this.tabBar.onNeedsContent=r.bind(this)};c.inherit(u,l),u.prototype.delegatedEvents=["select","reload","needscontent"],e.exports=u},{"../utils":328,"./base":302,"dom-events":332,"native-ios":334}],317:[function(t,e,n){e.exports={controller:t("./controllers"),event:t("dom-events"),traits:t("./traits"),utils:t("./utils"),model:t("./models")}},{"./controllers":310,"./models":323,"./traits":325,"./utils":328,"dom-events":332}],318:[function(t,e,n){function i(t){return t+"s"}function a(t){return t.charAt(0).toUpperCase()+t.slice(1)}function r(t,e,n){if(this.dispatchEvent){var i={};i[e.property]=n,this.dispatchEvent(new o(t+e.capitalized,{detail:i}))}}var o=t("dom-events").Event,l=function(t){this.propertyNames=t.map(function(t){return"string"==typeof t&&(t={property:t}),t.plural||(t.plural=i(t.property)),t.capitalized||(t.capitalized=a(t.property)),t})};l.prototype.createProperties=function(t){Object.defineProperties(t,this.propertyNames.reduce(function(t,e){return t[e.plural]={value:[]},t},{}))},l.prototype.dispatchPropertyEvent=r,l.prototype.addGenerator=function(t){return function(e){this[t.plural].push(e),r.call(this,"add",t,e)}},l.prototype.removeGenerator=function(t){return function(e){var n=this[t.plural].reduceRight(function(t,n,i){return n===e&&t.push(i),t},[]);n.forEach(function(e){this[t.plural].splice(e,1)},this),r.call(this,"remove",t,e)}},l.prototype.mixin=function(t){this.propertyNames.forEach(function(e){t["add"+e.capitalized]=this.addGenerator(e),t["remove"+e.capitalized]=this.removeGenerator(e)},this)},e.exports=l},{"dom-events":332}],319:[function(t,e,n){e.exports={ArrayPropertyFactory:t("./array"),SetPropertyFactory:t("./set")}},{"./array":318,"./set":320}],320:[function(t,e,n){var i=t("./array"),a=t("../utils"),r=function(){i.apply(this,arguments)};a.inherit(r,i);var o=r.prototype.dispatchPropertyEvent;r.prototype.addGenerator=function(t){return function(e){-1===this[t.plural].indexOf(e)&&(this[t.plural].push(e),o.call(this,"add",t,e))}},e.exports=r},{"../utils":328,"./array":318}],321:[function(t,e,n){var i=t("dom-events").EventTarget,a=t("../utils"),r=function(){i.call(this)};a.inherit(r,i),e.exports=r},{"../utils":328,"dom-events":332}],322:[function(t,e,n){var i=t("./base"),a=t("../utils"),r=function(t){i.call(this),this.providerType=t.providerType,this.entityType=t.entityType,this.id=t.id,t.predicateList&&(this.predicateList=t.predicateList),t.limitList&&(this.limitList=t.limitList),t.prefetchedProperties&&(this.prefetchedProperties=t.prefetchedProperties)};a.inherit(r,i),e.exports=r},{"../utils":328,"./base":321}],323:[function(t,e,n){e.exports={BaseModel:t("./base"),Style:t("./style"),EntityProvider:t("./entity_provider")}},{"./base":321,"./entity_provider":322,"./style":324}],324:[function(t,e,n){var i=t("./base"),a=t("../utils"),r=function(t){i.call(this),this.style=t.style};a.inherit(r,i),e.exports=r},{"../utils":328,"./base":321}],325:[function(t,e,n){e.exports={SelectMap:t("./select_map")}},{"./select_map":326}],326:[function(t,e,n){function i(t){t.addEventListener("select",this.handleSelect.bind(this))}var a=t("../controllers").MultiElementController,r=function(){var t;t=this instanceof a?function(){this.elementArray.forEach(function(t){i.call(this,t)},this)}:function(){i.call(this,this.el)},this.addEventListener("render",t.bind(this)),t.call(this),this.onSelect={}};r.prototype.handleSelect=function(t){var e=t.target.getAttribute("class").split(" "),n=this.onSelect;e.forEach(function(e){var i=n[e];"function"==typeof i&&i.call(this,t)}.bind(this))},e.exports=r},{"../controllers":310}],327:[function(t,e,n){var i=t("hbsfy/runtime");i.registerHelper("ifValidAttribute",function(t,e){return t||t===!1||0===t?e.fn(this):e.inverse(this)}),e.exports=i},{"hbsfy/runtime":300}],328:[function(t,e,n){var i=t("utils"),a=t("parser"),r=t("pubsub"),o=t("./handlebars"),l={parser:a,PubSub:r,Handlebars:o};i.extend(i,l),e.exports=i},{"./handlebars":327,parser:338,pubsub:340,utils:341}],329:[function(t,e,n){var i=t("./event-target"),a=t("utils"),r=function(){function t(t){this.dispatchEvent(t)}this.hasOwnProperty("dispatchEvent")||i.call(this);var e=t.bind(this);this.addEventDelegates=function(t,n){n.forEach(function(n){t.addEventListener(n,e)},this)},this.removeEventDelegates=function(t,n){n.forEach(function(n){t.removeEventListener(n,e)},this)}};a.inherit(r,i),e.exports=r},{"./event-target":330,utils:333}],330:[function(t,e,n){var i=function(){var t={};this.addEventListener=function(e,n){t[e]=t[e]||[],t[e].push(n)},this.removeEventListener=function(e,n){var i,a=t[e];a&&(i=a.indexOf(n),i>-1&&a.splice(i,1))},this.dispatchEvent=function(e){var n=t[e.type];n&&n.forEach(function(t){t.call(this,e)},this)}};e.exports=i},{}],331:[function(t,e,n){var i=t("utils"),a=function(t,e){if(this.type=t,!t)throw new TypeError("Failed to construct Event: An event name must be provided.");e&&e.detail&&(this.detail=i.clone(e.detail))};a.prototype.initEvent=function(){},a.prototype.preventDefault=function(){},a.prototype.stopImmediatePropagation=function(){},a.prototype.stopPropagation=function(){},e.exports=a},{utils:333}],332:[function(t,e,n){e.exports={Event:t("./event"),EventDelegate:t("./event-delegate"),EventTarget:t("./event-target")}},{"./event":331,"./event-delegate":329,"./event-target":330}],333:[function(t,e,n){e.exports=t(292)},{}],334:[function(t,e,n){var i=t("utils"),a=t("native"),r={modal:void 0,tabBar:void 0};"undefined"!=typeof modal&&(r.modal=modal),"undefined"!=typeof TabBar&&(r.tabBar=TabBar),i.extend(a,r),e.exports=a},{"native":335,utils:336}],335:[function(t,e,n){var i,a={application:void 0,DOMParser:void 0,XMLSerializer:void 0};"undefined"!=typeof DOMImplementationRegistry&&(i=function(){},i.prototype.serializer=DOMImplementationRegistry.getDOMImplementation(null).createLSSerializer(),i.prototype.serializeToString=function(t){return this.serializer.writeToString(t)},a.XMLSerializer=i),"undefined"!=typeof DOMParser&&(a.DOMParser=DOMParser),"undefined"!=typeof App&&(a.application=App),e.exports=a},{}],336:[function(t,e,n){e.exports=t(292)},{}],337:[function(t,e,n){e.exports=t(335)},{}],338:[function(t,e,n){var i=t("native"),a=new i.DOMParser,r=new i.XMLSerializer;e.exports={parse:function(t,e){var n=a.parseFromString(t,"text/xml");return e?e.adoptNode(n.documentElement):n},stringify:function(t){return r.serializeToString(t)}}},{"native":339}],339:[function(t,e,n){e.exports=t(335)},{}],340:[function(t,e,n){function i(){return"uuid_"+ ++a}var a=-1,r=function(){this.topics={}};r.prototype.publish=function(t,e){var n=this.topics[t];if(n){var i=Object.keys(n);i.forEach(function(t){n[t](e)})}},r.prototype.subscribe=function(t,e){this.topics[t]||(this.topics[t]={});var n=i();return this.topics[t][n]=e,n},r.prototype.unsubscribe=function(t){if(this.topics[t])return void delete this.topics[t];for(var e,n,i=Object.keys(this.topics),a=0,r=i.length;r>a;a++){if(e=this.topics[i[a]],e[t]){delete e[t];break}for(n in e)e.hasOwnProperty(n)&&e[n]===t&&delete e[n]}},e.exports=r},{}],341:[function(t,e,n){e.exports=t(292)},{}],342:[function(t,e,n){e.exports=function(e,n){return t("./util").its.loc(e,n)},"undefined"!=typeof Handlebars&&Handlebars.registerHelper("loc",helper)},{"./util":347}],343:[function(t,e,n){e.exports=t("./its"),e.exports.hbsHelper=t("./hbs-helper")},{"./hbs-helper":342,"./its":344}],344:[function(t,e,n){e.exports.its={},t("./util")(e.exports),t("./loc")(e.exports)},{"./loc":345,"./util":346}],345:[function(t,e,n){e.exports=function(t){var e=t.its,n=t.iTSLocalization={};n._strings={},n.hasLocalizedValue=function(t){var i=n._strings[t];return e.isDefined(i)},e.loc=function(t,e){var i=n._strings[t];return"undefined"==typeof i&&(i=t),e&&(i=n.replaceTokens(i,e)),"undefined"==typeof itms&&(i=n.replaceMarkupTokens(i,e)),i},e.locDate=function(t){if(!t)return"";var e,n=t.length;if(n>10)e=new Date(t);else{var i=n>=4?t.slice(0,4):0,a=n>=7?t.slice(5,7):1,r=n>=10?t.slice(8,10):1;e=new Date(i,a-1,r)}return formatDate(e)},e.locWithMarkupTokens=function(t,i){return n.replaceMarkupTokens(e.loc(t,i),i)},n._strings._showLocKeys&&(e.loc=function(t){return"+"+t+"+"}),e.locWithCount=function(t,i,a){var r,o,l=null;return 0==i&&(r=t+".zero",n.hasLocalizedValue(r)&&(l=r)),null===l&&(l=t,o=n.pluralCategory(i),"other"!==o&&(r=t+"."+o,n.hasLocalizedValue(r)&&(l=r))),a||(a={}),e.isDefined(a.count)||(a.count=e.formatNumber(i)),e.loc(l,a)},n.replaceTokens=function(t,n){if(n)for(var i in n)if(n.hasOwnProperty(i)){var a="@@"+i+"@@";t=e.string.replace(t,a,n[i])}return t},n.markupParams={nbsp:"&nbsp;",gt:"&gt;",lt:"&lt;",copy:""},n.replaceMarkupTokens=function(t,e){if(t.indexOf("##")>-1){if(e)for(var i in e)n.markupParams[i.toString()]=e[i];for(var a in n.markupParams){var r="##"+a+"##";t=t.replace(new RegExp(r,"gi"),n.markupParams[a])}t=t.replace(/##([^##]+)##/gi,"<$1>")}return t},n.localizedResourceUrlForPathKey=function(t,n){void 0===n&&(n=/https:/.test(window.location.protocol));var i=n?"https://s.mzstatic.com":"http://r.mzstatic.com";return i+e.loc(t)},e.formatNumber="undefined"!=typeof itms&&"undefined"!=typeof formatNumber?function(t){return formatNumber(Number(t))}:function(t){if("undefined"==typeof n.decimalSeparator){var e=n._strings._decimalSeparator;"undefined"==typeof e&&(e="."),n.decimalSeparator=e,e=n._strings._thousandsSeparator,"undefined"==typeof e&&(e=","),n.thousandsSeparator=e}for(var i=parseFloat(t).toString().split("."),a=n.thousandsSeparator,r=i[0].split(""),o=r.length-3;o>0;o-=3)r.splice(o,0,a);i[0]=r.join("");var l=i.join(n.decimalSeparator);return l},n._pluralCategoryDefault=function(t){return"other"},n._pluralCategoryOne=function(t){return 1==t?"one":"other"},n._pluralCategoryArabic=function(t){var e=t>>0;if(e!=t)return"other";if(0===e)return"zero";if(1===e)return"one";if(2===e)return"two";var n=e%100;return n>=11?"many":n>=3?"few":"other"},n._pluralCategoryFrench=function(t){return 2>t&&t>=0?"one":"other"},n._pluralCategoryHebrew=function(t){var e=t>>0;if(e!=t)return"other";if(1===e)return"one";if(2===e)return"two";var n=e%10;return 0==n&&e>10?"many":"other"},n._pluralCategoryPolish=function(t){var e=t>>0;if(e!=t)return"other";if(1===e)return"one";var n=e%10;if(4>=n&&n>=2){var i=e%100;if(i>14||12>i)return"few"}return"many"},n._pluralCategoryRomanian=function(t){var e=t>>0;if(e!=t)return"few";if(0===e)return"few";if(1===e)return"one";var n=t%100;return 19>=n&&n>=1?"few":"other"},n._pluralCategoryRussian=function(t){var e=t>>0;if(e!=t)return"other";var n=e%10;if(n>=5||0==n)return"many";var i=e%100;return 14>=i&&i>=11?"many":1==n?"one":"few"},n._pluralCategoryFnByLanguage={zh:n._pluralCategoryDefault,id:n._pluralCategoryDefault,ja:n._pluralCategoryDefault,ko:n._pluralCategoryDefault,ms:n._pluralCategoryDefault,th:n._pluralCategoryDefault,vi:n._pluralCategoryDefault,en:n._pluralCategoryOne,ca:n._pluralCategoryOne,da:n._pluralCategoryOne,nl:n._pluralCategoryOne,de:n._pluralCategoryOne,el:n._pluralCategoryOne,fi:n._pluralCategoryOne,hu:n._pluralCategoryOne,it:n._pluralCategoryOne,nb:n._pluralCategoryOne,no:n._pluralCategoryOne,pt:n._pluralCategoryOne,es:n._pluralCategoryOne,sv:n._pluralCategoryOne,tr:n._pluralCategoryOne,ar:n._pluralCategoryArabic,fr:n._pluralCategoryFrench,iw:n._pluralCategoryHebrew,pl:n._pluralCategoryPolish,ro:n._pluralCategoryRomanian,ru:n._pluralCategoryRussian},n.pluralCategory=function(t){if(e.serverData&&e.serverData.constants){var i=n._pluralCategoryFnByLanguage[e.serverData.constants.languageCode];if(i)return i(t);throw new Error("missing plural category function for: "+e.serverData.constants.languageCode)}return"other"},e.updateLocale=function(t){n._strings=t}}},{}],346:[function(t,e,n){e.exports=function(t){var e=t.its;e.isDefined=function(t){return"undefined"!=typeof t},"undefined"==typeof e.string&&(e.string={}),e.string.replace=function(t,e,n){return t?("string"!=typeof t&&(t+=""),t.split(e).join(n)):t}}},{}],347:[function(t,e,n){window.iTSLocalization||(iTSLocalization={}),window.iTSLocalization._strings||(iTSLocalization._strings={}),iTSLocalization.hasLocalizedValue=function(t){var e=iTSLocalization._strings[t];return its.isDefined(e)},its.loc=function(t,e){var n=iTSLocalization._strings[t];return"undefined"==typeof n&&(n=t),e&&(n=iTSLocalization.replaceTokens(n,e)),"undefined"==typeof itms&&(n=iTSLocalization.replaceMarkupTokens(n,e)),n},its.locDate=function(t){if(!t)return"";var e,n=t.length;if(n>10)e=new Date(t);else{var i=n>=4?t.slice(0,4):0,a=n>=7?t.slice(5,7):1,r=n>=10?t.slice(8,10):1;e=new Date(i,a-1,r)}return formatDate(e)},its.locWithMarkupTokens=function(t,e){return iTSLocalization.replaceMarkupTokens(its.loc(t,e),e)},iTSLocalization._strings._showLocKeys&&(its.loc=function(t){return"+"+t+"+"}),its.locWithCount=function(t,e,n){var i,a,r=null;return 0==e&&(i=t+".zero",iTSLocalization.hasLocalizedValue(i)&&(r=i)),null===r&&(r=t,a=iTSLocalization.pluralCategory(e),"other"!==a&&(i=t+"."+a,iTSLocalization.hasLocalizedValue(i)&&(r=i))),n||(n={}),its.isDefined(n.count)||(n.count=its.formatNumber(e)),its.loc(r,n)},iTSLocalization.replaceTokens=function(t,e){if(e)for(var n in e)if(e.hasOwnProperty(n)){var i="@@"+n+"@@";t=its.string.replace(t,i,e[n])}return t},iTSLocalization.markupParams={nbsp:"&nbsp;",gt:"&gt;",lt:"&lt;",copy:""},iTSLocalization.replaceMarkupTokens=function(t,e){if(t.indexOf("##")>-1){if(e)for(var n in e)iTSLocalization.markupParams[n.toString()]=e[n];for(var i in iTSLocalization.markupParams){var a="##"+i+"##";t=t.replace(new RegExp(a,"gi"),iTSLocalization.markupParams[i])}t=t.replace(/##([^##]+)##/gi,"<$1>")}return t},iTSLocalization.localizedResourceUrlForPathKey=function(t,e){void 0===e&&(e=/https:/.test(window.location.protocol));var n=e?"https://s.mzstatic.com":"http://r.mzstatic.com";return n+its.loc(t)},its.formatNumber="undefined"!=typeof itms&&"undefined"!=typeof formatNumber?function(t){return formatNumber(Number(t))}:function(t){if("undefined"==typeof iTSLocalization.decimalSeparator){var e=iTSLocalization._strings._decimalSeparator;"undefined"==typeof e&&(e="."),iTSLocalization.decimalSeparator=e,e=iTSLocalization._strings._thousandsSeparator,"undefined"==typeof e&&(e=","),iTSLocalization.thousandsSeparator=e}for(var n=parseFloat(t).toString().split("."),i=iTSLocalization.thousandsSeparator,a=n[0].split(""),r=a.length-3;r>0;r-=3)a.splice(r,0,i);n[0]=a.join("");var o=n.join(iTSLocalization.decimalSeparator);return o},iTSLocalization._pluralCategoryDefault=function(t){return"other"},iTSLocalization._pluralCategoryOne=function(t){return 1==t?"one":"other"},iTSLocalization._pluralCategoryArabic=function(t){var e=t>>0;if(e!=t)return"other";if(0===e)return"zero";if(1===e)return"one";if(2===e)return"two";var n=e%100;return n>=11?"many":n>=3?"few":"other"},iTSLocalization._pluralCategoryFrench=function(t){return 2>t&&t>=0?"one":"other"},iTSLocalization._pluralCategoryHebrew=function(t){var e=t>>0;if(e!=t)return"other";if(1===e)return"one";if(2===e)return"two";var n=e%10;return 0==n&&e>10?"many":"other"},iTSLocalization._pluralCategoryPolish=function(t){var e=t>>0;if(e!=t)return"other";if(1===e)return"one";var n=e%10;if(4>=n&&n>=2){var i=e%100;if(i>14||12>i)return"few"}return"many"},iTSLocalization._pluralCategoryRomanian=function(t){var e=t>>0;if(e!=t)return"few";if(0===e)return"few";if(1===e)return"one";var n=t%100;return 19>=n&&n>=1?"few":"other"},iTSLocalization._pluralCategoryRussian=function(t){var e=t>>0;if(e!=t)return"other";var n=e%10;if(n>=5||0==n)return"many";var i=e%100;return 14>=i&&i>=11?"many":1==n?"one":"few"},iTSLocalization._pluralCategoryFnByLanguage={zh:iTSLocalization._pluralCategoryDefault,id:iTSLocalization._pluralCategoryDefault,ja:iTSLocalization._pluralCategoryDefault,ko:iTSLocalization._pluralCategoryDefault,ms:iTSLocalization._pluralCategoryDefault,th:iTSLocalization._pluralCategoryDefault,vi:iTSLocalization._pluralCategoryDefault,en:iTSLocalization._pluralCategoryOne,ca:iTSLocalization._pluralCategoryOne,da:iTSLocalization._pluralCategoryOne,nl:iTSLocalization._pluralCategoryOne,de:iTSLocalization._pluralCategoryOne,el:iTSLocalization._pluralCategoryOne,fi:iTSLocalization._pluralCategoryOne,hu:iTSLocalization._pluralCategoryOne,it:iTSLocalization._pluralCategoryOne,nb:iTSLocalization._pluralCategoryOne,no:iTSLocalization._pluralCategoryOne,pt:iTSLocalization._pluralCategoryOne,es:iTSLocalization._pluralCategoryOne,sv:iTSLocalization._pluralCategoryOne,tr:iTSLocalization._pluralCategoryOne,ar:iTSLocalization._pluralCategoryArabic,fr:iTSLocalization._pluralCategoryFrench,iw:iTSLocalization._pluralCategoryHebrew,pl:iTSLocalization._pluralCategoryPolish,ro:iTSLocalization._pluralCategoryRomanian,ru:iTSLocalization._pluralCategoryRussian},iTSLocalization.pluralCategory=function(t){if(its.serverData&&its.serverData.constants){var e=iTSLocalization._pluralCategoryFnByLanguage[its.serverData.constants.languageCode];if(e)return e(t);if(its.Logger){var n=its.Logger.named("its-base-util");n.error("missing plural category function for: "+its.serverData.constants.languageCode,!0)}}return"other"}},{}],348:[function(t,e,n){e.exports={color:t("./lib/color"),cookie:t("./lib/cookie")}},{"./lib/color":349,"./lib/cookie":350}],349:[function(t,e,n){var i=function(){var t,e,n,i=[],r=95.0456,o=100,l=108.9058,c=function(t){if("string"==typeof t)return t.indexOf("%")>0?parseFloat(t)/100:parseFloat(t);if("number"==typeof t)return t;throw{error:"InvalidFormat",message:"Argument "+t+" is not a number."}},u=function(t){return t=c(t),t>1||-1>t?t/100:t},d=function(t,e,n){return Math.max(Math.min(c(t),c(n)),c(e))},p=function(t){return t===+t&&t===(0|t)},m=function(a,r,o){return a=c(a),r=c(r),o=c(o),p(a)&&p(r)&&p(o)?(a=d(a,0,255),r=d(r,0,255),o=d(o,0,255),t=a/255,e=r/255,n=o/255):(t=d(a,0,1),e=d(r,0,1),n=d(o,0,1),a=Math.round(255*t),r=Math.round(255*e),o=Math.round(255*n)),i=[a,r,o],{r:a,g:r,b:o}},f=function(t){return"undefined"==typeof t||null==t||""===t?t=1:(t=u(t),t=d(t,0,1)),t},g=function(t){return/(^#?[0-9A-F]{6}$)|(^#?[0-9A-F]{3}$)/i.test(t)},b=function(t){return t.match(/[\d.]{1,3}/gi)};return{parseColor:function(t,e){var n,i;return null==t?(n=m(0,0,0),i=f(e)):t instanceof a?(n=m(t.rgb.r.color.rgb.g,t.rgb.b),i=f(t.alpha)):null!=t.r?(n=m(t.r,t.g,t.b),i=f(t.alpha||1)):Array.isArray(t)&&t.length>=3?(n=m(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):!g(t)&&(t.indexOf("rgb")>-1||null!=t.match(/[\d.]{1,3}/gi)&&t.match(/[\d.]{1,3}/gi).length>=3)?(t=t.match(/[\d.]{1,3}/gi),n=m(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):t.indexOf("hsv")>-1?(t=t.match(/[\d.%]{1,3}/gi),n=this.HSVtoRGB(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):t.indexOf("hsl")>-1?(t=b(t),n=this.HSLtoRGB(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):g(t)&&(n=this.HEXtoRGB(t),i=f(e)),{rgb:n,alpha:i}},setOpacity:function(t){return f(t)},getHue:function(i,a,r){var o=0;null!=i&&m(i,a,r);var l=Math.max(t,e,n),s=Math.min(t,e,n),c=l-s;switch(l){case t:o=(e-n)/c+(n>e?6:0);break;case e:o=(n-t)/c+2;break;case n:o=(t-e)/c+4;break;default:o=0}return o=60*o,0>o&&(o+=360),o},RGBtoHEX:function(t,e,n){null!=t&&m(t,e,n);var a=i.map(function(t){return t=t.toString(16),1===t.length?"0"+t:t}).join("");return a},HEXtoRGB:function(t){if(g(t)){0===t.indexOf("#")&&(t=t.substr(1));var e=0,n=0,i=0;return 3===t.length?(t=t.split("").map(function(t){return parseInt(t+t,16)}),e=t[0],n=t[1],i=t[2],rgb=m(e,n,i)):t.length>=6&&(e=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),i=parseInt(t.substr(4,2),16),rgb=m(e,n,i)),{r:e,g:n,b:i}}throw{error:"InvalidFormat",message:t+" is not a valid hex value."}},RGBtoHSL:function(i,a,r){null!=i&&m(i,a,r);var o=Math.max(t,e,n),l=Math.min(t,e,n),c=(o+l)/2,u=o-l;return 0===u?h=s=0:(s=c>0?u/(1-Math.abs(2*c-1)):0,h=this.getHue()),{h:h,s:s,l:c}},HSLtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){"string"==typeof t&&t.indexOf("%")>0&&(t=360*c(t)),t=d(t,0,360),e=u(Math.abs(e)),n=u(Math.abs(n));var i=0,a=0,r=0;if(0!==e||0!==n){var o=.5>=n?n*(1+e):n+e-n*e,l=n+n-o,s=function(t){t=0>t?t+1:t>1?t-1:t;var e;return e=1>6*t?l+6*(o-l)*t:.5>t?o:2>3*t?l+(o-l)*(2/3-t)*6:l};i=s(t+1/3),a=s(t),r=s(t-1/3)}return m(i,a,r)}throw{error:"InvalidFormat",message:"NULL is not a valid argument."}},RGBtoHSV:function(i,a,r){null!=i&&m(i,a,r);var o=Math.max(t,e,n),l=Math.min(t,e,n),c=o-l,u=o;return 0===c?h=s=0:(s=c/u,h=this.getHue()),{h:h,s:s,v:u}},HSVtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){"string"==typeof t&&t.indexOf("%")>0&&(t=360*c(t)),t=d(c(t),0,360),e=u(Math.abs(e)),n=u(Math.abs(n));var i=0,a=0,r=0;if(0===e&&0!==n)i=a=r=Math.round(255*n);else if(0!==e&&0!==n){var o=t/60,l=0|o,s=n*e,h=n-s,p=s*(1-Math.abs(o%2-1))+h;switch(s+=h,l){case 0:i=s,a=p,r=h;break;case 1:i=p,a=s,r=h;break;case 2:i=h,a=s,r=p;break;case 3:i=h,a=p,r=s;break;case 4:i=p,a=h,r=s;break;case 5:i=s,a=h,r=p;break;default:i=0,a=0,r=0}}return m(i,a,r)}throw{error:"InvalidFormat",message:"NULL is not a valid argument."}},RGBtoXYZ:function(i,a,r){null!=i&&m(i,a,r);var o=0,l=0,s=0;return i=100*(t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92),a=100*(e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92),r=100*(n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92),o=.412453*i+.35758*a+.180423*r,l=.212671*i+.71516*a+.072169*r,s=.019334*i+.119193*a+.950227*r,{x:o,y:l,z:s}},XYZtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){t=d(Math.abs(t),0,r)/100,e=d(Math.abs(e),0,o)/100,n=d(Math.abs(n),0,l)/100;var i=3.240479*t+-1.53715*e+n*-.498535,a=t*-.969256+1.875992*e+.041556*n,s=.055648*t+e*-.204043+1.057311*n,c=function(t){return t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t};return i=c(i),a=c(a),s=c(s),m(i,a,s)}throw{error:"InvalidFormat",message:"NULL is not a valid argument"}},RGBtoLab:function(t,e,n){null!=t&&m(t,e,n);var i=this.RGBtoXYZ(),a=i.x/r,s=i.y/o,c=i.z/l,u=0,h=0,d=0,p=7.787037037037035,f=function(t){return t>.008856?Math.pow(t,1/3):p*t+.13793103448275862};return a=f(a),s=f(s),c=f(c),u=116*s-16,h=500*(a-s),d=200*(s-c),{L:u,a:h,b:d}},LABtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){t=d(t,0,100),e=d(e,-128,128),n=d(n,-128,128);var i=(t+16)/116,a=e/500+i,s=i-n/200,c=7.787037037037035,u=function(t){var e=Math.pow(t,3);return e>.008856?e:(t-.13793103448275862)/c};return a=u(a),i=u(i),s=u(s),a*=r,i*=o,s*=l,this.XYZtoRGB(a,i,s)}throw{error:"InvalidFormat",message:"NULL is not a valid argument"}},changeHue:function(t,e,n,i){if("string"==typeof t&&t.indexOf("%")>0&&(t=3.6*parseFloat(t)),null!=e&&m(e,n,i),t=d(t,0,360),0===t)return this;t%=360;var a=this.RGBtoHSL(),r=(a.h+t)%360;return 0>r&&(r+=360),this.HSLtoRGB(r,a.s,a.l)},changeBrightness:function(t,e,n,i){null!=e&&m(e,n,i),t=this.number(t),t=t>1||-1>t?t/100:t;var a=this.RGBtoHSV(),r=a.v+t;return r=d(r,0,1),this.HSVtoRGB(a.h,a.s,r,a.a)},changeLightness:function(t,e,n,i){null!=e&&m(e,n,i),t=c(t),t=.99>=t&&t>=-.99?100*t:t;var a=this.RGBtoLab(),r=a.L+t;return r=d(r,0,100),this.LABtoRGB(r,a.a,a.b)},changeSaturation:function(t,e,n,i){null!=e&&m(e,n,i),t=c(t),t=t>1||-1>t?t/100:t;var a=this.RGBtoHSV(),r=a.s+t;return r=d(r,0,1),this.HSVtoRGB(a.h,r,a.v,a.a)}}}(),a=function(t,e){this.rgb={},this.alpha=1,this.init(t,e)};a.prototype.init=function(t,e){var n=i.parseColor(t,e);this.rgb=n.rgb,this.alpha=n.alpha},a.prototype.getAlpha=function(){return this.alpha},a.prototype.setAlpha=function(t){return t>=0&&1>=t&&(this.alpha=t),this},a.prototype.getRGB=function(){return this.rgb},a.prototype.getHEX=function(){return this.hex||(this.hex=i.RGBtoHEX(this.rgb.r,this.rgb.g,this.rgb.b)),this.hex},a.prototype.getHSL=function(){return this.hsl||(this.hsl=i.RGBtoHSL(this.rgb.r,this.rgb.g,this.rgb.b)),this.hsl},a.prototype.getHSV=function(){return this.hsv||(this.hsv=i.RGBtoHSV(this.rgb.r,this.rgb.g,this.rgb.b)),this.hsv},a.prototype.getXYZ=function(){return this.xyz||(this.xyz=i.RGBtoXYZ(this.rgb.r,this.rgb.g,this.rgb.b)),this.xyz},a.prototype.getLab=function(){return this.lab||(this.lab=i.RGBtoLab(this.rgb.r,this.rgb.g,this.rgb.b)),this.lab},a.prototype.getHue=function(){return this.hue||(this.hue=i.getHue(this.rgb.r,this.rgb.g,this.rgb.b)),this.hue},a.prototype.lighten=function(t){var e=i.changeLightness(t,this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.darken=function(t){var e=i.changeLightness(-1*Math.abs(t),this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.saturate=function(t){var e=i.changeSaturation(t,this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.desaturate=function(t){var e=i.changeSaturation(-1*Math.abs(t),this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.greyscale=function(){var t=i.changeSaturation(-1,this.rgb.r,this.rgb.g,this.rgb.b),e=new a(t,this.alpha);return e},a.prototype.toString=function(t,e){"undefined"!=typeof t&&(t=t.toLowerCase()),e="undefined"!=typeof e?e+2:2;{var n,i;Math.pow(10,Number(e))}switch(t){case"rgb":case"rgba":var a=this.rgb.r+","+this.rgb.g+","+this.rgb.b;n=this.alpha<1?"rgba("+a+","+this.alpha+")":"rgb("+a+")";break;case"hex":n="#"+this.getHEX();break;case"hsl":case"hsla":i=this.getHSL(),n=i.h.toFixed(e-2)+", "+(100*i.s).toFixed(e-2)+"%, "+(100*i.l).toFixed(e-2)+"%",n=i.a<1?"hsla("+n+", "+i.a+")":"hsl("+n+")";break;case"hsv":case"hsva":i=this.getHSV(),n=i.h.toFixed(e-2)+", "+(100*i.s).toFixed(e-2)+"%, "+(100*i.v).toFixed(e-2)+"%",n=i.a<1?"hsva("+n+", "+i.a+")":"hsv("+n+")";break;default:n=this.alpha<1?"rgba("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+", "+this.alpha+")":"#"+this.getHEX()}return n},a.prototype.isDark=function(){var t=this.getLab();return t.L<50?!0:!1},e.exports=a},{}],350:[function(t,e,n){var i="	\n\f\r \u2028\u2029",a=new RegExp("^["+i+"]+"),r=new RegExp("["+i+"]+$"),o=function(t){var e=null;return e=t.trim?t.trim():t.replace(a,"").replace(r,"")},l=function(t,e){var n,i,a,r,l,s=null,c=e&&e.cookie;if(c&&t){n=c.split(";");for(var u=n.length-1;!s&&u>=0;u--)r=n[u],l=r.indexOf("="),l>0&&(i=o(r.substring(0,l)),a=r,i===t&&(('"'===a[0]||'"'===a[a.length-1])&&(a=a.substring(1,a.length-1)),s=o(a.substring(l+1))))}return s},s=function(t,e){var n=l(t,e);return n&&(n=unescape(n)),n},c=function(t){var e=new Date;e.setDate(e.getDate()+365);var n=t.namespace||itms,i=t.domain||"apple.com",a=t.expires||e.toUTCString(),r=t.path||"/",o={name:t.name,path:r,value:t.value+"",domain:i,
expires:a};n.cookie=o};e.exports={get:s,set:c,getUnescaped:l}},{}],351:[function(t,e,n){e.exports=function(){function t(){for(var t,o=1;o<d.length;o++)t=d[o],h[t]=h.level>=o?f.enabled?r(t):a(t):function(){return!1},h.log=h.info;5===m&&(u=e(i,s),h.error=n)}function e(t,e,n){var i,a,r,o=null,l=0;n||(n={});var s=function(){l=new Date,o=null,r=t.apply(i,a)};return function(){var c=new Date;l||n.leading!==!1||(l=c);var u=e-(c-l);return i=this,a=arguments,0>=u?(clearTimeout(o),o=null,l=c,r=t.apply(i,a)):o||n.trailing===!1||(o=setTimeout(s,u)),r}}function n(t){if(!t.message||!t.eventType)return!1;t.version=t.version||g.version;var e="",n=g.serverReportingProtocol,i="://"+g.serverReportingDomain,a="/"+g.serverReportingApp,r="/WebObjects"+a+".woa/wa",o="/"+g.recordStatsAction,l="?";for(property in t)l+=property+"="+t[property]+"&";t.sender=g.senderName,t.serverReportingApp=g.serverReportingApp,t.recordStatsAction=g.recordStatsAction,e=n+i+r+o+l,u({data:t,url:e,success:t.success,failure:t.failure})}function i(t){var e=this,n=JSON.stringify(t.data),i=t.url,a=itms?itms.makeStoreXMLHttpRequest():new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status?"function"==typeof t.success&&t.success.apply(e,[a.response,a.metrics]):4==a.readyState&&"function"==typeof t.failure&&t.failure.apply(e,[a.status,a.response])},a.open("POST",i,!0),a.setRequestHeader("Content-type","application/json"),a.send(n)}function a(t){return console[t]?Function.prototype.bind.call(console[t],console):"splunk"===t?(u=e(i,s),Function.prototype.bind.call(n)):Function.prototype.bind.call(console.log,console)}function r(t){var e=Error;return e.prototype.log=function(){var e=a(t),n=this.stack.split("\n",19).splice(f.offset,f.lines);e.apply(console,arguments);for(var i=0;i<n.length;i++){var r=n[i];console.log(r)}},Function.prototype.bind.call(e().log,e())}function o(e){var n=h.level;"string"==typeof e&&p.hasOwnProperty(e)?(e.toLowerCase(),m=p[e]):"number"==typeof e&&e>=0&&4>=e&&(m=e),m!==n&&t()}function l(e){if((e===!0||e===!1)&&(f.enabled=e),"object"==typeof e){e=e||{};for(var n in e)f[n]=e[n]}t()}var s,c,u,h=Object.create(Object.prototype),d=["silent","error","warn","info","debug","splunk"],p={silent:0,error:1,warn:2,info:3,debug:4,splunk:5},m=0,f={enabled:!1,lines:1,offset:0},g={recordStatsAction:"recordStats",senderName:"ITSClient",serverReportingApp:"MZUserXP",serverReportingDomain:"metrics.mzstatic.com",serverReportingProtocol:"https",version:"5.4"};return"undefined"!=typeof itms?c=itms.getBag():"undefined"!=typeof iTunes&&(c=iTunes.getBag()),s="undefined"!=typeof c?c.custombag?0:c.metrics.postFrequency:6e4,Object.defineProperties(h,{level:{set:o,get:function(){return m}},trace:{set:l,get:function(){return f.enabled}}}),h.setDefaults=function(){m=3,t()},h.silent=function(){m=0,t()},h.setDefaults(),h}()},{}],352:[function(t,e,n){var i=t("./lib/event_base"),a=t("./lib/event_fields"),r=t("./lib/record_event"),o=t("lager"),l=function(){var t,e=function(e){t?(t.resources=e,i.setResources(e),a.unsubscribeFromEvents(),a.subscribeToEvents(t.eventFields)):o.warn("Metrics not configured, setResources aborted")},n=function(e){e?(t=e,i.setResources(t.resources),i.addFieldsToBase(t.eventBase),r.setDefaultTopic(t.topic),r.assignRecordMethod(t.recordEvent),a.setConfig(t),a.unsubscribeFromEvents(),a.subscribeToEvents(t.eventFields)):o.warn("No configuration provided to Metrics, init aborted")};return{init:n,setResources:e,addEvent:a.addEvent,unsubscribeFromEvents:a.unsubscribeFromEvents}}();e.exports=l},{"./lib/event_base":353,"./lib/event_fields":354,"./lib/record_event":355,lager:356}],353:[function(t,e,n){var i=t("lager"),a=function(){var t,e,n={},a=function(e){"function"==typeof e?t=e:(i.warn("Metrics was not provided a valid eventBase"),t=function(){return{}})},r=function(t){t?e=t:i.warn("No resources provided to event_base.setResources, setResources aborted")},o=function(){var i=t&&t(e)||{};for(var a in i)n[a]=i[a];return n};return{getBase:o,addFieldsToBase:a,setResources:r,resources:function(){return e}}};e.exports=a()},{lager:356}],354:[function(t,e,n){var i=t("./event_base.js"),a=t("./record_event"),r=t("lager"),o=function(){var t,e=function(e,n){var o;t&&t.pubsub?t.pubsub.subscribe?t.pubsub.subscribe(e,function(r){r=r||{},r.resources=t.resources||{},o=Object.create(i.getBase()),t.addSecondaryBaseFields&&(o=t.addSecondaryBaseFields(o,r,e)),r.eventBase=o,a.record(n(r))}):r.warn("Pubsub library provided to Metrics has no method 'subscribe', addEvent aborted"):r.warn("Metrics has no pubsub library, addEvent aborted")},n=function(t){var n;if(t)for(var i in t)n=t[i],e(i,n);else r.warn("No eventFields configured for Metrics, aborting subscribeToEvents")},o=function(){if(t&&t.pubsub&&t.pubsub.unsubscribe)for(var e in t.eventFields)t.pubsub.unsubscribe(t.eventFields);else r.warn("Incompatible or no pubsub lib present, Metrics.unsubscribeFromEvents aborted")},l=function(e){e?t=e:r.warn("No resources provided to event_fields.setConfig, setConfig aborted")};return{addEvent:e,subscribeToEvents:n,unsubscribeFromEvents:o,setConfig:l}};e.exports=o()},{"./event_base.js":353,"./record_event":355,lager:356}],355:[function(t,e,n){var i=function(){var t,e="",n=function(n,i){i=i||e,"function"==typeof t&&t(n,i)},i=function(e){t=e},a=function(t){return e="string"==typeof t?t:e};return{record:n,assignRecordMethod:i,setDefaultTopic:a}};e.exports=i()},{}],356:[function(t,e,n){e.exports=t(291)},{}],357:[function(t,e,n){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?e.exports=i():"function"==typeof define&&define.amd?define(i):t.moment=i()}(this,function(){"use strict";function n(){return Tn.apply(null,arguments)}function i(t){Tn=t}function a(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function l(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function u(t,e,n,i){return Dt(t,e,n,i,!0).utc()}function h(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&void 0===t._pf.bigHour)),t._isValid}function d(t){var e=u(0/0);return null!=t?c(e._pf,t):e._pf.userInvalidated=!0,e}function p(t,e){var n,i,a;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Fn.length>0)for(n in Fn)i=Fn[n],a=e[i],"undefined"!=typeof a&&(t[i]=a);return t}function m(t){p(this,t),this._d=new Date(+t._d),In===!1&&(In=!0,n.updateOffset(this),In=!1)}function f(t){return t instanceof m||null!=t&&s(t,"_isAMomentObject")}function g(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function b(t,e,n){var i,a=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(i=0;a>i;i++)(n&&t[i]!==e[i]||!n&&g(t[i])!==g(e[i]))&&o++;return o+r}function v(){}function y(t){return t?t.toLowerCase().replace("_","-"):t}function w(t){for(var e,n,i,a,r=0;r<t.length;){for(a=y(t[r]).split("-"),e=a.length,n=y(t[r+1]),n=n?n.split("-"):null;e>0;){if(i=k(a.slice(0,e).join("-")))return i;if(n&&n.length>=e&&b(a,n,!0)>=e-1)break;e--}r++}return null}function k(n){var i=null;if(!Ln[n]&&"undefined"!=typeof e&&e&&e.exports)try{i=Pn._abbr,t("./locale/"+n),x(i)}catch(a){}return Ln[n]}function x(t,e){var n;return t&&(n="undefined"==typeof e?C(t):A(t,e),n&&(Pn=n)),Pn._abbr}function A(t,e){return null!==e?(e.abbr=t,Ln[t]||(Ln[t]=new v),Ln[t].set(e),x(t),Ln[t]):(delete Ln[t],null)}function C(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Pn;if(!r(t)){if(e=k(t))return e;t=[t]}return w(t)}function S(t,e){var n=t.toLowerCase();_n[n]=_n[n+"s"]=_n[e]=t}function D(t){return"string"==typeof t?_n[t]||_n[t.toLowerCase()]:void 0}function M(t){var e,n,i={};for(n in t)s(t,n)&&(e=D(n),e&&(i[e]=t[n]));return i}function E(t,e){return function(i){return null!=i?(P(this,t,i),n.updateOffset(this,e),this):T(this,t)}}function T(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function P(t,e,n){return t._d["set"+(t._isUTC?"UTC":"")+e](n)}function F(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=D(t),"function"==typeof this[t])return this[t](e);return this}function I(t,e,n){for(var i=""+Math.abs(t),a=t>=0;i.length<e;)i="0"+i;return(a?n?"+":"":"-")+i}function L(t,e,n,i){var a=i;"string"==typeof i&&(a=function(){return this[i]()}),t&&(Nn[t]=a),e&&(Nn[e[0]]=function(){return I(a.apply(this,arguments),e[1],e[2])}),n&&(Nn[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),t)})}function _(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function R(t){var e,n,i=t.match(Rn);for(e=0,n=i.length;n>e;e++)i[e]=Nn[i[e]]?Nn[i[e]]:_(i[e]);return function(a){var r="";for(e=0;n>e;e++)r+=i[e]instanceof Function?i[e].call(a,t):i[e];return r}}function U(t,e){return t.isValid()?(e=B(e,t.localeData()),Bn[e]||(Bn[e]=R(e)),Bn[e](t)):t.localeData().invalidDate()}function B(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Un.lastIndex=0;i>=0&&Un.test(t);)t=t.replace(Un,n),Un.lastIndex=0,i-=1;return t}function N(t,e,n){$n[t]="function"==typeof e?e:function(t){return t&&n?n:e}}function O(t,e){return s($n,t)?$n[t](e._strict,e._locale):new RegExp(H(t))}function H(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,a){return e||n||i||a}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function V(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=g(t)}),n=0;n<t.length;n++)ti[t[n]]=i}function z(t,e){V(t,function(t,n,i,a){i._w=i._w||{},e(t,i._w,i,a)})}function G(t,e,n){null!=e&&s(ti,t)&&ti[t](e,n._a,n,t)}function Y(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function W(t){return this._months[t.month()]}function q(t){return this._monthsShort[t.month()]}function j(t,e,n){var i,a,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(a=u([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function K(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),Y(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function J(t){return null!=t?(K(this,t),n.updateOffset(this,!0),this):T(this,"Month")}function Z(){return Y(this.year(),this.month())}function X(t){var e,n=t._a;return n&&-2===t._pf.overflow&&(e=n[ni]<0||n[ni]>11?ni:n[ii]<1||n[ii]>Y(n[ei],n[ni])?ii:n[ai]<0||n[ai]>24||24===n[ai]&&(0!==n[ri]||0!==n[oi]||0!==n[li])?ai:n[ri]<0||n[ri]>59?ri:n[oi]<0||n[oi]>59?oi:n[li]<0||n[li]>999?li:-1,t._pf._overflowDayOfYear&&(ei>e||e>ii)&&(e=ii),t._pf.overflow=e),t}function Q(t){n.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function $(t,e){var n=!0;return c(function(){return n&&(Q(t),n=!1),e.apply(this,arguments)},e)}function tt(t,e){ui[t]||(Q(e),ui[t]=!0)}function et(t){var e,n,i=t._i,a=hi.exec(i);if(a){for(t._pf.iso=!0,e=0,n=di.length;n>e;e++)if(di[e][1].exec(i)){t._f=di[e][0]+(a[6]||" ");break}for(e=0,n=pi.length;n>e;e++)if(pi[e][1].exec(i)){t._f+=pi[e][0];break}i.match(Zn)&&(t._f+="Z"),wt(t)}else t._isValid=!1}function nt(t){var e=mi.exec(t._i);return null!==e?void(t._d=new Date(+e[1])):(et(t),void(t._isValid===!1&&(delete t._isValid,n.createFromInputFallback(t))))}function it(t,e,n,i,a,r,o){var l=new Date(t,e,n,i,a,r,o);return 1970>t&&l.setFullYear(t),l}function at(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function rt(t){return ot(t)?366:365}function ot(t){return t%4===0&&t%100!==0||t%400===0}function lt(){return ot(this.year())}function st(t,e,n){var i,a=n-e,r=n-t.day();return r>a&&(r-=7),a-7>r&&(r+=7),i=Mt(t).add(r,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ct(t){return st(t,this._week.dow,this._week.doy).week}function ut(){return this._week.dow}function ht(){return this._week.doy}function dt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function pt(t){var e=st(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function mt(t,e,n,i,a){var r,o,l=at(t,0,1).getUTCDay();return l=0===l?7:l,n=null!=n?n:a,r=a-l+(l>i?7:0)-(a>l?7:0),o=7*(e-1)+(n-a)+r+1,{year:o>0?t:t-1,dayOfYear:o>0?o:rt(t-1)+o}}function ft(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function gt(t,e,n){return null!=t?t:null!=e?e:n}function bt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function vt(t){var e,n,i,a,r=[];if(!t._d){for(i=bt(t),t._w&&null==t._a[ii]&&null==t._a[ni]&&yt(t),t._dayOfYear&&(a=gt(t._a[ei],i[ei]),t._dayOfYear>rt(a)&&(t._pf._overflowDayOfYear=!0),n=at(a,0,t._dayOfYear),t._a[ni]=n.getUTCMonth(),t._a[ii]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=r[e]=i[e];for(;7>e;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[ai]&&0===t._a[ri]&&0===t._a[oi]&&0===t._a[li]&&(t._nextDay=!0,t._a[ai]=0),t._d=(t._useUTC?at:it).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ai]=24)}}function yt(t){var e,n,i,a,r,o,l;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(r=1,o=4,n=gt(e.GG,t._a[ei],st(Mt(),1,4).year),i=gt(e.W,1),a=gt(e.E,1)):(r=t._locale._week.dow,o=t._locale._week.doy,n=gt(e.gg,t._a[ei],st(Mt(),r,o).year),i=gt(e.w,1),null!=e.d?(a=e.d,r>a&&++i):a=null!=e.e?e.e+r:r),l=mt(n,i,a,o,r),t._a[ei]=l.year,t._dayOfYear=l.dayOfYear}function wt(t){if(t._f===n.ISO_8601)return void et(t);t._a=[],t._pf.empty=!0;var e,i,a,r,o,l=""+t._i,s=l.length,c=0;for(a=B(t._f,t._locale).match(Rn)||[],e=0;e<a.length;e++)r=a[e],i=(l.match(O(r,t))||[])[0],i&&(o=l.substr(0,l.indexOf(i)),o.length>0&&t._pf.unusedInput.push(o),l=l.slice(l.indexOf(i)+i.length),c+=i.length),Nn[r]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(r),G(r,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(r);t._pf.charsLeftOver=s-c,l.length>0&&t._pf.unusedInput.push(l),t._pf.bigHour===!0&&t._a[ai]<=12&&(t._pf.bigHour=void 0),t._a[ai]=kt(t._locale,t._a[ai],t._meridiem),vt(t),X(t)}function kt(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function xt(t){var e,n,i,r,o;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(r=0;r<t._f.length;r++)o=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=a(),e._f=t._f[r],wt(e),h(e)&&(o+=e._pf.charsLeftOver,o+=10*e._pf.unusedTokens.length,e._pf.score=o,(null==i||i>o)&&(i=o,n=e));c(t,n||e)}function At(t){if(!t._d){var e=M(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],vt(t)}}function Ct(t){var e,n=t._i,i=t._f;return t._locale=t._locale||C(t._l),null===n||void 0===i&&""===n?d({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),f(n)?new m(X(n)):(r(i)?xt(t):i?wt(t):St(t),e=new m(X(t)),e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e))}function St(t){var e=t._i;void 0===e?t._d=new Date:o(e)?t._d=new Date(+e):"string"==typeof e?nt(t):r(e)?(t._a=l(e.slice(0),function(t){return parseInt(t,10)}),vt(t)):"object"==typeof e?At(t):"number"==typeof e?t._d=new Date(e):n.createFromInputFallback(t)}function Dt(t,e,n,i,r){var o={};return"boolean"==typeof n&&(i=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=n,o._i=t,o._f=e,o._strict=i,o._pf=a(),Ct(o)}function Mt(t,e,n,i){return Dt(t,e,n,i,!1)}function Et(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return Mt();for(n=e[0],i=1;i<e.length;++i)e[i][t](n)&&(n=e[i]);return n}function Tt(){var t=[].slice.call(arguments,0);return Et("isBefore",t)}function Pt(){var t=[].slice.call(arguments,0);return Et("isAfter",t)}function Ft(t){var e=M(t),n=e.year||0,i=e.quarter||0,a=e.month||0,r=e.week||0,o=e.day||0,l=e.hour||0,s=e.minute||0,c=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*c+6e4*s+36e5*l,this._days=+o+7*r,this._months=+a+3*i+12*n,this._data={},this._locale=C(),this._bubble()}function It(t){return t instanceof Ft}function Lt(t,e){L(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+I(~~(t/60),2)+e+I(~~t%60,2)})}function _t(t){var e=(t||"").match(Zn)||[],n=e[e.length-1]||[],i=(n+"").match(yi)||["-",0,0],a=+(60*i[1])+g(i[2]);return"+"===i[0]?a:-a}function Rt(t,e){var i,a;return e._isUTC?(i=e.clone(),a=(f(t)||o(t)?+t:+Mt(t))-+i,i._d.setTime(+i._d+a),n.updateOffset(i,!1),i):Mt(t).local()}function Ut(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Bt(t,e){var i,a=this._offset||0;return null!=t?("string"==typeof t&&(t=_t(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(i=Ut(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==t&&(!e||this._changeInProgress?$t(this,Kt(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?a:Ut(this)}function Nt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ot(t){return this.utcOffset(0,t)}function Ht(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ut(this),"m")),this}function Vt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(_t(this._i)),this}function zt(t){return t=t?Mt(t).utcOffset():0,(this.utcOffset()-t)%60===0}function Gt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Yt(){if(this._a){var t=this._isUTC?u(this._a):Mt(this._a);return this.isValid()&&b(this._a,t.toArray())>0}return!1}function Wt(){return!this._isUTC}function qt(){return this._isUTC}function jt(){return this._isUTC&&0===this._offset}function Kt(t,e){var n,i,a,r=t,o=null;return It(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},e?r[e]=t:r.milliseconds=t):(o=wi.exec(t))?(n="-"===o[1]?-1:1,r={y:0,d:g(o[ii])*n,h:g(o[ai])*n,m:g(o[ri])*n,s:g(o[oi])*n,ms:g(o[li])*n}):(o=ki.exec(t))?(n="-"===o[1]?-1:1,r={y:Jt(o[2],n),M:Jt(o[3],n),d:Jt(o[4],n),h:Jt(o[5],n),m:Jt(o[6],n),s:Jt(o[7],n),w:Jt(o[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(a=Xt(Mt(r.from),Mt(r.to)),r={},r.ms=a.milliseconds,r.M=a.months),i=new Ft(r),It(t)&&s(t,"_locale")&&(i._locale=t._locale),i}function Jt(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Zt(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Xt(t,e){var n;return e=Rt(e,t),t.isBefore(e)?n=Zt(t,e):(n=Zt(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Qt(t,e){return function(n,i){var a,r;return null===i||isNaN(+i)||(tt(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),r=n,n=i,i=r),n="string"==typeof n?+n:n,a=Kt(n,i),$t(this,a,t),this}}function $t(t,e,i,a){var r=e._milliseconds,o=e._days,l=e._months;a=null==a?!0:a,r&&t._d.setTime(+t._d+r*i),o&&P(t,"Date",T(t,"Date")+o*i),l&&K(t,T(t,"Month")+l*i),a&&n.updateOffset(t,o||l)}function te(t){var e=t||Mt(),n=Rt(e,this).startOf("day"),i=this.diff(n,"days",!0),a=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this,Mt(e)))}function ee(){return new m(this)}function ne(t,e){var n;return e=D("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Mt(t),+this>+t):(n=f(t)?+t:+Mt(t),n<+this.clone().startOf(e))}function ie(t,e){var n;return e=D("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Mt(t),+t>+this):(n=f(t)?+t:+Mt(t),+this.clone().endOf(e)<n)}function ae(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function re(t,e){var n;return e=D(e||"millisecond"),"millisecond"===e?(t=f(t)?t:Mt(t),+this===+t):(n=+Mt(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))}function oe(t){return 0>t?Math.ceil(t):Math.floor(t)}function le(t,e,n){var i,a,r=Rt(t,this),o=6e4*(r.utcOffset()-this.utcOffset());return e=D(e),"year"===e||"month"===e||"quarter"===e?(a=se(this,r),"quarter"===e?a/=3:"year"===e&&(a/=12)):(i=this-r,a="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-o)/864e5:"week"===e?(i-o)/6048e5:i),n?a:oe(a)}function se(t,e){var n,i,a=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(a,"months");return 0>e-r?(n=t.clone().add(a-1,"months"),i=(e-r)/(r-n)):(n=t.clone().add(a+1,"months"),i=(e-r)/(n-r)),-(a+i)}function ce(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ue(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():U(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):U(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function he(t){var e=U(this,t||n.defaultFormat);return this.localeData().postformat(e)}function de(t,e){return Kt({to:this,from:t}).locale(this.locale()).humanize(!e)}function pe(t){return this.from(Mt(),t)}function me(t){var e;return void 0===t?this._locale._abbr:(e=C(t),null!=e&&(this._locale=e),this)}function fe(){return this._locale}function ge(t){switch(t=D(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function be(t){return t=D(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function ve(){return+this._d-6e4*(this._offset||0)}function ye(){return Math.floor(+this/1e3)}function we(){return this._offset?new Date(+this):this._d}function ke(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function xe(){return h(this)}function Ae(){return c({},this._pf)}function Ce(){return this._pf.overflow}function Se(t,e){L(0,[t,t.length],0,e)}function De(t,e,n){return st(Mt([t,11,31+e-n]),e,n).week}function Me(t){var e=st(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Ee(t){var e=st(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Te(){return De(this.year(),1,4)}function Pe(){var t=this.localeData()._week;return De(this.year(),t.dow,t.doy)}function Fe(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Ie(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function Le(t){return this._weekdays[t.day()]}function _e(t){return this._weekdaysShort[t.day()]}function Re(t){return this._weekdaysMin[t.day()]}function Ue(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=Mt([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function Be(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Ie(t,this.localeData()),this.add(t-e,"d")):e}function Ne(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Oe(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function He(t,e){L(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ve(t,e){return e._meridiemParse}function ze(t){return"p"===(t+"").toLowerCase().charAt(0)}function Ge(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function Ye(t){L(0,[t,3],0,"millisecond")}function We(){return this._isUTC?"UTC":""}function qe(){return this._isUTC?"Coordinated Universal Time":""}function je(t){return Mt(1e3*t)}function Ke(){return Mt.apply(null,arguments).parseZone()}function Je(t,e,n){var i=this._calendar[t];return"function"==typeof i?i.call(e,n):i}function Ze(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e}function Xe(){return this._invalidDate}function Qe(t){return this._ordinal.replace("%d",t)}function $e(t){return t}function tn(t,e,n,i){var a=this._relativeTime[n];return"function"==typeof a?a(t,e,n,i):a.replace(/%d/i,t)}function en(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)}function nn(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function an(t,e,n,i){var a=C(),r=u().set(i,e);return a[n](r,t)}function rn(t,e,n,i,a){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return an(t,e,n,a);var r,o=[];for(r=0;i>r;r++)o[r]=an(t,r,n,a);return o}function on(t,e){return rn(t,e,"months",12,"month")}function ln(t,e){return rn(t,e,"monthsShort",12,"month")}function sn(t,e){return rn(t,e,"weekdays",7,"day")}function cn(t,e){return rn(t,e,"weekdaysShort",7,"day")}function un(t,e){return rn(t,e,"weekdaysMin",7,"day")}function hn(){var t=this._data;return this._milliseconds=Gi(this._milliseconds),this._days=Gi(this._days),this._months=Gi(this._months),t.milliseconds=Gi(t.milliseconds),t.seconds=Gi(t.seconds),t.minutes=Gi(t.minutes),t.hours=Gi(t.hours),t.months=Gi(t.months),t.years=Gi(t.years),this}function dn(t,e,n,i){var a=Kt(e,n);return t._milliseconds+=i*a._milliseconds,t._days+=i*a._days,t._months+=i*a._months,t._bubble()}function pn(t,e){return dn(this,t,e,1)}function mn(t,e){return dn(this,t,e,-1)}function fn(){var t,e,n,i=this._milliseconds,a=this._days,r=this._months,o=this._data,l=0;return o.milliseconds=i%1e3,t=oe(i/1e3),o.seconds=t%60,e=oe(t/60),o.minutes=e%60,n=oe(e/60),o.hours=n%24,a+=oe(n/24),l=oe(gn(a)),a-=oe(bn(l)),r+=oe(a/30),a%=30,l+=oe(r/12),r%=12,o.days=a,o.months=r,o.years=l,this}function gn(t){return 400*t/146097}function bn(t){return 146097*t/400}function vn(t){var e,n,i=this._milliseconds;if(t=D(t),"month"===t||"year"===t)return e=this._days+i/864e5,n=this._months+12*gn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(bn(this._months/12)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 24*e*60+i/6e4;case"second":return 24*e*60*60+i/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+i;default:throw new Error("Unknown unit "+t)}}function yn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function wn(t){return function(){return this.as(t)}}function kn(t){return t=D(t),this[t+"s"]()}function xn(t){return function(){return this._data[t]}}function An(){return oe(this.days()/7)}function Cn(t,e,n,i,a){return a.relativeTime(e||1,!!n,t,i)}function Sn(t,e,n){var i=Kt(t).abs(),a=ra(i.as("s")),r=ra(i.as("m")),o=ra(i.as("h")),l=ra(i.as("d")),s=ra(i.as("M")),c=ra(i.as("y")),u=a<oa.s&&["s",a]||1===r&&["m"]||r<oa.m&&["mm",r]||1===o&&["h"]||o<oa.h&&["hh",o]||1===l&&["d"]||l<oa.d&&["dd",l]||1===s&&["M"]||s<oa.M&&["MM",s]||1===c&&["y"]||["yy",c];return u[2]=e,u[3]=+t>0,u[4]=n,Cn.apply(null,u)}function Dn(t,e){return void 0===oa[t]?!1:void 0===e?oa[t]:(oa[t]=e,!0)}function Mn(t){var e=this.localeData(),n=Sn(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function En(){var t=la(this.years()),e=la(this.months()),n=la(this.days()),i=la(this.hours()),a=la(this.minutes()),r=la(this.seconds()+this.milliseconds()/1e3),o=this.asSeconds();return o?(0>o?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||a||r?"T":"")+(i?i+"H":"")+(a?a+"M":"")+(r?r+"S":""):"P0D"}var Tn,Pn,Fn=n.momentProperties=[],In=!1,Ln={},_n={},Rn=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Un=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Bn={},Nn={},On=/\d/,Hn=/\d\d/,Vn=/\d{3}/,zn=/\d{4}/,Gn=/[+-]?\d{6}/,Yn=/\d\d?/,Wn=/\d{1,3}/,qn=/\d{1,4}/,jn=/[+-]?\d{1,6}/,Kn=/\d+/,Jn=/[+-]?\d+/,Zn=/Z|[+-]\d\d:?\d\d/gi,Xn=/[+-]?\d+(\.\d{1,3})?/,Qn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$n={},ti={},ei=0,ni=1,ii=2,ai=3,ri=4,oi=5,li=6;L("M",["MM",2],"Mo",function(){return this.month()+1}),L("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),L("MMMM",0,0,function(t){return this.localeData().months(this,t)}),S("month","M"),N("M",Yn),N("MM",Yn,Hn),N("MMM",Qn),N("MMMM",Qn),V(["M","MM"],function(t,e){e[ni]=g(t)-1}),V(["MMM","MMMM"],function(t,e,n,i){var a=n._locale.monthsParse(t,i,n._strict);null!=a?e[ni]=a:n._pf.invalidMonth=t});var si="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ci="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ui={};n.suppressDeprecationWarnings=!1;var hi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,di=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],pi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],mi=/^\/?Date\((\-?\d+)/i;n.createFromInputFallback=$("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),L(0,["YY",2],0,function(){return this.year()%100}),L(0,["YYYY",4],0,"year"),L(0,["YYYYY",5],0,"year"),L(0,["YYYYYY",6,!0],0,"year"),S("year","y"),N("Y",Jn),N("YY",Yn,Hn),N("YYYY",qn,zn),N("YYYYY",jn,Gn),N("YYYYYY",jn,Gn),V(["YYYY","YYYYY","YYYYYY"],ei),V("YY",function(t,e){e[ei]=n.parseTwoDigitYear(t)}),n.parseTwoDigitYear=function(t){return g(t)+(g(t)>68?1900:2e3)};var fi=E("FullYear",!1);L("w",["ww",2],"wo","week"),L("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),N("w",Yn),N("ww",Yn,Hn),N("W",Yn),N("WW",Yn,Hn),z(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=g(t)});var gi={dow:0,doy:6};L("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),N("DDD",Wn),N("DDDD",Vn),V(["DDD","DDDD"],function(t,e,n){n._dayOfYear=g(t)}),n.ISO_8601=function(){};var bi=$("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){
var t=Mt.apply(null,arguments);return this>t?this:t}),vi=$("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Mt.apply(null,arguments);return t>this?this:t});Lt("Z",":"),Lt("ZZ",""),N("Z",Zn),N("ZZ",Zn),V(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=_t(t)});var yi=/([\+\-]|\d\d)/gi;n.updateOffset=function(){};var wi=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ki=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Kt.fn=Ft.prototype;var xi=Qt(1,"add"),Ai=Qt(-1,"subtract");n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ci=$("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});L(0,["gg",2],0,function(){return this.weekYear()%100}),L(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Se("gggg","weekYear"),Se("ggggg","weekYear"),Se("GGGG","isoWeekYear"),Se("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),N("G",Jn),N("g",Jn),N("GG",Yn,Hn),N("gg",Yn,Hn),N("GGGG",qn,zn),N("gggg",qn,zn),N("GGGGG",jn,Gn),N("ggggg",jn,Gn),z(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=g(t)}),z(["gg","GG"],function(t,e,i,a){e[a]=n.parseTwoDigitYear(t)}),L("Q",0,0,"quarter"),S("quarter","Q"),N("Q",On),V("Q",function(t,e){e[ni]=3*(g(t)-1)}),L("D",["DD",2],"Do","date"),S("date","D"),N("D",Yn),N("DD",Yn,Hn),N("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),V(["D","DD"],ii),V("Do",function(t,e){e[ii]=g(t.match(Yn)[0],10)});var Si=E("Date",!0);L("d",0,"do","day"),L("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),L("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),L("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),L("e",0,0,"weekday"),L("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),N("d",Yn),N("e",Yn),N("E",Yn),N("dd",Qn),N("ddd",Qn),N("dddd",Qn),z(["dd","ddd","dddd"],function(t,e,n){var i=n._locale.weekdaysParse(t);null!=i?e.d=i:n._pf.invalidWeekday=t}),z(["d","e","E"],function(t,e,n,i){e[i]=g(t)});var Di="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Mi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ei="Su_Mo_Tu_We_Th_Fr_Sa".split("_");L("H",["HH",2],0,"hour"),L("h",["hh",2],0,function(){return this.hours()%12||12}),He("a",!0),He("A",!1),S("hour","h"),N("a",Ve),N("A",Ve),N("H",Yn),N("h",Yn),N("HH",Yn,Hn),N("hh",Yn,Hn),V(["H","HH"],ai),V(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),V(["h","hh"],function(t,e,n){e[ai]=g(t),n._pf.bigHour=!0});var Ti=/[ap]\.?m?\.?/i,Pi=E("Hours",!0);L("m",["mm",2],0,"minute"),S("minute","m"),N("m",Yn),N("mm",Yn,Hn),V(["m","mm"],ri);var Fi=E("Minutes",!1);L("s",["ss",2],0,"second"),S("second","s"),N("s",Yn),N("ss",Yn,Hn),V(["s","ss"],oi);var Ii=E("Seconds",!1);L("S",0,0,function(){return~~(this.millisecond()/100)}),L(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Ye("SSS"),Ye("SSSS"),S("millisecond","ms"),N("S",Wn,On),N("SS",Wn,Hn),N("SSS",Wn,Vn),N("SSSS",Kn),V(["S","SS","SSS","SSSS"],function(t,e){e[li]=g(1e3*("0."+t))});var Li=E("Milliseconds",!1);L("z",0,0,"zoneAbbr"),L("zz",0,0,"zoneName");var _i=m.prototype;_i.add=xi,_i.calendar=te,_i.clone=ee,_i.diff=le,_i.endOf=be,_i.format=he,_i.from=de,_i.fromNow=pe,_i.get=F,_i.invalidAt=Ce,_i.isAfter=ne,_i.isBefore=ie,_i.isBetween=ae,_i.isSame=re,_i.isValid=xe,_i.lang=Ci,_i.locale=me,_i.localeData=fe,_i.max=vi,_i.min=bi,_i.parsingFlags=Ae,_i.set=F,_i.startOf=ge,_i.subtract=Ai,_i.toArray=ke,_i.toDate=we,_i.toISOString=ue,_i.toJSON=ue,_i.toString=ce,_i.unix=ye,_i.valueOf=ve,_i.year=fi,_i.isLeapYear=lt,_i.weekYear=Me,_i.isoWeekYear=Ee,_i.quarter=_i.quarters=Fe,_i.month=J,_i.daysInMonth=Z,_i.week=_i.weeks=dt,_i.isoWeek=_i.isoWeeks=pt,_i.weeksInYear=Pe,_i.isoWeeksInYear=Te,_i.date=Si,_i.day=_i.days=Be,_i.weekday=Ne,_i.isoWeekday=Oe,_i.dayOfYear=ft,_i.hour=_i.hours=Pi,_i.minute=_i.minutes=Fi,_i.second=_i.seconds=Ii,_i.millisecond=_i.milliseconds=Li,_i.utcOffset=Bt,_i.utc=Ot,_i.local=Ht,_i.parseZone=Vt,_i.hasAlignedHourOffset=zt,_i.isDST=Gt,_i.isDSTShifted=Yt,_i.isLocal=Wt,_i.isUtcOffset=qt,_i.isUtc=jt,_i.isUTC=jt,_i.zoneAbbr=We,_i.zoneName=qe,_i.dates=$("dates accessor is deprecated. Use date instead.",Si),_i.months=$("months accessor is deprecated. Use month instead",J),_i.years=$("years accessor is deprecated. Use year instead",fi),_i.zone=$("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Nt);var Ri=_i,Ui={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Bi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Ni="Invalid date",Oi="%d",Hi=/\d{1,2}/,Vi={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},zi=v.prototype;zi._calendar=Ui,zi.calendar=Je,zi._longDateFormat=Bi,zi.longDateFormat=Ze,zi._invalidDate=Ni,zi.invalidDate=Xe,zi._ordinal=Oi,zi.ordinal=Qe,zi._ordinalParse=Hi,zi.preparse=$e,zi.postformat=$e,zi._relativeTime=Vi,zi.relativeTime=tn,zi.pastFuture=en,zi.set=nn,zi.months=W,zi._months=si,zi.monthsShort=q,zi._monthsShort=ci,zi.monthsParse=j,zi.week=ct,zi._week=gi,zi.firstDayOfYear=ht,zi.firstDayOfWeek=ut,zi.weekdays=Le,zi._weekdays=Di,zi.weekdaysMin=Re,zi._weekdaysMin=Ei,zi.weekdaysShort=_e,zi._weekdaysShort=Mi,zi.weekdaysParse=Ue,zi.isPM=ze,zi._meridiemParse=Ti,zi.meridiem=Ge,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===g(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),n.lang=$("moment.lang is deprecated. Use moment.locale instead.",x),n.langData=$("moment.langData is deprecated. Use moment.localeData instead.",C);var Gi=Math.abs,Yi=wn("ms"),Wi=wn("s"),qi=wn("m"),ji=wn("h"),Ki=wn("d"),Ji=wn("w"),Zi=wn("M"),Xi=wn("y"),Qi=xn("milliseconds"),$i=xn("seconds"),ta=xn("minutes"),ea=xn("hours"),na=xn("days"),ia=xn("months"),aa=xn("years"),ra=Math.round,oa={s:45,m:45,h:22,d:26,M:11},la=Math.abs,sa=Ft.prototype;sa.abs=hn,sa.add=pn,sa.subtract=mn,sa.as=vn,sa.asMilliseconds=Yi,sa.asSeconds=Wi,sa.asMinutes=qi,sa.asHours=ji,sa.asDays=Ki,sa.asWeeks=Ji,sa.asMonths=Zi,sa.asYears=Xi,sa.valueOf=yn,sa._bubble=fn,sa.get=kn,sa.milliseconds=Qi,sa.seconds=$i,sa.minutes=ta,sa.hours=ea,sa.days=na,sa.weeks=An,sa.months=ia,sa.years=aa,sa.humanize=Mn,sa.toISOString=En,sa.toString=En,sa.toJSON=En,sa.locale=me,sa.localeData=fe,sa.toIsoString=$("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",En),sa.lang=Ci,L("X",0,0,"unix"),L("x",0,0,"valueOf"),N("x",Jn),N("X",Xn),V("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),V("x",function(t,e,n){n._d=new Date(g(t))}),n.version="2.10.2",i(Mt),n.fn=Ri,n.min=Tt,n.max=Pt,n.utc=u,n.unix=je,n.months=on,n.isDate=o,n.locale=x,n.invalid=d,n.duration=Kt,n.isMoment=f,n.weekdays=sn,n.parseZone=Ke,n.localeData=C,n.isDuration=It,n.monthsShort=ln,n.weekdaysMin=un,n.defineLocale=A,n.weekdaysShort=cn,n.normalizeUnits=D,n.relativeTimeThreshold=Dn;var ca=n;return ca})},{}],358:[function(t,e,n){e.exports=t(334)},{"native":359,utils:360}],359:[function(t,e,n){e.exports=t(335)},{}],360:[function(t,e,n){e.exports=t(292)},{}],361:[function(t,e,n){var i=t("lager"),a=function(t){t=t||{},this._caller=t.caller||"P6",this._maxContentSize=t.maxContentSize||200};a.prototype._cache={},a.prototype._profiles={},a.prototype.fetch=function(t){for(var e=t.profile,n=t.artworkProfile,i=t.contentIds,a=t.onSuccess,r=t.onFailure,o=[],l={},s=0;s<i.length;s++){var c=this._cache[i[s]]&&this._cache[i[s]][e]?this._cache[i[s]][e]:null;c?l[i[s]]=c:o.push(i[s])}if(0===o.length)a.call(this,l);else{var u={idsToFetch:o,contentMap:l,profile:e,artworkProfile:n,onSuccess:a,onFailure:r};this._makeStorePlatformRequest(u)}},a.prototype._makeStorePlatformRequest=function(t){var e=t.idsToFetch;if(t.profile){this._cache[t.profile]||(this._cache[t.profile]={});var n=[],i=0;if(e.length>this._maxContentSize){var a=Math.floor(e.length/this._maxContentSize),r=0,o=0;for(i=0;a>i;i++)r=this._maxContentSize*i,o=this._maxContentSize*(i+1),n.push(e.slice(r,o));this._maxContentSize*i!==e.length&&n.push(e.slice(this._maxContentSize*i,e.length))}else n.push(e);var l=0,s={},c=t.contentMap&&Object.keys(t.contentMap).length>0,u=!1,h=t.onSuccess,d=t.onFailure,p=function(e){l++,c=!0,this._copy(e,s),t.iterativeCallback&&t.iterativeCallback.call(this,s),l===n.length&&h.call(this,s,u)},m=function(t){l++,u=!0,l===n.length&&(c?h.call(this,s,u):d.call(this,t))},f={p:t.profile,caller:this._caller,requestParameters:{},version:"2"};t.artworkProfile&&(f.artwork=t.artworkProfile);var g=function(e,n){var i=!(!n&&e&&e instanceof Object&&Object.keys(e).length&&e.results);if(i)m.call(this,n);else{this.cacheData(e,t.profile);for(var a=Object.keys(e.results),r=0;r<a.length;r++)t.contentMap[a[r]]=e.results[a[r]];p.call(this,t.contentMap)}}.bind(this);for(i=0;i<n.length;i++)e=n[i],f.id=e.join(","),itms.loadStoreContent(f,g)}else t.onFailure.call(this,"missing profile from config")},a.prototype.cacheData=function(t,e){var n=t.results;if(n)for(var a=Object.keys(n),r=0;r<a.length;r++)this._cache[a[r]]||(this._cache[a[r]]={}),this._cache[a[r]][e]=n[a[r]];else i.warn("No results for store platform profile:",e,t)},a.prototype.lookup=function(t,e){var n;if(this._cache[t]){var i=Object.keys(this._cache[t]);n=e&&i.indexOf(e)>-1?this._cache[t][e]:this._cache[t][i[0]]}return this._copy(n)},a.prototype._copy=function(t,e){if(t){var n={};e&&(n=e);for(var i in t)n[i]=t[i];return n}},e.exports=a},{lager:362}],362:[function(t,e,n){e.exports=t(291)},{}]},{},[1]);